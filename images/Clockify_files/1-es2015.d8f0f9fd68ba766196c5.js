(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+EM1":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._backgroundColor=e,this._hoverBackgroundColor=e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this._backgroundColor=e}get hoverBackgroundColor(){return this._hoverBackgroundColor}set hoverBackgroundColor(e){this._hoverBackgroundColor=e}toChartReadable(){return{backgroundColor:this.backgroundColor,hoverBackgroundColor:this.hoverBackgroundColor}}}},"+Two":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("6FRn"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[s.a],imports:[[n.c]]}),e})()},"+dED":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),s=i("Ymxs"),r=i("xoOP"),o=i("B1Fc"),a=i("3Pt+");let c=(()=>{class e extends o.a{constructor(e,t,i,s,r){super(e,t,i,s,r),this.element=e,this.renderer=t,this.viewContainer=i,this.toaster=s,this.model=r,this.maxNumber=21474836,this.minNumber=0,this.decimal=!0,this.maxNumberOfDecimals=2,this.allowedValues=[],this.inputChange=new n.n,this.inputCharacterChange=new n.n}onInput(e){if(this.isAllowsedValue(e))return this.model.valueAccessor.writeValue(e),void this.inputCharacterChange.emit(e);let t;this.minNumber<0&&e.startsWith("-")&&(t=!0),e=(e=e.replace(/,/g,".")).replace(this.decimal?/[^0-9.]/g:/[^0-9]/g,""),t&&(e="-"+e);const i=e.indexOf(".");if(-1!=i){const t=(e=e.substring(0,i+this.maxNumberOfDecimals+1)).lastIndexOf(".");i!=t&&(e=e.substring(0,t))}this.validate(e,!0)?this.inputCharacterChange.emit(Number(e)):e&&Object(r.u)(e)&&Number(e)>this.maxNumber&&(e=e.substring(0,e.length-1)),this.model.valueAccessor.writeValue(e)}onChange(){let e=this.element.nativeElement.value||"0";if(this.isAllowsedValue(e))return this.model.valueAccessor.writeValue(e),void this.emitOnChange(e);if(!this.validate(e))return void this.model.valueAccessor.writeValue(this.ngModel);const t=Number(e);this.decimal||Number(e)%1==0?this.decimal&&Number(e)%1!=0&&(e=(Math.round(100*Number(e))/100).toString()):e=Math.floor(t).toString(),this.templateError&&this.viewContainer.clear(),this.renderer.removeClass(this.element.nativeElement,this.errorClass);const i=Number(e);this.model.valueAccessor.writeValue(i),this.emitOnChange(i)}emitOnChange(e){this.inputChange.emit(e)}isAllowsedValue(e){return this.allowedValues&&this.allowedValues.indexOf(e)>-1}validate(e,t){if(!Object(r.u)(e))return this.handleError("Enter a valid number.",t),!1;const i=Number(e);return i<this.minNumber?(this.handleError(`Number must be greater than ${this.minNumber}.`,t),!1):!(i>this.maxNumber&&(this.handleError(`Number must be less than ${this.maxNumber}.`,t),1))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.F),n.Rb(n.P),n.Rb(s.a),n.Rb(a.v))},e.\u0275dir=n.Mb({type:e,selectors:[["","inputNumber",""]],hostBindings:function(e,t){1&e&&n.jc("input",(function(e){return t.onInput(e.target.value)}))("change",(function(){return t.onChange()}))},inputs:{maxNumber:"maxNumber",minNumber:"minNumber",decimal:"decimal",maxNumberOfDecimals:"maxNumberOfDecimals",allowedValues:"allowedValues"},outputs:{inputChange:"inputChange",inputCharacterChange:"inputCharacterChange"},features:[n.zb]}),e})()},"/DYx":function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i("fXoL"),s=i("B01t"),r=i("wd/R"),o=i("lGQG"),a=i("ZHjv"),c=i("jtSf"),l=i("eDxF"),u=i("XNiG"),d=i("pLZG"),h=i("1G5W"),p=i("Kj3r"),b=i("xoOP"),f=i("1Tmk"),m=i("i/9y"),g=i("RWlN"),v=i("1kSV"),w=i("ofXK"),y=i("tyNb");const C=["limitPopover"];function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12),n.jc("click",(function(){return n.Oc(e),n.nc(2).openDatepicker()})),n.Sb(1,"img",10),n.Xb(2,"span",13),n.Yc(3),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("cl-datepicker-disabled",e.disableOpenPicker),n.Cb(3),n.ad(" ",e.label," ")}}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",7),n.Wc(1,k,4,3,"div",8),n.Xb(2,"a",9),n.jc("click",(function(){return n.Oc(e),n.nc().openDatepicker()})),n.Sb(3,"img",10),n.Xb(4,"input",11),n.jc("showDaterangepicker",(function(){return n.Oc(e),n.nc().onDatepickerOpen()}))("hideDaterangepicker",(function(t){return n.Oc(e),n.nc().onDatepickerClose(t)}))("selected",(function(t){return n.Oc(e),n.nc().selectedDate(t)})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.label&&!e.isDatepickerOpen),n.Cb(3),n.wc("options",e.options)}}function x(e,t){if(1&e&&(n.Xb(0,"div"),n.Xb(1,"span",17),n.Yc(2),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(2),n.ad(" ",e.label," ")}}function O(e,t){if(1&e&&(n.Xb(0,"a",18),n.Sb(1,"input",19),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.wc("options",e.options)}}function D(e,t){if(1&e&&(n.Xb(0,"div",14),n.Wc(1,x,3,1,"div",15),n.Wc(2,O,2,1,"a",16),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.label),n.Cb(1),n.wc("ngIf",!e.label)}}function I(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",20),n.jc("click",(function(){return n.Oc(e),n.nc().changeDateWithArrow(!1)})),n.Sb(1,"img",21),n.Wb()}if(2&e){const e=n.nc();n.wc("disabled",e.disableDatepicker)}}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",20),n.jc("click",(function(){return n.Oc(e),n.nc().changeDateWithArrow(!0)})),n.Sb(1,"img",22),n.Wb()}if(2&e){const e=n.nc();n.wc("disabled",e.disableDatepicker)}}function T(e,t){1&e&&(n.Vb(0),n.Yc(1," Max range one year "),n.Ub())}const E=function(){return["/upgrade"]};function A(e,t){1&e&&(n.Vb(0),n.Xb(1,"a",25),n.Yc(2,"Upgrade"),n.Wb(),n.Yc(3," to ENTEPRRISE to select range longer than one year "),n.Ub()),2&e&&(n.Cb(1),n.wc("routerLink",n.Ac(1,E)))}function _(e,t){1&e&&(n.Vb(0),n.Yc(1," Upgrade to ENTEPRRISE to select range longer than one year "),n.Ub())}function W(e,t){if(1&e&&(n.Wc(0,A,4,2,"ng-container",15),n.Wc(1,_,2,0,"ng-container",15)),2&e){const e=n.nc(2);n.wc("ngIf",e.isAdminOrOwner),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner)}}function R(e,t){if(1&e&&(n.Wc(0,T,2,0,"ng-container",23),n.Wc(1,W,2,2,"ng-template",null,24,n.Xc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.isReportPage)("ngIfElse",e)}}let P=(()=>{class e{constructor(e,t){this.authService=e,this.workspaceService=t,this.dateRangeOut=new n.n,this.isReportPage=!1,this.addOptionsContainer=!1,this.format="YYYY-MM-DD",this.emitDebouncer$=new u.a,this.unsubscribe$=new u.a}set timeEntriesDateRange(e){if(!e)return;const t=r.utc(e.start),i=r().set({date:t.date(),month:t.month(),year:t.year()}).startOf("day"),n=r.utc(e.end),s=r().set({date:n.date(),month:n.month(),year:n.year()}).startOf("day");this.daterange={start:i,end:s},this.checkForChanges&&(this.isWeekly&&this.setWeeklyDate(i),this.isDaily&&this.setDailyDate(i),this.setDateToPicker(this.daterange.start,this.daterange.end),this.setLabelAndZoomLevel()),this.lastValues={start:this.daterange.start.clone(),end:this.daterange.end.clone()}}set isWeekly(e){this._isWeekly=e,this.checkForChanges&&this.initRanges()}get isWeekly(){return this._isWeekly}set isDaily(e){this._isDaily=e,this.checkForChanges&&this.initRanges()}get isDaily(){return this._isDaily}ngOnInit(){const e=this.authService.getUser();this.format=e&&e.settings?e.settings.dateFormat:"MM/DD/YYYY",this.startOfWeek=this.startOfWeek||(e&&e.settings?e.settings.weekStart:"MONDAY"),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.authService.permissionData$.pipe(Object(d.a)(e=>null!==e),Object(h.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.isAdminOrOwner=e});const t=Object(a.e)(this.startOfWeek);this.daterange||(this.daterange=this.isDaily?{start:r().startOf("day"),end:r().endOf("day")}:{start:t.startOf("day"),end:t.clone().add(6,"days").endOf("day")}),this.initOptions(this.daterange.start,this.daterange.end),this.setLabelAndZoomLevel(),this.checkForChanges=!0,this.emitDebouncer$.pipe(Object(p.a)(400)).subscribe(()=>this.emitDateRange()),this.checkHasUnlimitedReports()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}selectedDate(e){this.onSelectedDate(e.start,e.end,e.label),this.isDateSelected=!0}onDatepickerOpen(){this.isDateSelected=!1,this.isDatepickerOpen=!0}openDatepicker(){this.disableOpenPicker||this.disableDatepicker||this.isDatepickerOpen||this.picker.datePicker&&this.picker.datePicker.show()}onDatepickerClose(e){this.isDatepickerOpen=!1,this.isDateSelected||setTimeout(()=>{this.onSelectedDate(e.picker.startDate,e.picker.endDate,e.picker.chosenLabel)})}onSelectedDate(e,t,i){const n=e.clone(),s=t.clone();this.isWeekly&&!i?this.setWeeklyDate(n):this.isDaily&&!i?this.setDailyDate(n):(this.daterange.start=n,this.daterange.end=s),this.setLabelAndZoomLevel(),this.emitDebouncer$.next()}changeDateWithArrow(e){if(this.isDaily&&this.onlyLastDays){if(this.daterange.start.endOf("day").isAfter(r().startOf("day"))&&e)return;if(this.daterange.start.startOf("day").isBefore(r().subtract(this.onlyLastDays-1,"day").endOf("day"))&&!e)return}this.zoomLevel===g.a.YEAR||this.zoomLevel===g.a.MONTH?this.setYearAndMonth(e):this.zoomLevel===g.a.WEEK?this.setWeekAndCustomDate(e):this.setDailyAndCustomDate(e),this.setDateToPicker(this.daterange.start,this.daterange.end),this.setLabelAndZoomLevel(),this.emitDebouncer$.next()}checkHasUnlimitedReports(){!this.isReportPage&&this.workspaceService.defaultWorkspace$&&this.workspaceService.defaultWorkspace$.pipe(Object(d.a)(e=>!!e),Object(h.a)(this.unsubscribe$)).subscribe(e=>this.hasUnlimitedReports=e.features.includes(m.a.UNLIMITED_REPORTS))}setWeeklyDate(e){const t=Object(c.e)(e,this.startOfWeek),i=t.clone().add(6,"day").endOf("day");this.daterange.start=t,this.daterange.end=i,this.setDateToPicker(t,i)}setDailyDate(e){const t=e.clone().startOf("day"),i=t.clone().endOf("day");this.daterange.start=t,this.daterange.end=i,this.setDateToPicker(t,i)}setYearAndMonth(e){const t=this.zoomLevel;let i=this.daterange.end.clone().diff(this.daterange.start,t)+1;i=i<1?1:i,e?(this.daterange.start=this.daterange.start.add(i,t).startOf(t),this.daterange.end=this.daterange.end.add(i,t).endOf(t)):(this.daterange.start=this.daterange.start.subtract(i,t).startOf(t),this.daterange.end=this.daterange.end.subtract(i,t).endOf(t))}setWeekAndCustomDate(e){const t=this.daterange.end.diff(this.daterange.start,"days");e?(this.daterange.start=this.daterange.end.clone(),this.daterange.start.add(1,"day").endOf("day"),this.daterange.end.add(t+1,"day").endOf("day")):(this.daterange.end=this.daterange.start.clone(),this.daterange.start.subtract(1,"day").endOf("day"),this.daterange.end.subtract(1,"day").endOf("day"),this.daterange.start.subtract(t,"day").endOf("day"))}setDailyAndCustomDate(e){e?(this.daterange.start.add(1,"day").startOf("day"),this.daterange.end.add(1,"day").endOf("day")):(this.daterange.start.subtract(1,"day").startOf("day"),this.daterange.end.subtract(1,"day").endOf("day"))}emitDateRange(e=!0){if(!this.hasUnlimitedReports&&Object(b.x)(this.daterange.start,this.daterange.end))return this.limitPopover.open(),void this.setDateToPicker(this.lastValues.start,this.lastValues.end);if(e&&this.lastValues&&this.lastValues.start.isSame(this.daterange.start,"day")&&this.lastValues.end.isSame(this.daterange.end,"day"))return;this.lastValues={start:this.daterange.start.clone(),end:this.daterange.end.clone()};let t=this.daterange.start.clone().startOf("day"),i=this.daterange.end.clone().endOf("day");if(this.getOfUtc||(t=t.add(t.utcOffset(),"m"),i=i.add(i.utcOffset(),"m")),this.dateRangeOut.emit({dateRange:{start:t,end:i,label:this.label},zoomLevel:this.zoomLevel?this.zoomLevel:g.a.WEEK}),this.isWeekly){const e=r.utc(t),i=r().set({date:e.date(),month:e.month(),year:e.year()}).startOf("day"),n=i.clone().add(6,"day").endOf("day");this.setDateToPicker(i,n)}}setDateToPicker(e=this.daterange.start,t=this.daterange.end){this.picker&&(this.picker.datePicker.setStartDate(e.clone()),this.picker.datePicker.setEndDate(t.clone()))}initOptions(e,t){this.options={locale:{format:this.format,firstDay:(["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"].indexOf(this.startOfWeek)+1)%7},alwaysShowCalendars:!0,startDate:e,endDate:t,timePicker:!1,autoApply:!0,opens:"left",showCustomRangeLabel:!1,minDate:r(0)},this.addOptionsContainer&&(this.options.parentEl=$("#container")),this.initRanges()}initRanges(){const e=Object(a.e)(this.startOfWeek);this.isWeekly?(this.options.showRanges=!0,this.options.ranges={[l.a.THIS_WEEK]:[e.clone(),r(e.clone()).add(6,"days")],[l.a.LAST_WEEK]:[r(e.clone()).subtract(1,"week"),r(e.clone()).subtract(1,"day")]}):this.isDaily?(this.options.showRanges=!0,this.options.ranges={[l.a.TODAY]:[r().startOf("day"),r().endOf("day")],[l.a.YESTERDAY]:[r().subtract(1,"day").startOf("day"),r().subtract(1,"day").endOf("day")]}):(this.options.showRanges=!1,this.options.ranges={[l.a.TODAY]:[r(),r()],[l.a.YESTERDAY]:[r().subtract(1,"day"),r().subtract(1,"day")],[l.a.THIS_WEEK]:[e.clone(),r(e.clone()).add(6,"days")],[l.a.LAST_WEEK]:[r(e.clone()).subtract(1,"week"),r(e.clone()).subtract(1,"day")],[l.a.PAST_TWO_WEEKS]:[r(e.clone()).subtract(2,"week"),r(e.clone()).subtract(1,"day")],[l.a.THIS_MONTH]:[r().startOf("month"),r().endOf("month")],[l.a.LAST_MONTH]:[r().subtract(1,"month").startOf("month"),r().subtract(1,"month").endOf("month")],[l.a.THIS_YEAR]:[r().startOf("year"),r().endOf("year")],[l.a.LAST_YEAR]:[r().subtract(1,"year").startOf("year"),r().subtract(1,"year").endOf("year")]})}setLabelAndZoomLevel(){const{labelPrint:e,zoomLevel:t,label:i}=Object(c.b)(this.daterange,this.startOfWeek);this.labelPrint=e,this.zoomLevel=t,this.label=i}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.a),n.Rb(f.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["datepicker-range"]],viewQuery:function(e,t){var i;1&e&&(n.ed(s.b,!0),n.ed(C,!0)),2&e&&(n.Kc(i=n.kc())&&(t.picker=i.first),n.Kc(i=n.kc())&&(t.limitPopover=i.first))},inputs:{disableDatepicker:"disableDatepicker",removeArrows:"removeArrows",disableOpenPicker:"disableOpenPicker",onlyLastDays:"onlyLastDays",getOfUtc:"getOfUtc",timeEntriesDateRange:"timeEntriesDateRange",isWeekly:"isWeekly",isDaily:"isDaily",hasUnlimitedReports:"hasUnlimitedReports",isReportPage:"isReportPage",startOfWeek:"startOfWeek",addOptionsContainer:"addOptionsContainer"},outputs:{dateRangeOut:"dateRangeOut"},decls:10,vars:6,consts:[["id","container","triggers","manual","placement","bottom",1,"cl-btn-group","cl-d-flex",3,"ngbPopover"],["limitPopover","ngbPopover"],["class","cl-d-print-none cl-relative cl-datepicker-wrapper cl-w-100",4,"ngIf"],["class","cl-d-print-none cl-datepicker-wrapper cl-w-100",4,"ngIf"],["class","cl-btn cl-btn-fixed-40 cl-btn-outline-light cl-d-print-none",3,"disabled","click",4,"ngIf"],[1,"cl-btn","cl-text-left","cl-btn-outline-light","pointer","cl-d-none","cl-d-print-block"],["popContentLimit",""],[1,"cl-d-print-none","cl-relative","cl-datepicker-wrapper","cl-w-100"],["class","cl-datepicker-fake-input cl-d-flex cl-align-items-center pointer cl-px-2 cl-btn cl-btn-outline-light",3,"cl-datepicker-disabled","click",4,"ngIf"],[1,"cl-btn","cl-btn-outline-light","cl-py-0","cl-px-2","cl-d-flex",2,"opacity","1",3,"click"],["src","assets/images/ui-icons/calendar.svg"],["daterangepicker","",1,"cl-border-0","cl-bg-transparent","cl-datepickerrange","cl-btn","cl-pr-0","cl-text-left",2,"min-width","172px",3,"options","showDaterangepicker","hideDaterangepicker","selected"],[1,"cl-datepicker-fake-input","cl-d-flex","cl-align-items-center","pointer","cl-px-2","cl-btn","cl-btn-outline-light",3,"click"],[1,"cl-datepickerrange","cl-pl-2","cl-cut-text","cl-text-left"],[1,"cl-d-print-none","cl-datepicker-wrapper","cl-w-100"],[4,"ngIf"],["class","cl-btn cl-btn-outline-light cl-p-0 cl-pr-2 cl-cursor-default cl-disabled",4,"ngIf"],[1,"cl-d-block","cl-btn","cl-btn-outline-light","cl-datepickerrange"],[1,"cl-btn","cl-btn-outline-light","cl-p-0","cl-pr-2","cl-cursor-default","cl-disabled"],["daterangepicker","",1,"cl-border-0","cl-bg-transparent","cl-datepickerrange","cl-btn","cl-pr-0",3,"options"],[1,"cl-btn","cl-btn-fixed-40","cl-btn-outline-light","cl-d-print-none",3,"disabled","click"],["src","assets/images/ui-icons/chevron-left.svg"],["src","assets/images/ui-icons/chevron-right.svg"],[4,"ngIf","ngIfElse"],["upgradeTemplate",""],[3,"routerLink"]],template:function(e,t){if(1&e&&(n.Xb(0,"div",0,1),n.Wc(2,S,5,2,"div",2),n.Wc(3,D,3,2,"div",3),n.Wc(4,I,2,1,"button",4),n.Wc(5,j,2,1,"button",4),n.Xb(6,"span",5),n.Yc(7),n.Wb(),n.Wb(),n.Wc(8,R,3,2,"ng-template",null,6,n.Xc)),2&e){const e=n.Lc(9);n.wc("ngbPopover",e),n.Cb(2),n.wc("ngIf",!t.disableDatepicker),n.Cb(1),n.wc("ngIf",t.disableDatepicker),n.Cb(1),n.wc("ngIf",!t.removeArrows),n.Cb(1),n.wc("ngIf",!t.removeArrows),n.Cb(2),n.ad(" ",t.labelPrint," ")}},directives:[v.L,w.u,s.b,y.f],encapsulation:2}),e})()},"/b/a":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("BO2n"),s=i("f0Wu"),r=i("sNAh"),o=i("g7VG"),a=i("IP1A"),c=i("fXoL"),l=i("3Pt+"),u=i("+dED"),d=i("ofXK"),h=i("62PR"),p=i("1kSV");function b(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",29),c.Xb(1,"span",30),c.Xb(2,"a",27),c.jc("click",(function(){return c.Oc(e),c.nc().costRate.amount=null})),c.Yc(3,"Clear"),c.Wb(),c.Wb(),c.Wb()}}function f(e,t){1&e&&c.Sb(0,"div",31),2&e&&c.wc("autoClose","outside")}const m=function(e){return{start:e}};let g=(()=>{class e extends a.a{constructor(){super(...arguments),this._costRate=new o.a}set costRate(e){e&&(this._costRate=new o.a(e),this.costRate.amount=e.amount)}get costRate(){return this._costRate}ngOnInit(){super.ngOnInit(),this.costRate.since=s().startOf("day").toISOString(),this.responseBackup=this.costRate.generateReponse(this.updateSince)}get isModelChanged(){const e=this.costRate.generateReponse(this.updateSince);return!r.a.areResponsesEqual(e,this.responseBackup)}showUnset(){return this.type!==n.a.WORKSPACE&&this.costRate&&null!==this.costRate.amount}save(){if(!this.isModelChanged)return;const e=this.costRate.generateReponse(this.updateSince);this.saveRate.emit(e)}pickedDate({start:e}){this.costRate.since=e}}return e.\u0275fac=function(t){return v(t||e)},e.\u0275cmp=c.Lb({type:e,selectors:[["cost-rate"]],inputs:{costRate:"costRate"},features:[c.zb],decls:41,vars:18,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],["role","alert",1,"cl-alert","cl-alert-info","cl-fade","cl-show"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-lg-6"],["for","costRate"],[1,"cl-input-group"],["ngbAutofocus","","placeholder","Enter rate...","type","text","inputNumber","","id","costRate","spellcheck","false","autocomplete","off",1,"cl-form-control",3,"decimal","ngModel","keyup.enter","inputCharacterChange","inputChange"],["costRateInput",""],["class","cl-input-group-append",4,"ngIf"],[1,"cl-form-row","cl-position-relative"],["class","cl-blocker","popoverTitle","Upgrade to enable","ngbPopover","Upgrade to apply retroactively",3,"autoClose",4,"ngIf"],[1,"cl-form-group","cl-col-12"],[1,"cl-col-12"],[1,"cl-d-flex","cl-align-items-start","cl-align-items-md-center","cl-flex-column","cl-flex-md-row"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","recursiveCostRate","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","recursiveCostRate",1,"cl-custom-control-label"],[1,"cl-d-flex","cl-align-items-center","cl-my-2","cl-my-md-0","cl-ml-n4","cl-ml-md-0"],["placement","right",1,"cl-d-inline-flex","cl-align-items-center",2,"position","relative",3,"maxDate","debounce","mode","textualDate","dateTime","pickedDate"],[1,"cl-form-group","cl-col-12","cl-mt-lg-2"],["type","radio","id","allEntries","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","allEntries",1,"cl-custom-control-label"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button",1,"cl-btn","cl-btn-primary",3,"disabled","click"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],["popoverTitle","Upgrade to enable","ngbPopover","Upgrade to apply retroactively",1,"cl-blocker",3,"autoClose"]],template:function(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Yc(2),c.Wb(),c.Xb(3,"button",2),c.jc("click",(function(){return t.close()})),c.Xb(4,"span"),c.Sb(5,"img",3),c.Wb(),c.Wb(),c.Wb(),c.Xb(6,"div",4),c.Xb(7,"div",5),c.Xb(8,"span"),c.Yc(9),c.Wb(),c.Wb(),c.Xb(10,"div",6),c.Xb(11,"div",7),c.Xb(12,"label",8),c.Yc(13,"What is the new cost rate"),c.Wb(),c.Xb(14,"div",9),c.Xb(15,"input",10,11),c.jc("keyup.enter",(function(){return c.Oc(e),c.Lc(16).blur(),t.save()}))("inputCharacterChange",(function(e){return t.costRate.amount=e}))("inputChange",(function(e){return t.costRate.amount=e})),c.Wb(),c.Wc(17,b,4,0,"div",12),c.Wb(),c.Wb(),c.Wb(),c.Xb(18,"div",13),c.Wc(19,f,1,1,"div",14),c.Xb(20,"label",15),c.Yc(21,"Apply this cost rate to:"),c.Wb(),c.Xb(22,"div",16),c.Xb(23,"div",17),c.Xb(24,"div",18),c.Xb(25,"input",19),c.jc("ngModelChange",(function(e){return t.updateSince=e})),c.Wb(),c.Xb(26,"label",20),c.Yc(27," Time entries from "),c.Wb(),c.Wb(),c.Xb(28,"div",21),c.Xb(29,"single-date-picker2",22),c.jc("pickedDate",(function(e){return t.pickedDate(e)})),c.Wb(),c.Yc(30," onwards "),c.Wb(),c.Wb(),c.Wb(),c.Xb(31,"div",23),c.Xb(32,"div",18),c.Xb(33,"input",24),c.jc("ngModelChange",(function(e){return t.updateSince=e})),c.Wb(),c.Xb(34,"label",25),c.Yc(35," All past and future time entries "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(36,"div",26),c.Xb(37,"a",27),c.jc("click",(function(){return t.close()})),c.Yc(38,"Cancel"),c.Wb(),c.Xb(39,"button",28),c.jc("click",(function(){return t.save()})),c.Yc(40,"Save"),c.Wb(),c.Wb()}2&e&&(c.Cb(2),c.ad("",null===t.costRate.amount?"Set":"Edit"," rate"),c.Cb(7),c.Zc(t.text),c.Cb(6),c.wc("decimal",!0)("ngModel",t.costRate.amount),c.Cb(2),c.wc("ngIf",t.showUnset()),c.Cb(2),c.wc("ngIf",!t.hasHistoricRateFeature),c.Cb(6),c.wc("value",!0)("ngModel",t.updateSince),c.Cb(4),c.wc("maxDate",t.maxDate)("debounce",!1)("mode","date_only")("textualDate",!0)("dateTime",c.Bc(16,m,t.costRate.since)),c.Cb(4),c.wc("value",!1)("ngModel",t.updateSince),c.Cb(6),c.wc("disabled",!t.isModelChanged))},directives:[l.c,u.a,l.s,l.v,d.u,l.A,h.a,p.L],encapsulation:2,changeDetection:0}),e})();const v=c.Zb(g)},"/pT+":function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));var n=i("fXoL"),s=i("XNiG"),r=i("OmiP"),o=i("AY7I"),a=i("SxV6"),c=i("1G5W"),l=i("IzEk"),u=i("hkzH"),d=i("8+Zx"),h=i("ePBx"),p=i("nQ1P"),b=i("Y9C3"),f=i("1Tmk"),m=i("KBaq"),g=i("s5zK"),v=i("rnVd"),w=i("i/9y"),y=i("3Pt+"),C=i("tyNb"),k=i("1kSV"),S=i("kKK/"),x=i("ofXK"),O=i("rf9C");const D=["dropdown"],I=["scheduleFeaturePopover"];function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",2),n.Xb(1,"dropdown-items",16,17),n.jc("onChanged",(function(t){n.Oc(e);const i=n.nc();return i.visibleToUserGroup=t,i.resetRecipients()})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("list",e.userGroupsDropdown)("title","Logged-in members who can view")("value",e.visibleToUserGroup)}}function T(e,t){if(1&e&&(n.Xb(0,"div",2),n.Xb(1,"div",7),n.Sb(2,"input",18),n.Xb(3,"label",19),n.Yc(4),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(4),n.ad(" Always open as ",e.dateRangeLabel.toLowerCase()," ")}}function E(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",25),n.jc("click",(function(){return n.Oc(e),n.nc(2).checkTooltip()})),n.Wb()}}function A(e,t){if(1&e&&(n.Xb(0,"div",20),n.Wc(1,E,1,0,"div",21),n.Xb(2,"div",7),n.Sb(3,"input",22),n.Xb(4,"label",23,24),n.Yc(6," Schedule to email "),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc(),t=n.Lc(25);n.Cb(1),n.wc("ngIf",e.disableScheduleToEmail),n.Cb(3),n.wc("ngbPopover",t)}}function _(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",2),n.Xb(1,"span",26),n.Yc(2,"Recipients"),n.Wb(),n.Xb(3,"dropdown-checkbox-wrapper",27),n.jc("onChange",(function(t){return n.Oc(e),n.nc().recipientSelected(t)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(3),n.wc("title",e.isSaved?"Users":"Select users")("type",e.ReportFilter.USERS_AND_GROUP)("valuesData",e.scheduleValuesData)("constrainContainsFilter",e.userGroupContainsFilter)}}function W(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",2),n.Xb(1,"dropdown-items",5),n.jc("onChanged",(function(t){return n.Oc(e),n.nc().scheduledReport.type=t})),n.Wb(),n.Xb(2,"span",28),n.Yc(3),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("value",e.scheduledReport&&e.scheduledReport.type)("list",e.sendReportDropdowns)("title","Send report"),n.Cb(2),n.Zc(e.scheduledReport&&e.scheduledReport.type==e.ScheduledReportType.MONTHLY?"Reports will be sent on 1st of each month.":"Emails are sent according to users\u2019 personal time settings.")}}function R(e,t){1&e&&(n.Vb(0),n.Yc(1," Choose predefined date range (eg. Last Week) to schedule reports "),n.Ub())}function P(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",33),n.jc("click",(function(){return n.Oc(e),n.nc(3).modalService.dismissAll()})),n.Yc(1," Upgrade "),n.Wb()}}function M(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",34),n.jc("click",(function(){return n.Oc(e),n.nc(3).modalService.dismissAll()})),n.Yc(1," Upgrade "),n.Wb()}}function F(e,t){if(1&e&&(n.Wc(0,P,2,0,"a",31),n.Wc(1,M,2,0,"ng-template",null,32,n.Xc),n.Yc(3," to schedule reports ")),2&e){const e=n.Lc(2),t=n.nc(2);n.wc("ngIf",!t.everHadPaidSubscription)("ngIfElse",e)}}function X(e,t){if(1&e&&(n.Wc(0,R,2,0,"ng-container",29),n.Wc(1,F,4,2,"ng-template",null,30,n.Xc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",!t.shareForm.value.relativeDateRange)("ngIfElse",e)}}let L=(()=>{class e{constructor(e,t,i,o,a,c,l){this.formBuilder=e,this.cd=t,this.router=i,this.modalService=o,this.userGroupServiceOld=a,this.workspaceService=c,this.paymentService=l,this.reportName="",this.isPublic=!0,this.fixedDate=!1,this.scheduledReport=null,this.confirmButtonCopy="Create Link",this.onClose=new n.n,this.onShare=new n.n,this.visibilityDropdowns=[new r.a(!0,"Public - Anyone with the link can view"),new r.a(!1,"Private - Only logged-in members can view")],this.sendReportDropdowns=[new r.a(p.a.DAILY,"Daily"),new r.a(p.a.WEEKLY,"Weekly"),new r.a(p.a.MONTHLY,"Monthly")],this.ReportFilter=u.h,this.unsubscribe$=new s.a,this.ScheduledReportType=p.a,this.isSelfHosted=m.a.environment.selfHosted}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasScheduleReportsFeature=this.workspace.hasFeature(w.a.SCHEDULED_REPORTS),this.shareForm=this.formBuilder.group({name:[this.reportName,[o.a.required,o.a.minLength(2)]],fixedDate:[this.fixedDate],relativeDateRange:[this.dateRangeType!==v.a.ABSOLUTE],isScheduledReport:[this.scheduledReport&&this.scheduledReport.type]}),this.userGroupServiceOld.userGroups.pipe(Object(a.a)(),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.userGroupsDropdown=[],this.initUserGroupsForSaveDialog(e)}),this.userGroupServiceOld.getAllUserGroups(),this.subscribeToRelativeDateChanges(),this.initDefaultScheduledReport(),this.scheduleValuesData=d.a.containsFilterToCheckboxValues(this.scheduledReport.recipients,u.j,Object(u.o)()),this.setUserGroupContainsFilter(),this.checkSubscription()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}checkSubscription(){this.isAdminOrOwner&&!this.isSelfHosted&&(this.paymentService.everHadPaidSubscription.pipe(Object(l.a)(1),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.everHadPaidSubscription=e,this.cd.markForCheck()}),this.paymentService.getEverHadSubscription())}get disableScheduleToEmail(){return this.dateRangeType===v.a.ABSOLUTE||!this.shareForm.value.relativeDateRange||!this.hasScheduleReportsFeature}get isScheduleEmailValid(){var e;return!this.shareForm.value.isScheduledReport||(null===(e=this.scheduleValuesData)||void 0===e?void 0:e.isDirty())}recipientSelected(e){this.scheduleValuesData=e}resetRecipients(){this.scheduleValuesData=d.a.clone(this.scheduleValuesData),this.scheduleValuesData.reset(),this.setUserGroupContainsFilter()}navigateToUpgrade(){this.modalService.dismissAll(),this.router.navigate(["/upgrade"])}subscribeToRelativeDateChanges(){this.shareForm.get("relativeDateRange").valueChanges.pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>this.refreshIsScheduleReports(e))}refreshIsScheduleReports(e){e||this.shareForm.patchValue({isScheduledReport:!1})}initUserGroupsForSaveDialog(e){var t;e&&(this.userGroupsDropdown=e.map(e=>new r.a(e.id,"Admins"==e.name?"Only admins":e.name)),this.visibleToUserGroup||(this.visibleToUserGroup=null===(t=e[0])||void 0===t?void 0:t.id),this.cd.markForCheck(),this.dropdownItems&&this.dropdownItems.triggerDetection())}closeModal(){this.onClose.emit()}onSubmit(){setTimeout(()=>{if(this.inProgress)return;this.scheduledReport.recipients=this.scheduleValuesData.getContainsFilter(u.j);const e={name:this.shareForm.value.name.trim(),isPublic:this.isPublic,isRelativeDateRange:this.dateRangeLabel&&this.shareForm.value.relativeDateRange,fixedDate:this.shareForm.value.fixedDate,scheduledReport:this.shareForm.value.isScheduledReport?this.scheduledReport:null};this.isPublic||(e.visibleToUserGroup=this.visibleToUserGroup),this.onShare.emit(e)})}initDefaultScheduledReport(){this.scheduledReport||(this.scheduledReport=new b.a({recipients:{contains:u.d.CONTAINS,ids:[]},type:p.a.WEEKLY}))}setUserGroupContainsFilter(){this.userGroupContainsFilter={contains:u.d.CONTAINS,ids:!this.isPublic&&this.visibleToUserGroup?[this.visibleToUserGroup]:[]}}checkTooltip(){this.disableScheduleToEmail?this.openTooltip():this.scheduleFeaturePopover.close()}openTooltip(){this.scheduleFeaturePopover.isOpen()||this.scheduleFeaturePopover.open()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(y.f),n.Rb(n.h),n.Rb(C.c),n.Rb(k.q),n.Rb(h.a),n.Rb(f.a),n.Rb(g.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["share-report"]],viewQuery:function(e,t){var i;1&e&&(n.ed(D,!0),n.ed(I,!0)),2&e&&(n.Kc(i=n.kc())&&(t.dropdownItems=i.first),n.Kc(i=n.kc())&&(t.scheduleFeaturePopover=i.first))},inputs:{isSaved:"isSaved",inProgress:"inProgress",reportName:"reportName",isPublic:"isPublic",visibleToUserGroup:"visibleToUserGroup",dateRangeType:"dateRangeType",dateRangeLabel:"dateRangeLabel",fixedDate:"fixedDate",scheduledReport:"scheduledReport",confirmButtonCopy:"confirmButtonCopy",isAdminOrOwner:"isAdminOrOwner"},outputs:{onClose:"onClose",onShare:"onShare"},decls:26,vars:12,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"cl-modal-body"],[1,"cl-form-group"],["for","reportName"],["type","text","ngbAutofocus","","autocomplete","off","formControlName","name","id","reportName","placeholder","Description",1,"cl-form-control"],[1,"cl-make-dropdown-large",3,"value","list","title","onChanged"],["class","cl-form-group",4,"ngIf"],[1,"cl-custom-control","cl-custom-switch"],["formControlName","fixedDate","type","checkbox","id","fixed",1,"cl-custom-control-input"],["for","fixed",1,"cl-custom-control-label"],["src","assets/images/ui-icons/info-9.svg","placement","top",1,"cl-ml-2",3,"ngbTooltip"],["class","cl-form-group cl-relative",4,"ngIf"],[1,"cl-modal-footer"],["tabindex","0",1,"cl-color-blue",3,"click","keyup.enter"],["type","submit","tabindex","0",1,"cl-btn","cl-btn-primary",3,"disabled"],["popContent",""],[3,"list","title","value","onChanged"],["dropdown",""],["formControlName","relativeDateRange","type","checkbox","id","relative-range",1,"cl-custom-control-input"],["for","relative-range",1,"cl-custom-control-label"],[1,"cl-form-group","cl-relative"],["class","cl-blocker","style","opacity: 0;",3,"click",4,"ngIf"],["formControlName","isScheduledReport","type","checkbox","id","schedule-to-email",1,"cl-custom-control-input"],["placement","right","triggers","manual","container","body","for","schedule-to-email",1,"cl-custom-control-label",3,"ngbPopover"],["scheduleFeaturePopover","ngbPopover"],[1,"cl-blocker",2,"opacity","0",3,"click"],[1,"cl-mb-1","cl-d-inline-block"],[3,"title","type","valuesData","constrainContainsFilter","onChange"],[1,"cl-mt-1","cl-d-inline-block","cl-opacity-5"],[4,"ngIf","ngIfElse"],["upgradeTemplate",""],["routerLink","/upgrade","clickCloseDropdown","",3,"click",4,"ngIf","ngIfElse"],["FreePlanDesktopTempl",""],["routerLink","/upgrade","clickCloseDropdown","",3,"click"],["routerLink","/subscription","fragment","plans","clickCloseDropdown","",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"form",0),n.jc("ngSubmit",(function(){return t.onSubmit()})),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"label",3),n.Yc(4,"Report name"),n.Wb(),n.Sb(5,"input",4),n.Wb(),n.Xb(6,"div",2),n.Xb(7,"dropdown-items",5),n.jc("onChanged",(function(e){return t.isPublic=e,t.resetRecipients()})),n.Wb(),n.Wb(),n.Wc(8,j,3,3,"div",6),n.Wc(9,T,5,1,"div",6),n.Xb(10,"div",2),n.Xb(11,"div",7),n.Sb(12,"input",8),n.Xb(13,"label",9),n.Yc(14," Lock dates "),n.Wb(),n.Sb(15,"img",10),n.Wb(),n.Wb(),n.Wc(16,A,7,2,"div",11),n.Wc(17,_,4,4,"div",6),n.Wc(18,W,4,4,"div",6),n.Wb(),n.Xb(19,"div",12),n.Xb(20,"a",13),n.jc("click",(function(){return t.closeModal()}))("keyup.enter",(function(){return t.closeModal()})),n.Yc(21,"Close"),n.Wb(),n.Xb(22,"button",14),n.Yc(23),n.Wb(),n.Wb(),n.Wb(),n.Wc(24,X,3,2,"ng-template",null,15,n.Xc)),2&e&&(n.wc("formGroup",t.shareForm),n.Cb(7),n.wc("value",t.isPublic)("list",t.visibilityDropdowns)("title","Visibility"),n.Cb(1),n.wc("ngIf",!t.isPublic),n.Cb(1),n.wc("ngIf",t.dateRangeLabel),n.Cb(6),n.wc("ngbTooltip","Lock dates to prevent viewer from seeing the report for different time ranges."),n.Cb(1),n.wc("ngIf",t.isAdminOrOwner),n.Cb(1),n.wc("ngIf",t.shareForm.value.isScheduledReport),n.Cb(1),n.wc("ngIf",t.shareForm.value.isScheduledReport),n.Cb(4),n.wc("disabled",t.inProgress||t.shareForm.invalid||!t.isScheduleEmailValid),n.Cb(1),n.Zc(t.confirmButtonCopy))},directives:[y.I,y.t,y.k,y.c,y.s,y.i,S.a,x.u,y.a,k.Z,k.L,O.a,C.f],encapsulation:2}),e})()},"/uUt":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("7o/Q");function s(e,t){return i=>i.lift(new r(e,t))}class r{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new o(e,this.compare,this.keySelector))}}class o extends n.a{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(n){return this.destination.error(n)}let i=!1;if(this.hasKey)try{const{compare:e}=this;i=e(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}},"0EQZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return o}));var n=i("7+OI"),s=i("LRne"),r=(i("XNiG"),i("fXoL"));function o(e){return e&&"function"==typeof e.connect}class a extends class{}{constructor(e){super(),this._data=e}connect(){return Object(n.a)(this._data)?this._data:Object(s.a)(this._data)}disconnect(){}}let c=(()=>{class e{constructor(){this._listeners=[]}notify(e,t){for(let i of this._listeners)i(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})()},"0Gvx":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C]]}),e})()},"1+cd":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("lJxs"),s=i("vkgz"),r=i("FRqX"),o=i("XNiG"),a=i("Ymxs"),c=i("1Tmk"),l=i("fXoL"),u=i("tk/3");let d=(()=>{class e{constructor(e,t,i){this.http=e,this.workspaceService=t,this.toaster=i,this.error=new o.a,this.reminders=new o.a,this.targets=new o.a}createReminder(e,t){const i={users:e.users,less:e.less,hours:Number(e.hours),dateRange:e.dateRange,days:e.days,receivers:e.receivers};return this.http.post(`/workspaces/${t}/reminders/`,i).pipe(Object(n.a)(e=>new r.a(e)),Object(s.a)(()=>{this.toaster.pop("success","Reminder created")},e=>{this.error.next(e),this.toaster.pop("error",e.error&&e.error.message||"Reminder not created")}))}getReminders(e){this.http.get(`/workspaces/${e}/reminders/`).pipe(Object(n.a)(e=>e.map(e=>new r.a(e)))).subscribe(e=>{this.reminders.next(e)},e=>{this.error.next(e)})}getTargets(){const e=this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${e}/reminders/targets`).pipe(Object(n.a)(e=>e.map(e=>new r.a(e)))).subscribe(e=>{this.targets.next(e)},e=>{this.error.next(e)})}updateReminder(e,t){this.http.put(`/workspaces/${t}/reminders/${e.id}`,{id:e.id,users:e.users,less:e.less,hours:e.hours,dateRange:e.dateRange,days:e.days,receivers:e.receivers}).subscribe(()=>{this.getReminders(t),this.toaster.pop("success","Reminder successfully updated!")},e=>{this.error.next(e)})}deleteReminder(e,t){return this.http.delete(`/workspaces/${t}/reminders/${e}`).pipe(Object(s.a)(()=>{this.toaster.pop("success","Reminder successfully deleted")},e=>{this.error.next(e),this.toaster.pop("error","Reminder not deleted")}))}toastForEmptyTeam(e){const t=e?"create":"update";this.toaster.pop("error","Reminder not "+t+"d","Can't "+t+" reminder without team members added.")}toastForEmptyHours(e){const t=e?"create":"update";this.toaster.pop("error","Reminder not "+t+"d","Can't "+t+" reminder without hours added.")}toastForEmptyDays(e){const t=e?"create":"update";this.toaster.pop("error","Reminder not "+t+"d","Can't "+t+" reminder without days added.")}}return e.\u0275fac=function(t){return new(t||e)(l.fc(u.b),l.fc(c.a),l.fc(a.a))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac}),e})()},"1+qu":function(e,t,i){"use strict";i.d(t,"a",(function(){return U})),i("uHlu");var n=i("lvCY"),s=i("fXoL"),r=i("ofXK"),o=i("5SNR"),a=i("r21O"),c=i("rg2B"),l=i("Lwft");function u(e,t){1&e&&s.Tb(0)}const d=function(e){return{"cl-extended":e}};function h(e,t){if(1&e){const e=s.Yb();s.Xb(0,"a",21),s.jc("click",(function(){s.Oc(e);const t=s.nc(2);return t.group.isExpanded=!t.group.isExpanded})),s.Xb(1,"span",22),s.Yc(2),s.Wb(),s.Wb()}if(2&e){const e=s.nc(2);s.Cb(1),s.wc("ngClass",s.Bc(2,d,e.group.isExpanded)),s.Cb(1),s.Zc(e.group.children.length)}}function p(e,t){1&e&&(s.Xb(0,"span",23),s.Xb(1,"span",24),s.Yc(2,"0"),s.Wb(),s.Wb())}function b(e,t){if(1&e&&s.Sb(0,"i",25),2&e){const e=s.nc(2);s.Vc("background-color",e.group.color||e.NO_DATA_COLOR)}}function f(e,t){if(1&e&&(s.Xb(0,"span",26),s.Yc(1),s.Wb()),2&e){const e=s.nc(2);s.Cb(1),s.ad(" - ",e.group.clientName," ")}}function m(e,t){if(1&e&&(s.Vb(0),s.Yc(1),s.oc(2,"timeFormatOrDash"),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.ad(" ",s.qc(2,1,e.group.duration,e.format)," ")}}function g(e,t){if(1&e&&(s.Xb(0,"span"),s.Yc(1),s.Wb()),2&e){const e=s.nc(3);s.Cb(1),s.ad(" ",e.currency," ")}}function v(e,t){if(1&e&&(s.Vb(0),s.Yc(1),s.oc(2,"roundIfWholeNumber"),s.oc(3,"centsToDollars"),s.Wc(4,g,2,1,"span",20),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.ad(" ",e.group.amount?s.pc(2,2,s.pc(3,4,e.group.amount)):"\u2014"," "),s.Cb(3),s.wc("ngIf",e.showCurrency&&e.group.amount)}}function w(e,t){if(1&e&&(s.Xb(0,"div",13),s.Wc(1,h,3,4,"a",14),s.Wc(2,p,3,0,"span",15),s.Xb(3,"div",16),s.Wc(4,b,1,2,"i",17),s.Xb(5,"span"),s.Yc(6),s.Wb(),s.Wc(7,f,2,1,"span",18),s.Wb(),s.Xb(8,"span",19),s.Wc(9,m,3,4,"ng-container",20),s.Wc(10,v,5,6,"ng-container",20),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Cb(1),s.wc("ngIf",e.group.children),s.Cb(1),s.wc("ngIf",!e.group.children&&1===e.level),s.Cb(2),s.wc("ngIf",e.isProject),s.Cb(1),s.Vc("color",e.isProject&&(e.group.color||e.NO_DATA_COLOR)),s.Cb(1),s.ad(" ",e.group.name||(e.isProject?"(Without project)":"(Without user)")," "),s.Cb(1),s.wc("ngIf",e.isProject&&e.group.clientName),s.Cb(2),s.wc("ngIf",e.showTime),s.Cb(1),s.wc("ngIf",!e.showTime)}}function y(e,t){1&e&&s.Tb(0)}const C=function(e){return{day:e}};function k(e,t){if(1&e&&s.Wc(0,y,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,C,e.group.days[0]))}}function S(e,t){1&e&&s.Tb(0)}function x(e,t){if(1&e&&s.Wc(0,S,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,C,e.group.days[1]))}}function O(e,t){1&e&&s.Tb(0)}function D(e,t){if(1&e&&s.Wc(0,O,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,C,e.group.days[2]))}}function I(e,t){1&e&&s.Tb(0)}function j(e,t){if(1&e&&s.Wc(0,I,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,C,e.group.days[3]))}}function T(e,t){1&e&&s.Tb(0)}function E(e,t){if(1&e&&s.Wc(0,T,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,C,e.group.days[4]))}}function A(e,t){1&e&&s.Tb(0)}function _(e,t){if(1&e&&s.Wc(0,A,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,C,e.group.days[5]))}}function W(e,t){1&e&&s.Tb(0)}function R(e,t){if(1&e&&s.Wc(0,W,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,C,e.group.days[6]))}}function P(e,t){if(1&e&&(s.Vb(0),s.Yc(1),s.oc(2,"timeFormatOrDash"),s.Ub()),2&e){const e=s.nc().day,t=s.nc();s.Cb(1),s.ad(" ",s.qc(2,1,e.duration,t.format)," ")}}function M(e,t){if(1&e&&(s.Vb(0),s.Yc(1),s.oc(2,"roundIfWholeNumber"),s.oc(3,"centsToDollars"),s.Ub()),2&e){const e=s.nc().day;s.Cb(1),s.ad(" ",e.amount?s.pc(2,1,s.pc(3,3,e.amount)):"\u2014"," ")}}function F(e,t){if(1&e&&(s.Wc(0,P,3,4,"ng-container",20),s.Wc(1,M,4,5,"ng-container",20)),2&e){const e=s.nc();s.wc("ngIf",e.showTime),s.Cb(1),s.wc("ngIf",!e.showTime)}}function X(e,t){if(1&e&&(s.Vb(0),s.Yc(1),s.oc(2,"timeFormatOrDash"),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.ad(" ",s.qc(2,1,e.group.duration,e.format)," ")}}function L(e,t){if(1&e&&(s.Vb(0),s.Yc(1),s.Ub()),2&e){const e=s.nc(3);s.Cb(1),s.ad(" ",e.currency," ")}}function N(e,t){if(1&e&&(s.Vb(0),s.Xb(1,"span"),s.Yc(2),s.oc(3,"roundIfWholeNumber"),s.oc(4,"centsToDollars"),s.Wc(5,L,2,1,"ng-container",20),s.Wb(),s.Ub()),2&e){const e=s.nc(2);s.Cb(2),s.ad(" ",e.group.amount?s.pc(3,2,s.pc(4,4,e.group.amount)):"\u2014","\xa0 "),s.Cb(3),s.wc("ngIf",e.showCurrency&&e.group.amount)}}function B(e,t){if(1&e&&(s.Xb(0,"div",16),s.Wc(1,X,3,4,"ng-container",20),s.Wc(2,N,6,6,"ng-container",20),s.Wb()),2&e){const e=s.nc();s.Cb(1),s.wc("ngIf",e.showTime),s.Cb(1),s.wc("ngIf",!e.showTime)}}const Y=function(e){return{labels:e}},V=function(e,t,i,n,s,r,o,a,c){return[e,t,i,n,s,r,o,a,c]};let U=(()=>{class e{constructor(e){this.cd=e,this.NO_DATA_COLOR=n.p}set isExpanded(e){this.group.isExpanded=e}set labels(e){e&&(this._labels=["",...e,"Totals"])}get labels(){return this._labels}ngOnInit(){}ngAfterViewInit(){this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.h))},e.\u0275cmp=s.Lb({type:e,selectors:[["weekly-group"],["","weekly-group",""]],inputs:{group:"group",format:"format",level:"level",isExpanded:"isExpanded",isExpandedMobileView:"isExpandedMobileView",isProject:"isProject",isDesktop:"isDesktop",labels:"labels",currency:"currency",showCurrency:"showCurrency",showTime:"showTime"},decls:23,vars:17,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","isExpanded","templates"],["responsive",""],["nameTemplate",""],["day0",""],["day1",""],["day2",""],["day3",""],["day4",""],["day5",""],["day6",""],["dayTemplate",""],["totalTemplate",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100"],["class","cl-badge-same-entries-wrapper",3,"click",4,"ngIf"],["class","cl-badge-same-entries-wrapper",4,"ngIf"],[1,"cl-cut-text"],["class","cl-entry__project__dot",3,"background-color",4,"ngIf"],["class","cl-text-gray-9",4,"ngIf"],[1,"cl-d-flex","cl-d-lg-custom-none","cl-ml-auto","cl-mr-2"],[4,"ngIf"],[1,"cl-badge-same-entries-wrapper",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0","cl-ml-lg-custom-2",3,"ngClass"],[1,"cl-badge-same-entries-wrapper"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0","cl-ml-lg-custom-2"],[1,"cl-entry__project__dot"],[1,"cl-text-gray-9"]],template:function(e,t){if(1&e&&(s.Wc(0,u,1,0,"ng-container",0),s.Sb(1,"responsive-row",1,2),s.Wc(3,w,11,9,"ng-template",null,3,s.Xc),s.Wc(5,k,1,4,"ng-template",null,4,s.Xc),s.Wc(7,x,1,4,"ng-template",null,5,s.Xc),s.Wc(9,D,1,4,"ng-template",null,6,s.Xc),s.Wc(11,j,1,4,"ng-template",null,7,s.Xc),s.Wc(13,E,1,4,"ng-template",null,8,s.Xc),s.Wc(15,_,1,4,"ng-template",null,9,s.Xc),s.Wc(17,R,1,4,"ng-template",null,10,s.Xc),s.Wc(19,F,2,2,"ng-template",null,11,s.Xc),s.Wc(21,B,3,2,"ng-template",null,12,s.Xc)),2&e){const e=s.Lc(2),i=s.Lc(4),n=s.Lc(6),r=s.Lc(8),o=s.Lc(10),a=s.Lc(12),c=s.Lc(14),l=s.Lc(16),u=s.Lc(18),d=s.Lc(22);s.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",s.Bc(5,Y,t.labels)),s.Cb(1),s.wc("isDesktop",t.isDesktop)("isExpanded",t.isExpandedMobileView)("templates",s.Jc(7,V,[i,n,r,o,a,c,l,u,d]))}},directives:[r.B,o.a,r.u,r.r],pipes:[a.a,c.a,l.a],encapsulation:2,changeDetection:0}),e})()},"1Mzi":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},"1ROj":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},"1Y3z":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ns}));var n=i("1G5W"),s=i("NHP+"),r=i("aLCL"),o=i("O3o7"),a=i("Qyj8"),c=i("lGQG"),l=i("i/9y"),u=i("1Tmk"),d=i("hl/z"),h=i("HApq"),p=i("Jzhb"),b=i("AEYL"),f=i("fXoL"),m=i("tyNb"),g=i("1kSV"),v=i("ofXK"),w=i("33WN"),y=i("QKuU"),C=i("eGqU"),k=i("lvCY"),S=i("IzEk"),x=i("YjdQ"),O=i("T+Hu"),D=i("cp0P"),I=i("LRne"),j=i("QTph"),T=i("PW4C"),E=i("K6Ak"),A=i("3Pt+"),_=i("C0N5"),W=i("pLZG"),R=i("tQGB"),P=i("XNiG"),M=i("sNAh"),F=i("aDua"),X=i("g7VG");function L(e,t){if(1&e&&(f.Xb(0,"div",8),f.Xb(1,"span",4),f.Yc(2),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.ad("Cost Rate (",null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency,")")}}function N(e,t){if(1&e&&(f.Xb(0,"th"),f.Xb(1,"div",5),f.Xb(2,"div",6),f.Xb(3,"span",4),f.Yc(4),f.Wb(),f.Wb(),f.Wc(5,L,3,1,"div",7),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(4),f.ad("Billable rate (",null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency,")"),f.Cb(1),f.wc("ngIf",e.canSeeRates&&e.hasLaborCostFeature&&(null==e.workspace?null:e.workspace.isCostRateActive))}}function B(e,t){1&e&&(f.Xb(0,"th"),f.Xb(1,"div",9),f.Yc(2,"Edit"),f.Wb(),f.Wb())}function Y(e,t){if(1&e&&(f.Vb(0),f.Xb(1,"th",2),f.Yc(2,"Name"),f.Wb(),f.Wc(3,N,6,2,"th",3),f.Xb(4,"th"),f.Xb(5,"span",4),f.Yc(6,"Role"),f.Wb(),f.Wb(),f.Wc(7,B,3,0,"th",3),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.Db("colspan",e.colspan),f.Cb(2),f.wc("ngIf",e.canSeeRates),f.Cb(4),f.wc("ngIf",e.hasEditPermission)}}function V(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",10),f.Xb(1,"div",11),f.Yc(2,"Name "),f.Xb(3,"div",12),f.Xb(4,"a",13),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(5,"span",14),f.Sb(6,"img",15),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(6),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}i("j4ir");let U=(()=>{class e{constructor(){this.colspan=1,this.onExpandAll=new f.n,this.isExpandAll=!1}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-table-header"],["","access-user-table-header",""]],inputs:{isDesktop:"isDesktop",workspace:"workspace",canSeeRates:"canSeeRates",hasLaborCostFeature:"hasLaborCostFeature",hasEditPermission:"hasEditPermission",colspan:"colspan"},outputs:{onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-h5","cl-mb-0","cl-pl-lg-3"],[4,"ngIf"],[1,"cl-h5","cl-ml-lg-custom-n2"],[1,"cl-d-flex"],[1,"cl-project-table-access-billable-rate"],["class","cl-project-table-access-cost-rate",4,"ngIf"],[1,"cl-project-table-access-cost-rate"],[1,"cl-h5","cl-mb-0","cl-text-lg-custom-right","cl-d-block","cl-d-lg-none"],["colspan","5",1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Wc(0,Y,8,3,"ng-container",0),f.Wc(1,V,7,1,"ng-template",null,1,f.Xc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[v.u],encapsulation:2,changeDetection:0}),e})();i("Tj/N");var H=i("FwEu"),$=i("BO2n"),G=i("xoOP"),z=i("5SNR"),q=i("+dED"),K=i("AHJ+"),Z=i("gzhl"),J=i("/b/a");const Q=["hourlyRateInput"];function ee(e,t){1&e&&f.Tb(0)}function te(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xb(1,"div",11),f.Yc(2),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.Vc("text-decoration",e.isUserInactive?"line-through":"none"),f.xc("title",e.user.name),f.Cb(1),f.ad(" ",e.user.name," ")}}function ie(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",20),f.Xb(1,"span",21),f.Xb(2,"a",22),f.jc("click",(function(){f.Oc(e);const t=f.nc(3),i=f.Lc(14);return t.openModal(i,"md")})),f.Yc(3,"Change"),f.Wb(),f.Wb(),f.Wb()}}function ne(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",15),f.Xb(1,"div",16),f.Xb(2,"input",17,18),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(3).blur()})),f.Wb(),f.Wc(4,ie,4,0,"div",19),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(2),f.yc("id","hourlyRate_",e.user.id,""),f.wc("ngModel",e.hourlyRatePlaceholder),f.Cb(2),f.wc("ngIf",e.hasEditPermission)}}function se(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",20),f.Xb(1,"span",21),f.Xb(2,"a",22),f.jc("click",(function(){f.Oc(e);const t=f.nc(3),i=f.Lc(16);return t.openModal(i,"md")})),f.Yc(3,"Change"),f.Wb(),f.Wb(),f.Wb()}}function re(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",23),f.Xb(1,"div",16),f.Xb(2,"input",24,25),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(3).blur()})),f.Wb(),f.Wc(4,se,4,0,"div",19),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(2),f.yc("id","costRate_",e.user.id,""),f.wc("ngModel",e.costRatePlaceholder),f.Cb(2),f.wc("ngIf",e.hasEditPermission)}}function oe(e,t){if(1&e&&(f.Xb(0,"div",12),f.Wc(1,ne,5,3,"div",13),f.Wc(2,re,5,3,"div",14),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.wc("ngIf",e.canSeeRates),f.Cb(1),f.wc("ngIf",e.canSeeRates&&e.hasCostRateFeatures&&(null==e.workspace?null:e.workspace.isCostRateActive))}}function ae(e,t){1&e&&(f.Xb(0,"div",27),f.Xb(1,"span",28),f.Yc(2,"Manager"),f.Wb(),f.Wb())}function ce(e,t){1&e&&(f.Xb(0,"div",27),f.Xb(1,"span",28),f.Yc(2,"Admin"),f.Wb(),f.Wb())}function le(e,t){1&e&&(f.Xb(0,"div",27),f.Xb(1,"span",28),f.Yc(2,"Owner"),f.Wb(),f.Wb())}function ue(e,t){if(1&e&&(f.Wc(0,ae,3,0,"div",26),f.Wc(1,ce,3,0,"div",26),f.Wc(2,le,3,0,"div",26)),2&e){const e=f.nc();f.wc("ngIf",e.isManager&&!e.isAdmin&&!e.isOwner),f.Cb(1),f.wc("ngIf",e.isAdmin&&!e.isOwner),f.Cb(1),f.wc("ngIf",e.isOwner)}}function de(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",37),f.jc("click",(function(){return f.Oc(e),f.nc(4).changeManagerRights()})),f.Yc(1),f.Wb()}if(2&e){const e=f.nc(4);f.Cb(1),f.ad(" ",e.isManager?"Revoke manager rights":"Give manager rights"," ")}}function he(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"div",35),f.Wc(2,de,2,1,"a",36),f.Xb(3,"a",37),f.jc("click",(function(){f.Oc(e);const t=f.nc(3),i=f.Lc(12);return t.modalService.open(i,{centered:!0})})),f.Yc(4," Remove "),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.wc("ngIf",e.isAdminOrOwner&&!e.isAdmin&&!e.isOwner)}}function pe(e,t){1&e&&(f.Xb(0,"div",30),f.Xb(1,"div",31),f.Sb(2,"img",32),f.Wb(),f.Wc(3,he,5,1,"div",33),f.Wb())}function be(e,t){if(1&e&&f.Wc(0,pe,4,0,"div",29),2&e){const e=f.nc();f.wc("ngIf",e.hasEditPermission)}}function fe(e,t){if(1&e){const e=f.Yb();f.Xb(0,"simple-modal",38),f.jc("confirmed",(function(i){f.Oc(e);const n=t.$implicit,s=f.nc();return n.close(i),s.deleteUser.emit()}))("close",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.Xb(1,"p",39),f.Yc(2),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.wc("title","Remove")("isDanger",!0)("btnText","Remove"),f.Cb(2),f.ad(" Once removed, ",e.user.name," will no longer have access to this project and won\u2019t be able to track time for it any more. ")}}function me(e,t){if(1&e){const e=f.Yb();f.Xb(0,"hourly-rate",40),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateHourlyRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("user",e.user)("hourlyRate",e.hourlyRate)("type",e.rateType.PROJECT_MEMBER)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}function ge(e,t){if(1&e){const e=f.Yb();f.Xb(0,"cost-rate",41),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateCostRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.PROJECT_MEMBER)("costRate",e.costRate)("user",e.user)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}const ve=function(e){return{labels:e}},we=function(e,t,i,n){return[e,t,i,n]},ye=function(e,t,i){return[e,t,i]},Ce=function(e,t){return[e,t]};let ke=(()=>{class e{constructor(e,t,i){this.workspaceService=e,this.modalService=t,this.cd=i,this.hourlyRateUpdated=new f.n,this.costRateUpdated=new f.n,this.managerRightsUpdated=new f.n,this.projectManagersUpdated=new f.n,this.deleteUser=new f.n,this.hideZeroRates=!0,this.rateType=$.a,this.hourlyRate=new M.a,this.costRate=new X.a}set projectManagerIds(e){this._projectManagerIds=e,this.setManagerPermission()}get projectManagerIds(){return this._projectManagerIds}set adminIds(e){e&&(this.isAdmin=e.includes(this.user.id))}set ownerIds(e){e&&(this.isOwner=e.includes(this.user.id))}ngOnInit(){this.inItRates(),this.hasCostRateFeatures=this.workspace.hasFeature(l.a.LABOR_COST),this.isUserInactive=null==this.workspace.memberships.filter(e=>e.userId===this.user.id)[0]||this.workspace.memberships.filter(e=>e.userId===this.user.id)[0].membershipStatus===H.a.INACTIVE,this.setCostRateLabel(),this.setHourlyRateLabel()}ngAfterViewInit(){this.cd.detectChanges()}inItRates(){const e=this.project.memberships.filter(e=>e.userId===this.user.id),t=e[0].hourlyRate,i=e[0].costRate;this.hourlyRate.amount=t?t.amount:0,this.hourlyRate.currency=this.workspace.hourlyRate.currency,this.costRate.amount=i?i.amount:null,this.costRate.currency=this.workspace.costRate.currency}updateHourlyRate(e){e&&e.amount/100/100===this.hourlyRate.amount||(this.hourlyRate.amount=e.amount,this.hourlyRateUpdated.emit(e),this.setHourlyRateLabel(),this.cd.detectChanges())}updateCostRate(e){e.amount!==this.costRate.amount&&(this.costRate.amount=e.amount,this.costRateUpdated.emit(e),this.setCostRateLabel(),this.cd.detectChanges())}setCostRateLabel(){this.costRatePlaceholder=Object(G.m)(this.costRate)}setHourlyRateLabel(){this.hourlyRatePlaceholder=Object(G.n)(this.hourlyRate)}changeManagerRights(){this.managerRightsUpdated.emit(this.isManager),this.isManager=!this.isManager}setHourlyRate(){this.hideZeroRates=!1,setTimeout(()=>{this.hourlyRateInput.nativeElement.select()},100)}setManagerPermission(){this.isManager=this.projectManagerIds&&this.projectManagerIds.indexOf(this.user.id)>-1}refreshManagePermission(){this.setManagerPermission(),this.cd.detectChanges()}openModal(e){this.modalService.open(e,{centered:!0})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(u.a),f.Rb(g.q),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-table-row"],["","access-user-table-row",""]],viewQuery:function(e,t){var i;1&e&&f.ed(Q,!0),2&e&&f.Kc(i=f.kc())&&(t.hourlyRateInput=i.first)},inputs:{user:"user",project:"project",workspace:"workspace",labels:"labels",isDesktop:"isDesktop",hasEditPermission:"hasEditPermission",isAdminOrOwner:"isAdminOrOwner",canSeeRates:"canSeeRates",hasHistoricRatesFeature:"hasHistoricRatesFeature",expandAll:"expandAll",projectManagerIds:"projectManagerIds",adminIds:"adminIds",ownerIds:"ownerIds"},outputs:{hourlyRateUpdated:"hourlyRateUpdated",costRateUpdated:"costRateUpdated",managerRightsUpdated:"managerRightsUpdated",projectManagersUpdated:"projectManagersUpdated",deleteUser:"deleteUser"},decls:17,vars:23,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["deleteModal",""],["hourlyRateModal",""],["costRateModal",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100","cl-py-0","cl-py-lg-custom-2","cl-pl-lg-2","cl-pl-lg-custom-0","cl-pr-2"],[1,"cl-cut-text","cl-text-dark",3,"title"],[1,"cl-d-flex","cl-flex-column","cl-flex-lg-row"],["class","cl-component-divided-left cl-project-table-access-billable-rate",4,"ngIf"],["class","cl-component-divided-left cl-project-table-access-cost-rate",4,"ngIf"],[1,"cl-component-divided-left","cl-project-table-access-billable-rate"],[1,"cl-input-group","cl-input-group-sm"],["type","text","name","hourlyRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-input-h-rate-sm","cl-flex-grow-0","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"id","ngModel","keyup.enter"],["hourlyRateInput",""],["class","cl-input-group-append",4,"ngIf"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],[1,"cl-color-blue",3,"click"],[1,"cl-component-divided-left","cl-project-table-access-cost-rate"],["type","text","name","costRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-input-h-rate-sm","cl-flex-grow-0","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"id","ngModel","keyup.enter"],["costRateInput",""],["class","cl-component-divided-left cl-w-100",4,"ngIf"],[1,"cl-component-divided-left","cl-w-100"],[1,"cl-text-dark"],["class","cl-dropdown cl-d-flex cl-justify-content-end cl-hover-pointer","dropdown","",4,"ngIf"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-end","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg","closeDropdown",""],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[3,"title","isDanger","btnText","confirmed","close"],[1,"cl-text-muted","cl-cut-text-wrap"],[3,"user","hourlyRate","type","hasHistoricRateFeature","onClose","saveRate"],[3,"type","costRate","user","hasHistoricRateFeature","onClose","saveRate"]],template:function(e,t){if(1&e&&(f.Wc(0,ee,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.Wc(3,te,3,4,"ng-template",null,3,f.Xc),f.Wc(5,oe,3,2,"ng-template",null,4,f.Xc),f.Wc(7,ue,3,3,"ng-template",null,5,f.Xc),f.Wc(9,be,1,1,"ng-template",null,6,f.Xc),f.Wc(11,fe,3,4,"ng-template",null,7,f.Xc),f.Wc(13,me,1,4,"ng-template",null,8,f.Xc),f.Wc(15,ge,1,4,"ng-template",null,9,f.Xc)),2&e){const e=f.Lc(2),i=f.Lc(4),n=f.Lc(6),s=f.Lc(8),r=f.Lc(10);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(5,ve,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",t.canSeeRates&&t.hasEditPermission?f.Ec(7,we,i,n,s,r):t.canSeeRates?f.Dc(12,ye,i,n,s):t.hasEditPermission?f.Dc(16,ye,i,s,r):f.Cc(20,Ce,i,s))("isExpanded",t.expandAll)}},directives:[v.B,z.a,v.u,A.c,q.a,A.s,A.v,y.a,C.a,K.a,Z.a,J.a],encapsulation:2,changeDetection:0}),e})();function Se(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",5),f.Xb(1,"tr",6,7),f.jc("hourlyRateUpdated",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().hourlyRateUpdated(n,i)}))("costRateUpdated",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().costRateUpdated(n,i)}))("managerRightsUpdated",(function(i){f.Oc(e);const n=t.$implicit,s=f.Lc(2);return f.nc().updatedManagerRights(n,i,s)}))("deleteUser",(function(){f.Oc(e);const i=t.$implicit;return f.nc().deleteUser(i.id)})),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc();f.Cb(1),f.wc("user",e)("project",i.project)("workspace",i.workspace)("labels",i.labels)("isDesktop",i.isDesktop)("projectManagerIds",i.projectManagerIds)("adminIds",i.adminIds)("ownerIds",i.ownerIds)("hasEditPermission",i.hasEditPermission)("isAdminOrOwner",i.isAdminOrOwner)("canSeeRates",i.canSeeRates)("hasHistoricRatesFeature",i.hasHistoricRatesFeature)("expandAll",i.expandAll)}}let xe=(()=>{class e{constructor(e,t,i,n,s,r,o,a,c){this.browserService=e,this.workspaceService=t,this.projectService=i,this.userService=n,this.authService=s,this.projectsCommunicationService=r,this.loader=o,this.cd=a,this.systemSettingsService=c,this.membershipsUpdated=new f.n,this.managerRightsUpdated=new f.n,this.userRemoved=new f.n,this.updateProject=new f.n,this.usersNumber=new f.n,this.labels=["Name","Billable rate","Role","Edit"],this.page=1,this.limit=k.j,this.expandAll=!1,this.colspan=1,this.unsubscribe$=new P.a}set project(e){this._project=e,this.pager?this.setPagination({page:1,limit:50}):this.getUsersFromProject()}get project(){return this._project}set hasEditPermission(e){this._hasEditPermission=e,this.changeLabels()}get hasEditPermission(){return this._hasEditPermission}set canSeeRates(e){this._canSeeRates=e,this.changeLabels()}get canSeeRates(){return this._canSeeRates}ngOnInit(){this.setIsAdmin(),this.loader.showBar(),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasHistoricRatesFeature=this.workspace.hasFeature(l.a.HISTORIC_RATES),this.setBrowserWidth()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setIsAdmin(){this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.authService.permissionData$.pipe(Object(W.a)(e=>null!==e),Object(n.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.isAdminOrOwner=e,this.cd.detectChanges()})}setBrowserWidth(){this.browserService.isBreakpointLgCustom$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setPagination(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.getUsersFromProject()}hourlyRateUpdated(e,t){const i=new M.a({amount:t.amount,currency:this.workspace.hourlyRate.currency||"USD",since:t.since});this.projectService.setUsersHourlyRateForProject(this.project.id,e.id,i).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.membershipsUpdated.emit(e)})}costRateUpdated(e,t){const i=new X.a({amount:t.amount,currency:this.workspace.costRate.currency||"USD",since:t.since});this.projectService.setUsersCostRateForProject(this.project.id,e.id,i).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.membershipsUpdated.emit(e)})}updatedManagerRights(e,t,i){t?this.projectService.removePermission(this.project.id,e.id,"PROJECT_MANAGER").pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(()=>{const t=this.projectManagerIds.filter(t=>t!==e.id);this.projectManagerIds=t,this.managerRightsUpdated.emit(t)},()=>null==i?void 0:i.refreshManagePermission()):this.projectService.addPermission(this.project.id,e.id,"PROJECT_MANAGER").pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.projectManagerIds.push(e.id),this.managerRightsUpdated.emit(this.projectManagerIds)},()=>null==i?void 0:i.refreshManagePermission())}deleteUser(e){const t=this.usersOfProject.filter(t=>t.id===e)[0];this.projectService.removeUserFromProject(this.project.id,e).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(i=>{this.projectsCommunicationService.removedUserFromProject$.next(e),this.project=new o.a(i),this.usersOfProject=this.usersOfProject.filter(t=>t.id!==e),this.userRemoved.emit(t),this.updateProject.emit(i),this.cd.detectChanges()})}getUsersFromProject(){this.userService.getUsersWithCount({projectId:this.project.id,page:this.page,limit:this.limit}).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.usersOfProject=this.filterUsers(e.users),this.usersCount=e.count,this.usersNumber.emit(this.usersCount),this.loader.hide(),this.cd.detectChanges()},()=>{this.loader.hide()})}filterUsers(e){return e.filter(e=>this.workspace.memberships.filter(t=>t.userId===e.id).length)}expandAllRows(e){this.expandAll=e}changeLabels(){this.labels=this.canSeeRates&&this.hasEditPermission?["Name","Billable rate","Role","Edit"]:this.canSeeRates?["Name","Billable rate","Role"]:this.hasEditPermission?["Name","Role","Edit"]:["Name","Role"],this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(R.a),f.Rb(u.a),f.Rb(r.a),f.Rb(a.a),f.Rb(c.a),f.Rb(b.a),f.Rb(d.a),f.Rb(f.h),f.Rb(h.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-table"]],viewQuery:function(e,t){var i;1&e&&f.ed(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",projectManagerIds:"projectManagerIds",adminIds:"adminIds",ownerIds:"ownerIds",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates"},outputs:{membershipsUpdated:"membershipsUpdated",managerRightsUpdated:"managerRightsUpdated",userRemoved:"userRemoved",updateProject:"updateProject",usersNumber:"usersNumber"},decls:7,vars:11,consts:[["data-toggle-column","last",1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-9","cl-project-table-access"],["access-user-table-header","",3,"isDesktop","workspace","canSeeRates","hasLaborCostFeature","hasEditPermission","colspan","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],[1,"cl-row-hover-shadow"],["access-user-table-row","",3,"user","project","workspace","labels","isDesktop","projectManagerIds","adminIds","ownerIds","hasEditPermission","isAdminOrOwner","canSeeRates","hasHistoricRatesFeature","expandAll","hourlyRateUpdated","costRateUpdated","managerRightsUpdated","deleteUser"],["userTableRow",""]],template:function(e,t){1&e&&(f.Xb(0,"table",0),f.Xb(1,"thead"),f.Xb(2,"tr",1),f.jc("onExpandAll",(function(e){return t.expandAllRows(e)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Wc(4,Se,3,13,"div",2),f.Wb(),f.Wb(),f.Xb(5,"div",3),f.Xb(6,"pager",4),f.jc("pageChanged",(function(e){return t.setPagination(e)}))("limitChanged",(function(e){return t.setPagination(e)})),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.wc("isDesktop",t.isDesktop)("workspace",t.workspace)("canSeeRates",t.canSeeRates)("hasLaborCostFeature",t.hasHistoricRatesFeature)("hasEditPermission",t.hasEditPermission)("colspan",t.colspan),f.Cb(2),f.wc("ngForOf",t.usersOfProject),f.Cb(2),f.wc("visible",t.usersCount>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.usersCount))},directives:[U,v.t,F.a,ke],encapsulation:2,changeDetection:0}),e})();function Oe(e,t){if(1&e&&(f.Vb(0),f.Xb(1,"th",2),f.Yc(2,"Name"),f.Wb(),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.Db("colspan",e.colspan)}}function De(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",3),f.Xb(1,"div",4),f.Yc(2,"Name "),f.Xb(3,"div",5),f.Xb(4,"a",6),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(5,"span",7),f.Sb(6,"img",8),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(6),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}let Ie=(()=>{class e{constructor(){this.colspan=1,this.onExpandAll=new f.n,this.isExpandAll=!1}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-group-table-header"],["","access-user-group-table-header",""]],inputs:{isDesktop:"isDesktop",colspan:"colspan"},outputs:{onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-h5","cl-mb-0","cl-pl-lg-3"],[1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Wc(0,Oe,3,1,"ng-container",0),f.Wc(1,De,7,1,"ng-template",null,1,f.Xc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[v.u],encapsulation:2,changeDetection:0}),e})();i("Oieg");const je=["deleteModal"];function Te(e,t){1&e&&f.Tb(0)}function Ee(e,t){1&e&&f.Sb(0,"span",14)}function Ae(e,t){if(1&e&&(f.Vb(0),f.Wc(1,Ee,1,0,"span",12),f.Xb(2,"span",13),f.Yc(3),f.Wb(),f.Ub()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.userGroup.userNames),f.Cb(2),f.Zc(e.userGroup.userNames)}}function _e(e,t){if(1&e&&(f.Xb(0,"div",7),f.Xb(1,"div",8),f.Xb(2,"span",9),f.Xb(3,"span",10),f.Yc(4),f.Wb(),f.Wc(5,Ae,4,2,"ng-container",11),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.zc("title","",e.userGroup.name," - ",e.userGroup.userNames,""),f.Cb(3),f.Zc(e.userGroup.name),f.Cb(1),f.wc("ngIf",e.isDesktop)}}function We(e,t){if(1&e&&(f.Xb(0,"div",15),f.Xb(1,"div",8),f.Xb(2,"span",9),f.Xb(3,"span",10),f.Yc(4),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.xc("title",e.userGroup.userNames),f.Cb(3),f.Zc(e.userGroup.userNames)}}function Re(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",20),f.Xb(1,"div",21),f.Xb(2,"a",22),f.jc("click",(function(){f.Oc(e);const t=f.nc(2);return t.removeUserGroup(t.userGroup)})),f.Yc(3,"Remove"),f.Wb(),f.Wb(),f.Wb()}}function Pe(e,t){1&e&&(f.Xb(0,"div",16),f.Xb(1,"div",17),f.Sb(2,"img",18),f.Wb(),f.Wc(3,Re,4,0,"div",19),f.Wb())}function Me(e,t){if(1&e){const e=f.Yb();f.Xb(0,"simple-modal",23),f.jc("confirmed",(function(i){f.Oc(e);const n=t.$implicit,s=f.nc();return n.close(i),s.deleteUserGroup(s.userGroupToRemove.id)}))("close",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.Xb(1,"p",24),f.Yc(2),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.wc("title","Remove")("isDanger",!0)("btnText","Remove"),f.Cb(2),f.ad(" Once removed, ",e.userGroupToRemove.name," will no longer have access to this project and won\u2019t be able to track time for it any more. ")}}const Fe=function(e){return{labels:e}},Xe=function(e,t){return[e,t]},Le=function(e,t,i){return[e,t,i]},Ne=function(e){return[e]};let Be=(()=>{class e{constructor(e,t,i){this.projectService=e,this.modalService=t,this.cd=i,this.userGroupRemoved=new f.n,this.updateProject=new f.n,this.labels=["Name","Members","Edit"],this.unsubscribe$=new P.a}ngOnInit(){}ngAfterViewInit(){this.cd.detectChanges()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}removeUserGroup(e){this.userGroupToRemove=e,this.modalService.open(this.deleteModal,{centered:!0})}deleteUserGroup(e){const t=this.userGroupsOfProject.filter(t=>t.id===e)[0];this.projectService.removeUserGroupFromProject(this.project.id,e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(i=>{this.project=new o.a(i),this.userGroupsOfProject=this.userGroupsOfProject.filter(t=>t.id!==e),this.userGroupRemoved.emit(t),this.updateProject.emit(this.project),this.cd.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(r.a),f.Rb(g.q),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-group-table-row"],["","access-user-group-table-row",""]],viewQuery:function(e,t){var i;1&e&&f.ed(je,!0),2&e&&f.Kc(i=f.kc())&&(t.deleteModal=i.first)},inputs:{userGroup:"userGroup",isDesktop:"isDesktop",hasEditPermission:"hasEditPermission",expandAll:"expandAll",userGroupsOfProject:"userGroupsOfProject",project:"project"},outputs:{userGroupRemoved:"userGroupRemoved",updateProject:"updateProject"},decls:11,vars:19,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["deleteModal",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100"],[1,"cl-cut-text",3,"title"],[1,"cl-listing-project-client"],[1,"cl-text-dark"],[4,"ngIf"],["class","cl-h-line-divider",4,"ngIf"],[1,"cl-listing-client"],[1,"cl-h-line-divider"],[1,"cl-component-divided-left","cl-w-100","ng-star-inserted"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-end","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg","closeDropdown",""],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[3,"title","isDanger","btnText","confirmed","close"],[1,"cl-text-muted","cl-cut-text-wrap"]],template:function(e,t){if(1&e&&(f.Wc(0,Te,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.Wc(3,_e,6,4,"ng-template",null,3,f.Xc),f.Wc(5,We,5,2,"ng-template",null,4,f.Xc),f.Wc(7,Pe,4,0,"ng-template",null,5,f.Xc),f.Wc(9,Me,3,4,"ng-template",null,6,f.Xc)),2&e){const e=f.Lc(2),i=f.Lc(4),n=f.Lc(6),s=f.Lc(8);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(5,Fe,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",t.hasEditPermission?t.isDesktop?f.Cc(7,Xe,i,s):f.Dc(10,Le,i,n,s):t.isDesktop?f.Bc(14,Ne,i):f.Cc(16,Xe,i,n))("isExpanded",t.expandAll)}},directives:[v.B,z.a,v.u,y.a,C.a,K.a],encapsulation:2,changeDetection:0}),e})();function Ye(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",4),f.Xb(1,"tr",5),f.jc("userGroupRemoved",(function(t){return f.Oc(e),f.nc().userGroupRemovedPropagate(t)}))("updateProject",(function(t){return f.Oc(e),f.nc().updateProjectPropagate(t)})),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc();f.Cb(1),f.wc("userGroup",e)("isDesktop",i.isDesktop)("hasEditPermission",i.hasEditPermission)("expandAll",i.expandAll)("userGroupsOfProject",i.userGroupsOfProject)("project",i.project)}}function Ve(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",6),f.Xb(1,"pager",7),f.jc("pageChanged",(function(t){return f.Oc(e),f.nc().setPagination(t)}))("limitChanged",(function(t){return f.Oc(e),f.nc().setPagination(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(1),f.wc("visible",e.userGroupsCount>e.limit||e.limit>50)("page",e.page)("limit",e.limit)("total",e.userGroupsCount)}}let Ue=(()=>{class e{constructor(e,t,i,n,s,r,o){this.userService=e,this.userGroupService=t,this.projectService=i,this.browserService=n,this.loader=s,this.modalService=r,this.cd=o,this.userGroupRemoved=new f.n,this.updateProject=new f.n,this.groupsNumber=new f.n,this.userGroupsOfProject=[],this.page=1,this.limit=k.j,this.expandAll=!1,this.colspan=2,this.unsubscribe$=new P.a}set project(e){this._project=e,this.pager?this.setPagination({page:1,limit:50}):this.getUserGroupsFromProject()}get project(){return this._project}set hasEditPermission(e){this._hasEditPermission=e,this.checkColspan(this.isDesktop,e)}get hasEditPermission(){return this._hasEditPermission}ngOnInit(){this.loader.showBar(),this.setBrowserWidth()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setPagination(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.getUserGroupsFromProject()}setBrowserWidth(){this.browserService.isBreakpointLgCustom$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.checkColspan(e,this.hasEditPermission),this.cd.detectChanges()})}getUserGroupsFromProject(){this.userGroupService.getUserGroups({projectId:this.project.id,page:this.page,limit:this.limit}).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.userGroupsCount=e.count,this.groupsNumber.emit(this.userGroupsCount),this.getUsersFromUserGroups(e.groups),this.cd.detectChanges()},()=>{this.loader.hide()})}getUsersFromUserGroups(e){let t=[];if(e.forEach(e=>{t=[...t,...e.userIds]}),0==t.length)return this.userGroupsOfProject=e,void this.loader.hide();this.userService.getUsersByIds(Array.from(new Set(t))).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.userGroupsOfProject=e,this.userGroupsOfProject.forEach(e=>{const i=t.filter(t=>e.userIds.indexOf(t.id)>-1).map(e=>e.name);e.userNames=i&&i.length>0?i.join(", "):""}),this.loader.hide(),this.cd.detectChanges()},()=>{this.userGroupsOfProject=e,this.loader.hide(),this.cd.detectChanges()})}deleteUserGroup(e){const t=this.userGroupsOfProject.filter(t=>t.id===e)[0];this.projectService.removeUserGroupFromProject(this.project.id,e).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(i=>{this.project=new o.a(i),this.userGroupsOfProject=this.userGroupsOfProject.filter(t=>t.id!==e),this.userGroupRemoved.emit(t),this.updateProject.emit(this.project),this.cd.detectChanges()})}userGroupRemovedPropagate(e){this.userGroupRemoved.emit(e)}updateProjectPropagate(e){this.updateProject.emit(e)}expandAllRows(e){this.expandAll=e}checkColspan(e,t){this.colspan=t&&!e?3:!t&&e?1:2}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(j.a),f.Rb(r.a),f.Rb(R.a),f.Rb(d.a),f.Rb(g.q),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-group-table"]],viewQuery:function(e,t){var i;1&e&&f.ed(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",hasEditPermission:"hasEditPermission"},outputs:{userGroupRemoved:"userGroupRemoved",updateProject:"updateProject",groupsNumber:"groupsNumber"},decls:6,vars:4,consts:[["data-toggle-column","last",1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-9","cl-project-table-access-group"],["access-user-group-table-header","",3,"isDesktop","colspan","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],["class","cl-mt-2 cl-mt-lg-3",4,"ngIf"],[1,"cl-row-hover-shadow"],["access-user-group-table-row","",3,"userGroup","isDesktop","hasEditPermission","expandAll","userGroupsOfProject","project","userGroupRemoved","updateProject"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"]],template:function(e,t){1&e&&(f.Xb(0,"table",0),f.Xb(1,"thead"),f.Xb(2,"tr",1),f.jc("onExpandAll",(function(e){return t.expandAllRows(e)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Wc(4,Ye,2,6,"div",2),f.Wb(),f.Wb(),f.Wc(5,Ve,2,4,"div",3)),2&e&&(f.Cb(2),f.wc("isDesktop",t.isDesktop)("colspan",t.colspan),f.Cb(2),f.wc("ngForOf",t.userGroupsOfProject),f.Cb(1),f.wc("ngIf",t.userGroupsOfProject&&t.userGroupsOfProject.length>0))},directives:[Ie,v.t,v.u,Be,F.a],encapsulation:2,changeDetection:0}),e})();function He(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",9),f.Xb(1,"div",10),f.Xb(2,"div",11),f.Yc(3,"Visibility"),f.Wb(),f.Xb(4,"div",12),f.Yc(5),f.Wb(),f.Wb(),f.Xb(6,"div",10),f.Xb(7,"div",13),f.Xb(8,"input",14),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().project.public=t}))("ngModelChange",(function(){return f.Oc(e),f.nc().updateVisibility()})),f.Wb(),f.Xb(9,"label",15),f.Yc(10," Private "),f.Wb(),f.Wb(),f.Xb(11,"div",13),f.Xb(12,"input",16),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().project.public=t}))("ngModelChange",(function(){return f.Oc(e),f.nc().updateVisibility()})),f.Wb(),f.Xb(13,"label",17),f.Yc(14," Public "),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(5),f.ad(" ",e.project.public?"Everyone can track time on public projects.":"Only people you add to the project can track time on it."," "),f.Cb(3),f.wc("value",!1)("ngModel",e.project.public),f.Cb(4),f.wc("value",!0)("ngModel",e.project.public)}}function $e(e,t){1&e&&f.Sb(0,"hr",18)}function Ge(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",25),f.Xb(1,"checkbox-filter-dropdown",26),f.jc("emitSelected",(function(t){return f.Oc(e),f.nc(2).userDropdownClosed(t)}))("loadMore",(function(t){return f.Oc(e),f.nc(2).loadMoreUsers(t)}))("userFilterChanged",(function(t){return f.Oc(e),f.nc(2).userFilterChanged(t)}))("emitSelectionOfAllEntities",(function(t){return f.Oc(e),f.nc(2).selectedAllUsers(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("entity","team")("hasWithoutEntity",!1)("entityMap",e.teamMaps)("withoutSelected",!1)("selectedAll",e.selectAllUsers)("showSelectAll",!1)("saveSelected",!0)("queryStatus",e.queryStatus)}}function ze(e,t){1&e&&(f.Xb(0,"div",19),f.Xb(1,"div",20),f.Xb(2,"a",21),f.Sb(3,"img",22),f.Xb(4,"span",23),f.Yc(5,"Add members"),f.Wb(),f.Wb(),f.Wc(6,Ge,2,8,"div",24),f.Wb(),f.Wb())}function qe(e,t){1&e&&(f.Xb(0,"div",27),f.Xb(1,"div",28),f.Xb(2,"span",29),f.Yc(3," Users "),f.Wb(),f.Wb(),f.Wb())}function Ke(e,t){if(1&e){const e=f.Yb();f.Xb(0,"access-user-table",30),f.jc("membershipsUpdated",(function(t){return f.Oc(e),f.nc().onHourlyRateChanged(t)}))("managerRightsUpdated",(function(t){return f.Oc(e),f.nc().updatedProjectManagers(t)}))("userRemoved",(function(t){return f.Oc(e),f.nc().userRemoved(t)}))("updateProject",(function(t){return f.Oc(e),f.nc().updateProject(t)}))("usersNumber",(function(t){return f.Oc(e),f.nc().setNumberOfUsers(t)})),f.Wb()}if(2&e){const e=f.nc();f.wc("project",e.project)("projectManagerIds",e.projectManagerIds)("adminIds",e.adminIds)("ownerIds",e.ownerIds)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates)}}function Ze(e,t){1&e&&(f.Xb(0,"div",27),f.Xb(1,"div",28),f.Xb(2,"span",29),f.Yc(3," Groups "),f.Wb(),f.Wb(),f.Wb())}function Je(e,t){if(1&e){const e=f.Yb();f.Xb(0,"access-user-group-table",31),f.jc("userGroupRemoved",(function(t){return f.Oc(e),f.nc().userGroupRemoved(t)}))("updateProject",(function(t){return f.Oc(e),f.nc().updateProject(t)}))("groupsNumber",(function(t){return f.Oc(e),f.nc().setNumberOfGroups(t)})),f.Wb()}if(2&e){const e=f.nc();f.wc("project",e.project)("hasEditPermission",e.hasEditPermission)}}let Qe=(()=>{class e{constructor(e,t,i,n,r,o,a){this.userService=e,this.userGroupService=t,this.projectService=i,this.titleService=n,this.loader=r,this.uiSettingsService=o,this.cd=a,this.membershipsChanged=new f.n,this.projectManagersUpdated=new f.n,this.page=1,this.limit=k.j,this.teamMaps=[],this.selectAllUsers=!1,this.numberOfUsers=1,this.numberOfGroups=1,this.queryStatus="ACTIVE",this.userRefreshListAfterFilterChange=!1,this.unsubscribe$=new s.a}ngOnInit(){this.titleService.setCustomTitle(this.project.name+" - Access"),this.shouldShowUsers=!!this.uiSettingsService.getSettings(T.b.PROJECT_ACCESS_DATA),this.teamMaps.push(Object(O.a)("Groups",[])),this.teamMaps.push(Object(O.a)("Users",[])),this.loader.hide(),this.getUsersAndUserGroups({})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}loadMoreUsers(e){this.refreshUserList=!1,this.userRefreshListAfterFilterChange=!1,this.getUsersAndUserGroups(e)}userFilterChanged(e){this.refreshUserList=!0,this.queryStatus=e.status,this.userRefreshListAfterFilterChange=!0,this.getUsersAndUserGroups(e)}getUsersAndUserGroups(e){e.status=this.queryStatus;const t=[];t.push(Object(O.a)("Groups",[])),t.push(Object(O.a)("Users",[])),this.refreshUserList||(this.teamMaps[0].value.forEach(e=>{t[0].value.push(e)}),this.teamMaps[1].value.forEach(e=>{t[1].value.push(e)}));const i=this.project.memberships.map(e=>e.userId);("INACTIVE"===e.status?Object(D.a)([Object(I.a)(null),this.userService.getUsers(e).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$))]):Object(D.a)([this.userGroupService.getUserGroups(e).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)),this.userService.getUsers(e).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$))])).subscribe(([e,n])=>{if(e){const n=e.groups.filter(e=>-1===i.indexOf(e.id)&&"Admins"!==e.name).map(e=>new x.a(e));t[0].value=[...t[0].value,...n]}else t[0].value=[];if(n){const e=n.filter(e=>-1===i.indexOf(e.id)).map(e=>new x.a(e));t[1].value=[...t[1].value,...e]}this.teamMaps=t,this.cd.detectChanges()})}setNumberOfGroups(e){this.numberOfGroups=e}setNumberOfUsers(e){this.numberOfUsers=e}userDropdownClosed(e){const t=!!e.entities[0]&&e.entities[0].value.some(e=>e.selected),i=!!e.entities[1]&&e.entities[1].value.some(e=>e.selected);if(!t&&!i)return this.refreshUserList=!0,this.userFilterChanged({status:this.queryStatus}),void(this.userRefreshListAfterFilterChange=!1);const s=!e.name&&e.selectedAll,r=e.entities[0].value.filter(e=>e.selected===!s);this.numberOfGroups+=r.length;const o=e.entities[1].value.filter(e=>e.selected===!s);this.numberOfUsers+=o.length;const a=r.map(e=>e.entity.id),c=o.map(e=>e.entity.id);this.projectService.addUsersAndUserGroupsToProject(this.project.id,c,a,s).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.project=e,this.membershipsChanged.emit(e),this.refreshUserList=!0,this.userFilterChanged({status:this.queryStatus}),this.userRefreshListAfterFilterChange=!1})}onHourlyRateChanged(e){this.project.memberships=e.memberships,this.membershipsChanged.emit(e)}updatedProjectManagers(e){this.projectManagerIds=e,this.projectManagersUpdated.emit(e)}showUsers(e){this.shouldShowUsers=e,this.setLocalStorageSettings(),this.cd.detectChanges()}updateVisibility(){this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe()}userRemoved(e){this.userFilterChanged({status:this.queryStatus})}userGroupRemoved(e){this.userFilterChanged({status:this.queryStatus})}selectedAllUsers(e){this.selectAllUsers=e}updateProject(e){this.project=o.a.clone(e),this.membershipsChanged.emit(e)}setLocalStorageSettings(){this.uiSettingsService.setSettings(T.b.PROJECT_ACCESS_DATA,this.shouldShowUsers)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(j.a),f.Rb(r.a),f.Rb(E.a),f.Rb(d.a),f.Rb(T.a),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-access"]],inputs:{project:"project",projectManagerIds:"projectManagerIds",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates",adminIds:"adminIds",ownerIds:"ownerIds"},outputs:{membershipsChanged:"membershipsChanged",projectManagersUpdated:"projectManagersUpdated"},decls:10,vars:7,consts:[["id","project-access","role","tabpanel",1,"cl-tab-pane","cl-active"],["class","cl-form-row",4,"ngIf"],["class","cl-mt-0",4,"ngIf"],[1,"cl-pb-2","cl-pb-lg-3"],[1,"cl-row","cl-align-items-center","cl-justify-content-between"],["class","cl-col cl-d-flex",4,"ngIf"],["class","cl-card cl-border-bottom-0 cl-mb-0",4,"ngIf"],[3,"project","projectManagerIds","adminIds","ownerIds","hasEditPermission","canSeeRates","membershipsUpdated","managerRightsUpdated","userRemoved","updateProject","usersNumber",4,"ngIf"],[3,"project","hasEditPermission","userGroupRemoved","updateProject","groupsNumber",4,"ngIf"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12"],[1,"cl-h2","cl-mb-0"],[1,"cl-text-gray-9","cl-w-lg-75"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","customRadioInline4-1","name","customRadioInline4",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline4-1",1,"cl-custom-control-label"],["type","radio","id","customRadioInline4-2","name","customRadioInline4",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline4-2",1,"cl-custom-control-label"],[1,"cl-mt-0"],[1,"cl-col","cl-d-flex"],["dropdown","",1,"cl-dropdown","cl-dropdown-large","cl-d-inline-flex","cl-align-items-center","cl-justify-content-end"],["closeDropdown","","id","dropdownMenuButton",1,"cl-d-flex","cl-color-blue","cl-py-2"],["src","assets/images/ui-icons/plus-blue.svg"],["closeDropdown","",1,"cl-ml-2"],["class","cl-dropdown-menu cl-prevent-close",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-prevent-close"],[3,"entity","hasWithoutEntity","entityMap","withoutSelected","selectedAll","showSelectAll","saveSelected","queryStatus","emitSelected","loadMore","userFilterChanged","emitSelectionOfAllEntities"],[1,"cl-card","cl-border-bottom-0","cl-mb-0"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],[3,"project","projectManagerIds","adminIds","ownerIds","hasEditPermission","canSeeRates","membershipsUpdated","managerRightsUpdated","userRemoved","updateProject","usersNumber"],[3,"project","hasEditPermission","userGroupRemoved","updateProject","groupsNumber"]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Wc(1,He,15,5,"div",1),f.Wc(2,$e,1,0,"hr",2),f.Xb(3,"div",3),f.Xb(4,"div",4),f.Wc(5,ze,7,0,"div",5),f.Wb(),f.Wb(),f.Wc(6,qe,4,0,"div",6),f.Wc(7,Ke,1,6,"access-user-table",7),f.Wc(8,Ze,4,0,"div",6),f.Wc(9,Je,1,2,"access-user-group-table",8),f.Wb()),2&e&&(f.Cb(1),f.wc("ngIf",t.hasEditPermission),f.Cb(1),f.wc("ngIf",t.hasEditPermission),f.Cb(3),f.wc("ngIf",t.hasEditPermission),f.Cb(1),f.wc("ngIf",t.numberOfUsers>0),f.Cb(1),f.wc("ngIf",t.numberOfUsers>0),f.Cb(1),f.wc("ngIf",t.numberOfGroups>0),f.Cb(1),f.wc("ngIf",t.numberOfGroups>0))},directives:[v.u,A.A,A.c,A.s,A.v,y.a,C.a,_.a,xe,Ue],encapsulation:2,changeDetection:0}),e})();var et=i("wd/R"),tt=i("Cpkn"),it=i("wkZx"),nt=i("G4ky"),st=i("KnX9"),rt=i("wlsK"),ot=i("tnjF"),at=i("jy+1"),ct=i("rsZi"),lt=function(e){return e.NAME="NAME",e.STATUS="STATUS",e.PROGRESS="PROGRESS",e.EARNING="EARNING",e.ESTIMATE="ESTIMATE",e.BUDGET_ESTIMATE="BUDGET_ESTIMATE",e}({});function ut(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",7),f.Xb(1,"div",8),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.NAME)})),f.Yc(3,"Name"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.DESCENDING)}}function dt(e,t){1&e&&(f.Xb(0,"th"),f.Xb(1,"div",10),f.Xb(2,"div",11),f.Yc(3,"Assignees"),f.Wb(),f.Wb(),f.Wb())}function ht(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",12),f.Xb(1,"div",13),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.EARNING)})),f.Yc(3,"Amount"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.EARNING&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.EARNING&&e.sortOrder===e.SortOrder.DESCENDING)}}function pt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th"),f.Xb(1,"div",10),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.STATUS)})),f.Yc(3,"Tracked"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.DESCENDING)}}function bt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th"),f.Xb(1,"div",10),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.STATUS)})),f.Yc(3,"Status "),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.DESCENDING)}}function ft(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th"),f.Xb(1,"div",14),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.PROGRESS)})),f.Yc(3,"Progress"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.DESCENDING)}}function mt(e,t){1&e&&(f.Vb(0,3),f.Wc(1,ut,4,4,"th",4),f.Wc(2,dt,4,0,"th",5),f.Wc(3,ht,4,4,"th",6),f.Wc(4,pt,4,4,"th",5),f.Wc(5,bt,4,4,"th",5),f.Wc(6,ft,4,4,"th",5),f.Ub()),2&e&&(f.wc("ngSwitch",t.$implicit),f.Cb(1),f.wc("ngSwitchCase","Name"),f.Cb(1),f.wc("ngSwitchCase","Assignee"),f.Cb(1),f.wc("ngSwitchCase","Amount"),f.Cb(1),f.wc("ngSwitchCase","Tracked"),f.Cb(1),f.wc("ngSwitchCase","Status"),f.Cb(1),f.wc("ngSwitchCase","Progress"))}function gt(e,t){if(1&e&&(f.Vb(0),f.Wc(1,mt,7,7,"ng-container",2),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.wc("ngForOf",e.labels)}}function vt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",15),f.Xb(1,"div",16),f.Yc(2,"Name "),f.Xb(3,"div",8),f.Xb(4,"a",17),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(5,"span",18),f.Sb(6,"img",19),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(6),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}let wt=(()=>{class e{constructor(){this.onChangeSortOrder=new f.n,this.onChangeSortColumn=new f.n,this.onExpandAll=new f.n,this.isExpandAll=!1,this.EstimateType=nt.a,this.SortBy=lt,this.SortOrder=ct.a}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}changeSort(e){e!==this.sortBy?this.onChangeSortColumn.emit(e):this.onChangeSortOrder.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["status-tasks-table-header"],["","status-tasks-table-header",""]],inputs:{isDesktop:"isDesktop",currency:"currency",sortBy:"sortBy",sortOrder:"sortOrder",estimateType:"estimateType",labels:"labels"},outputs:{onChangeSortOrder:"onChangeSortOrder",onChangeSortColumn:"onChangeSortColumn",onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","cl-h6 cl-mb-0 cl-pl-lg-3",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","cl-text-right",4,"ngSwitchCase"],[1,"cl-h6","cl-mb-0","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex",3,"click"],[1,"cl-ml-lg-custom-n2"],[1,"cl-h5","cl-mb-0"],[1,"cl-text-right"],[1,"cl-mr-lg-custom-n2"],[1,"cl-d-flex"],["colspan","5",1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Wc(0,gt,2,1,"ng-container",0),f.Wc(1,vt,7,1,"ng-template",null,1,f.Xc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[v.u,v.t,v.y,v.z],encapsulation:2,changeDetection:0}),e})();var yt=i("bzkB"),Ct=i("rg2B");function kt(e,t){1&e&&f.Tb(0)}function St(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xb(1,"div",11),f.Yc(2),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.Vc("text-decoration","DONE"===e.task.status?"line-through":"none"),f.xc("title",e.task.name),f.Cb(1),f.ad(" ",e.task.name," ")}}function xt(e,t){if(1&e&&(f.Xb(0,"div",12),f.Xb(1,"div",11),f.Yc(2),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.xc("title",e.task.assigneeIds&&e.task.assigneeIds.length>0?e.task.assigneeNames:"Anyone"),f.Cb(1),f.ad(" ",e.task.assigneeIds&&e.task.assigneeIds.length>0?e.task.assigneeNames:"Anyone"," ")}}function Ot(e,t){if(1&e&&(f.Xb(0,"div",16),f.Yc(1),f.oc(2,"roundIfWholeNumber"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.bd(" of ",f.qc(2,2,e.estimate,2),"",e.isTimeEstimate?"h":" "+e.currency," ")}}function Dt(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xb(1,"div"),f.Xb(2,"div",14),f.Yc(3),f.oc(4,"roundIfWholeNumber"),f.Wb(),f.Wc(5,Ot,3,5,"div",15),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(3),f.bd(" ",f.qc(4,3,e.isTimeEstimate?e.tracked:e.task.earning,2),"",e.isTimeEstimate?"h":" "+e.currency," "),f.Cb(2),f.wc("ngIf",e.estimate)}}function It(e,t){if(1&e&&(f.Xb(0,"div",19),f.Sb(1,"percentage-progress-bar",20),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("percentage",e.task.progress)("showPercentageOutsideOfProgress",!0)}}function jt(e,t){1&e&&(f.Xb(0,"div",19),f.Xb(1,"div"),f.Yc(2,"-"),f.Wb(),f.Wb())}function Tt(e,t){if(1&e&&(f.Wc(0,It,2,2,"div",17),f.Wc(1,jt,3,0,"ng-template",null,18,f.Xc)),2&e){const e=f.Lc(2),t=f.nc();f.wc("ngIf",t.task.progress)("ngIfElse",e)}}function Et(e,t){if(1&e&&(f.Xb(0,"div",12),f.Yc(1),f.oc(2,"roundIfWholeNumber"),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.ad(" ",f.pc(2,1,e.tracked),"h ")}}function At(e,t){if(1&e&&(f.Xb(0,"div",22),f.Yc(1),f.oc(2,"roundIfWholeNumber"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.bd(" ",f.qc(2,2,e.task.earning,0)," "," "+e.currency," ")}}function _t(e,t){if(1&e&&f.Wc(0,At,3,5,"div",21),2&e){const e=f.nc();f.wc("ngIf",e.canSeeRates)}}function Wt(e,t){1&e&&f.Sb(0,"div",23)}const Rt=function(e){return{labels:e}},Pt=function(e,t,i,n,s,r,o){return[e,t,i,n,s,r,o]};let Mt=(()=>{class e{constructor(e){this.cd=e,this.EstimateType=nt.a}set allAssigneesOfProject(e){e&&(this._allAssigneesOfProject=e||[],this.addAssigneeNames())}get allAssigneesOfProject(){return this._allAssigneesOfProject}ngAfterViewInit(){this.isTimeEstimate=this.estimateType===nt.a.TIME_ESTIMATE;const e=Object(et.duration)(this.task.duration);this.tracked=e.asHours(),this.setEstimateAndPercentage(),this.cd.detectChanges()}addAssigneeNames(){if(!this.task.assigneeIds)return void(this.task.assigneeNames="");const e=this.allAssigneesOfProject.filter(e=>this.task.assigneeIds.indexOf(e.id)>-1).map(e=>e.name);e.sort(Object(at.c)(e=>e,!1)),this.task.assigneeNames=e.join(", "),this.cd.detectChanges()}setEstimateAndPercentage(){if(this.isTimeEstimate){const e=Object(et.duration)(this.task.estimate);this.estimate=e.asHours()}else this.estimate=this.task.budgetEstimate}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["status-tasks-table-row"],["","status-tasks-table-row",""]],inputs:{task:"task",allAssigneesOfProject:"allAssigneesOfProject",labels:"labels",isDesktop:"isDesktop",currency:"currency",canSeeRates:"canSeeRates",hideProgressColumn:"hideProgressColumn",expandAll:"expandAll",estimateType:"estimateType",taskColumns:"taskColumns"},decls:18,vars:23,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["col6",""],["dummyCol2",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100","cl-pr-3"],[1,"cl-cut-text","cl-text-dark",3,"title"],[1,"cl-component-divided-left","cl-w-100"],[1,"cl-component-divided-left","cl-d-flex","cl-my-auto"],[1,"cl-text-dark"],["class","cl-text-gray-9 cl-small",4,"ngIf"],[1,"cl-text-gray-9","cl-small"],["class","cl-px-2 cl-component-divided-left cl-w-100",4,"ngIf","ngIfElse"],["noEstimate",""],[1,"cl-px-2","cl-component-divided-left","cl-w-100"],[1,"cl-w-100",3,"percentage","showPercentageOutsideOfProgress"],["class","cl-px-3 cl-d-flex cl-justify-content-center cl-justify-content-lg-end cl-text-dark cl-text-center cl-text-lg-right",4,"ngIf"],[1,"cl-px-3","cl-d-flex","cl-justify-content-center","cl-justify-content-lg-end","cl-text-dark","cl-text-center","cl-text-lg-right"],[1,"cl-px-3","cl-d-flex"]],template:function(e,t){if(1&e&&(f.Wc(0,kt,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.oc(3,"columnDecider"),f.Wc(4,St,3,4,"ng-template",null,3,f.Xc),f.Wc(6,xt,3,2,"ng-template",null,4,f.Xc),f.Wc(8,Dt,6,6,"ng-template",null,5,f.Xc),f.Wc(10,Tt,3,2,"ng-template",null,6,f.Xc),f.Wc(12,Et,3,3,"ng-template",null,7,f.Xc),f.Wc(14,_t,1,1,"ng-template",null,8,f.Xc),f.Wc(16,Wt,1,0,"ng-template",null,9,f.Xc)),2&e){const e=f.Lc(2),i=f.Lc(5),n=f.Lc(7),s=f.Lc(9),r=f.Lc(11),o=f.Lc(13),a=f.Lc(15);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(13,Rt,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",f.tc(3,5,f.Hc(15,Pt,t.taskColumns,i,n,s,r,o,a)))("isExpanded",t.expandAll)}},directives:[v.B,z.a,v.u,st.a],pipes:[yt.a,Ct.a],encapsulation:2,changeDetection:0}),e})();var Ft=i("6yyQ");function Xt(e,t){if(1&e&&(f.Xb(0,"div",5),f.Sb(1,"tr",6),f.Wb()),2&e){const e=t.$implicit,i=f.nc();f.Cb(1),f.wc("task",e)("isDesktop",i.isDesktop)("labels",i.labels)("currency",i.currency)("taskColumns",i.taskColumns)("expandAll",i.expandAll)("estimateType",i.project.estimateType)("allAssigneesOfProject",i.allAssigneesOfProject)("canSeeRates",i.canSeeRates)("hideProgressColumn",i.hideProgressColumn)}}let Lt=(()=>{class e{constructor(e,t){this.browserService=e,this.cd=t,this.EstimateType=nt.a,this.page=1,this.limit=k.j,this.sortBy=lt.NAME,this.sortOrder=ct.a.ASCENDING,this.expandAll=!1,this.unsubscribe$=new P.a}ngOnInit(){this.setBrowserWidth(),this.mapper=e=>e.name.toLowerCase(),this.tasks=this.project.tasks.sort(Object(at.a)(this.mapper,!1)),this.tasks.forEach(e=>{e.earning=this.projectStatus.taskStatus[e.id]?this.projectStatus.taskStatus[e.id].totalAmount/100:0}),this.tasks.forEach(e=>{e.duration=this.projectStatus.taskStatus[e.id]?Object(et.duration)(Object(et.duration)(this.projectStatus.taskStatus[e.id].billable).asMilliseconds()+Object(et.duration)(this.projectStatus.taskStatus[e.id].nonBillable).asMilliseconds()):Object(et.duration)(0)}),this.hideProgressColumn=this.project.estimateType===nt.a.NO_ESTIMATE||(this.project.estimateType===nt.a.TIME_ESTIMATE?"MANUAL"===this.project.timeEstimate.type:"MANUAL"===this.project.budgetEstimate.type),this.setLabelsAndColumns(),this.checksForWithoutTask()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngAfterViewInit(){this.cd.detectChanges()}setBrowserWidth(){this.browserService.isBreakpointLg$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setPagination(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.cd.detectChanges()}sortTasksByName(){this.mapper=e=>e.name.toLowerCase(),this.sortTasks()}sortTasksByStatus(){this.mapper=e=>Object(et.duration)(e.duration).asHours(),this.sortTasks()}sortTasksByProgress(){this.mapper=this.project.estimateType===nt.a.TIME_ESTIMATE?e=>Object(et.duration)(e.estimate).asHours()?100*Object(et.duration)(e.duration).asHours()/Object(et.duration)(e.estimate).asHours():0:e=>e.budgetEstimate?100*e.earning/e.budgetEstimate:0,this.sortTasks()}sortTasksByEarning(){this.mapper=e=>e.earning,this.sortTasks()}sortTasks(){this.tasks=[...this.project.tasks.sort(Object(at.a)(this.mapper,this.sortOrder===ct.a.DESCENDING))],this.cd.detectChanges()}checksForWithoutTask(){this.project.tasks.some(e=>"without"===e.id)&&this.project.tasks.pop();const e=Object(et.duration)(Object(et.duration)(this.projectStatus.nonBillable).asMilliseconds()+Object(et.duration)(this.projectStatus.billable).asMilliseconds()).asMilliseconds();let t=0;for(var i=0;i<this.project.tasks.length;i++)t+=Object(et.duration)(this.project.tasks[i].duration).asMilliseconds();const n=e-t;if(n>0){const e=new ot.a({id:"without",name:"Without task",duration:Object(et.duration)(n),assigneeIds:[],earning:this.projectStatus.totalAmount-this.tasks.map(e=>e.earning).reduce((e,t)=>e+t,0)});this.project.tasks.push(e)}}changeSortOrder(){this.sortOrder=this.sortOrder===ct.a.ASCENDING?ct.a.DESCENDING:ct.a.ASCENDING,this.sortTasks()}changeSortColumn(e){this.sortBy=e,this.sortOrder=ct.a.ASCENDING,this.sortBy===lt.NAME?this.sortTasksByName():this.sortBy===lt.STATUS?this.sortTasksByStatus():this.sortBy===lt.PROGRESS?this.sortTasksByProgress():this.sortBy===lt.EARNING&&this.sortTasksByEarning()}expandAllRows(e){this.expandAll=e}setLabelsAndColumns(){this.labels=["Name","Assignee"],this.taskColumns=["col1","col2"],this.project.estimateType===nt.a.TIME_ESTIMATE?this.canSeeRates&&(this.labels.push("Amount"),this.taskColumns.push("col6")):(this.labels.push("Tracked"),this.taskColumns.push("col5")),this.hideProgressColumn?this.project.estimateType===nt.a.TIME_ESTIMATE?(this.labels.push("Tracked"),this.taskColumns.push("col5")):this.canSeeRates&&(this.labels.push("Amount"),this.taskColumns.push("col6")):((this.canSeeRates||this.project.estimateType!==nt.a.PROJECT_BUDGET)&&(this.labels.push("Status"),this.taskColumns.push("col3")),this.labels.push("Progress"),this.taskColumns.push("col4"))}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(R.a),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["status-tasks-table"]],viewQuery:function(e,t){var i;1&e&&f.ed(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",projectStatus:"projectStatus",currency:"currency",allAssigneesOfProject:"allAssigneesOfProject",canSeeRates:"canSeeRates"},decls:8,vars:15,consts:[[1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-project-table-status-tasks"],["status-tasks-table-header","",3,"sortOrder","sortBy","isDesktop","currency","estimateType","labels","onChangeSortOrder","onChangeSortColumn","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],[1,"cl-row-hover-shadow"],["status-tasks-table-row","",1,"cl-text-gray-9",3,"task","isDesktop","labels","currency","taskColumns","expandAll","estimateType","allAssigneesOfProject","canSeeRates","hideProgressColumn"]],template:function(e,t){1&e&&(f.Xb(0,"table",0),f.Xb(1,"thead"),f.Xb(2,"tr",1),f.jc("onChangeSortOrder",(function(){return t.changeSortOrder()}))("onChangeSortColumn",(function(e){return t.changeSortColumn(e)}))("onExpandAll",(function(e){return t.expandAllRows(e)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Wc(4,Xt,2,10,"div",2),f.oc(5,"paginate"),f.Wb(),f.Wb(),f.Xb(6,"div",3),f.Xb(7,"pager",4),f.jc("pageChanged",(function(e){return t.setPagination(e)}))("limitChanged",(function(e){return t.setPagination(e)})),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.wc("sortOrder",t.sortOrder)("sortBy",t.sortBy)("isDesktop",t.isDesktop)("currency",t.currency)("estimateType",t.project.estimateType)("labels",t.labels),f.Cb(2),f.wc("ngForOf",f.rc(5,11,t.tasks,t.page,t.limit)),f.Cb(3),f.wc("visible",t.project.tasks.length>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.project.tasks.length))},directives:[wt,v.t,F.a,Mt],pipes:[Ft.a],encapsulation:2,changeDetection:0}),e})();var Nt=i("87RK");function Bt(e,t){1&e&&(f.Xb(0,"div",14),f.Yc(1,"Remaining"),f.Wb())}function Yt(e,t){1&e&&(f.Xb(0,"div",14),f.Yc(1,"Overage"),f.Wb())}function Vt(e,t){if(1&e&&(f.Xb(0,"div",13),f.Wc(1,Bt,2,0,"div",18),f.Wc(2,Yt,2,0,"div",18),f.Xb(3,"div",15),f.Yc(4),f.oc(5,"roundIfWholeNumber"),f.oc(6,"simpleAbs"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(1),f.wc("ngIf",e.remaining>0),f.Cb(1),f.wc("ngIf",e.remaining<0),f.Cb(2),f.ad(" ",f.qc(5,3,f.pc(6,6,e.remaining),2)," h ")}}function Ut(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Xb(2,"div",13),f.Xb(3,"div",14),f.Yc(4,"Amount"),f.Wb(),f.Xb(5,"div",15),f.Yc(6),f.oc(7,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(6),f.bd(" ",f.qc(7,2,e.projectStatus.totalAmount,2)," ",e.currency," ")}}function Ht(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xb(1,"div",11),f.Xb(2,"div",12),f.Xb(3,"div",13),f.Xb(4,"div",14),f.Yc(5,"Time estimate"),f.Wb(),f.Xb(6,"div",15),f.Yc(7),f.oc(8,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(9,"hr"),f.Wc(10,Vt,7,8,"div",16),f.Xb(11,"div",13),f.Xb(12,"div",14),f.Yc(13,"Tracked"),f.Wb(),f.Xb(14,"div",15),f.Yc(15),f.oc(16,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(17,"hr"),f.Xb(18,"div",13),f.Xb(19,"div",14),f.Yc(20,"Billable"),f.Wb(),f.Xb(21,"div",15),f.Yc(22),f.oc(23,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Xb(24,"div",13),f.Xb(25,"div",14),f.Yc(26,"Non-billable"),f.Wb(),f.Xb(27,"div",15),f.Yc(28),f.oc(29,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wc(30,Ut,8,5,"div",17),f.Wb()),2&e){const e=f.nc(2);f.Cb(7),f.ad(" ",f.qc(8,6,e.projectEstimate,2)," h "),f.Cb(3),f.wc("ngIf",0!=e.remaining),f.Cb(5),f.ad(" ",f.qc(16,9,e.tracked,2)," h "),f.Cb(7),f.ad(" ",f.qc(23,12,e.billable,2)," h "),f.Cb(6),f.ad(" ",f.qc(29,15,e.nonBillable,2)," h "),f.Cb(2),f.wc("ngIf",e.canSeeRates)}}function $t(e,t){1&e&&(f.Xb(0,"div",14),f.Yc(1,"Remaining"),f.Wb())}function Gt(e,t){1&e&&(f.Xb(0,"div",14),f.Yc(1,"Overage"),f.Wb())}function zt(e,t){if(1&e&&(f.Xb(0,"div",13),f.Wc(1,$t,2,0,"div",18),f.Wc(2,Gt,2,0,"div",18),f.Xb(3,"div",15),f.Yc(4),f.oc(5,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(4);f.Cb(1),f.wc("ngIf",e.remaining>0),f.Cb(1),f.wc("ngIf",e.remaining<0),f.Cb(2),f.bd(" ",f.qc(5,4,e.remaining,2)," ",e.currency," ")}}function qt(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Xb(2,"div",13),f.Xb(3,"div",14),f.Yc(4,"Project budget"),f.Wb(),f.Xb(5,"div",15),f.Yc(6),f.oc(7,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(8,"hr"),f.Wc(9,zt,6,7,"div",16),f.Xb(10,"div",13),f.Xb(11,"div",14),f.Yc(12,"Amount"),f.Wb(),f.Xb(13,"div",15),f.Yc(14),f.oc(15,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(6),f.bd(" ",f.qc(7,5,e.projectEstimate,2)," ",e.currency," "),f.Cb(3),f.wc("ngIf",0!=e.remaining),f.Cb(5),f.bd(" ",f.qc(15,8,e.projectStatus.totalAmount,2)," ",e.currency," ")}}function Kt(e,t){if(1&e&&(f.Xb(0,"div",10),f.Wc(1,qt,16,11,"div",17),f.Xb(2,"div",11),f.Xb(3,"div",12),f.Xb(4,"div",13),f.Xb(5,"div",14),f.Yc(6,"Tracked"),f.Wb(),f.Xb(7,"div",15),f.Yc(8),f.oc(9,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(10,"hr"),f.Xb(11,"div",13),f.Xb(12,"div",14),f.Yc(13,"Billable"),f.Wb(),f.Xb(14,"div",15),f.Yc(15),f.oc(16,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Xb(17,"div",13),f.Xb(18,"div",14),f.Yc(19,"Non-billable"),f.Wb(),f.Xb(20,"div",15),f.Yc(21),f.oc(22,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.canSeeRates),f.Cb(7),f.ad(" ",f.qc(9,4,e.tracked,2)," h "),f.Cb(7),f.ad(" ",f.qc(16,7,e.billable,2)," h "),f.Cb(6),f.ad(" ",f.qc(22,10,e.nonBillable,2)," h ")}}function Zt(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Xb(2,"div",13),f.Xb(3,"div",14),f.Yc(4,"Amount"),f.Wb(),f.Xb(5,"div",15),f.Yc(6),f.oc(7,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(6),f.bd(" ",f.qc(7,2,e.projectStatus.totalAmount,2)," ",e.currency," ")}}function Jt(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xb(1,"div",11),f.Xb(2,"div",12),f.Xb(3,"div",13),f.Xb(4,"div",14),f.Yc(5,"Tracked"),f.Wb(),f.Xb(6,"div",15),f.Yc(7),f.oc(8,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(9,"hr"),f.Xb(10,"div",13),f.Xb(11,"div",14),f.Yc(12,"Billable"),f.Wb(),f.Xb(13,"div",15),f.Yc(14),f.oc(15,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Xb(16,"div",13),f.Xb(17,"div",14),f.Yc(18,"Non-billable"),f.Wb(),f.Xb(19,"div",15),f.Yc(20),f.oc(21,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wc(22,Zt,8,5,"div",17),f.Wb()),2&e){const e=f.nc(2);f.Cb(7),f.ad(" ",f.qc(8,4,e.tracked,2)," h "),f.Cb(7),f.ad(" ",f.qc(15,7,e.billable,2)," h "),f.Cb(6),f.ad(" ",f.qc(21,10,e.nonBillable,2)," h "),f.Cb(2),f.wc("ngIf",e.canSeeRates)}}function Qt(e,t){if(1&e&&(f.Xb(0,"div"),f.Sb(1,"percentage-progress-bar",19),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("percentage",e.projectStatus.progress)("showPercentageOutsideOfProgress",!0)("centerText",!0)}}function ei(e,t){1&e&&(f.Xb(0,"div",27),f.Sb(1,"span",32),f.Xb(2,"span",29),f.Yc(3,"Remaining"),f.Wb(),f.Wb())}function ti(e,t){if(1&e&&(f.Xb(0,"div",26),f.Xb(1,"div",27),f.Sb(2,"span",28),f.Xb(3,"span",29),f.Yc(4,"Billable"),f.Wb(),f.Wb(),f.Xb(5,"div",27),f.Sb(6,"span",30),f.Xb(7,"span",29),f.Yc(8,"Non-billable"),f.Wb(),f.Wb(),f.Wc(9,ei,4,0,"div",31),f.Wb()),2&e){const e=f.nc(4);f.Cb(9),f.wc("ngIf",e.projectEstimate&&e.remaining>0)}}function ii(e,t){1&e&&(f.Xb(0,"div",27),f.Sb(1,"span",32),f.Xb(2,"span",29),f.Yc(3,"Remaining"),f.Wb(),f.Wb())}function ni(e,t){if(1&e&&(f.Xb(0,"div",26),f.Xb(1,"div",27),f.Sb(2,"span",28),f.Xb(3,"span",29),f.Yc(4,"Amount"),f.Wb(),f.Wb(),f.Wc(5,ii,4,0,"div",31),f.Wb()),2&e){const e=f.nc(4);f.Cb(5),f.wc("ngIf",e.remaining>0)}}function si(e,t){if(1&e&&(f.Xb(0,"div",23),f.Sb(1,"doughnut-chart",24),f.oc(2,"roundIfWholeNumber"),f.oc(3,"roundIfWholeNumber"),f.Wc(4,ti,10,1,"div",25),f.Wc(5,ni,6,1,"div",25),f.Wb()),2&e){const e=f.nc(3);f.Cb(1),f.wc("doughnutChart",e.pieChartValues)("doughnutChartColors",e.doughnutChartColors)("doughnutChartData",e.doughnutChartData)("doughnutChartLabels",e.doughnutChartLabels)("currency",e.currency)("format",e.format)("totalTime",e.project.estimateType===e.EstimateType.PROJECT_BUDGET?e.isNoEstimate?"":f.qc(2,15,e.projectStatus.totalAmount,2)+" "+e.currency:f.qc(3,18,e.totalTime,2)+" h")("asString",!0)("canSeeRates",e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&!e.isNoEstimate)("hideDuration",e.project.estimateType===e.EstimateType.PROJECT_BUDGET)("isBillabilityType",!0)("noTooltip",e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&!e.canSeeRates)("tooltipToLeft",!1),f.Cb(3),f.wc("ngIf",e.project.estimateType===e.EstimateType.TIME_ESTIMATE||e.project.estimateType===e.EstimateType.NO_ESTIMATE),f.Cb(1),f.wc("ngIf",e.project.estimateType===e.EstimateType.PROJECT_BUDGET)}}function ri(e,t){if(1&e&&(f.Xb(0,"div",20),f.Xb(1,"div",21),f.Wc(2,si,6,21,"div",22),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(2),f.wc("ngIf",e.pieChartValues)}}function oi(e,t){if(1&e&&(f.Xb(0,"div",33),f.Xb(1,"div",34),f.Xb(2,"div",35),f.Xb(3,"span",36),f.Yc(4,"Tasks"),f.Wb(),f.Wb(),f.Wb(),f.Sb(5,"status-tasks-table",37),f.Wb()),2&e){const e=f.nc(2);f.Cb(5),f.wc("project",e.project)("projectStatus",e.projectStatus)("currency",e.currency)("allAssigneesOfProject",e.allAssigneesOfProject)("canSeeRates",e.canSeeRates)}}function ai(e,t){if(1&e&&(f.Xb(0,"div",1),f.Xb(1,"div",2),f.Wc(2,Ht,31,18,"div",3),f.Wc(3,Kt,23,13,"div",3),f.Wc(4,Jt,23,13,"div",3),f.Xb(5,"div",4),f.Xb(6,"div",5),f.Xb(7,"div",6),f.Wc(8,Qt,2,3,"div",7),f.Wc(9,ri,3,1,"div",8),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wc(10,oi,6,5,"div",9),f.Wb()),2&e){const e=f.nc();f.Cb(2),f.wc("ngIf",e.project.estimateType===e.EstimateType.TIME_ESTIMATE&&!e.isNoEstimate),f.Cb(1),f.wc("ngIf",e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&!e.isNoEstimate),f.Cb(1),f.wc("ngIf",e.project.estimateType===e.EstimateType.NO_ESTIMATE||e.isNoEstimate),f.Cb(4),f.wc("ngIf",e.project.progress),f.Cb(1),f.wc("ngIf",e.pieChartValues),f.Cb(1),f.wc("ngIf",e.project.tasks)}}let ci=(()=>{class e{constructor(e,t,i,n,s,r){this.workspaceService=e,this.userService=t,this.projectService=i,this.titleService=n,this.loader=s,this.cd=r,this.EstimateType=nt.a,this.doughnutChartColors=[{backgroundColor:["#E4EAEE","#AED581","#8BC34A"],hoverBackgroundColor:["#E4EAEE","#AED581","#8BC34A"]}],this.unsubscribe$=new P.a}ngOnInit(){this.projectService.getProjectStatus(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.projectService.getProject(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=new o.a(t),this.projectStatus=new tt.a(e),this.titleService.setCustomTitle(this.project.name+" - Status");const i=this.workspaceService.getLocalDefaultWorkspace();this.format=i.getTimeFormat(),this.currency=i.hourlyRate.currency||"USD",this.project.estimateType===nt.a.TIME_ESTIMATE&&this.getTimeEstimate(),this.project.estimateType===nt.a.PROJECT_BUDGET&&this.getProjectBudget(),this.totalTime=Object(et.duration)(this.projectStatus.billable).asHours()+Object(et.duration)(this.projectStatus.nonBillable).asHours(),this.tracked=this.totalTime,this.billable=Object(et.duration)(this.projectStatus.billable).asHours(),this.nonBillable=Object(et.duration)(this.projectStatus.nonBillable).asHours(),this.setIsNoEstimate(),this.calculateRemaining(),this.fillPieChart(),this.getTaskAssigneesOfProject(),this.cd.detectChanges(),this.cd.detectChanges()})})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}fillPieChart(){if(this.pieChartValues=[],this.project.estimateType===nt.a.PROJECT_BUDGET)this.doughnutChartData=[this.remaining>0?this.remaining:0,0,this.isNoEstimate?this.projectStatus.progress:this.projectStatus.totalAmount],this.doughnutChartLabels=["Remaining","","Amount"],this.doughnutChartLabels.forEach(e=>{this.pieChartValues.push({clientName:"",color:this.doughnutChartColors[this.doughnutChartLabels.indexOf(e)],duration:Object(et.duration)(0,"h"),earned:"Remaining"===e?100*(this.project.budgetEstimate.estimate-this.projectStatus.totalAmount):100*this.projectStatus.totalAmount,label:e,projectName:""})});else{this.doughnutChartData=[!this.isNoEstimate&&this.remaining>0?this.remaining:0,this.nonBillable,this.billable],this.doughnutChartLabels=["Remaining","Non-billable","Billable"];for(let e=0;e<this.doughnutChartLabels.length;e++)this.pieChartValues.push({clientName:"",color:this.doughnutChartColors[e],duration:Object(et.duration)(this.doughnutChartData[e],"h"),earned:this.projectStatus.totalAmount,label:this.doughnutChartLabels[e],projectName:""})}this.loader.hide(),this.cd.detectChanges()}getTaskAssigneesOfProject(){let e=[];this.project.tasks.forEach(t=>{e=[...e,...t.assigneeIds]}),e.length>0?this.userService.getUsersByIds(Array.from(new Set(e))).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.allAssigneesOfProject=e,this.cd.detectChanges()}):(this.allAssigneesOfProject=[],this.cd.detectChanges())}getTimeEstimate(){if("MANUAL"===this.project.timeEstimate.type)this.projectEstimate=this.project.timeEstimate.estimate;else{const e=Object(it.a)(this.project.tasks.map(e=>e.estimate));this.projectEstimate=e.asHours()}}getProjectBudget(){this.projectEstimate="MANUAL"===this.project.budgetEstimate.type?this.project.budgetEstimate.estimate:this.project.tasks.map(e=>e.budgetEstimate||0).reduce((e,t)=>e+t,0)}calculateRemaining(){if(this.project.estimateType===nt.a.TIME_ESTIMATE){const e=Object(et.duration)(this.projectStatus.billable).asMilliseconds()+Object(et.duration)(this.projectStatus.nonBillable).asMilliseconds();this.remaining=this.projectEstimate-Object(et.duration)(e).asHours()}this.project.estimateType===nt.a.PROJECT_BUDGET&&(this.remaining=this.projectEstimate-this.projectStatus.totalAmount,this.isNoEstimate&&(this.remaining=100-this.projectStatus.progress)),this.cd.detectChanges()}setIsNoEstimate(){this.isNoEstimate=this.project.estimateType===nt.a.PROJECT_BUDGET&&0===this.projectEstimate||this.project.estimateType===nt.a.TIME_ESTIMATE&&0===this.projectEstimate||this.project.estimateType===nt.a.NO_ESTIMATE}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(u.a),f.Rb(a.a),f.Rb(r.a),f.Rb(E.a),f.Rb(d.a),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-status"]],inputs:{projectId:"projectId",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates"},decls:1,vars:1,consts:[["class","cl-tab-pane cl-active","id","project-status","role","tabpanel",4,"ngIf"],["id","project-status","role","tabpanel",1,"cl-tab-pane","cl-active"],[1,"cl-row","cl-d-flex","cl-flex-wrap"],["class","cl-d-flex cl-flex-column cl-col-lg-4",4,"ngIf"],[1,"cl-col-lg-8"],[1,"cl-card","cl-border-bottom","cl-mb-0"],[1,"cl-card-body"],[4,"ngIf"],["class","cl-mt-3",4,"ngIf"],["class","cl-page-component-wrapper cl-mb-0 cl-mt-3",4,"ngIf"],[1,"cl-d-flex","cl-flex-column","cl-col-lg-4"],[1,"cl-card","cl-border-bottom"],[1,"cl-card-body","cl-py-2"],[1,"cl-d-flex","cl-justify-content-between","cl-w-100","cl-align-items-center"],[1,"cl-h5","cl-mb-0"],[1,"cl-h2","cl-mb-0"],["class","cl-d-flex cl-justify-content-between cl-w-100 cl-align-items-center",4,"ngIf"],["class","cl-card cl-border-bottom",4,"ngIf"],["class","cl-h5 cl-mb-0",4,"ngIf"],[3,"percentage","showPercentageOutsideOfProgress","centerText"],[1,"cl-mt-3"],[1,"cl-row","cl-justify-content-center"],["class","cl-col-lg-8 cl-col-xl-6",4,"ngIf"],[1,"cl-col-lg-8","cl-col-xl-6"],[3,"doughnutChart","doughnutChartColors","doughnutChartData","doughnutChartLabels","currency","format","totalTime","asString","canSeeRates","hideDuration","isBillabilityType","noTooltip","tooltipToLeft"],["class","cl-mt-3 chart-legend-wrapper",4,"ngIf"],[1,"cl-mt-3","chart-legend-wrapper"],[1,"chart-legend-item"],[1,"chart-legend-item-color","chart-legend-item-color-billable"],[1,"chart-legend-item-text"],[1,"chart-legend-item-color","chart-legend-item-color-non-billable"],["class","chart-legend-item",4,"ngIf"],[1,"chart-legend-item-color","chart-legend-item-color-remaining"],[1,"cl-page-component-wrapper","cl-mb-0","cl-mt-3"],[1,"cl-card","cl-border-bottom-0","cl-mb-0"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],[3,"project","projectStatus","currency","allAssigneesOfProject","canSeeRates"]],template:function(e,t){1&e&&f.Wc(0,ai,11,6,"div",0),2&e&&f.wc("ngIf",t.projectStatus)},directives:[v.u,st.a,rt.a,Lt],pipes:[Ct.a,Nt.a],encapsulation:2,changeDetection:0}),e})();var li=i("zDGq"),ui=i("DlQD"),di=i.n(ui),hi=i("wMS7"),pi=i.n(hi),bi=i("DVUX");const fi=["note"],mi=["noteSize"],gi=["noteFormated"],vi=["scrollIndicator"];function wi(e,t){if(1&e){const e=f.Yb();f.Xb(0,"textarea",12,13),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).projectNote=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).onModelChange()}))("paste",(function(){return f.Oc(e),f.nc(2).onPaste()}))("blur",(function(){return f.Oc(e),f.nc(2).updateNote()})),f.Wb()}if(2&e){const e=f.nc(2);f.Vc("height",e.minHeight),f.Hb("cl-is-invalid",e.availableCharacters<0),f.wc("ngModel",e.projectNote)("disabled",!e.hasEditPermission)}}function yi(e,t){if(1&e&&(f.Xb(0,"div",14),f.Xb(1,"span",15),f.Yc(2),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Hb("cl-invalid-feedback",e.availableCharacters<0),f.Cb(2),f.bd(" You're over the limit by ",-1*e.availableCharacters," characters (max ",e.limit,") ")}}function Ci(e,t){if(1&e&&(f.Vb(0),f.Wc(1,wi,2,6,"textarea",9),f.Sb(2,"div",null,10),f.Wc(4,yi,3,4,"div",11),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.wc("ngIf",e.focused),f.Cb(3),f.wc("ngIf",e.availableCharacters<0)}}function ki(e,t){1&e&&(f.Xb(0,"a",16),f.Sb(1,"img",17),f.Wb())}function Si(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",18,19),f.jc("click",(function(){return f.Oc(e),f.nc().focusToNote()})),f.Wb()}if(2&e){const e=f.nc();f.Hb("cl-typo-reset-clickable",e.hasEditPermission)}}let xi=(()=>{class e{constructor(e,t,i,n,r){this.projectService=e,this.titleService=t,this.cd=i,this.toaster=n,this.keyboardService=r,this.limit=16384,this.minHeight="auto",this.unsubscribe$=new s.a}set project(e){this._project=e,e&&(this.titleService.setCustomTitle(this._project.name+" - Note"),this.textAreaAdjust()),e&&this.noteFormated&&this.setMarkup()}get project(){return this._project}set hasEditPermission(e){this._hasEditPermission=e,this.isInitialized&&this.setNoteFormated()}get hasEditPermission(){return this._hasEditPermission}ngOnInit(){this.projectNote=this.project.note,pi.a.addHook("afterSanitizeAttributes",e=>{"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener"))}),this.keyboardService.keyboardCtrlEnter$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.note&&this.note.nativeElement.blur()}),this.setMarkup(),this.isInitialized=!0}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}updateNote(){if(setTimeout(()=>{this.showLink=!1,this.cd.destroyed||this.cd.detectChanges()},200),this.checkLimit(),this.setAvailableCharacters(),this.projectNote===this.project.note)return void this.setMarkup();const e=o.a.clone(this.project);this.project.note=this.projectNote,this.setMarkup(),this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.project=e},()=>{this.project=e,this.setMarkup()})}checkLimit(){this.projectNote.length>this.limit&&(this.projectNote=this.projectNote.substring(0,this.limit),this.toaster.pop("success",`Project note shortened and updated (max ${this.limit} characters)`))}focusToNote(){this.hasEditPermission&&(this.textAreaAdjust(),this.showLink=!0,this.focused=!0,this.cd.detectChanges(),this.note.nativeElement.focus())}setMarkup(){this.noteFormated||(this.focused=!1,this.cd.detectChanges()),this.setNoteFormated()}setNoteFormated(){if(!this.noteFormated)return;const e=this.project.note,t=this.hasEditPermission?"Add note...":"";let i=Object(G.h)(e||t);i=Object(G.a)(i);const n=di()(i);this.noteFormated.nativeElement.innerHTML=this.sanitizeHtml(n)}sanitizeHtml(e){return pi.a.sanitize(e,{FORBID_TAGS:["img"]})}onModelChange(){this.textAreaAdjust(),this.setAvailableCharacters(),this.highlightExtraText()}setAvailableCharacters(){this.availableCharacters=this.limit-this.projectNote.length}textAreaAdjust(){setTimeout(()=>{if(this.cd.destroyed)return;const e=this.noteSize.nativeElement;e.style.height="1px",e.style.height=25+e.scrollHeight+"px";let t=this.noteSize.nativeElement.offsetHeight;t?(t=t<200?200:t,this.minHeight=t+"px"):this.minHeight="auto",this.cd.detectChanges()})}onPaste(){setTimeout(()=>{this.scrollIndicator&&this.scrollIndicator.nativeElement.scrollIntoView()},100)}highlightExtraText(){if(this.projectNote.length<=this.limit)return;const e=this.note.nativeElement;e.select(),e.setSelectionRange(this.limit,this.projectNote.length)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(r.a),f.Rb(E.a),f.Rb(f.h),f.Rb(bi.d),f.Rb(li.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-note"]],viewQuery:function(e,t){var i;1&e&&(f.ed(fi,!0),f.ed(mi,!0),f.ed(gi,!0),f.ed(vi,!0)),2&e&&(f.Kc(i=f.kc())&&(t.note=i.first),f.Kc(i=f.kc())&&(t.noteSize=i.first),f.Kc(i=f.kc())&&(t.noteFormated=i.first),f.Kc(i=f.kc())&&(t.scrollIndicator=i.first))},inputs:{project:"project",hasEditPermission:"hasEditPermission"},decls:10,vars:4,consts:[[1,"cl-tab-pane","cl-active"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5"],[1,"cl-relative"],["name","noteSize","rows","10",1,"cl-form-control","cl-editable-fake-textarea",3,"ngModel"],["noteSize",""],[4,"ngIf"],["triggers","hover","ngbTooltip","Learn how to add links, images, and formatting.","placement","top","href","https://clockify.me/help/projects/formatting-project-note","target","blank","class","cl-absolute cl-t-0 cl-r-0 cl-mr-1 cl-mt-1 cl-d-flex",4,"ngIf"],["class","cl-typo-reset",3,"cl-typo-reset-clickable","click",4,"ngIf"],["class","cl-form-control cl-editable-textarea","name","projectNote","rows","10",3,"cl-is-invalid","height","ngModel","disabled","ngModelChange","paste","blur",4,"ngIf"],["scrollIndicator",""],["class","cl-d-block",3,"cl-invalid-feedback",4,"ngIf"],["name","projectNote","rows","10",1,"cl-form-control","cl-editable-textarea",3,"ngModel","disabled","ngModelChange","paste","blur"],["note",""],[1,"cl-d-block"],[1,"cl-float-right","cl-d-inline-block"],["triggers","hover","ngbTooltip","Learn how to add links, images, and formatting.","placement","top","href","https://clockify.me/help/projects/formatting-project-note","target","blank",1,"cl-absolute","cl-t-0","cl-r-0","cl-mr-1","cl-mt-1","cl-d-flex"],["src","assets/images/ui-icons/info-icon.svg"],[1,"cl-typo-reset",3,"click"],["noteFormated",""]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xb(1,"form"),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Sb(5,"textarea",4,5),f.Wc(7,Ci,5,2,"ng-container",6),f.Wc(8,ki,2,0,"a",7),f.Wb(),f.Wc(9,Si,2,2,"div",8),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Cb(5),f.wc("ngModel",t.projectNote),f.Cb(2),f.wc("ngIf",t.focused),f.Cb(1),f.wc("ngIf",t.showLink&&t.hasEditPermission),f.Cb(1),f.wc("ngIf",!t.focused))},directives:[A.I,A.t,A.u,A.c,A.s,A.v,v.u,g.Z],encapsulation:2,changeDetection:0}),e})();var Oi=i("Jmk/"),Di=i("UMzN"),Ii=i("2rWG"),ji=i("LfE4"),Ti=i("lp//"),Ei=i("VHTt"),Ai=function(e){return e.MONTHLY="MONTHLY",e}({}),_i=i("sbmM"),Wi=i("qUN8"),Ri=i("iNpZ"),Pi=i("kKK/"),Mi=i("ydbL"),Fi=i("4olG");class Xi{constructor(e){this._projectId=e&&e.projectId,this._value=e&&e.value,this._status=e&&e.status}get projectId(){return this._projectId}get value(){return this._value}get status(){return this._status}set value(e){this._value=e}}var Li=i("VYrk"),Ni=i("fANO"),Bi=i("FsCY"),Yi=i("JO38");const Vi=function(){return["/upgrade"]};function Ui(e,t){1&e&&(f.Xb(0,"div",3),f.Xb(1,"info"),f.Yc(2," PRO feature "),f.Xb(3,"a",4),f.Yc(4,"Upgrade"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.wc("routerLink",f.Ac(1,Vi)))}function Hi(e,t){1&e&&f.Sb(0,"div",18)}function $i(e,t){1&e&&(f.Xb(0,"div",19),f.Yc(1,"Add additional fields"),f.Wb())}function Gi(e,t){1&e&&(f.Xb(0,"div",19),f.Yc(1,"Additional fields"),f.Wb())}function zi(e,t){1&e&&(f.Xb(0,"div",25),f.Yc(1,"Available"),f.Wb())}function qi(e,t){1&e&&(f.Xb(0,"div",26),f.Yc(1," No more available fields "),f.Xb(2,"div",27),f.Yc(3,"To create more, go to workspace settings."),f.Wb(),f.Wb())}function Ki(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.Xb(2,"input",30),f.jc("ngModelChange",(function(i){return f.Oc(e),t.$implicit.selected=i}))("change",(function(){f.Oc(e);const i=t.$implicit,n=f.nc(3);return n.update(i,n.customFieldStatus.INVISIBLE)})),f.Wb(),f.Xb(3,"label",31),f.Xb(4,"div",32),f.Yc(5),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit;f.Cb(2),f.wc("ngModel",e.selected)("id","available"+e.name),f.Cb(1),f.wc("for","available"+e.name),f.Cb(2),f.Zc(e.name)}}function Zi(e,t){if(1&e&&(f.Xb(0,"div",20),f.Xb(1,"div",21),f.Wc(2,zi,2,0,"div",22),f.Wc(3,qi,4,0,"div",23),f.Wc(4,Ki,6,4,"div",24),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(2),f.wc("ngIf",e.filterOfStatus(e.customFields,e.customFieldStatus.INACTIVE).length),f.Cb(1),f.wc("ngIf",!e.filterOfStatus(e.customFields,e.customFieldStatus.INACTIVE).length),f.Cb(1),f.wc("ngForOf",e.filterOfStatus(e.customFields,e.customFieldStatus.INACTIVE))}}function Ji(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"div",35),f.Xb(2,"div",36),f.Xb(3,"input",30),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().$implicit.isProjectVisible=t}))("change",(function(){f.Oc(e);const t=f.nc().$implicit,i=f.nc(2);var n;return i.addOrChangeStatus(t,t.isProjectVisible?i.customFieldStatus.VISIBLE:i.customFieldStatus.INVISIBLE,null==(n=t.getProjectValue(i.projectId))?null:n.value)})),f.Wb(),f.Xb(4,"label",31),f.Yc(5,"Visible"),f.Wb(),f.Wb(),f.Wb(),f.Xb(6,"div",37),f.Yc(7),f.Wb(),f.Xb(8,"div",38),f.Xb(9,"custom-field-value",39),f.jc("valueChanged",(function(t){f.Oc(e);const i=f.nc().$implicit,n=f.nc(2);return n.addOrChangeStatus(i,i.isProjectVisible?n.customFieldStatus.VISIBLE:n.customFieldStatus.INVISIBLE,t)})),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc().$implicit;f.Cb(3),f.wc("ngModel",e.isProjectVisible)("id","visibility"+e.name),f.Cb(1),f.wc("for","visibility"+e.name),f.Cb(3),f.Zc(e.name),f.Cb(2),f.wc("customField",e.customFieldValueOfProject)}}function Qi(e,t){if(1&e&&(f.Xb(0,"div"),f.Wc(1,Ji,10,5,"div",33),f.Wb()),2&e){const e=t.$implicit;f.Cb(1),f.wc("ngIf",e.selected)}}function en(e,t){if(1&e&&(f.Xb(0,"div",5),f.Wc(1,Hi,1,0,"div",6),f.Xb(2,"div",7),f.Xb(3,"div",8),f.Wc(4,$i,2,0,"div",9),f.Wc(5,Gi,2,0,"div",9),f.Xb(6,"div",10),f.Yc(7,"All time entries on this project will have these fields. You can choose if users can see them and set their default value. "),f.Wb(),f.Wb(),f.Wb(),f.Xb(8,"div",7),f.Xb(9,"div",8),f.Xb(10,"div",7),f.Xb(11,"div",11),f.Xb(12,"div",12),f.Xb(13,"button",13),f.Yc(14," Add more fields... "),f.Wb(),f.Wc(15,Zi,5,3,"div",14),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(16,"div",7),f.Xb(17,"div",15),f.Xb(18,"div",16),f.Wc(19,Qi,2,1,"div",17),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.wc("ngIf",!e.hasCustomFieldFeature),f.Cb(3),f.wc("ngIf",!e.hasCustomFieldFeature),f.Cb(1),f.wc("ngIf",e.hasCustomFieldFeature),f.Cb(14),f.wc("ngForOf",e.customFields)}}let tn=(()=>{class e{constructor(e,t){this.cd=e,this.customFieldService=t,this.unsubscribe$=new s.a,this.customFieldStatus=Fi.a,this.filterOfStatus=Mi.a.filterByStatus,this.statuses=[Fi.a.INACTIVE,Fi.a.VISIBLE,Fi.a.INVISIBLE]}set customFields(e){this._customFields=e,e&&(this.createLists(e),this.cd.detectChanges())}get customFields(){return this._customFields}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}createLists(e){e.forEach(e=>{e.selected=e.isActive()||!!e.getProjectValue(this.projectId),e.isProjectVisible=e.isProjectValueVisible(this.projectId),e.customFieldValueOfProject=new Li.a({customFieldId:e.id,customField:e,value:e.getProjectValue(this.projectId)?e.getProjectValue(this.projectId).value:e.workspaceDefaultValue})})}update(e,t){null!=e.getProjectValue(this.projectId)?this.customFieldService.removeProjectDefaultValue(e.id,this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe():this.addOrChangeStatus(e,t)}addOrChangeStatus(e,t,i){const s=new Xi({projectId:this.projectId,status:t,value:this.getValue(e,i)});this.customFieldService.editProjectDefaultValue(e.id,s).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.customFields.map(t=>{t.id===e.id&&(t.projectDefaultValues=e.projectDefaultValues)})},t=>{e.isProjectVisible=!1,this.cd.detectChanges()})}getValue(e,t){const i=null==t?e.workspaceDefaultValue:t;return e.type===Ni.b.NUMBER?i&&""!=i?Number(i):null:i}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(f.h),f.Rb(Ti.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-custom-fields"]],inputs:{projectId:"projectId",hasCustomFieldFeature:"hasCustomFieldFeature",customFields:"customFields"},decls:3,vars:2,consts:[[1,"cl-mt-0"],["class","cl-form-group cl-mt-2 cl-mt-lg-0",4,"ngIf"],["class","cl-relative",4,"ngIf"],[1,"cl-form-group","cl-mt-2","cl-mt-lg-0"],[1,"cl-btn",3,"routerLink"],[1,"cl-relative"],["class","cl-blocker",4,"ngIf"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5"],["class","cl-h2 cl-mb-0",4,"ngIf"],[1,"cl-text-gray-9","cl-w-lg-75"],[1,"cl-form-group","cl-mb-0","cl-col-md-12","cl-col-lg-6"],["dropdownKey","",1,"cl-dropdown"],["type","button","dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text","cl-pr-3"],["class","cl-dropdown-menu cl-mw-100 cl-prevent-close",4,"dropdownKeyContent"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-custom-5"],[1,"cl-card","cl-mb-0","cl-border-bottom-0"],[4,"ngFor","ngForOf"],[1,"cl-blocker"],[1,"cl-h2","cl-mb-0"],[1,"cl-dropdown-menu","cl-mw-100","cl-prevent-close"],[1,"cl-scroll-area"],["class","cl-dropdown-header cl-h5",4,"ngIf"],["class","cl-dropdown-item-padding",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf"],[1,"cl-dropdown-header","cl-h5"],[1,"cl-dropdown-item-padding"],[1,"cl-h6","cl-mb-0"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"],["class","cl-component-row cl-px-0 cl-border-bottom",4,"ngIf"],[1,"cl-component-row","cl-px-0","cl-border-bottom"],[1,"cl-px-2","cl-px-lg-3"],[1,"cl-custom-control","cl-custom-switch"],[1,"cl-component-divided-left","cl-justify-content-start","cl-w-50"],[1,"cl-component-divided-left","cl-ml-auto","cl-w-50"],[1,"cl-cut-text-wrapper",3,"customField","valueChanged"]],template:function(e,t){1&e&&(f.Sb(0,"hr",0),f.Wc(1,Ui,5,2,"div",1),f.Wc(2,en,20,4,"div",2)),2&e&&(f.Cb(1),f.wc("ngIf",!t.hasCustomFieldFeature),f.Cb(1),f.wc("ngIf",t.customFields||!t.hasCustomFieldFeature))},directives:[v.u,Bi.a,m.f,Ii.a,_i.a,Wi.a,v.t,A.a,A.s,A.v,Yi.a],encapsulation:2,changeDetection:0}),e})();var nn=i("Tg7i");const sn=["clientDropdown"],rn=["hourlyRateInput"],on=["estimateInput"],an=["resetPopover"];function cn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",32),f.Xb(1,"filter-dropdown",33),f.jc("emitSelected",(function(t){return f.Oc(e),f.nc().clientSelected(t)}))("loadMore",(function(t){return f.Oc(e),f.nc().loadMoreClients(t)}))("createAndSet",(function(t){return f.Oc(e),f.nc().createAndSetClient(t)}))("nameFilterChanged",(function(t){return f.Oc(e),f.nc().clientFilterChanged(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(1),f.wc("entity",e.workspace.projectGroupingLabel)("entities",e.clients)}}function ln(e,t){1&e&&f.Sb(0,"hr",7)}function un(e,t){1&e&&(f.Vb(0),f.Yc(1,"Change"),f.Ub())}function dn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",1),f.Xb(1,"div",2),f.Xb(2,"div",3),f.Yc(3,"Project billable rate"),f.Wb(),f.Xb(4,"div",9),f.Yc(5," Billable rate used for calculating billable amount for this project. "),f.Wb(),f.Wb(),f.Xb(6,"div",1),f.Xb(7,"div",2),f.Xb(8,"label",34),f.Yc(9),f.Wb(),f.Xb(10,"div",35),f.Sb(11,"input",36),f.Xb(12,"div",37),f.Xb(13,"span",38),f.Xb(14,"a",39,40),f.jc("click",(function(){f.Oc(e);const t=f.Lc(15),i=f.nc(),n=f.Lc(66);return t.blur(),i.openModal(n)}))("keyup.enter",(function(){f.Oc(e);const t=f.nc(),i=f.Lc(66);return t.openModal(i)})),f.Wc(16,un,2,0,"ng-container",41),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(),t=f.Lc(51);f.Cb(9),f.ad("Hourly rate (",null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency,")"),f.Cb(2),f.wc("ngModel",e.hourlyRatePlaceholder),f.Cb(5),f.wc("ngIf",null==e.project.hourlyRate?null:e.project.hourlyRate.amount)("ngIfElse",t)}}function hn(e,t){1&e&&(f.Vb(0),f.Yc(1,"Change"),f.Ub())}function pn(e,t){if(1&e){const e=f.Yb();f.Vb(0),f.Sb(1,"hr",7),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Yc(5,"Project cost rate"),f.Wb(),f.Xb(6,"div",9),f.Yc(7," Hourly rate used for calculating cost amount for this project. "),f.Wb(),f.Wb(),f.Xb(8,"div",1),f.Xb(9,"div",2),f.Xb(10,"label",34),f.Yc(11),f.Wb(),f.Xb(12,"div",35),f.Sb(13,"input",42),f.Xb(14,"div",37),f.Xb(15,"span",38),f.Xb(16,"a",39,40),f.jc("click",(function(){f.Oc(e);const t=f.Lc(17),i=f.nc(),n=f.Lc(68);return t.blur(),i.openModal(n)}))("keyup.enter",(function(){f.Oc(e);const t=f.nc(),i=f.Lc(68);return t.openModal(i)})),f.Wc(18,hn,2,0,"ng-container",41),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Ub()}if(2&e){const e=f.nc(),t=f.Lc(51);f.Cb(11),f.ad("Cost rate (",null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency,")"),f.Cb(2),f.wc("ngModel",e.costRatePlaceholder),f.Cb(5),f.wc("ngIf",null!==(null==e.project.costRate?null:e.project.costRate.amount))("ngIfElse",t)}}function bn(e,t){1&e&&f.Yc(0," Set rate ")}function fn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",55),f.Xb(1,"input",56),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).project.timeEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).changeEstimateType("MANUAL")})),f.Wb(),f.Xb(2,"label",57),f.Yc(3,"Manual"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("value","MANUAL")("ngModel",e.project.timeEstimate.type)}}function mn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"input",60),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(3).project.budgetEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(3).changeEstimateType("MANUAL")})),f.Wb()}if(2&e){const e=f.nc(3);f.wc("value","MANUAL")("ngModel",e.project.budgetEstimate.type)}}function gn(e,t){if(1&e&&(f.Xb(0,"div",55),f.Wc(1,mn,1,2,"input",58),f.Xb(2,"label",59),f.Yc(3,"Manual"),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.project.estimateType==e.EstimateType.PROJECT_BUDGET)}}function vn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",61),f.Xb(1,"input",62),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).project.timeEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).changeEstimateType("AUTO")})),f.Wb(),f.Xb(2,"label",63),f.Yc(3,"Task based"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("value","AUTO")("ngModel",e.project.timeEstimate.type)}}function wn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",61),f.Xb(1,"input",64),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).project.budgetEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).changeEstimateType("AUTO")})),f.Wb(),f.Xb(2,"label",65),f.Yc(3,"Task based"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("value","AUTO")("ngModel",e.project.budgetEstimate.type)}}function yn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",66),f.jc("click",(function(){return f.Oc(e),f.nc(2).checkTooltip()})),f.Wb()}}function Cn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"div",26),f.Xb(2,"div",43),f.Wc(3,fn,4,2,"div",44),f.Wc(4,gn,4,1,"div",44),f.Xb(5,"div",45),f.Xb(6,"input",46,47),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(7).blur()}))("inputChange",(function(t){f.Oc(e);const i=f.nc();return i.projectEstimate=t,i.updateProjectEstimate()})),f.Wb(),f.Xb(8,"span",48),f.Yc(9),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(10,"div",26),f.Wc(11,vn,4,2,"div",49),f.Wc(12,wn,4,2,"div",49),f.Wb(),f.Xb(13,"div",26),f.Wc(14,yn,1,0,"div",50),f.Xb(15,"div",51),f.Xb(16,"input",52),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().resetEveryMonth=t}))("ngModelChange",(function(){return f.Oc(e),f.nc().changeReset()})),f.Wb(),f.Xb(17,"label",53,54),f.Yc(19),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(),t=f.Lc(70);f.Cb(3),f.wc("ngIf",e.project.estimateType==e.EstimateType.TIME_ESTIMATE),f.Cb(1),f.wc("ngIf",e.project.estimateType==e.EstimateType.PROJECT_BUDGET),f.Cb(2),f.wc("disabled",e.project.estimateType===e.EstimateType.TIME_ESTIMATE&&"AUTO"===e.project.timeEstimate.type||e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&"AUTO"===e.project.budgetEstimate.type)("ngModel",e.projectEstimate),f.Cb(3),f.bd(" ",e.project.estimateType==e.EstimateType.TIME_ESTIMATE?"hours":e.workspace.hourlyRate.currency,"",e.resetEveryMonth?" per month":""," "),f.Cb(2),f.wc("ngIf",e.project.estimateType==e.EstimateType.TIME_ESTIMATE),f.Cb(1),f.wc("ngIf",e.project.estimateType==e.EstimateType.PROJECT_BUDGET),f.Cb(2),f.wc("ngIf",!e.hasProjectBudgetFeature),f.Cb(2),f.wc("ngModel",e.resetEveryMonth),f.Cb(1),f.wc("popoverClass","cl-popover-lg-single-line")("ngbPopover",t),f.Cb(2),f.ad("",e.project.estimateType==e.EstimateType.TIME_ESTIMATE?"Estimate":"Budget"," resets every month")}}function kn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"hourly-rate",67),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateHourlyRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.PROJECT)("hourlyRate",e.project.hourlyRate)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}function Sn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"cost-rate",68),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateCostRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.PROJECT)("costRate",e.project.costRate)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}function xn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",72),f.jc("click",(function(){return f.Oc(e),f.nc(2).modalService.dismissAll()})),f.Yc(1," Upgrade "),f.Wb()}}function On(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",73),f.jc("click",(function(){return f.Oc(e),f.nc(2).modalService.dismissAll()})),f.Yc(1," Upgrade "),f.Wb()}}function Dn(e,t){if(1&e&&(f.Xb(0,"span",69),f.Wc(1,xn,2,0,"a",70),f.Wc(2,On,2,0,"ng-template",null,71,f.Xc),f.Yc(4," to PRO to use recurring estimate "),f.Wb()),2&e){const e=f.Lc(3),t=f.nc();f.Cb(1),f.wc("ngIf",!t.everHadPaidSubscription)("ngIfElse",e)}}let In=(()=>{class e{constructor(e,t,i,n,r,o,a){this.projectService=e,this.clientService=t,this.titleService=i,this.cd=n,this.modalService=r,this.customFieldService=o,this.workspaceService=a,this.emitUpdate=new f.n,this.EstimateType=nt.a,this.rateType=$.a,this.clients=[],this.hideZeroRates=!0,this.hideZeroEstimate=!0,this.unsubscribe$=new s.a}ngOnInit(){this.resetEveryMonth=this.project.estimateType===nt.a.TIME_ESTIMATE?!!this.project.timeEstimate.resetOption:!!this.project.budgetEstimate.resetOption,this.titleService.setCustomTitle(this.project.name+" - Settings"),this.initializeProjectValues(),this.getClients({});const e=this.workspaceService.getLocalDefaultWorkspace();this.hasCustomFieldFeature=e.hasFeature(l.a.CUSTOM_FIELDS),this.hasHistoricRatesFeature=e.hasFeature(l.a.HISTORIC_RATES),this.hasProjectBudgetFeature=e.hasFeature(l.a.PROJECT_BUDGET),this.hasCustomFieldFeature&&this.customFieldService.get().pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.customFields=e,this.cd.detectChanges()}),this.setEstimateDropdown()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}initializeProjectValues(){this.projectName=this.project.name,this.setHourlyRateLabel(),this.setCostRateLabel(),this.getProjectEstimate()}setCostRateLabel(){this.costRatePlaceholder=Object(G.m)(this.project&&this.project.costRate)}setHourlyRateLabel(){this.hourlyRatePlaceholder=Object(G.n)(this.project&&this.project.hourlyRate)}getClients(e){e.archived=ji.a.ACTIVE,this.clientService.getClients(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.refreshClientList&&(this.clients=[]),this.clients=[...this.clients,...e],this.cd.detectChanges()})}loadMoreClients(e){this.refreshClientList=!1,this.getClients(e)}clientFilterChanged(e){this.refreshClientList=!0,this.getClients(e)}updateProject(e){this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=new o.a(t),this.project.tasks=e.tasks,this.getProjectEstimate(),this.emitUpdate.emit(this.project),this.cd.detectChanges()},()=>{this.project=e,this.initializeProjectValues(),this.emitUpdate.emit(this.project),this.cd.detectChanges()})}updateEstimate(e){this.projectService.updateEstimate(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=t,this.resetEveryMonth=this.project.estimateType===nt.a.TIME_ESTIMATE?!!this.project.timeEstimate.resetOption:!!this.project.budgetEstimate.resetOption,this.project.tasks=e.tasks,this.getProjectEstimate(),this.emitUpdate.emit(this.project),this.cd.detectChanges()},()=>{this.project=e,this.initializeProjectValues(),this.emitUpdate.emit(this.project),this.cd.detectChanges()})}clientSelected(e){if(this.project.client&&e.id===this.project.client.id)return;const t=o.a.clone(this.project);this.project.client=e,this.project.clientId=e.id,this.updateProject(t),this.clientDropdown.forceClose()}createAndSetClient(e){this.clientService.createClient(e,this.workspace.projectGroupingLabel).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientSelected(new Di.a(e))})}updateProjectName(){if(this.projectName!==this.project.name){const e=o.a.clone(this.project);this.project.name=this.projectName,this.updateProject(e)}}addColor(e){if(this.project.color!==e){const t=o.a.clone(this.project);this.project.color=e,this.updateProject(t)}}updateHourlyRate(e){const t=o.a.clone(this.project),i=e.amount?e.amount:0;this.project.hourlyRate.amount=Number(i),this.projectService.updateHourlyRate(this.project.id,i,e.currency,e.since).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.project=new o.a(e),this.emitUpdate.emit(e),this.setHourlyRateLabel(),this.cd.detectChanges()},()=>{this.project=t,this.cd.detectChanges()})}updateCostRate(e){const t=o.a.clone(this.project),i=e.amount;this.project.hourlyRate.amount=Number(i),this.projectService.updateCostRate(this.project.id,i,e.currency,e.since).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.project=new o.a(e),this.emitUpdate.emit(e),this.setCostRateLabel(),this.cd.detectChanges()},()=>{this.project=t,this.cd.detectChanges()})}updateProjectEstimate(){const e=o.a.clone(this.project);this.project.estimateType===nt.a.TIME_ESTIMATE?this.project.timeEstimate.estimate=Number(this.projectEstimate):this.project.estimateType===nt.a.PROJECT_BUDGET&&(this.project.budgetEstimate.estimate=Number(this.projectEstimate)),this.updateEstimate(e)}changeEstimateType(e){this.getProjectEstimate(),this.project.estimateType==nt.a.TIME_ESTIMATE?this.project.timeEstimate.type=e:this.project.estimateType==nt.a.PROJECT_BUDGET&&(this.project.budgetEstimate.type=e),this.updateProjectEstimate()}getProjectEstimate(){if("MANUAL"===(this.project.estimateType===nt.a.TIME_ESTIMATE?this.project.timeEstimate.type:this.project.budgetEstimate.type))this.projectEstimate=this.project.estimateType===nt.a.TIME_ESTIMATE?this.project.timeEstimate.estimate:this.project.budgetEstimate.estimate;else{const e=Object(it.a)(this.project.tasks.map(e=>e.estimate)),t=this.project.tasks.map(e=>e.budgetEstimate||0).reduce((e,t)=>e+t,0);this.projectEstimate=this.project.estimateType===nt.a.TIME_ESTIMATE?e.asHours():t}}setHourlyRate(){this.hideZeroRates=!1,setTimeout(()=>{this.hourlyRateInput.nativeElement.select()},100)}setProjectEstimate(){this.hideZeroEstimate=!1,setTimeout(()=>{this.estimateInput.nativeElement.select()},100)}openModal(e){this.modalService.open(e,{centered:!0})}changeTypeOfEstimate(e){const t=o.a.clone(this.project);this.project.estimateType=e,this.updateEstimate(t)}changeReset(){const e=this.resetEveryMonth?Ai.MONTHLY:null,t=o.a.clone(this.project);this.project.estimateType===nt.a.TIME_ESTIMATE&&(this.project.timeEstimate.resetOption=e),this.project.estimateType===nt.a.PROJECT_BUDGET&&(this.project.budgetEstimate.resetOption=e),this.updateEstimate(t)}setEstimateDropdown(){this.estimateDropdown=[new Ei.a(nt.a.NO_ESTIMATE,"No estimate","No estimate"),new Ei.a(nt.a.TIME_ESTIMATE,"Time estimate","Time estimate"),new Ei.a(nt.a.PROJECT_BUDGET,"Project budget","Project budget",this.canSeeRates&&!this.hasProjectBudgetFeature,this.canSeeRates?this.hasProjectBudgetFeature?null:"to set project budget":"Only admins can set budget")]}checkTooltip(){this.hasProjectBudgetFeature?this.resetPopover.close():this.openTooltip()}openTooltip(){this.resetPopover.isOpen()||this.resetPopover.open()}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(r.a),f.Rb(Oi.a),f.Rb(E.a),f.Rb(f.h),f.Rb(g.q),f.Rb(Ti.a),f.Rb(u.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-settings"]],viewQuery:function(e,t){var i;1&e&&(f.ed(sn,!0),f.ed(rn,!0),f.ed(on,!0),f.ed(an,!0)),2&e&&(f.Kc(i=f.kc())&&(t.clientDropdown=i.first),f.Kc(i=f.kc())&&(t.hourlyRateInput=i.first),f.Kc(i=f.kc())&&(t.estimateInput=i.first),f.Kc(i=f.kc())&&(t.resetPopover=i.first))},inputs:{project:"project",workspace:"workspace",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates"},outputs:{emitUpdate:"emitUpdate"},decls:71,vars:15,consts:[[1,"cl-tab-pane","cl-active"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12"],[1,"cl-h2","cl-mb-0"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5"],["type","text","autocomplete","off","name","projectName",1,"cl-form-control",3,"ngModel","ngModelChange","blur","keyup.enter"],["projectNameInput",""],[1,"cl-mt-0"],[1,"cl-h2","cl-mb-0","cl-text-capitalize"],[1,"cl-text-gray-9","cl-w-lg-75"],[1,"cl-form-group","cl-mb-0","cl-col-md-12","cl-col-lg-5"],[1,"cl-form-group","cl-col-md-6"],["dropdownKey","",1,"cl-dropdown"],["clientDropdown","dropdownKey"],["dropdownKeyButton","","type","button","id","dropdownMenuButton",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text-wrapper","cl-d-flex","cl-pr-3"],[1,"cl-cut-text"],["class","cl-dropdown-menu",4,"dropdownKeyContent"],[3,"colorEditProject","color"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox","id","customSwitch3","name","projectBillable",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customSwitch3",1,"cl-custom-control-label"],["class","cl-mt-0",4,"ngIf"],["class","cl-form-row",4,"ngIf"],[4,"ngIf"],["setRate",""],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5","cl-p-0"],[1,"cl-d-inline-block","cl-w-50",3,"list","value","isDisabled","onChanged"],[3,"projectId","customFields","hasCustomFieldFeature"],["hourlyRateModal",""],["costRateModal",""],["popContent",""],[1,"cl-dropdown-menu"],[3,"entity","entities","emitSelected","loadMore","createAndSet","nameFilterChanged"],[1,"cl-ml-1"],[1,"cl-input-group","cl-ml-1"],["type","email","name","projectHourlyRate","autocomplete","off","readonly","",1,"cl-form-control","cl-cut-text",3,"ngModel"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],["tabindex","0",1,"cl-color-blue",3,"click","keyup.enter"],["emailBtn",""],[4,"ngIf","ngIfElse"],["type","email","name","projectCostRate","autocomplete","off","readonly","",1,"cl-form-control","cl-cut-text",3,"ngModel"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline","cl-align-items-center"],["class","cl-custom-control-inline",4,"ngIf"],[1,"cl-d-inline-flex","cl-align-items-center"],["type","text","id","projectEstimate","name","projectEstimate","spellcheck","false","inputNumber","","autocomplete","off",1,"cl-form-control","cl-input-5-digits","cl-text-center",3,"disabled","ngModel","keyup.enter","inputChange"],["estimateInput",""],[1,"cl-ml-2","cl-text-gray-9"],["class","cl-custom-control cl-custom-radio cl-custom-control-inline",4,"ngIf"],["class","cl-blocker","style","opacity: 0;",3,"click",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox","cl-custom-control-inline","cl-custom-switch"],["type","checkbox","id","reset",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["placement","right","triggers","manual","container","body","for","reset",1,"cl-custom-control-label",3,"popoverClass","ngbPopover"],["resetPopover","ngbPopover"],[1,"cl-custom-control-inline"],["type","radio","id","customRadioInline2","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline2",1,"cl-custom-control-label"],["type","radio","id","customRadioInline3","name","customRadioInline1","class","cl-custom-control-input",3,"value","ngModel","ngModelChange",4,"ngIf"],["for","customRadioInline3",1,"cl-custom-control-label"],["type","radio","id","customRadioInline3","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","customRadioInline1","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline1",1,"cl-custom-control-label"],["type","radio","id","customRadioInline4","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline4",1,"cl-custom-control-label"],[1,"cl-blocker",2,"opacity","0",3,"click"],[3,"type","hourlyRate","hasHistoricRateFeature","onClose","saveRate"],[3,"type","costRate","hasHistoricRateFeature","onClose","saveRate"],[1,"cl-popover-wrapper"],["routerLink","/upgrade","clickCloseDropdown","",3,"click",4,"ngIf","ngIfElse"],["FreePlanDesktopTempl",""],["routerLink","/upgrade","clickCloseDropdown","",3,"click"],["routerLink","/subscription","fragment","plans","clickCloseDropdown","",3,"click"]],template:function(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",0),f.Xb(1,"div"),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Yc(5,"Name"),f.Wb(),f.Wb(),f.Xb(6,"div",4),f.Xb(7,"input",5,6),f.jc("ngModelChange",(function(e){return t.projectName=e}))("blur",(function(){return t.updateProjectName()}))("keyup.enter",(function(){return f.Oc(e),f.Lc(8).blur()})),f.Wb(),f.Wb(),f.Wb(),f.Sb(9,"hr",7),f.Xb(10,"div",1),f.Xb(11,"div",2),f.Xb(12,"div",8),f.Yc(13),f.Wb(),f.Xb(14,"div",9),f.Yc(15," Used for grouping similar projects together. "),f.Wb(),f.Wb(),f.Xb(16,"div",10),f.Xb(17,"div",1),f.Xb(18,"div",11),f.Xb(19,"div",12,13),f.Xb(21,"button",14),f.Xb(22,"span",15),f.Yc(23),f.Wb(),f.Wb(),f.Wc(24,cn,2,2,"div",16),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Sb(25,"hr",7),f.Xb(26,"div",1),f.Xb(27,"div",2),f.Xb(28,"div",3),f.Yc(29,"Color"),f.Wb(),f.Xb(30,"div",9),f.Yc(31," Use color to visually differentiate projects. "),f.Wb(),f.Wb(),f.Xb(32,"div",2),f.Xb(33,"color-chooser",17),f.jc("color",(function(e){return t.addColor(e)})),f.Wb(),f.Wb(),f.Wb(),f.Sb(34,"hr",7),f.Xb(35,"div",1),f.Xb(36,"div",2),f.Xb(37,"div",3),f.Yc(38,"Billable by default"),f.Wb(),f.Xb(39,"div",9),f.Yc(40," All new entries on this project will be initially set as billable. "),f.Wb(),f.Wb(),f.Xb(41,"div",2),f.Xb(42,"div",18),f.Xb(43,"div",19),f.Xb(44,"input",20),f.jc("ngModelChange",(function(e){return t.project.billable=e}))("ngModelChange",(function(){return t.updateProject(t.project)})),f.Wb(),f.Xb(45,"label",21),f.Yc(46,"Yes"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wc(47,ln,1,0,"hr",22),f.Wc(48,dn,17,4,"div",23),f.Wc(49,pn,19,4,"ng-container",24),f.Wc(50,bn,1,0,"ng-template",null,25,f.Xc),f.Sb(52,"hr",7),f.Xb(53,"div",1),f.Xb(54,"div",2),f.Xb(55,"div",3),f.Yc(56,"Project estimate"),f.Wb(),f.Xb(57,"div",9),f.Yc(58,"Choose how you wish to track project progress (time or fixed fee budget). "),f.Wb(),f.Wb(),f.Xb(59,"div",2),f.Xb(60,"div"),f.Xb(61,"div",26),f.Xb(62,"dropdown-items",27),f.jc("onChanged",(function(e){return t.changeTypeOfEstimate(e)})),f.Wb(),f.Wb(),f.Wc(63,Cn,20,13,"div",24),f.Wb(),f.Wb(),f.Wb(),f.Sb(64,"edit-project-custom-fields",28),f.Wb(),f.Wb(),f.Wc(65,kn,1,3,"ng-template",null,29,f.Xc),f.Wc(67,Sn,1,3,"ng-template",null,30,f.Xc),f.Wc(69,Dn,5,2,"ng-template",null,31,f.Xc)}2&e&&(f.Cb(7),f.wc("ngModel",t.projectName),f.Cb(6),f.Zc(t.workspace.projectGroupingLabel),f.Cb(10),f.ad(" ",t.project.client&&t.project.client.id?t.project.client.name:"No "+t.workspace.projectGroupingLabel," "),f.Cb(10),f.wc("colorEditProject",t.project.color),f.Cb(11),f.wc("ngModel",t.project.billable),f.Cb(3),f.wc("ngIf",t.canSeeRates),f.Cb(1),f.wc("ngIf",t.canSeeRates),f.Cb(1),f.wc("ngIf",t.canSeeRates&&t.hasHistoricRatesFeature&&(null==t.workspace?null:t.workspace.isCostRateActive)),f.Cb(13),f.wc("list",t.estimateDropdown)("value",t.project.estimateType)("isDisabled",t.project.estimateType===t.EstimateType.PROJECT_BUDGET&&!t.canSeeRates),f.Cb(1),f.wc("ngIf",t.project.estimateType===t.EstimateType.TIME_ESTIMATE||t.project.estimateType===t.EstimateType.PROJECT_BUDGET&&t.canSeeRates),f.Cb(1),f.wc("projectId",t.project.id)("customFields",t.customFields)("hasCustomFieldFeature",t.hasCustomFieldFeature))},directives:[A.c,A.s,A.v,Ii.a,_i.a,Wi.a,Ri.a,A.a,v.u,Pi.a,tn,nn.a,q.a,g.L,A.A,Z.a,J.a,m.f],encapsulation:2,changeDetection:0}),e})();var jn=i("Kj3r"),Tn=i("i6c7");function En(e,t){1&e&&(f.Xb(0,"th"),f.Xb(1,"div",5),f.Xb(2,"div",6),f.Yc(3,"Billable"),f.Wb(),f.Wb(),f.Wb())}function An(e,t){if(1&e&&(f.Xb(0,"th"),f.Xb(1,"div",9),f.Xb(2,"div",6),f.Yc(3),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(3),f.ad("Hourly rate (",e.workspace.hourlyRate.currency,")")}}function _n(e,t){if(1&e&&(f.Xb(0,"th"),f.Xb(1,"div",9),f.Xb(2,"div",6),f.Yc(3),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(3),f.ad("Cost rate (",e.workspace.hourlyRate.currency,")")}}function Wn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",11),f.Xb(1,"a",4),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.estimateType===t.EstimateType.TIME_ESTIMATE?t.SortBy.ESTIMATE:t.SortBy.BUDGET_ESTIMATE)})),f.Yc(2),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(1),f.Hb("cl-up",e.sortBy===e.SortBy.ESTIMATE&&e.sortOrder===e.SortOrder.ASCENDING)("cl-up",e.sortBy===e.SortBy.BUDGET_ESTIMATE&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.BUDGET_ESTIMATE&&e.sortOrder===e.SortOrder.DESCENDING)("cl-down",e.sortBy===e.SortBy.ESTIMATE&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.cd(" ",e.estimateType===e.EstimateType.PROJECT_BUDGET?"Budget":"Time estimate","",e.isPerMonth?" per month":"","",e.estimateType===e.EstimateType.PROJECT_BUDGET?" ("+e.currency+")":" (h)"," ")}}function Rn(e,t){if(1&e&&(f.Xb(0,"th"),f.Wc(1,Wn,3,11,"div",10),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.showEstimate)}}function Pn(e,t){if(1&e){const e=f.Yb();f.Vb(0),f.Xb(1,"th",2),f.Xb(2,"div",3),f.Xb(3,"a",4),f.jc("click",(function(){f.Oc(e);const t=f.nc();return t.changeSort(t.SortBy.NAME)})),f.Yc(4,"Name"),f.Wb(),f.Wb(),f.Wb(),f.Xb(5,"th"),f.Xb(6,"div",5),f.Xb(7,"div",6),f.Yc(8,"Assignees"),f.Wb(),f.Wb(),f.Wb(),f.Wc(9,En,4,0,"th",7),f.Wc(10,An,4,1,"th",7),f.Wc(11,_n,4,1,"th",7),f.Wc(12,Rn,2,1,"th",7),f.Sb(13,"th",8),f.Ub()}if(2&e){const e=f.nc();f.Cb(3),f.Hb("cl-up",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(6),f.wc("ngIf",e.taskColumns.includes("col3")),f.Cb(1),f.wc("ngIf",e.taskColumns.includes("col4")),f.Cb(1),f.wc("ngIf",e.taskColumns.includes("col5")),f.Cb(1),f.wc("ngIf",e.taskColumns.includes("col6"))}}function Mn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",12),f.Xb(1,"div",13),f.Yc(2,"Name "),f.Xb(3,"div",3),f.Xb(4,"a",14),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(5,"span",15),f.Sb(6,"img",16),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(6),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}let Fn=(()=>{class e{constructor(){this.onChangeSortOrder=new f.n,this.onChangeSortColumn=new f.n,this.onExpandAll=new f.n,this.isExpandAll=!1,this.SortBy=lt,this.EstimateType=nt.a,this.SortOrder=ct.a}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}changeSort(e){e!==this.sortBy?this.onChangeSortColumn.emit(e):this.onChangeSortOrder.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["tasks-table-header"],["","tasks-table-header",""]],inputs:{estimateType:"estimateType",isPerMonth:"isPerMonth",currency:"currency",showEstimate:"showEstimate",isDesktop:"isDesktop",sortBy:"sortBy",sortOrder:"sortOrder",workspace:"workspace",taskColumns:"taskColumns"},outputs:{onChangeSortOrder:"onChangeSortOrder",onChangeSortColumn:"onChangeSortColumn",onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-h6","cl-mb-0","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex",3,"click"],[1,"cl-ml-lg-custom-n2"],[1,"cl-h5","cl-mb-0"],[4,"ngIf"],[2,"width","46px"],[1,"cl-ml-lg-custom-n2","cl-d-inline-block"],["class","cl-mr-lg-custom-n2 cl-text-right",4,"ngIf"],[1,"cl-mr-lg-custom-n2","cl-text-right"],["colspan","4",1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Wc(0,Pn,14,8,"ng-container",0),f.Wc(1,Mn,7,1,"ng-template",null,1,f.Xc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[v.u],encapsulation:2,changeDetection:0}),e})();var Xn=i("GsAO");const Ln=["taskEstimateInput"];function Nn(e,t){1&e&&f.Tb(0)}function Bn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"input",14,15),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).taskName=t}))("blur",(function(){return f.Oc(e),f.nc(2).updateTaskName()}))("keyup.enter",(function(){return f.Oc(e),f.Lc(1).blur()})),f.Wb()}if(2&e){const e=f.nc(2);f.Vc("text-decoration","DONE"===e.task.status?"line-through":"none"),f.wc("ngModel",e.taskName)("disabled",!e.hasEditPermission)}}function Yn(e,t){if(1&e&&(f.Xb(0,"span",16),f.Yc(1),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.Zc(e.taskName)}}function Vn(e,t){if(1&e&&(f.Wc(0,Bn,2,4,"input",12),f.Wc(1,Yn,2,1,"span",13)),2&e){const e=f.nc();f.wc("ngIf",e.hasEditPermission),f.Cb(1),f.wc("ngIf",!e.hasEditPermission)}}function Un(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",22),f.Xb(1,"checkbox-filter-dropdown",23),f.jc("emitSelected",(function(t){return f.Oc(e),f.nc(2).userDropdownClosed(t)}))("loadMore",(function(t){return f.Oc(e),f.nc(2).loadMoreUsers(t)}))("userFilterChanged",(function(t){return f.Oc(e),f.nc(2).userFilterChanged(t)}))("clearSelectedList",(function(){return f.Oc(e),f.nc(2).clearSelectedList()}))("emitSelectionOfAllEntities",(function(t){return f.Oc(e),f.nc(2).selectedAllUsers(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("entity","team")("hasWithoutEntity",!1)("entityMap",e.teamMaps)("withoutSelected",!1)("selectedAll",e.selectAllUsers)("showSelectAll",!1)("saveSelected",!0)("queryStatus",e.queryStatus)}}function Hn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",17),f.Xb(1,"div",18),f.jc("click",(function(){f.Oc(e);const t=f.nc();return 0===t.teamMaps[0].value.length?t.getUsers({page:1,limit:50}):""})),f.Xb(2,"div",19),f.Xb(3,"span",20),f.Yc(4),f.Wb(),f.Wb(),f.Wb(),f.Wc(5,Un,2,8,"div",21),f.Wb()}if(2&e){const e=f.nc();f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.Hb("cl-dropdown-toggle",e.hasEditPermission)("cl-hover-pointer",e.hasEditPermission),f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.Hb("cl-dropdown-toggle",e.hasEditPermission),f.xc("title",e.task.assigneeIds&&e.task.assigneeIds.length>0?e.task.assigneeNames:"Anyone"),f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.ad(" ",e.task.assigneeIds&&e.task.assigneeIds.length>0?e.task.assigneeNames:"Anyone"," ")}}function $n(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",24),f.Xb(1,"div",25),f.Xb(2,"input",26),f.jc("change",(function(){return f.Oc(e),f.nc().updateTask()}))("ngModelChange",(function(t){return f.Oc(e),f.nc().task.billable=t})),f.Wb(),f.Xb(3,"label",27),f.Yc(4," Yes "),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.yc("id","taskBillableEnabled + ",e.task.id,""),f.wc("disabled",!e.isAdminOrOwner&&!e.isProjectManager)("ngModel",e.task.billable),f.Cb(1),f.yc("for","taskBillableEnabled + ",e.task.id,"")}}function Gn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"span",35),f.Xb(2,"a",36),f.jc("click",(function(){f.Oc(e);const t=f.nc(2),i=f.Lc(19);return t.openModal(i)})),f.Yc(3,"Change"),f.Wb(),f.Wb(),f.Wb()}}function zn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.Xb(2,"div",30),f.Xb(3,"input",31,32),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(4).blur()})),f.Wb(),f.Wc(5,Gn,4,0,"div",33),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(3),f.wc("ngModel",e.hourlyRatePlaceholder),f.Cb(2),f.wc("ngIf",e.isAdminOrOwner||e.isProjectManager)}}function qn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"span",35),f.Xb(2,"a",36),f.jc("click",(function(){f.Oc(e);const t=f.nc(2),i=f.Lc(21);return t.openModal(i)})),f.Yc(3,"Change"),f.Wb(),f.Wb(),f.Wb()}}function Kn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",37),f.Xb(2,"div",30),f.Xb(3,"input",38,39),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(4).blur()})),f.Wb(),f.Wc(5,qn,4,0,"div",33),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(3),f.wc("ngModel",e.costRatePlaceholder),f.Cb(2),f.wc("ngIf",e.isAdminOrOwner||e.isProjectManager)}}function Zn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",43),f.jc("click",(function(){return f.Oc(e),f.nc(3).setTaskEstimate()})),f.Yc(1,"Set"),f.Wb()}}function Jn(e,t){1&e&&(f.Xb(0,"span",16),f.Yc(1,"--"),f.Wb())}function Qn(e,t){if(1&e&&(f.Xb(0,"div",41),f.Wc(1,Zn,2,0,"a",42),f.Wc(2,Jn,2,0,"span",13),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(1),f.wc("ngIf",!e.hasEditPermission)}}function es(e,t){if(1&e){const e=f.Yb();f.Xb(0,"input",45,46),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(1).blur()}))("inputChange",(function(t){return f.Oc(e),f.nc(3).updateTaskEstimate(t)})),f.Wb()}if(2&e){const e=f.nc(3);f.yc("id","taskEstimate_",e.taskName,""),f.wc("disabled",!e.hasEditPermission)("ngModel",e.taskEstimate)}}function ts(e,t){if(1&e&&(f.Xb(0,"span",16),f.Yc(1),f.Wb()),2&e){const e=f.nc(3);f.Cb(1),f.Zc(e.taskEstimate)}}function is(e,t){if(1&e&&(f.Xb(0,"div",41),f.Wc(1,es,2,3,"input",44),f.Wc(2,ts,2,1,"span",13),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(1),f.wc("ngIf",!e.hasEditPermission)}}function ns(e,t){if(1&e&&(f.Wc(0,Qn,3,2,"div",40),f.Wc(1,is,3,2,"div",40)),2&e){const e=f.nc();f.wc("ngIf",e.hideZeroRates&&(!e.taskEstimate||0===e.taskEstimate)),f.Cb(1),f.wc("ngIf",!e.hideZeroRates||e.taskEstimate&&0!==e.taskEstimate)}}function ss(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",54),f.jc("click",(function(){return f.Oc(e),f.nc(4).emitDelete.emit()})),f.Yc(1,"Delete"),f.Wb()}}function rs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",52),f.Xb(1,"div",53),f.Xb(2,"a",54),f.jc("click",(function(){return f.Oc(e),f.nc(3).updateTaskStatus()})),f.Yc(3),f.Wb(),f.Wc(4,ss,2,0,"a",55),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(3),f.ad(" ","DONE"===e.task.status?"Mark as active":"Mark as done"," "),f.Cb(1),f.wc("ngIf","DONE"===e.task.status&&e.hasDeletePermission)}}function os(e,t){1&e&&(f.Xb(0,"div",48),f.Xb(1,"div",49),f.Sb(2,"img",50),f.Wb(),f.Wc(3,rs,5,2,"div",51),f.Wb())}function as(e,t){if(1&e&&f.Wc(0,os,4,0,"div",47),2&e){const e=f.nc();f.wc("ngIf",e.hasEditPermission)}}function cs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"hourly-rate",56),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateHourlyRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.TASK)("hourlyRate",e.task.hourlyRate)("hasHistoricRateFeature",!0)}}function ls(e,t){if(1&e){const e=f.Yb();f.Xb(0,"cost-rate",57),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateCostRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.TASK)("costRate",e.task.costRate)("hasHistoricRateFeature",!0)}}const us=function(e){return{labels:e}},ds=function(e,t,i,n,s,r,o,a){return[e,t,i,n,s,r,o,a]};let hs=(()=>{class e{constructor(e,t,i,n,s){this.userService=e,this.taskService=t,this.modalService=i,this.workspaceService=n,this.cd=s,this.limit=50,this.emitDelete=new f.n,this.emitUpdate=new f.n,this.emitHourlyRate=new f.n,this.emitCostRate=new f.n,this.teamMaps=[],this.refreshUserList=!0,this.hideZeroRates=!0,this.queryStatus="ACTIVE",this.rateType=$.a,this.EstimateType=nt.a,this.unsubscribe$=new P.a}set allAssigneesOfProject(e){e&&(this._allAssigneesOfProject=e||[],this.addAssigneeNames())}get allAssigneesOfProject(){return this._allAssigneesOfProject}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.cd.detectChanges(),this.taskName=this.task.name,this.taskEstimate=this.project.estimateType===nt.a.TIME_ESTIMATE?Object(et.duration)(this.task.estimate).asHours():this.task.budgetEstimate,this.teamMaps.push(Object(O.a)("Users",[])),this.setCostRateLabel(),this.setHourlyRateLabel()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngAfterViewInit(){this.cd.detectChanges()}fillTeamMap(e){const t=[];t.push(Object(O.a)("Users",[])),this.refreshUserList||this.teamMaps[0].value.forEach(e=>{t[0].value.push(e)});const i=e.map(e=>new x.a(e,!!this.task.assigneeIds&&this.task.assigneeIds.indexOf(e.id)>-1));t[0].value=this.refreshUserList?i:[...t[0].value,...i],this.teamMaps=t,this.cd.detectChanges()}addAssigneeNames(){if(!this.task.assigneeIds)return void(this.task.assigneeNames="");const e=this.allAssigneesOfProject.filter(e=>this.task.assigneeIds.indexOf(e.id)>-1).map(e=>e.name);e.sort(Object(at.c)(e=>e,!1)),this.task.assigneeNames=e.join(", ")}setCostRateLabel(){this.costRatePlaceholder=Object(G.m)(this.task.costRate)}openModal(e){this.modalService.open(e,{centered:!0})}setHourlyRateLabel(){this.hourlyRatePlaceholder=Object(G.n)(this.task.hourlyRate)}userDropdownClosed(e){const t=e.entities[0].value.filter(t=>t.selected===!e.selectedAll).map(e=>e.entity.id),i=this.users.map(e=>e.id),s=this.task.assigneeIds.filter(e=>-1===i.indexOf(e));this.task.assigneeIds=0===s.length?t:[...t,...s],this.taskService.update(this.task,!e.selectedAll).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.task=e,this.userService.getUsersByIds(e.assigneeIds).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.allAssigneesOfProject=e,this.addAssigneeNames(),this.userFilterChanged({status:this.queryStatus})})})}loadMoreUsers(e){this.teamMaps[0].value.length%this.limit==0&&(this.refreshUserList=!1,this.getUsers(e))}userFilterChanged(e){this.refreshUserList=!0,this.task.assigneeIds=this.task.assigneeIds.filter(t=>t!=e.unselectedEntities),this.queryStatus=e.status,this.getUsers(e)}updateTaskName(){this.taskName!==this.task.name&&(this.task.name=this.taskName,this.updateTask())}getUsers(e){e.status=this.queryStatus,this.project.public?this.userService.getUsers(e).pipe(Object(S.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.users=this.users&&!this.refreshUserList?[...this.users,...e]:e,this.fillTeamMap(e)}):(e.projectId=this.project.id,this.userService.getUsersAndUsersFromUserGroupsAssignedToProject(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.users=this.users&&!this.refreshUserList?[...this.users,...e]:e,this.fillTeamMap(e)}))}updateTaskEstimate(e){this.taskEstimate=e,this.project.estimateType===nt.a.PROJECT_BUDGET?this.task.budgetEstimate=Number(e):this.task.estimate=Object(et.duration)(Number(e),"h").toISOString(),this.updateTask()}updateTaskStatus(){this.task.status="ACTIVE"===this.task.status?"DONE":"ACTIVE",this.updateTask()}updateTask(){this.emitUpdate.emit(this.task)}updateHourlyRate(e){const t=new M.a({amount:e.amount?e.amount:0,currency:this.workspace.hourlyRate.currency||"USD",since:e.since});this.task.hourlyRate=t,this.emitHourlyRate.emit(this.task)}updateCostRate(e){const t=new X.a({amount:null!==e.amount?e.amount:null,currency:this.workspace.hourlyRate.currency||"USD",since:e.since});this.task.costRate=t,this.emitCostRate.emit(this.task)}setTaskEstimate(){this.hideZeroRates=!1,setTimeout(()=>{this.taskEstimateInput.nativeElement.select()},100)}clearSelectedList(){this.task.assigneeIds=[]}selectedAllUsers(e){this.selectAllUsers=e}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(Tn.a),f.Rb(g.q),f.Rb(u.a),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["tasks-table-row"],["","tasks-table-row",""]],viewQuery:function(e,t){var i;1&e&&f.ed(Ln,!0),2&e&&f.Kc(i=f.kc())&&(t.taskEstimateInput=i.first)},inputs:{task:"task",allAssigneesOfProject:"allAssigneesOfProject",isDesktop:"isDesktop",labels:"labels",hasEditPermission:"hasEditPermission",hasDeletePermission:"hasDeletePermission",project:"project",isAdminOrOwner:"isAdminOrOwner",expandAll:"expandAll",limit:"limit",showEstimate:"showEstimate",taskColumns:"taskColumns",isProjectManager:"isProjectManager"},outputs:{emitDelete:"emitDelete",emitUpdate:"emitUpdate",emitHourlyRate:"emitHourlyRate",emitCostRate:"emitCostRate"},decls:22,vars:25,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["col6",""],["col7",""],["hourlyRateModal",""],["costRateModal",""],["type","text","class","cl-form-control cl-input-description cl-py-2 cl-ml-n2 cl-px-2 tr-reset-min-h",3,"text-decoration","ngModel","disabled","ngModelChange","blur","keyup.enter",4,"ngIf"],["class","cl-text-dark",4,"ngIf"],["type","text",1,"cl-form-control","cl-input-description","cl-py-2","cl-ml-n2","cl-px-2","tr-reset-min-h",3,"ngModel","disabled","ngModelChange","blur","keyup.enter"],["taskNameInput",""],[1,"cl-text-dark"],["dropdown","",1,"cl-dropdown"],["closeDropdown","","role","button",1,"cl-component-divided-left","cl-d-flex","cl-no-arrow",3,"click"],[1,"cl-cut-text-wrapper","cl-w-100","cl-d-flex","cl-justify-content-center","cl-justify-content-lg-start"],["closeDropdown","",1,"cl-cut-text","cl-badge","cl-badge-tag",3,"title"],["class","cl-dropdown-menu cl-lg-down-r-0",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-lg-down-r-0"],[3,"entity","hasWithoutEntity","entityMap","withoutSelected","selectedAll","showSelectAll","saveSelected","queryStatus","emitSelected","loadMore","userFilterChanged","clearSelectedList","emitSelectionOfAllEntities"],[1,"cl-component-divided-left"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox",1,"cl-custom-control-input",3,"disabled","ngModel","id","change","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-d-flex","cl-flex-column","cl-flex-lg-row"],[1,"cl-component-divided-left","cl-team-table-members-billable-rate","cl-mb-2","cl-mb-lg-0"],[1,"cl-input-group","cl-input-group-sm"],["type","text","name","hourlyRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"ngModel","keyup.enter"],["hourlyRateInput",""],["class","cl-input-group-append",4,"ngIf"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],[1,"cl-color-blue",3,"click"],[1,"cl-component-divided-left","cl-team-table-members-cost-rate"],["type","text","name","costRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"ngModel","keyup.enter"],["costRateInput",""],["class","cl-component-divided-left cl-w-100 cl-justify-content-lg-end",4,"ngIf"],[1,"cl-component-divided-left","cl-w-100","cl-justify-content-lg-end"],[3,"click",4,"ngIf"],[3,"click"],["class","cl-form-control cl-input-4-digits cl-py-2 cl-text-center cl-text-lg-right tr-reset-min-h cl-mx-n2","type","text","name","taskEstimate","spellcheck","false","inputNumber","","autocomplete","off",3,"id","disabled","ngModel","keyup.enter","inputChange",4,"ngIf"],["type","text","name","taskEstimate","spellcheck","false","inputNumber","","autocomplete","off",1,"cl-form-control","cl-input-4-digits","cl-py-2","cl-text-center","cl-text-lg-right","tr-reset-min-h","cl-mx-n2",3,"id","disabled","ngModel","keyup.enter","inputChange"],["taskEstimateInput",""],["class","cl-dropdown cl-d-flex cl-justify-content-end cl-hover-pointer","dropdown","",4,"ngIf"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-end","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],[3,"type","hourlyRate","hasHistoricRateFeature","onClose","saveRate"],[3,"type","costRate","hasHistoricRateFeature","onClose","saveRate"]],template:function(e,t){if(1&e&&(f.Wc(0,Nn,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.oc(3,"taskColumnDecider"),f.Wc(4,Vn,2,2,"ng-template",null,3,f.Xc),f.Wc(6,Hn,6,12,"ng-template",null,4,f.Xc),f.Wc(8,$n,5,4,"ng-template",null,5,f.Xc),f.Wc(10,zn,6,2,"ng-template",null,6,f.Xc),f.Wc(12,Kn,6,2,"ng-template",null,7,f.Xc),f.Wc(14,ns,2,2,"ng-template",null,8,f.Xc),f.Wc(16,as,1,1,"ng-template",null,9,f.Xc),f.Wc(18,cs,1,3,"ng-template",null,10,f.Xc),f.Wc(20,ls,1,3,"ng-template",null,11,f.Xc)),2&e){const e=f.Lc(2),i=f.Lc(5),n=f.Lc(7),s=f.Lc(9),r=f.Lc(11),o=f.Lc(13),a=f.Lc(15),c=f.Lc(17);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(14,us,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",f.tc(3,5,f.Ic(16,ds,t.taskColumns,i,n,s,r,o,a,c)))("isExpanded",t.expandAll)}},directives:[v.B,z.a,v.u,A.c,A.s,A.v,y.a,C.a,_.a,A.a,q.a,Z.a,J.a],pipes:[Xn.a],encapsulation:2,changeDetection:0}),e})();var ps=i("kojQ");function bs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",19),f.jc("click",(function(){f.Oc(e);const i=t.$implicit,n=f.nc(2);return n.setStatus(i),n.setLocalStorageSettings()})),f.Yc(1),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc(2);f.Hb("cl-active",i.taskStatus.value===e.value),f.Cb(1),f.ad(" ",e.label," ")}}function fs(e,t){if(1&e&&(f.Xb(0,"div",17),f.Wc(1,bs,2,3,"a",18),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.wc("ngForOf",e.statusDropdownValues)}}function ms(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",20),f.Xb(1,"form"),f.Xb(2,"div",21),f.Xb(3,"div",22),f.Xb(4,"input",23),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().newTaskName=t})),f.Wb(),f.Wb(),f.Xb(5,"div",24),f.Xb(6,"button",25),f.jc("click",(function(){return f.Oc(e),f.nc().createTask()}))("keyup.enter",(function(){return f.Oc(e),f.nc().createTask()})),f.Yc(7,"Add"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(4),f.wc("ngModel",e.newTaskName)}}function gs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",29),f.Xb(1,"tr",30),f.jc("emitDelete",(function(){f.Oc(e);const i=t.$implicit,n=f.nc(2),s=f.Lc(19);return n.openDeleteModal(i,s)}))("emitUpdate",(function(t){return f.Oc(e),f.nc(2).updateTask(t)}))("emitHourlyRate",(function(t){return f.Oc(e),f.nc(2).updateHourlyRate(t)}))("emitCostRate",(function(t){return f.Oc(e),f.nc(2).updateCostRate(t)})),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc(2);f.Cb(1),f.wc("task",e)("allAssigneesOfProject",i.allAssigneesOfProject)("isDesktop",i.isDesktop)("labels",i.labels)("hasEditPermission",i.hasEditPermission)("hasDeletePermission",i.hasDeletePermission)("taskColumns",i.taskColumns)("isProjectManager",i.isProjectManagerForThisProject)("isAdminOrOwner",i.isAdminOrOwner)("project",i.project)("expandAll",i.expandAll)("limit",i.limit)}}function vs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"table",26),f.Xb(1,"thead"),f.Xb(2,"tr",27),f.jc("onChangeSortOrder",(function(){return f.Oc(e),f.nc().changeSortOrder()}))("onChangeSortColumn",(function(t){return f.Oc(e),f.nc().changeSortColumn(t)}))("onExpandAll",(function(t){return f.Oc(e),f.nc().expandAllRows(t)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Wc(4,gs,2,12,"div",28),f.oc(5,"paginate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.wc("sortOrder",e.sortOrder)("sortBy",e.sortBy)("showEstimate",e.showEstimate)("isDesktop",e.isDesktop)("currency",e.workspace&&e.workspace.hourlyRate.currency)("estimateType",e.project.estimateType)("isPerMonth",e.isPerMonth)("workspace",e.workspace)("taskColumns",e.taskColumns),f.Cb(2),f.wc("ngForOf",f.rc(5,10,e.filteredTasks,e.page,e.limit))}}function ws(e,t){if(1&e&&(f.Xb(0,"span",34),f.Yc(1),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.ad(" Warning: Approved time for ",e.selectedTask.name," will lose task information. ")}}function ys(e,t){if(1&e){const e=f.Yb();f.Xb(0,"delete-confirm-modal",31),f.jc("onDelete",(function(){f.Oc(e);const i=t.$implicit;return f.nc().deleteTask(i)}))("onClose",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.Wc(1,ws,2,1,"span",32),f.Xb(2,"p",33),f.Yc(3),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.wc("title","Delete")("btnText","Delete")("showConfirmation",e.workspace.timeApprovalEnabled)("inProgress",e.inProgress),f.Cb(1),f.wc("ngIf",e.workspace.timeApprovalEnabled),f.Cb(2),f.ad(" ","The "+e.selectedTask.name+" task will also be removed from all time entries it is assigned to. This action cannot be reversed."," ")}}let Cs=(()=>{class e{constructor(e,t,i,n,s,r,o,a,c,l,u,d,h){this.taskService=e,this.userService=t,this.projectService=i,this.browserService=n,this.titleService=s,this.activatedRoute=r,this.workspaceService=o,this.authService=a,this.router=c,this.modalService=l,this.loader=u,this.uiSettingsService=d,this.cd=h,this.emitUpdate=new f.n,this.statusDropdownValues=[new Ei.a("ACTIVE","Show active tasks"),new Ei.a("DONE","Show done tasks"),new Ei.a("","Show all tasks")],this.filteredTasks=[],this.page=1,this.newTaskName="",this.expandAll=!1,this.debouncer$=new P.a,this.taskColumns=[],this.EstimateType=nt.a,this.ResetOption=Ai,this.unsubscribe$=new P.a,this.initSavedData()}set project(e){e&&(this._project=e,this.titleService.setCustomTitle(this._project.name+" - Tasks"),this.initFilter(this.taskStatus),this.getTaskAssigneesOfProject())}get project(){return this._project}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.setBrowserWidth(),this.checkProjectManager(),this.initFilter(this.taskStatus),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.loader.hide(),this.setShowEstimate(),this.isPerMonth=this.showEstimate&&this.project.estimateType===nt.a.TIME_ESTIMATE&&this.project.timeEstimate.resetOption===Ai.MONTHLY||this.project.estimateType===nt.a.PROJECT_BUDGET&&this.project.budgetEstimate.resetOption===Ai.MONTHLY,this.setTaskLabelsAndColumns(),this.cd.detectChanges(),this.activatedRoute.queryParams.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.page=Number(e.page)||1,this.limit=Number(e.limit)||this.limit,this.cd.detectChanges()}),this.setDebouncer()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}checkProjectManager(){this.authService.permissionData$.pipe(Object(W.a)(e=>null!==e),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isProjectManagerForThisProject=e.isProjectManagerFor(this.project.id)})}initSavedData(){const e=this.uiSettingsService.getSettings(T.b.PROJECT_TASKS_DATA)||{},t=e.hasOwnProperty("filter");this.taskStatus=t?Ei.a.getDropdownOf(this.statusDropdownValues,e.filter):this.statusDropdownValues[0],this.limit=e.limit||k.j,this.sortBy=e.sortBy||lt.NAME,this.sortOrder=e.sortOrder||ct.a.ASCENDING,this.sortBy===lt.NAME?this.mapper=e=>e.name.toLowerCase():this.sortBy===lt.ESTIMATE?this.mapper=e=>e.estimate?Object(et.duration)(e.estimate).asHours():0:this.sortBy===lt.BUDGET_ESTIMATE&&(this.mapper=e=>e.budgetEstimate)}setBrowserWidth(){this.browserService.isBreakpointLg$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setDebouncer(){this.debouncer$.pipe(Object(jn.a)(350),Object(n.a)(this.unsubscribe$)).subscribe(()=>{const e=this.name?this.name.toLowerCase():"";this.filteredTasks=[...this.project.tasks].filter(t=>-1!==t.name.toLowerCase().indexOf(e)).sort(Object(at.a)(this.mapper,this.sortOrder===ct.a.DESCENDING)),this.taskStatus&&this.filterByStatus(),this.cd.detectChanges()})}filterByStatus(){this.filteredTasks=this.taskStatus.value?[...this.filteredTasks].filter(e=>e.status===this.taskStatus.value).sort(Object(at.a)(this.mapper,this.sortOrder===ct.a.DESCENDING)):[...this.filteredTasks].sort(Object(at.a)(this.mapper,this.sortOrder===ct.a.DESCENDING))}setStatus(e){this.taskStatus=e,this.debouncer$.next()}searchChanged(){this.debouncer$.next()}initFilter(e){this.taskStatus=e,e.value?(this.filteredTasks=this.project.tasks.filter(t=>t.status===e.value).sort(Object(at.a)(this.mapper,this.sortOrder===ct.a.DESCENDING)),this.cd.detectChanges()):this.filteredTasks=[...this.project.tasks].sort(Object(at.a)(this.mapper,this.sortOrder===ct.a.DESCENDING)),this.page>1&&50*(this.page-1)===this.filteredTasks.length&&this.setPagination({page:this.page-1})}setPagination(e){this.page=!e.page&&e.limit&&e.limit!==this.limit?1:e.page?e.page:this.page,this.limit=e.limit?e.limit:this.limit,this.pager.setPaginationManually(e),this.setPaginationUrl(e),this.cd.detectChanges()}setPaginationUrl(e){this.router.navigate([],{queryParams:{page:this.page,limit:this.limit}}),this.setLocalStorageSettings()}createTask(){this.newTaskName.trim()&&this.taskService.create(this.newTaskName,this.project.id).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.filteredTasks=[e,...this.filteredTasks],this.project.tasks=[e,...this.project.tasks],this.newTaskName="",this.cd.detectChanges()})}openDeleteModal(e,t){this.selectedTask=e,this.modalService.open(t,{centered:!0})}deleteTask(e){this.inProgress=!0,this.taskService.delete(this.selectedTask).pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.project.tasks=this.project.tasks.filter(e=>e.id!==this.selectedTask.id),this.filteredTasks=this.filteredTasks.filter(e=>e.id!==this.selectedTask.id),this.inProgress=!1,e.close(),this.cd.detectChanges()},()=>{this.inProgress=!1,this.cd.detectChanges()})}updateTask(e){this.taskService.update(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe()}updateHourlyRate(e){this.taskService.updateHourlyRate(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.filteredTasks=this.filteredTasks.map(t=>(t.id===e.id&&(t=e),t)),this.cd.detectChanges()})}updateCostRate(e){this.taskService.updateCostRate(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.filteredTasks=this.filteredTasks.map(t=>(t.id===e.id&&(t=e),t)),this.cd.detectChanges()})}getTaskAssigneesOfProject(){let e=[];this.project.tasks.forEach(t=>{e=[...e,...t.assigneeIds]}),e.length>0?this.userService.getUsersByIds(Array.from(new Set(e))).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.allAssigneesOfProject=e,this.cd.detectChanges()}):(this.allAssigneesOfProject=[],this.cd.detectChanges())}sortTasksByName(){this.mapper=e=>e.name.toLowerCase(),this.sortTasks()}sortTasksByEstimate(){this.mapper=this.project.estimateType===nt.a.TIME_ESTIMATE?e=>e.estimate?Object(et.duration)(e.estimate).asHours():0:e=>e.budgetEstimate,this.sortTasks()}sortTasks(){this.initFilter(this.taskStatus),this.setLocalStorageSettings(),this.cd.detectChanges()}setLocalStorageSettings(){this.uiSettingsService.setSettings(T.b.PROJECT_TASKS_DATA,{sortBy:this.sortBy,sortOrder:this.sortOrder,limit:this.limit,filter:this.taskStatus.value})}changeSortOrder(){this.sortOrder=this.sortOrder===ct.a.ASCENDING?ct.a.DESCENDING:ct.a.ASCENDING,this.sortTasks()}changeSortColumn(e){this.sortBy=e,this.sortOrder=ct.a.ASCENDING,this.sortBy===lt.NAME?this.sortTasksByName():this.sortTasksByEstimate()}expandAllRows(e){this.expandAll=e}setShowEstimate(){this.showEstimate=!(this.project.estimateType!==nt.a.PROJECT_BUDGET||!this.canSeeRates||!this.canSeeProjectStatus||"AUTO"!==this.project.budgetEstimate.type)||this.project.estimateType===nt.a.TIME_ESTIMATE&&"AUTO"===this.project.timeEstimate.type}setTaskLabelsAndColumns(){this.taskColumns=["col1","col2"],this.labels=["Name","Assignee"],this.workspace.taskBillableEnabled&&(this.labels.push("Billable"),this.taskColumns.push("col3")),!this.workspace.taskRateEnabled||this.workspace.onlyAdminsSeeBillableRates&&!this.isAdminOrOwner||(this.labels.push("Hourly rate ("+this.workspace.hourlyRate.currency+")"),this.taskColumns.push("col4")),this.workspace.taskRateEnabled&&this.workspace.isCostRateActive&&(!this.workspace.onlyAdminsSeeBillableRates||this.isAdminOrOwner)&&(this.labels.push("Cost rate ("+this.workspace.hourlyRate.currency+")"),this.taskColumns.push("col5")),this.project.estimateType===nt.a.PROJECT_BUDGET&&this.showEstimate&&(this.labels.push("Budget"+(this.isPerMonth?" per month":"")+" ("+this.workspace.hourlyRate.currency+")"),this.taskColumns.push("col6")),this.project.estimateType===nt.a.TIME_ESTIMATE&&this.showEstimate&&(this.labels.push("Time estimate"+(this.isPerMonth?" per month":"")+" (h)"),this.taskColumns.push("col6")),this.labels.push("Edit"),this.taskColumns.push("col7"),this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(Tn.a),f.Rb(a.a),f.Rb(r.a),f.Rb(R.a),f.Rb(E.a),f.Rb(m.a),f.Rb(u.a),f.Rb(c.a),f.Rb(m.c),f.Rb(g.q),f.Rb(d.a),f.Rb(T.a),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-tasks"]],viewQuery:function(e,t){var i;1&e&&f.ed(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates",canSeeProjectStatus:"canSeeProjectStatus",hasDeletePermission:"hasDeletePermission"},outputs:{emitUpdate:"emitUpdate"},decls:20,vars:8,consts:[["id","project-tasks","role","tabpanel",1,"cl-tab-pane","cl-active"],[1,"cl-pb-2","cl-pb-lg-3"],[1,"cl-row","cl-align-items-center"],[1,"cl-col-lg-custom-3","cl-mr-auto","cl-mb-2","cl-mb-lg-custom-0"],["dropdown","","closeDropdown","",1,"cl-dropdown","cl-hover-pointer","cl-d-inline-flex"],["role","button","closeDropdown","",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle","cl-text-left"],["class","cl-dropdown-menu",4,"dropdownContent"],[1,"cl-form-group","cl-mb-2","cl-mb-lg-custom-0","cl-ml-2","cl-w-1"],["type","text","placeholder","Search by name",1,"cl-form-control",3,"ngModel","ngModelChange"],["class","cl-col-lg-custom-3",4,"ngIf"],[1,"cl-card","cl-border-bottom-0","cl-mb-0"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],["class","cl-table cl-table-bordered cl-remove-cell-borders cl-text-gray-9 cl-project-table-tasks","data-toggle-column","last",4,"ngIf"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],["deleteModal",""],[1,"cl-dropdown-menu"],["class","cl-dropdown-item","closeDropdown","",3,"cl-active","click",4,"ngFor","ngForOf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[1,"cl-col-lg-custom-3"],[1,"cl-form-row"],[1,"cl-col"],["type","text","autocomplete","off","placeholder","Add new task","name","taskName",1,"cl-form-control",3,"ngModel","ngModelChange"],[1,"cl-col-auto"],["type","submit",1,"cl-btn","cl-btn-primary",3,"click","keyup.enter"],["data-toggle-column","last",1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-9","cl-project-table-tasks"],["tasks-table-header","",3,"sortOrder","sortBy","showEstimate","isDesktop","currency","estimateType","isPerMonth","workspace","taskColumns","onChangeSortOrder","onChangeSortColumn","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-row-hover-shadow"],["tasks-table-row","",3,"task","allAssigneesOfProject","isDesktop","labels","hasEditPermission","hasDeletePermission","taskColumns","isProjectManager","isAdminOrOwner","project","expandAll","limit","emitDelete","emitUpdate","emitHourlyRate","emitCostRate"],[3,"title","btnText","showConfirmation","inProgress","onDelete","onClose"],["class","cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],[1,"cl-text-muted","cl-cut-text-wrap"],[1,"cl-alert","cl-alert-warning","cl-justify-content-center"]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xb(1,"div",1),f.Xb(2,"div",2),f.Xb(3,"div",3),f.Xb(4,"div",4),f.Xb(5,"div",5),f.Yc(6),f.Wb(),f.Wc(7,fs,2,1,"div",6),f.Wb(),f.Wb(),f.Xb(8,"div",7),f.Xb(9,"input",8),f.jc("ngModelChange",(function(){return t.searchChanged()}))("ngModelChange",(function(e){return t.name=e})),f.Wb(),f.Wb(),f.Wc(10,ms,8,1,"div",9),f.Wb(),f.Wb(),f.Xb(11,"div",10),f.Xb(12,"div",11),f.Xb(13,"span",12),f.Yc(14,"Tasks"),f.Wb(),f.Wb(),f.Wb(),f.Wc(15,vs,6,14,"table",13),f.Xb(16,"div",14),f.Xb(17,"pager",15),f.jc("pageChanged",(function(e){return t.setPagination(e)}))("limitChanged",(function(e){return t.setPagination(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wc(18,ys,4,6,"ng-template",null,16,f.Xc)),2&e&&(f.Cb(6),f.ad(" ",t.taskStatus.label," "),f.Cb(3),f.wc("ngModel",t.name),f.Cb(1),f.wc("ngIf",t.hasEditPermission||t.isProjectManagerForThisProject),f.Cb(5),f.wc("ngIf",t.filteredTasks),f.Cb(2),f.wc("visible",t.filteredTasks&&t.filteredTasks.length>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.filteredTasks&&t.filteredTasks.length))},directives:[y.a,C.a,A.c,A.s,A.v,v.u,F.a,v.t,A.I,A.t,A.u,Fn,hs,ps.a],pipes:[Ft.a],encapsulation:2,changeDetection:0}),e})();function ks(e,t){1&e&&f.Sb(0,"img",28)}function Ss(e,t){if(1&e&&(f.Xb(0,"p",29),f.Yc(1),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.ad(" ",e.project.client.name," ")}}function xs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",40),f.jc("click",(function(){return f.Oc(e),f.nc(4).router.navigateByUrl("upgrade")})),f.Yc(1,"Upgrade"),f.Wb(),f.Yc(2," to use templates.")}}function Os(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",41,42),f.jc("click",(function(){f.Oc(e);const t=f.Lc(1);return f.nc(4).setAsTemplate(t)})),f.Yc(2),f.Wb()}if(2&e){f.nc();const e=f.Lc(3),t=f.nc(3);f.wc("ngbPopover",e),f.Db("closeDropdown",t.hasProjectTemplateFeature?"":null),f.Cb(2),f.ad(" ",t.project.isTemplate?"Don't use as template":"Set as template"," ")}}function Ds(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",38),f.jc("click",(function(){f.Oc(e);const t=f.nc(4),i=f.Lc(2);return t.openModal(i)})),f.Yc(1," Delete "),f.Wb()}}function Is(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"div",35),f.Wc(2,xs,3,0,"ng-template",null,36,f.Xc),f.Wc(4,Os,3,3,"a",37),f.Xb(5,"a",38),f.jc("click",(function(){return f.Oc(e),f.nc(3).archiveProject()})),f.Yc(6),f.Wb(),f.Wc(7,Ds,2,0,"a",39),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(4),f.wc("ngIf",e.hasCreatePermissions),f.Cb(2),f.ad(" ",e.project.archived?"Restore":"Archive"," "),f.Cb(1),f.wc("ngIf",e.project.archived)}}function js(e,t){1&e&&(f.Xb(0,"div",30),f.Xb(1,"button",31),f.Sb(2,"img",32),f.Wb(),f.Wc(3,Is,8,3,"div",33),f.Wb())}function Ts(e,t){if(1&e){const e=f.Yb();f.Xb(0,"li",19),f.Xb(1,"a",20),f.jc("click",(function(){return f.Oc(e),f.nc(2).showTab("status")})),f.Yc(2," Status "),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.Hb("cl-active","status"===e.fragment)}}function Es(e,t){if(1&e){const e=f.Yb();f.Xb(0,"li",19),f.Xb(1,"a",20),f.jc("click",(function(){return f.Oc(e),f.nc(2).showTab("note")})),f.Yc(2," Note "),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.Hb("cl-active","note"===e.fragment)}}function As(e,t){if(1&e){const e=f.Yb();f.Xb(0,"li",19),f.Xb(1,"a",20),f.jc("click",(function(){return f.Oc(e),f.nc(2).showTab("settings")})),f.Yc(2," Project Settings "),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.Hb("cl-active","settings"===e.fragment)}}function _s(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"edit-project-access",43),f.jc("membershipsChanged",(function(t){return f.Oc(e),f.nc(2).updateMembershipsFromProject(t)}))("projectManagersUpdated",(function(t){return f.Oc(e),f.nc(2).updatedProjectManagers(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("projectManagerIds",e.projectManagerIds)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates)("adminIds",e.adminIds)("ownerIds",e.ownerIds)}}function Ws(e,t){if(1&e&&(f.Xb(0,"div"),f.Sb(1,"edit-project-status",44),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("projectId",e.project.id)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates)}}function Rs(e,t){if(1&e&&(f.Xb(0,"div"),f.Sb(1,"edit-project-note",45),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("hasEditPermission",e.hasEditPermission)}}function Ps(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"edit-project-settings",46),f.jc("emitUpdate",(function(t){return f.Oc(e),f.nc(2).updateProject(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("workspace",e.workspace)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates)}}function Ms(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"edit-project-tasks",47),f.jc("emitUpdate",(function(t){return f.Oc(e),f.nc(2).updateProject(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("canSeeRates",e.canSeeRates)("canSeeProjectStatus",e.canSeeProjectStatus)("hasDeletePermission",e.hasEditPermission)("hasEditPermission",e.hasEditPermission||!e.workspace.onlyAdminsCreateTask)}}function Fs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"main",2),f.Xb(1,"div",3),f.Xb(2,"div",4),f.Xb(3,"div",5),f.Xb(4,"div",6),f.Xb(5,"a",7),f.jc("click",(function(){return f.Oc(e),f.nc().router.navigate(["/projects"])})),f.Yc(6," Projects "),f.Wb(),f.Xb(7,"h1",8),f.Yc(8),f.Wc(9,ks,1,0,"img",9),f.Wb(),f.Wc(10,Ss,2,1,"p",10),f.Wb(),f.Xb(11,"div",11),f.Xb(12,"div",12),f.Xb(13,"div",13),f.Xb(14,"button",14),f.jc("click",(function(){return f.Oc(e),f.nc().toggleFavorite()})),f.Sb(15,"img",15),f.Wb(),f.Wb(),f.Wc(16,js,4,0,"div",16),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(17,"div",17),f.Xb(18,"ul",18),f.Xb(19,"li",19),f.Xb(20,"a",20),f.jc("click",(function(){return f.Oc(e),f.nc().showTab("tasks")})),f.Yc(21," Tasks "),f.Wb(),f.Wb(),f.Xb(22,"li",19),f.Xb(23,"a",20),f.jc("click",(function(){return f.Oc(e),f.nc().showTab("access")})),f.Yc(24," Access "),f.Wb(),f.Wb(),f.Wc(25,Ts,3,2,"li",21),f.Wc(26,Es,3,2,"li",21),f.Wc(27,As,3,2,"li",21),f.Wb(),f.Wb(),f.Xb(28,"div",22),f.Xb(29,"div",23),f.Xb(30,"div",24),f.Vb(31,25),f.Wc(32,_s,2,6,"div",26),f.Wc(33,Ws,2,3,"div",26),f.Wc(34,Rs,2,2,"div",26),f.Wc(35,Ps,2,4,"div",26),f.Wc(36,Ms,2,5,"div",27),f.Ub(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(8),f.ad(" ",e.project.name," "),f.Cb(1),f.wc("ngIf",e.project.isTemplate),f.Cb(1),f.wc("ngIf",e.project.client),f.Cb(5),f.wc("src",e.project.favorite?"assets/images/ui-icons/favorites-active.svg":"assets/images/ui-icons/favorites-normal.svg",f.Qc),f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(4),f.Hb("cl-active","tasks"===e.fragment),f.Cb(3),f.Hb("cl-active","access"===e.fragment),f.Cb(2),f.wc("ngIf",e.canSeeProjectStatus),f.Cb(1),f.wc("ngIf",e.hasEditPermission||e.project.note),f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(4),f.wc("ngSwitch",e.fragment),f.Cb(1),f.wc("ngSwitchCase","access"),f.Cb(1),f.wc("ngSwitchCase","status"),f.Cb(1),f.wc("ngSwitchCase","note"),f.Cb(1),f.wc("ngSwitchCase","settings")}}function Xs(e,t){if(1&e&&(f.Xb(0,"span",52),f.Yc(1),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.ad(" Warning: Approved time for '",e.project.name,"' will lose project information. ")}}function Ls(e,t){if(1&e){const e=f.Yb();f.Xb(0,"delete-confirm-modal",48),f.jc("onDelete",(function(){f.Oc(e);const i=t.$implicit;return f.nc().deleteProject(i)}))("onClose",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.Xb(1,"p",49),f.Yc(2),f.Wb(),f.Wc(3,Xs,2,1,"span",50),f.Xb(4,"p",51),f.Yc(5),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.wc("title","Delete")("showConfirmation",e.workspace.timeApprovalEnabled)("btnText","Delete")("inProgress",e.inProgress),f.Cb(2),f.ad(" ","Are you sure you want to delete project "+e.project.name+"?"," "),f.Cb(1),f.wc("ngIf",e.workspace.timeApprovalEnabled),f.Cb(2),f.ad(" ","The "+e.project.name+" project will also be removed from all time entries it is assigned to. This action cannot be reversed."," ")}}let Ns=(()=>{class e{constructor(e,t,i,n,r,o,a,c,l,u,d){this.router=e,this.route=t,this.projectService=i,this.workspaceService=n,this.userService=r,this.systemSettingsService=o,this.authService=a,this.modalService=c,this.loader=l,this.projectsCommunicationService=u,this.cd=d,this.fragment="tasks",this.unsubscribe$=new s.a}ngOnInit(){this.route.fragment.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.projectId&&"tasks"===e&&this.getProject(),this.fragment=e||"tasks"}),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasProjectTemplateFeature=this.workspace.hasFeature(l.a.PROJECT_TEMPLATES),this.user=this.authService.getUser(),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.projectId=this.router.url.split("/")[2],this.hasCreatePermissions=this.isAdminOrOwner||!this.workspace.onlyAdminsCreateProject,this.canSeeRates=this.isAdminOrOwner||!this.workspace.onlyAdminsSeeBillableRates,this.getProject(),this.getProjectPermissions(),this.subscribeToDeletedUser()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}updateMembershipsFromProject(e){this.project.memberships=e.memberships}getProject(){this.projectService.getProject(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{"status"===this.fragment&&this.loader.show("Loading..."),this.project=new o.a(e),this.cd.detectChanges()})}getProjectPermissions(){this.projectService.getAllAuthorizationsForProject(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.projectManagerIds=e.filter(e=>e.name===p.a.PROJECT_MANAGER).map(e=>e.userId),this.adminIds=e.filter(e=>e.name===p.a.ADMIN).map(e=>e.userId),this.ownerIds=e.filter(e=>e.name===p.a.OWNER).map(e=>e.userId),this.hasEditPermission=this.isAdminOrOwner||this.projectManagerIds.indexOf(this.user.id)>-1,this.canSeeProjectStatus=this.hasEditPermission||!this.workspace.onlyAdminsSeeProjectStatus,(!this.hasEditPermission&&"settings"===this.fragment||!this.canSeeProjectStatus&&"status"===this.fragment)&&this.router.navigate([],{fragment:"tasks"}),this.cd.detectChanges()})}toggleFavorite(){this.project.favorite=!this.project.favorite,this.project.favorite?this.projectService.makeProjectFavorite(this.project):this.projectService.removeProjectAsFavorite(this.project.id)}setAsTemplate(e){this.hasProjectTemplateFeature?(this.project.isTemplate=!this.project.isTemplate,this.projectService.updateIsProjectTemplate(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe()):e.isOpen()?e.close():e.open()}archiveProject(){this.project.archived=!this.project.archived,this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.router.navigate(["/projects"])})}deleteProject(e){this.inProgress=!0,this.projectService.deleteProject(this.project.id).pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{e.close(),this.inProgress=!1,this.router.navigate(["/projects"])},()=>this.inProgress=!1)}openModal(e){this.modalService.open(e,{centered:!0})}showTab(e){this.router.navigate([],{fragment:e,queryParams:{}})}updateProject(e){this.getProject()}updatedProjectManagers(e){this.projectManagerIds=e,this.cd.detectChanges()}subscribeToDeletedUser(){this.projectsCommunicationService.removedUserFromProject$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{const t=e===this.authService.getUser().id;!this.isAdminOrOwner&&t&&(this.project.public?this.getProjectPermissions():this.router.navigate(["/projects"]))})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(m.c),f.Rb(m.a),f.Rb(r.a),f.Rb(u.a),f.Rb(a.a),f.Rb(h.a),f.Rb(c.a),f.Rb(g.q),f.Rb(d.a),f.Rb(b.a),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project"]],decls:3,vars:1,consts:[["class","cl-page-wrapper",4,"ngIf"],["deleteModal",""],[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-align-items-end"],[1,"cl-col-lg-8"],[1,"cl-d-inline-block","cl-mb-2","cl-d-print-none",3,"click"],[1,"cl-mb-2","cl-mb-lg-0"],["src","assets/images/ui-icons/template.svg","class","cl-d-print-none",4,"ngIf"],["class","cl-mb-3 cl-mb-lg-0 cl-text-gray-6",4,"ngIf"],[1,"cl-col-lg-4"],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-lg-end"],[1,"cl-page-header-action","cl-d-print-none"],["type","button",1,"cl-btn","cl-btn-outline-light","cl-btn-fixed-40",3,"click"],[3,"src"],["class","cl-page-header-action cl-d-print-none","dropdown","",4,"ngIf"],[1,"cl-scroll-tabs-wrapper"],["tabs","","role","tablist",1,"cl-nav","cl-nav-tabs","cl-m-0","cl-scroll-tabs"],[1,"cl-nav-item"],["role","tab",1,"cl-nav-link",3,"click"],["class","cl-nav-item",4,"ngIf"],[1,"cl-card"],[1,"cl-card-body"],["id","nav-tabContent",1,"cl-tab-content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["src","assets/images/ui-icons/template.svg",1,"cl-d-print-none"],[1,"cl-mb-3","cl-mb-lg-0","cl-text-gray-6"],["dropdown","",1,"cl-page-header-action","cl-d-print-none"],["type","button","role","button","closeDropdown","",1,"cl-btn","cl-btn-outline-light","cl-btn-fixed-40","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["class","cl-dropdown-menu cl-dropdown-menu-right cl-md-down-l-0",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right","cl-md-down-l-0"],[1,"cl-scroll-area"],["popContent",""],["class","cl-dropdown-item","closeDropdown","","triggers","manual","placement","left","container","body",3,"ngbPopover","click",4,"ngIf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],[3,"click"],["closeDropdown","","triggers","manual","placement","left","container","body",1,"cl-dropdown-item",3,"ngbPopover","click"],["featurePopover","ngbPopover"],[3,"project","projectManagerIds","hasEditPermission","canSeeRates","adminIds","ownerIds","membershipsChanged","projectManagersUpdated"],[3,"projectId","hasEditPermission","canSeeRates"],[3,"project","hasEditPermission"],[3,"project","workspace","hasEditPermission","canSeeRates","emitUpdate"],[3,"project","canSeeRates","canSeeProjectStatus","hasDeletePermission","hasEditPermission","emitUpdate"],[3,"title","showConfirmation","btnText","inProgress","onDelete","onClose"],[1,"cl-h2","cl-cut-text-wrap"],["class","cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],[1,"cl-text-muted","cl-cut-text-wrap"],[1,"cl-alert","cl-alert-warning","cl-justify-content-center"]],template:function(e,t){1&e&&(f.Wc(0,Fs,37,17,"main",0),f.Wc(1,Ls,6,7,"ng-template",null,1,f.Xc)),2&e&&f.wc("ngIf",t.project)},directives:[v.u,w.a,v.y,v.z,v.A,y.a,C.a,g.L,Qe,ci,xi,In,Cs,ps.a],encapsulation:2,changeDetection:0}),e})()},"1YN2":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),s=i("XNiG"),r=i("Kj3r"),o=i("1G5W"),a=i("PW4C"),c=i("qb1n");let l=(()=>{class e{constructor(e,t,i,r){this.renderer=e,this.resizeableService=t,this.uiSettingsService=i,this.elementRef=r,this.resizeDebouncer$=new s.a,this.unsubscribe$=new s.a,this.onResize=new n.n,this.isResizeable=!0,this.resizeableClass="cl-scroll-area",this.minHeight=100,this.maxHeight=600,this.resizeableName=a.b.RESIZEABLE_PICKER_DIMENSIONS,this._resizeToLeft=!1,this.mouseResizeClass="cl-mouse-resizer",this.start=e=>{try{this.emit(!0),e.preventDefault(),this.originalWidth=parseFloat(getComputedStyle(this.rootElement,null).getPropertyValue("width").replace("px","")),this.originalHeight=parseFloat(getComputedStyle(this.element,null).getPropertyValue("height").replace("px","")),this.originalMouseX=e.pageX,this.originalMouseY=e.pageY}catch(e){}this.listenWindowMouseMove=this.renderer.listen("window","mousemove",this.resize),this.listenWindowMouseUp=this.renderer.listen("window","mouseup",this.stopResize)},this.resize=e=>{try{if(e.preventDefault(),this.resizeBtn.classList.contains(this.mouseResizeClass)){const t=this.element.getBoundingClientRect().height;t<this.maxHeight&&(this.element.style.maxHeight=t+10+"px"),this.isSizeChanged=!0;const i=this.originalHeight+(e.pageY-this.originalMouseY);this.rootElement.style.width=(this.resizeToLeft?this.originalWidth-(e.pageX-this.originalMouseX):this.originalWidth+(e.pageX-this.originalMouseX))+"px",i>this.minHeight&&(this.element.style.height=i+"px")}}catch(e){}},this.stopResize=e=>{try{if(e.preventDefault(),this.listenWindowMouseMove(),this.listenWindowMouseUp(),this.isSizeChanged){this.isSizeChanged=!1;const e=this.element.getBoundingClientRect();this.uiSettingsService.setSettings(this.resizeableName,{width:e.width,height:e.height}),setTimeout(()=>{this.emit(!1)})}}catch(e){}}}set resizeToLeft(e){this._resizeToLeft=e,this.mouseResizeClass=this.resizeToLeft?"cl-mouse-resizer-left":"cl-mouse-resizer"}get resizeToLeft(){return this._resizeToLeft}ngOnInit(){if(this.isResizeable){this.resizeDebouncer$.pipe(Object(r.a)(80),Object(o.a)(this.unsubscribe$)).subscribe(()=>this.initDimensions());try{this.resizeBtn=this.renderer.createElement("div"),this.resizeBtn.classList.add(this.mouseResizeClass),this.rootElement=this.elementRef.nativeElement,setTimeout(()=>{this.element=this.resizeableClass?this.rootElement.getElementsByClassName(this.resizeableClass)[0]:this.rootElement},10),this.renderer.appendChild(this.elementRef.nativeElement,this.resizeBtn),setTimeout(()=>{this.initDimensions(),this.listenButtonMouseDown=this.renderer.listen(this.resizeBtn,"mousedown",this.start)},10)}catch(e){}}}ngOnDestroy(){this.removeListeners(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onWindowResize(e){this.resizeDebouncer$.next()}initDimensions(){try{const e=this.uiSettingsService.getSettings(this.resizeableName),t=this.rootElement.getBoundingClientRect(),i=window.innerWidth,n=t.left,s=t.right;let r=t.width;const o=i-(this.resizeToLeft?i-s:n)-(i<500?10:30);r>o&&(r=o),this.rootElement.style.minWidth=r+"px",this.rootElement.style.maxWidth=o+"px",this.rootElement.style.zIndex="1031";let{width:a,height:c}=e;a=a>o?o:a,a=a<r?r:a,this.rootElement.style.width=a+"px",c=c>this.maxHeight?this.maxHeight:c,c=c<this.minHeight?this.minHeight:c,this.element.style.maxHeight=c+"px"}catch(e){}}emit(e){this.resizeableService.isResizing=e,this.onResize.emit(e)}removeListeners(){this.listenButtonMouseDown&&this.listenButtonMouseDown(),this.listenWindowMouseMove&&this.listenWindowMouseMove(),this.listenWindowMouseUp&&this.listenWindowMouseUp()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.F),n.Rb(c.a),n.Rb(a.a),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["resizeable"],["","resizeable",""]],hostBindings:function(e,t){1&e&&n.jc("resize",(function(e){return t.onWindowResize(e)}),!1,n.Nc)},inputs:{isResizeable:"isResizeable",resizeableClass:"resizeableClass",minHeight:"minHeight",maxHeight:"maxHeight",resizeableName:"resizeableName",resizeToLeft:"resizeToLeft"},outputs:{onResize:"onResize"}}),e})()},"1k8b":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("XNiG"),s=i("PqYM"),r=i("wd/R"),o=i("fXoL");let a=(()=>{class e{constructor(e){this.ngZone=e,this.changeDayTriggerSubject$=new n.a;const t=r().add(1,"days").startOf("day").add(1,"seconds").diff(r());this.ngZone.runOutsideAngular(()=>{Object(s.a)(t,864e5).subscribe(()=>{this.ngZone.run(()=>{this.changeDayTriggerSubject$.next(!0)})})})}get changeDayTrigger$(){return this.changeDayTriggerSubject$.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(o.fc(o.z))},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"1kSV":function(e,t,i){"use strict";i.d(t,"a",(function(){return ji})),i.d(t,"b",(function(){return _i})),i.d(t,"c",(function(){return Ri})),i.d(t,"d",(function(){return Hi})),i.d(t,"e",(function(){return Mi})),i.d(t,"f",(function(){return qi})),i.d(t,"g",(function(){return Cn})),i.d(t,"h",(function(){return yn})),i.d(t,"i",(function(){return xn})),i.d(t,"j",(function(){return ts})),i.d(t,"k",(function(){return Qn})),i.d(t,"l",(function(){return Zn})),i.d(t,"m",(function(){return Jn})),i.d(t,"n",(function(){return es})),i.d(t,"o",(function(){return Or})),i.d(t,"p",(function(){return Hn})),i.d(t,"q",(function(){return bs})),i.d(t,"r",(function(){return fs})),i.d(t,"s",(function(){return Mr})),i.d(t,"t",(function(){return Cs})),i.d(t,"u",(function(){return ws})),i.d(t,"v",(function(){return ys})),i.d(t,"w",(function(){return ks})),i.d(t,"x",(function(){return Ss})),i.d(t,"y",(function(){return Kn})),i.d(t,"z",(function(){return _s})),i.d(t,"A",(function(){return Ds})),i.d(t,"B",(function(){return Is})),i.d(t,"C",(function(){return js})),i.d(t,"D",(function(){return Ts})),i.d(t,"E",(function(){return Es})),i.d(t,"F",(function(){return As})),i.d(t,"G",(function(){return Ii})),i.d(t,"H",(function(){return Di})),i.d(t,"I",(function(){return xi})),i.d(t,"J",(function(){return Oi})),i.d(t,"K",(function(){return Ti})),i.d(t,"L",(function(){return Bs})),i.d(t,"M",(function(){return Ys})),i.d(t,"N",(function(){return Us})),i.d(t,"O",(function(){return Ni})),i.d(t,"P",(function(){return Li})),i.d(t,"Q",(function(){return zs})),i.d(t,"R",(function(){return Ui})),i.d(t,"S",(function(){return er})),i.d(t,"T",(function(){return Qs})),i.d(t,"U",(function(){return Js})),i.d(t,"V",(function(){return tr})),i.d(t,"W",(function(){return br})),i.d(t,"X",(function(){return vr})),i.d(t,"Y",(function(){return gr})),i.d(t,"Z",(function(){return Sr})),i.d(t,"ab",(function(){return xr})),i.d(t,"bb",(function(){return Wr}));var n=i("fXoL"),s=i("ofXK"),r=i("3Pt+"),o=i("XNiG"),a=i("2Vo4"),c=i("itXk"),l=i("PqYM"),u=i("HDdC"),d=i("KqfI");const h=new u.a(d.a);var p=i("xgIS"),b=i("VRyK"),f=i("DH7j"),m=i("yCtX"),g=i("l7GE"),v=i("ZUHj");class w{call(e,t){return t.subscribe(new y(e))}}class y extends g.a{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let i=0;i<t&&!this.hasFirst;i++){let t=e[i],n=Object(v.a)(this,t,t,i);this.subscriptions&&this.subscriptions.push(n),this.add(n)}this.observables=null}}notifyNext(e,t,i,n,s){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==i){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}var C=i("lJxs"),k=i("JX91"),S=i("/uUt"),x=i("eIep"),O=i("1G5W"),D=i("pLZG"),I=i("IzEk"),j=i("vkgz");function T(...e){return t=>{let i;return"function"==typeof e[e.length-1]&&(i=e.pop()),t.lift(new E(e,i))}}class E{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new A(e,this.observables,this.project))}}class A extends g.a{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const n=t.length;this.values=new Array(n);for(let s=0;s<n;s++)this.toRespond.push(s);for(let s=0;s<n;s++){let e=t[s];this.add(Object(v.a)(this,e,e,s))}}notifyNext(e,t,i,n,s){this.values[i]=t;const r=this.toRespond;if(r.length>0){const e=r.indexOf(i);-1!==e&&r.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}var _=i("D0XW"),W=i("7o/Q"),R=i("WMd4");function P(e,t=_.a){var i;const n=(i=e)instanceof Date&&!isNaN(+i)?+e-t.now():Math.abs(e);return e=>e.lift(new M(n,t))}class M{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new F(e,this.delay,this.scheduler))}}class F extends W.a{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,n=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-n.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const t=Math.max(0,i[0].time-n.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(F.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new X(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(R.a.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(R.a.createComplete()),this.unsubscribe()}}class X{constructor(e,t){this.time=e,this.notification=t}}var L=i("w1tV");function N(e,t){}function B(e,t){if(1&e&&(n.Xb(0,"button",3),n.Yc(1),n.Wc(2,N,0,0,"ng-template",4),n.Wb()),2&e){const e=t.$implicit;n.wc("ngbPanelToggle",e),n.Cb(1),n.ad(" ",e.title,""),n.Cb(1),n.wc("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function Y(e,t){}function V(e,t){}function U(e,t){if(1&e&&(n.Xb(0,"div",8),n.Xb(1,"div",9),n.Wc(2,V,0,0,"ng-template",4),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit;n.Hb("show",e.isOpen),n.xc("id",e.id),n.Db("aria-labelledby",e.id+"-header"),n.Cb(2),n.wc("ngTemplateOutlet",null==e.contentTpl?null:e.contentTpl.templateRef)}}const H=function(e,t){return{$implicit:e,opened:t}};function $(e,t){if(1&e&&(n.Xb(0,"div"),n.Xb(1,"div",5),n.Wc(2,Y,0,0,"ng-template",6),n.Wb(),n.Wc(3,U,3,5,"div",7),n.Wb()),2&e){const e=t.$implicit,i=n.nc(),s=n.Lc(1);n.Eb("card "+(e.cardClass||"")),n.Cb(1),n.Eb("card-header "+(e.type?"bg-"+e.type:i.type?"bg-"+i.type:"")),n.yc("id","",e.id,"-header"),n.Cb(1),n.wc("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||s)("ngTemplateOutletContext",n.Cc(8,H,e,e.isOpen)),n.Cb(1),n.wc("ngIf",!i.destroyOnHide||e.isOpen)}}const G=["aria-label",$localize`:@@ngb.alert.closef4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c87819314041543176992:Close`];function z(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",1),n.dc(1,G),n.jc("click",(function(){return n.Oc(e),n.nc().closeHandler()})),n.Xb(2,"span",2),n.Yc(3,"\xd7"),n.Wb(),n.Wb()}}const q=["*"];function K(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",7),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc(2);return s.select(i.id,s.NgbSlideEventSource.INDICATOR)})),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(2);n.Hb("active",e.id===i.activeId),n.wc("id",e.id)}}function Z(e,t){if(1&e&&(n.Xb(0,"ol",5),n.Wc(1,K,1,3,"li",6),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngForOf",e.slides)}}function J(e,t){}function Q(e,t){if(1&e&&(n.Xb(0,"div",8),n.Wc(1,J,0,0,"ng-template",9),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.Hb("active",e.id===i.activeId),n.Cb(1),n.wc("ngTemplateOutlet",e.tplRef)}}var ee,te;function ie(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.prev(t.NgbSlideEventSource.ARROW_LEFT)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,ee),n.Wb(),n.Wb()}}function ne(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",13),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.next(t.NgbSlideEventSource.ARROW_RIGHT)})),n.Sb(1,"span",14),n.Xb(2,"span",12),n.bc(3,te),n.Wb(),n.Wb()}}ee=$localize`:@@ngb.carousel.previous680d5c75b7fd8d37961083608b9fcdc4167b4c434452427314943113135:Previous`,te=$localize`:@@ngb.carousel.nextf732c304c7433e5a83ffcd862c3dce709a0f49823885497195825665706:Next`;const se=["defaultDayTemplate"],re=["content"];function oe(e,t){if(1&e&&n.Sb(0,"div",7),2&e){const e=t.currentMonth,i=t.selected,s=t.disabled,r=t.focused;n.wc("date",t.date)("currentMonth",e)("selected",i)("disabled",s)("focused",r)}}function ae(e,t){if(1&e&&(n.Xb(0,"div",12),n.Yc(1),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc(2);n.Cb(1),n.bd(" ",t.i18n.getMonthFullName(e.number,e.year)," ",t.i18n.getYearNumerals(e.year)," ")}}function ce(e,t){if(1&e&&(n.Xb(0,"div",9),n.Wc(1,ae,2,2,"div",10),n.Sb(2,"ngb-datepicker-month",11),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.wc("ngIf","none"===i.navigation||i.displayMonths>1&&"select"===i.navigation),n.Cb(1),n.wc("month",e.firstDate)}}function le(e,t){if(1&e&&n.Wc(0,ce,3,2,"div",8),2&e){const e=n.nc();n.wc("ngForOf",e.model.months)}}function ue(e,t){if(1&e){const e=n.Yb();n.Xb(0,"ngb-datepicker-navigation",13),n.jc("navigate",(function(t){return n.Oc(e),n.nc().onNavigateEvent(t)}))("select",(function(t){return n.Oc(e),n.nc().onNavigateDateSelect(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("date",e.model.firstDate)("months",e.model.months)("disabled",e.model.disabled)("showSelect","select"===e.model.navigation)("prevDisabled",e.model.prevDisabled)("nextDisabled",e.model.nextDisabled)("selectBoxes",e.model.selectBoxes)}}function de(e,t){}function he(e,t){}function pe(e,t){1&e&&n.Sb(0,"div",5)}function be(e,t){if(1&e&&(n.Xb(0,"div",6),n.Yc(1),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.ad(" ",i.i18n.getWeekdayShortName(e)," ")}}function fe(e,t){if(1&e&&(n.Xb(0,"div",2),n.Wc(1,pe,1,0,"div",3),n.Wc(2,be,2,1,"div",4),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.datepicker.showWeekNumbers),n.Cb(1),n.wc("ngForOf",e.viewModel.weekdays)}}function me(e,t){if(1&e&&(n.Xb(0,"div",11),n.Yc(1),n.Wb()),2&e){const e=n.nc(2).$implicit,t=n.nc();n.Cb(1),n.Zc(t.i18n.getWeekNumerals(e.number))}}function ge(e,t){}function ve(e,t){if(1&e&&n.Wc(0,ge,0,0,"ng-template",14),2&e){const e=n.nc().$implicit,t=n.nc(3);n.wc("ngTemplateOutlet",t.datepicker.dayTemplate)("ngTemplateOutletContext",e.context)}}function we(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12),n.jc("click",(function(i){n.Oc(e);const s=t.$implicit;return n.nc(3).doSelect(s),i.preventDefault()})),n.Wc(1,ve,1,2,"ng-template",13),n.Wb()}if(2&e){const e=t.$implicit;n.Hb("disabled",e.context.disabled)("hidden",e.hidden)("ngb-dp-today",e.context.today),n.wc("tabindex",e.tabindex),n.Db("aria-label",e.ariaLabel),n.Cb(1),n.wc("ngIf",!e.hidden)}}function ye(e,t){if(1&e&&(n.Xb(0,"div",8),n.Wc(1,me,2,1,"div",9),n.Wc(2,we,2,9,"div",10),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Cb(1),n.wc("ngIf",t.datepicker.showWeekNumbers),n.Cb(1),n.wc("ngForOf",e.days)}}function Ce(e,t){1&e&&n.Wc(0,ye,3,2,"div",7),2&e&&n.wc("ngIf",!t.$implicit.collapsed)}const ke=["aria-label",$localize`:@@ngb.datepicker.previous-monthc3b08b07b5ab98e7cdcf18df39355690ab7d38848586908745456864217:Previous month`,"title",$localize`:@@ngb.datepicker.previous-monthc3b08b07b5ab98e7cdcf18df39355690ab7d38848586908745456864217:Previous month`],Se=["aria-label",$localize`:@@ngb.datepicker.next-month4bd046985cfe13040d5ef0cd881edce0968a111a3628374603023447227:Next month`,"title",$localize`:@@ngb.datepicker.next-month4bd046985cfe13040d5ef0cd881edce0968a111a3628374603023447227:Next month`];function xe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"ngb-datepicker-navigation-select",6),n.jc("select",(function(t){return n.Oc(e),n.nc().select.emit(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("date",e.date)("disabled",e.disabled)("months",e.selectBoxes.months)("years",e.selectBoxes.years)}}function Oe(e,t){1&e&&n.Sb(0,"div",0)}function De(e,t){1&e&&n.Sb(0,"div",0)}function Ie(e,t){if(1&e&&(n.Wc(0,Oe,1,0,"div",8),n.Xb(1,"div",9),n.Yc(2),n.Wb(),n.Wc(3,De,1,0,"div",8)),2&e){const e=t.$implicit,i=t.index,s=n.nc(2);n.wc("ngIf",i>0),n.Cb(2),n.bd(" ",s.i18n.getMonthFullName(e.number,e.year)," ",s.i18n.getYearNumerals(e.year)," "),n.Cb(1),n.wc("ngIf",i!==s.months.length-1)}}function je(e,t){if(1&e&&n.Wc(0,Ie,4,4,"ng-template",7),2&e){const e=n.nc();n.wc("ngForOf",e.months)}}const Te=["ngbDatepickerDayView",""],Ee=["month"],Ae=["year"],_e=["aria-label",$localize`:@@ngb.datepicker.select-month1dbc84807f35518112f62e5775d1daebd3d8462b2253869508135064750:Select month`,"title",$localize`:@@ngb.datepicker.select-month1dbc84807f35518112f62e5775d1daebd3d8462b2253869508135064750:Select month`],We=["aria-label",$localize`:@@ngb.datepicker.select-year8ceb09d002bf0c5d1cac171dfbffe1805d2b39628852264961585484321:Select year`,"title",$localize`:@@ngb.datepicker.select-year8ceb09d002bf0c5d1cac171dfbffe1805d2b39628852264961585484321:Select year`];function Re(e,t){if(1&e&&(n.Xb(0,"option",4),n.Yc(1),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.wc("value",e),n.Db("aria-label",i.i18n.getMonthFullName(e,null==i.date?null:i.date.year)),n.Cb(1),n.Zc(i.i18n.getMonthShortName(e,null==i.date?null:i.date.year))}}function Pe(e,t){if(1&e&&(n.Xb(0,"option",4),n.Yc(1),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.wc("value",e),n.Cb(1),n.Zc(i.i18n.getYearNumerals(e))}}const Me=["dialog"],Fe=["ngbNavOutlet",""];function Xe(e,t){}const Le=function(e){return{$implicit:e}};function Ne(e,t){if(1&e&&(n.Xb(0,"div",2),n.Wc(1,Xe,0,0,"ng-template",3),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Hb("active",e.active),n.wc("id",e.panelDomId),n.Db("role",t.paneRole?t.paneRole:t.nav.roles?"tabpanel":void 0)("aria-labelledby",e.domId),n.Cb(1),n.wc("ngTemplateOutlet",null==e.contentTpl?null:e.contentTpl.templateRef)("ngTemplateOutletContext",n.Bc(7,Le,e.active))}}function Be(e,t){1&e&&n.Wc(0,Ne,2,9,"div",1),2&e&&n.wc("ngIf",t.$implicit.isPanelInDom())}var Ye,Ve,Ue,He;function $e(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,Ye),n.Wb())}function Ge(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,Ve),n.Wb())}function ze(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,Ue),n.Wb())}function qe(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,He),n.Wb())}function Ke(e,t){1&e&&n.Yc(0,"...")}function Ze(e,t){1&e&&(n.Xb(0,"span",10),n.Yc(1,"(current)"),n.Wb())}function Je(e,t){if(1&e&&(n.Yc(0),n.Wc(1,Ze,2,0,"span",9)),2&e){const e=t.$implicit,i=t.currentPage;n.ad(" ",e," "),n.Cb(1),n.wc("ngIf",e===i)}}Ye=$localize`:@@ngb.pagination.first656506dfd46380956a655f919f1498d018f75ca06867721956102594380:`,Ve=$localize`:@@ngb.pagination.previous6e52b6ee77a4848d899dd21b591c6fd499e3aef36479320895410098858:`,Ue=$localize`:@@ngb.pagination.nextba9cbb4ff311464308a3627e4f1c3345d9fe6d7d5458177150283468089:`,He=$localize`:@@ngb.pagination.last49f27a460bc97e7e00be5b37098bfa79884fc7d95277020320267646988:`;const Qe=["aria-label",$localize`:@@ngb.pagination.first-ariaf2f852318759c6396b5d3d17031d53817d7b38cc2241508602425256033:First`];function et(e,t){}const tt=function(e,t){return{disabled:e,currentPage:t}};function it(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,Qe),n.jc("click",(function(t){return n.Oc(e),n.nc().selectPage(1),t.preventDefault()})),n.Wc(3,et,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(1);n.Hb("disabled",e.previousDisabled()),n.Cb(1),n.Db("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplFirst?null:e.tplFirst.templateRef)||t)("ngTemplateOutletContext",n.Cc(6,tt,e.previousDisabled(),e.page))}}const nt=["aria-label",$localize`:@@ngb.pagination.previous-aria680d5c75b7fd8d37961083608b9fcdc4167b4c434452427314943113135:Previous`];function st(e,t){}const rt=function(e){return{disabled:e}};function ot(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,nt),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.selectPage(i.page-1),t.preventDefault()})),n.Wc(3,st,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(3);n.Hb("disabled",e.previousDisabled()),n.Cb(1),n.Db("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplPrevious?null:e.tplPrevious.templateRef)||t)("ngTemplateOutletContext",n.Bc(6,rt,e.previousDisabled()))}}function at(e,t){}const ct=function(e){return{disabled:!0,currentPage:e}};function lt(e,t){if(1&e&&(n.Xb(0,"a",16),n.Wc(1,at,0,0,"ng-template",13),n.Wb()),2&e){const e=n.nc(2),t=n.Lc(9);n.Cb(1),n.wc("ngTemplateOutlet",(null==e.tplEllipsis?null:e.tplEllipsis.templateRef)||t)("ngTemplateOutletContext",n.Bc(2,ct,e.page))}}function ut(e,t){}const dt=function(e,t,i){return{disabled:e,$implicit:t,currentPage:i}};function ht(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",17),n.jc("click",(function(t){n.Oc(e);const i=n.nc().$implicit;return n.nc().selectPage(i),t.preventDefault()})),n.Wc(1,ut,0,0,"ng-template",13),n.Wb()}if(2&e){const e=n.nc().$implicit,t=n.nc(),i=n.Lc(11);n.Db("tabindex",t.disabled?"-1":null)("aria-disabled",t.disabled?"true":null),n.Cb(1),n.wc("ngTemplateOutlet",(null==t.tplNumber?null:t.tplNumber.templateRef)||i)("ngTemplateOutletContext",n.Dc(4,dt,t.disabled,e,t.page))}}function pt(e,t){if(1&e&&(n.Xb(0,"li",11),n.Wc(1,lt,2,4,"a",14),n.Wc(2,ht,2,8,"a",15),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.Hb("active",e===i.page)("disabled",i.isEllipsis(e)||i.disabled),n.Db("aria-current",e===i.page?"page":null),n.Cb(1),n.wc("ngIf",i.isEllipsis(e)),n.Cb(1),n.wc("ngIf",!i.isEllipsis(e))}}const bt=["aria-label",$localize`:@@ngb.pagination.next-ariaf732c304c7433e5a83ffcd862c3dce709a0f49823885497195825665706:Next`];function ft(e,t){}function mt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,bt),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.selectPage(i.page+1),t.preventDefault()})),n.Wc(3,ft,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(5);n.Hb("disabled",e.nextDisabled()),n.Cb(1),n.Db("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplNext?null:e.tplNext.templateRef)||t)("ngTemplateOutletContext",n.Cc(6,tt,e.nextDisabled(),e.page))}}const gt=["aria-label",$localize`:@@ngb.pagination.last-aria5c729788ba138508aca1bec050b610f7bf81db3e4882268002141858767:Last`];function vt(e,t){}function wt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,gt),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.selectPage(i.pageCount),t.preventDefault()})),n.Wc(3,vt,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(7);n.Hb("disabled",e.nextDisabled()),n.Cb(1),n.Db("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplLast?null:e.tplLast.templateRef)||t)("ngTemplateOutletContext",n.Cc(6,tt,e.nextDisabled(),e.page))}}function yt(e,t){if(1&e&&n.Yc(0),2&e){const e=n.nc(2);n.Zc(e.title)}}function Ct(e,t){}function kt(e,t){if(1&e&&(n.Xb(0,"h3",3),n.Wc(1,yt,1,1,"ng-template",null,4,n.Xc),n.Wc(3,Ct,0,0,"ng-template",5),n.Wb()),2&e){const e=n.Lc(2),t=n.nc();n.Cb(3),n.wc("ngTemplateOutlet",t.isTitleTemplate()?t.title:e)("ngTemplateOutletContext",t.context)}}var St;function xt(e,t){if(1&e&&(n.Xb(0,"span"),n.bc(1,St),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.ec(e.getPercentValue()),n.cc(1)}}function Ot(e,t){1&e&&n.Yc(0),2&e&&n.Zc(100===t.fill?"\u2605":"\u2606")}function Dt(e,t){}function It(e,t){if(1&e){const e=n.Yb();n.Xb(0,"span",2),n.Yc(1),n.Wb(),n.Xb(2,"span",3),n.jc("mouseenter",(function(){n.Oc(e);const i=t.index;return n.nc().enter(i+1)}))("click",(function(){n.Oc(e);const i=t.index;return n.nc().handleClick(i+1)})),n.Wc(3,Dt,0,0,"ng-template",4),n.Wb()}if(2&e){const e=t.index,i=n.nc(),s=n.Lc(1);n.Cb(1),n.ad("(",e<i.nextRate?"*":" ",")"),n.Cb(1),n.Vc("cursor",i.readonly||i.disabled?"default":"pointer"),n.Cb(1),n.wc("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||s)("ngTemplateOutletContext",i.contexts[e])}}function jt(e,t){}function Tt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",4),n.Xb(1,"a",5),n.jc("click",(function(i){n.Oc(e);const s=t.$implicit;return n.nc().select(s.id),i.preventDefault()})),n.Yc(2),n.Wc(3,jt,0,0,"ng-template",6),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc();n.Cb(1),n.Hb("active",e.id===i.activeId)("disabled",e.disabled),n.wc("id",e.id),n.Db("tabindex",e.disabled?"-1":void 0)("aria-controls",i.destroyOnHide&&e.id!==i.activeId?null:e.id+"-panel")("aria-selected",e.id===i.activeId)("aria-disabled",e.disabled),n.Cb(1),n.ad(" ",e.title,""),n.Cb(1),n.wc("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function Et(e,t){}function At(e,t){if(1&e&&(n.Xb(0,"div",8),n.Wc(1,Et,0,0,"ng-template",6),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Fb("tab-pane ",e.id===t.activeId?"active":null,""),n.yc("id","",e.id,"-panel"),n.Db("aria-labelledby",e.id),n.Cb(1),n.wc("ngTemplateOutlet",null==e.contentTpl?null:e.contentTpl.templateRef)}}function _t(e,t){if(1&e&&n.Wc(0,At,2,6,"div",7),2&e){const e=t.$implicit,i=n.nc();n.wc("ngIf",!i.destroyOnHide||e.id===i.activeId)}}St=$localize`:@@ngb.progressbar.value04d611d19c117c60c9e14d0a04399a027184bc775214781723415385277:${"\ufffd0\ufffd"}:INTERPOLATION:%`;const Wt=["placeholder",$localize`:@@ngb.timepicker.HHce676ab1d6d98f85c836381cf100a4a91ef95a1f4043638465245303811:HH`,"aria-label",$localize`:@@ngb.timepicker.hours3bbce5fef7e1151da052a4e529453edb340e39128070396816726827304:Hours`],Rt=["placeholder",$localize`:@@ngb.timepicker.MM72c8edf6a50068a05bde70991e36b1e881f4ca541647282246509919852:MM`,"aria-label",$localize`:@@ngb.timepicker.minutes41e62daa962947c0d23ded0981975d1bddf0bf385531237363767747080:Minutes`];var Pt,Mt,Ft,Xt;function Lt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeHour(t.hourStep)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,Pt),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Nt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeHour(0-t.hourStep)})),n.Sb(1,"span",13),n.Xb(2,"span",12),n.bc(3,Mt),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Bt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeMinute(t.minuteStep)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,Ft),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Yt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeMinute(0-t.minuteStep)})),n.Sb(1,"span",13),n.Xb(2,"span",12),n.bc(3,Xt),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Vt(e,t){1&e&&(n.Xb(0,"div",5),n.Yc(1,":"),n.Wb())}Pt=$localize`:@@ngb.timepicker.increment-hourscb74bc1d625a6c1742f0d7d47306cf495780c2185939278348542933629:Increment hours`,Mt=$localize`:@@ngb.timepicker.decrement-hours147c7a19429da7d999e247d22e33fee370b1691b3651829882940481818:Decrement hours`,Ft=$localize`:@@ngb.timepicker.increment-minutesf5a4a3bc05e053f6732475d0e74875ec01c3a348180147720391025024:Increment minutes`,Xt=$localize`:@@ngb.timepicker.decrement-minutesc1a6899e529c096da5b660385d4e77fe1f7ad2717447789825403243588:Decrement minutes`;const Ut=["placeholder",$localize`:@@ngb.timepicker.SSebe38d36a40a2383c5fefa9b4608ffbda08bd4a33628127143071124194:SS`,"aria-label",$localize`:@@ngb.timepicker.seconds4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c8874012390997067175:Seconds`];var Ht,$t,Gt,zt;function qt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.changeSecond(t.secondStep)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,Ht),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Kt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.changeSecond(0-t.secondStep)})),n.Sb(1,"span",13),n.Xb(2,"span",12),n.bc(3,$t),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Zt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",14),n.Wc(1,qt,4,7,"button",3),n.Xb(2,"input",4),n.dc(3,Ut),n.jc("change",(function(t){return n.Oc(e),n.nc().updateSecond(t.target.value)}))("input",(function(t){return n.Oc(e),n.nc().formatInput(t.target)}))("keydown.ArrowUp",(function(t){n.Oc(e);const i=n.nc();return i.changeSecond(i.secondStep),t.preventDefault()}))("keydown.ArrowDown",(function(t){n.Oc(e);const i=n.nc();return i.changeSecond(0-i.secondStep),t.preventDefault()})),n.Wb(),n.Wc(4,Kt,4,7,"button",3),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.spinners),n.Cb(1),n.Hb("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),n.wc("value",e.formatMinSec(null==e.model?null:e.model.second))("readOnly",e.readonlyInputs)("disabled",e.disabled),n.Cb(2),n.wc("ngIf",e.spinners)}}function Jt(e,t){1&e&&n.Sb(0,"div",5)}function Qt(e,t){if(1&e&&(n.Vb(0),n.bc(1,Gt),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.ec(e.i18n.getAfternoonPeriod()),n.cc(1)}}function ei(e,t){if(1&e&&n.bc(0,zt),2&e){const e=n.nc(2);n.ec(e.i18n.getMorningPeriod()),n.cc(0)}}function ti(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",15),n.Xb(1,"button",16),n.jc("click",(function(){return n.Oc(e),n.nc().toggleMeridian()})),n.Wc(2,Qt,2,1,"ng-container",17),n.Wc(3,ei,1,1,"ng-template",null,18,n.Xc),n.Wb(),n.Wb()}if(2&e){const e=n.Lc(4),t=n.nc();n.Cb(1),n.Hb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),n.wc("disabled",t.disabled),n.Cb(1),n.wc("ngIf",(null==t.model?null:t.model.hour)>=12)("ngIfElse",e)}}function ii(e,t){if(1&e&&(n.Xb(0,"strong",3),n.Yc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.Zc(e.header)}}Ht=$localize`:@@ngb.timepicker.increment-seconds912322ecee7d659d04dcf494a70e22e49d334b265364772110539092174:Increment seconds`,$t=$localize`:@@ngb.timepicker.decrement-seconds5db47ac104294243a70eb9124fbea9d0004ddf69753633511487974857:Decrement seconds`,Gt=$localize`:@@ngb.timepicker.PM8d6e691e10306c1b34c6b26805151aaea320ef7f3564199131264287502:${"\ufffd0\ufffd"}:INTERPOLATION:`,zt=$localize`:@@ngb.timepicker.AM69a1f176a93998876952adac57c3bc3863b6105e4592818992509942761:${"\ufffd0\ufffd"}:INTERPOLATION:`;const ni=["aria-label",$localize`:@@ngb.toast.close-ariaf4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c87819314041543176992:Close`];function si(e,t){}function ri(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",4),n.Wc(1,si,0,0,"ng-template",5),n.Xb(2,"button",6),n.dc(3,ni),n.jc("click",(function(){return n.Oc(e),n.nc().hide()})),n.Xb(4,"span",7),n.Yc(5,"\xd7"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(1);n.Cb(1),n.wc("ngTemplateOutlet",e.contentHeaderTpl||t)}}function oi(e,t){if(1&e&&(n.Xb(0,"span"),n.Yc(1),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Eb(t.highlightClass),n.Cb(1),n.Zc(e)}}function ai(e,t){if(1&e&&n.Yc(0),2&e){const e=n.nc().$implicit;n.Zc(e)}}function ci(e,t){if(1&e&&(n.Wc(0,oi,2,3,"span",1),n.Wc(1,ai,1,1,"ng-template",null,2,n.Xc)),2&e){const e=t.odd,i=n.Lc(2);n.wc("ngIf",e)("ngIfElse",i)}}function li(e,t){if(1&e&&n.Sb(0,"ngb-highlight",2),2&e){const e=t.term;n.wc("result",(0,t.formatter)(t.result))("term",e)}}function ui(e,t){}const di=function(e,t,i){return{result:e,term:t,formatter:i}};function hi(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",3),n.jc("mouseenter",(function(){n.Oc(e);const i=t.index;return n.nc().markActive(i)}))("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc().select(i)})),n.Wc(1,ui,0,0,"ng-template",4),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(),r=n.Lc(1);n.Hb("active",i===s.activeIdx),n.wc("id",s.id+"-"+i),n.Cb(1),n.wc("ngTemplateOutlet",s.resultTemplate||r)("ngTemplateOutletContext",n.Dc(5,di,e,s.term,s.formatter))}}function pi(e){return parseInt(""+e,10)}function bi(e){return null!=e?""+e:""}function fi(e,t,i=0){return Math.max(Math.min(e,t),i)}function mi(e){return"string"==typeof e}function gi(e){return!isNaN(pi(e))}function vi(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function wi(e){return null!=e}function yi(e){return gi(e)?("0"+e).slice(-2):""}function Ci(e,t){return e&&e.className&&e.className.split&&e.className.split(/\s+/).indexOf(t)>=0}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});let ki=(()=>{class e{constructor(){this.closeOthers=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Si=0,xi=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPanelHeader",""]]}),e})(),Oi=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPanelTitle",""]]}),e})(),Di=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPanelContent",""]]}),e})(),Ii=(()=>{class e{constructor(){this.disabled=!1,this.id="ngb-panel-"+Si++,this.isOpen=!1}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["ngb-panel"]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,Oi,!1),n.Jb(i,xi,!1),n.Jb(i,Di,!1)),2&e&&(n.Kc(s=n.kc())&&(t.titleTpls=s),n.Kc(s=n.kc())&&(t.headerTpls=s),n.Kc(s=n.kc())&&(t.contentTpls=s))},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"}}),e})(),ji=(()=>{class e{constructor(e){this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new n.n,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const t=this._findPanelById(e);t&&this._changeOpenState(t,!t.isOpen)}ngAfterContentChecked(){mi(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0]),this._updateActiveIds())}_changeOpenState(e,t){if(e&&!e.disabled&&e.isOpen!==t){let i=!1;this.panelChange.emit({panelId:e.id,nextState:t,preventDefault:()=>{i=!0}}),i||(e.isOpen=t,t&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds())}}_closeOthers(e){this.panels.forEach(t=>{t.id!==e&&(t.isOpen=!1)})}_findPanelById(e){return this.panels.find(t=>t.id===e)}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(ki))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-accordion"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,Ii,!1),2&e&&n.Kc(s=n.kc())&&(t.panels=s)},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,t){2&e&&n.Db("aria-multiselectable",!t.closeOtherPanels)},inputs:{activeIds:"activeIds",destroyOnHide:"destroyOnHide",type:"type",closeOtherPanels:["closeOthers","closeOtherPanels"]},outputs:{panelChange:"panelChange"},exportAs:["ngbAccordion"],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"btn","btn-link",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel","class","collapse",3,"id","show",4,"ngIf"],["role","tabpanel",1,"collapse",3,"id"],[1,"card-body"]],template:function(e,t){1&e&&(n.Wc(0,B,3,3,"ng-template",0,1,n.Xc),n.Wc(2,$,4,11,"ng-template",2)),2&e&&(n.Cb(2),n.wc("ngForOf",t.panels))},directives:function(){return[xi,s.t,Ti,s.B,s.u]},encapsulation:2}),e})(),Ti=(()=>{class e{constructor(e,t){this.accordion=e,this.panel=t}set ngbPanelToggle(e){e&&(this.panel=e)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(ji),n.Rb(Ii,9))},e.\u0275dir=n.Mb({type:e,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,t){1&e&&n.jc("click",(function(){return t.accordion.toggle(t.panel.id)})),2&e&&(n.ac("disabled",t.panel.disabled),n.Db("aria-expanded",t.panel.isOpen)("aria-controls",t.panel.id),n.Hb("collapsed",!t.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"}}),e})(),Ei=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Ai=(()=>{class e{constructor(){this.dismissible=!0,this.type="warning"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),_i=(()=>{class e{constructor(e,t,i){this._renderer=t,this._element=i,this.close=new n.n,this.dismissible=e.dismissible,this.type=e.type}closeHandler(){this.close.emit(null)}ngOnChanges(e){const t=e.type;t&&!t.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+t.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+t.currentValue))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Ai),n.Rb(n.F),n.Rb(n.l))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert"],hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("alert-dismissible",t.dismissible)},inputs:{dismissible:"dismissible",type:"type"},outputs:{close:"close"},features:[n.Ab],ngContentSelectors:q,decls:2,vars:1,consts:[["type","button","class","close","aria-label","Close",3,"click",4,"ngIf"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(e,t){1&e&&(n.vc(),n.uc(0),n.Wc(1,z,4,0,"button",0)),2&e&&(n.Cb(1),n.wc("ngIf",t.dismissible))},directives:[s.u],styles:["ngb-alert{display:block}"],encapsulation:2,changeDetection:0}),e})(),Wi=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Ri=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbButtonLabel",""]],hostVars:8,hostBindings:function(e,t){2&e&&n.Hb("btn",!0)("active",t.active)("disabled",t.disabled)("focus",t.focused)}}),e})();const Pi={provide:r.q,useExisting:Object(n.U)(()=>Mi),multi:!0};let Mi=(()=>{class e{constructor(e,t){this._label=e,this._cd=t,this.disabled=!1,this.valueChecked=!0,this.valueUnChecked=!1,this.onChange=e=>{},this.onTouched=()=>{}}set focused(e){this._label.focused=e,e||this.onTouched()}onInputChange(e){const t=e.target.checked?this.valueChecked:this.valueUnChecked;this.onChange(t),this.onTouched(),this.writeValue(t)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._label.disabled=e}writeValue(e){this.checked=e===this.valueChecked,this._label.active=this.checked,this._cd.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Ri),n.Rb(n.h))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbButton","","type","checkbox"]],hostVars:2,hostBindings:function(e,t){1&e&&n.jc("change",(function(e){return t.onInputChange(e)}))("focus",(function(){return t.focused=!0}))("blur",(function(){return t.focused=!1})),2&e&&n.ac("checked",t.checked)("disabled",t.disabled)},inputs:{disabled:"disabled",valueChecked:"valueChecked",valueUnChecked:"valueUnChecked"},features:[n.Bb([Pi])]}),e})();const Fi={provide:r.q,useExisting:Object(n.U)(()=>Li),multi:!0};let Xi=0,Li=(()=>{class e{constructor(){this._radios=new Set,this._value=null,this.name="ngb-radio-"+Xi++,this.onChange=e=>{},this.onTouched=()=>{}}get disabled(){return this._disabled}set disabled(e){this.setDisabledState(e)}onRadioChange(e){this.writeValue(e.value),this.onChange(e.value)}onRadioValueUpdate(){this._updateRadiosValue()}register(e){this._radios.add(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._disabled=e,this._updateRadiosDisabled()}unregister(e){this._radios.delete(e)}writeValue(e){this._value=e,this._updateRadiosValue()}_updateRadiosValue(){this._radios.forEach(e=>e.updateValue(this._value))}_updateRadiosDisabled(){this._radios.forEach(e=>e.updateDisabled())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbRadioGroup",""]],hostAttrs:["role","radiogroup"],inputs:{name:"name"},features:[n.Bb([Fi])]}),e})(),Ni=(()=>{class e{constructor(e,t,i,n,s){this._group=e,this._label=t,this._renderer=i,this._element=n,this._cd=s,this._value=null,this._group.register(this),this.updateDisabled()}set value(e){this._value=e;const t=e?e.toString():"";this._renderer.setProperty(this._element.nativeElement,"value",t),this._group.onRadioValueUpdate()}set disabled(e){this._disabled=!1!==e,this.updateDisabled()}set focused(e){this._label&&(this._label.focused=e),e||this._group.onTouched()}get checked(){return this._checked}get disabled(){return this._group.disabled||this._disabled}get value(){return this._value}get nameAttr(){return this.name||this._group.name}ngOnDestroy(){this._group.unregister(this)}onChange(){this._group.onRadioChange(this)}updateValue(e){this.value!==e&&this._cd.markForCheck(),this._checked=this.value===e,this._label.active=this._checked}updateDisabled(){this._label.disabled=this.disabled}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Li),n.Rb(Ri),n.Rb(n.F),n.Rb(n.l),n.Rb(n.h))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbButton","","type","radio"]],hostVars:3,hostBindings:function(e,t){1&e&&n.jc("change",(function(){return t.onChange()}))("focus",(function(){return t.focused=!0}))("blur",(function(){return t.focused=!1})),2&e&&n.ac("checked",t.checked)("disabled",t.disabled)("name",t.nameAttr)},inputs:{value:"value",disabled:"disabled",name:"name"}}),e})(),Bi=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})(),Yi=(()=>{class e{constructor(){this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Vi=0,Ui=(()=>{class e{constructor(e){this.tplRef=e,this.id="ngb-slide-"+Vi++}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"}}),e})(),Hi=(()=>{class e{constructor(e,t,i,s){this._platformId=t,this._ngZone=i,this._cd=s,this.NgbSlideEventSource=Gi,this._destroy$=new o.a,this._interval$=new a.a(0),this._mouseHover$=new a.a(!1),this._pauseOnHover$=new a.a(!1),this._pause$=new a.a(!1),this._wrap$=new a.a(!1),this.slide=new n.n,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}mouseEnter(){this._mouseHover$.next(!0)}mouseLeave(){this._mouseHover$.next(!1)}ngAfterContentInit(){Object(s.P)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=Object(c.a)(this.slide.pipe(Object(C.a)(e=>e.current),Object(k.a)(this.activeId)),this._wrap$,this.slides.changes.pipe(Object(k.a)(null))).pipe(Object(C.a)(([e,t])=>{const i=this.slides.toArray(),n=this._getSlideIdxById(e);return t?i.length>1:n<i.length-1}),Object(S.a)());Object(c.a)(this._pause$,this._pauseOnHover$,this._mouseHover$,this._interval$,e).pipe(Object(C.a)(([e,t,i,n,s])=>e||t&&i||!s?0:n),Object(S.a)(),Object(x.a)(e=>e>0?Object(l.a)(e,e):h),Object(O.a)(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Gi.TIMER)))}),this.slides.changes.pipe(Object(O.a)(this._destroy$)).subscribe(()=>this._cd.markForCheck())}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:null}ngOnDestroy(){this._destroy$.next()}select(e,t){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),t)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),$i.RIGHT,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),$i.LEFT,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}_cycleToSelected(e,t,i){let n=this._getSlideById(e);n&&n.id!==this.activeId&&(this.slide.emit({prev:this.activeId,current:n.id,direction:t,paused:this._pause$.value,source:i}),this.activeId=n.id),this._cd.markForCheck()}_getSlideEventDirection(e,t){return this._getSlideIdxById(e)>this._getSlideIdxById(t)?$i.RIGHT:$i.LEFT}_getSlideById(e){return this.slides.find(t=>t.id===e)}_getSlideIdxById(e){return this.slides.toArray().indexOf(this._getSlideById(e))}_getNextSlide(e){const t=this.slides.toArray(),i=this._getSlideIdxById(e);return i===t.length-1?this.wrap?t[0].id:t[t.length-1].id:t[i+1].id}_getPrevSlide(e){const t=this.slides.toArray(),i=this._getSlideIdxById(e);return 0===i?this.wrap?t[t.length-1].id:t[0].id:t[i-1].id}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Yi),n.Rb(n.B),n.Rb(n.z),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-carousel"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,Ui,!1),2&e&&n.Kc(s=n.kc())&&(t.slides=s)},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:2,hostBindings:function(e,t){1&e&&n.jc("keydown.arrowLeft",(function(){return t.keyboard&&t.prev(t.NgbSlideEventSource.ARROW_LEFT)}))("keydown.arrowRight",(function(){return t.keyboard&&t.next(t.NgbSlideEventSource.ARROW_RIGHT)}))("mouseenter",(function(){return t.mouseEnter()}))("mouseleave",(function(){return t.mouseLeave()})),2&e&&n.Vc("display","block")},inputs:{interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators",activeId:"activeId"},outputs:{slide:"slide"},exportAs:["ngbCarousel"],decls:5,vars:4,consts:[["class","carousel-indicators",4,"ngIf"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["class","carousel-control-prev","role","button",3,"click",4,"ngIf"],["class","carousel-control-next","role","button",3,"click",4,"ngIf"],[1,"carousel-indicators"],[3,"id","active","click",4,"ngFor","ngForOf"],[3,"id","click"],[1,"carousel-item"],[3,"ngTemplateOutlet"],["role","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(e,t){1&e&&(n.Wc(0,Z,2,1,"ol",0),n.Xb(1,"div",1),n.Wc(2,Q,2,3,"div",2),n.Wb(),n.Wc(3,ie,4,0,"a",3),n.Wc(4,ne,4,0,"a",4)),2&e&&(n.wc("ngIf",t.showNavigationIndicators),n.Cb(2),n.wc("ngForOf",t.slides),n.Cb(1),n.wc("ngIf",t.showNavigationArrows),n.Cb(1),n.wc("ngIf",t.showNavigationArrows))},directives:[s.u,s.t,s.B],encapsulation:2,changeDetection:0}),e})();const $i={LEFT:"left",RIGHT:"right"},Gi={TIMER:"timer",ARROW_LEFT:"arrowLeft",ARROW_RIGHT:"arrowRight",INDICATOR:"indicator"};let zi=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),qi=(()=>{class e{constructor(){this.collapsed=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbCollapse",""]],hostVars:4,hostBindings:function(e,t){2&e&&n.Hb("collapse",!0)("show",!t.collapsed)},inputs:{collapsed:["ngbCollapse","collapsed"]},exportAs:["ngbCollapse"]}),e})(),Ki=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();class Zi{static from(e){return e instanceof Zi?e:e?new Zi(e.year,e.month,e.day):null}constructor(e,t,i){this.year=vi(e)?e:null,this.month=vi(t)?t:null,this.day=vi(i)?i:null}equals(e){return e&&this.year===e.year&&this.month===e.month&&this.day===e.day}before(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day<e.day:this.month<e.month:this.year<e.year)}after(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day>e.day:this.month>e.month:this.year>e.year)}}function Ji(e){return new Zi(e.getFullYear(),e.getMonth()+1,e.getDate())}function Qi(e){const t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}function en(){return new nn}let tn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:function(){return en()},providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:en,token:e,providedIn:"root"}),e})(),nn=(()=>{class e extends tn{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(e,t="d",i=1){let n=Qi(e),s=!0,r=n.getMonth();switch(t){case"y":n.setFullYear(n.getFullYear()+i);break;case"m":r+=i,n.setMonth(r),r%=12,r<0&&(r+=12);break;case"d":n.setDate(n.getDate()+i),s=!1;break;default:return e}return s&&n.getMonth()!==r&&n.setDate(0),Ji(n)}getPrev(e,t="d",i=1){return this.getNext(e,t,-i)}getWeekday(e){let t=Qi(e).getDay();return 0===t?7:t}getWeekNumber(e,t){7===t&&(t=0);const i=Qi(e[(11-t)%7]);i.setDate(i.getDate()+4-(i.getDay()||7));const n=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((n-i.getTime())/864e5)/7)+1}getToday(){return Ji(new Date)}isValid(e){if(!(e&&vi(e.year)&&vi(e.month)&&vi(e.day)))return!1;if(0===e.year)return!1;const t=Qi(e);return!isNaN(t.getTime())&&t.getFullYear()===e.year&&t.getMonth()+1===e.month&&t.getDate()===e.day}}return e.\u0275fac=function(t){return sn(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const sn=n.Zb(nn);function rn(e,t){return!function(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}(e,t)}function on(e,t){return!(!e&&!t||e&&t&&e.year===t.year&&e.month===t.month)}function an(e,t,i){return e&&t&&e.before(t)?t:e&&i&&e.after(i)?i:e}function cn(e,t){const{minDate:i,maxDate:n,disabled:s,markDisabled:r}=t;return!(!wi(e)||s||r&&r(e,{year:e.year,month:e.month})||i&&e.before(i)||n&&e.after(n))}function ln(e){return new dn(e)}let un=(()=>{class e{getDayNumerals(e){return""+e.day}getWeekNumerals(e){return""+e}getYearNumerals(e){return""+e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:function(e){return e?new e:ln(n.fc(n.u))},providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return ln(Object(n.fc)(n.u))},token:e,providedIn:"root"}),e})(),dn=(()=>{class e extends un{constructor(e){super(),this._locale=e;const t=Object(s.M)(e,s.h.Standalone,s.H.Short);this._weekdaysShort=t.map((e,i)=>t[(i+1)%7]),this._monthsShort=Object(s.O)(e,s.h.Standalone,s.H.Abbreviated),this._monthsFull=Object(s.O)(e,s.h.Standalone,s.H.Wide)}getWeekdayShortName(e){return this._weekdaysShort[e-1]}getMonthShortName(e){return this._monthsShort[e-1]}getMonthFullName(e){return this._monthsFull[e-1]}getDayAriaLabel(e){const t=new Date(e.year,e.month-1,e.day);return Object(s.K)(t,"fullDate",this._locale)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.u))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})(),hn=(()=>{class e{constructor(e,t){this._calendar=e,this._i18n=t,this._VALIDATORS={dayTemplateData:e=>{if(this._state.dayTemplateData!==e)return{dayTemplateData:e}},displayMonths:e=>{if(vi(e=pi(e))&&e>0&&this._state.displayMonths!==e)return{displayMonths:e}},disabled:e=>{if(this._state.disabled!==e)return{disabled:e}},firstDayOfWeek:e=>{if(vi(e=pi(e))&&e>=0&&this._state.firstDayOfWeek!==e)return{firstDayOfWeek:e}},focusVisible:e=>{if(this._state.focusVisible!==e&&!this._state.disabled)return{focusVisible:e}},markDisabled:e=>{if(this._state.markDisabled!==e)return{markDisabled:e}},maxDate:e=>{const t=this.toValidDate(e,null);if(rn(this._state.maxDate,t))return{maxDate:t}},minDate:e=>{const t=this.toValidDate(e,null);if(rn(this._state.minDate,t))return{minDate:t}},navigation:e=>{if(this._state.navigation!==e)return{navigation:e}},outsideDays:e=>{if(this._state.outsideDays!==e)return{outsideDays:e}}},this._model$=new o.a,this._dateSelect$=new o.a,this._state={disabled:!1,displayMonths:1,firstDayOfWeek:1,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectBoxes:{years:[],months:[]},selectedDate:null}}get model$(){return this._model$.pipe(Object(D.a)(e=>e.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Object(D.a)(e=>null!==e))}set(e){let t=Object.keys(e).map(t=>this._VALIDATORS[t](e[t])).reduce((e,t)=>Object.assign({},e,t),{});Object.keys(t).length>0&&this._nextState(t)}focus(e){!this._state.disabled&&this._calendar.isValid(e)&&rn(this._state.focusDate,e)&&this._nextState({focusDate:e})}focusSelect(){cn(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(e){const t=this.toValidDate(e,this._calendar.getToday());this._state.disabled||this._state.firstDate&&!on(this._state.firstDate,e)||this._nextState({firstDate:t})}select(e,t={}){const i=this.toValidDate(e,null);this._state.disabled||(rn(this._state.selectedDate,i)&&this._nextState({selectedDate:i}),t.emitEvent&&cn(i,this._state)&&this._dateSelect$.next(i))}toValidDate(e,t){const i=Zi.from(e);return void 0===t&&(t=this._calendar.getToday()),this._calendar.isValid(i)?i:t}getMonth(e){for(let t of this._state.months)if(e.month===t.number&&e.year===t.year)return t;throw new Error(`month ${e.month} of year ${e.year} not found`)}_nextState(e){const t=this._updateState(e);this._patchContexts(t),this._state=t,this._model$.next(this._state)}_patchContexts(e){const{months:t,displayMonths:i,selectedDate:n,focusDate:s,focusVisible:r,disabled:o,outsideDays:a}=e;e.months.forEach(e=>{e.weeks.forEach(c=>{c.days.forEach(c=>{s&&(c.context.focused=s.equals(c.date)&&r),c.tabindex=!o&&c.date.equals(s)&&s.month===e.number?0:-1,!0===o&&(c.context.disabled=!0),void 0!==n&&(c.context.selected=null!==n&&n.equals(c.date)),e.number!==c.date.month&&(c.hidden="hidden"===a||"collapsed"===a||i>1&&c.date.after(t[0].firstDate)&&c.date.before(t[i-1].lastDate))})})})}_updateState(e){const t=Object.assign({},this._state,e);let i=t.firstDate;if(("minDate"in e||"maxDate"in e)&&(function(e,t){if(t&&e&&t.before(e))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${e}`)}(t.minDate,t.maxDate),t.focusDate=an(t.focusDate,t.minDate,t.maxDate),t.firstDate=an(t.firstDate,t.minDate,t.maxDate),i=t.focusDate),"disabled"in e&&(t.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(i=t.selectedDate),"focusVisible"in e)return t;if("focusDate"in e&&(t.focusDate=an(t.focusDate,t.minDate,t.maxDate),i=t.focusDate,0!==t.months.length&&!t.focusDate.before(t.firstDate)&&!t.focusDate.after(t.lastDate)))return t;if("firstDate"in e&&(t.firstDate=an(t.firstDate,t.minDate,t.maxDate),i=t.firstDate),i){const n=function(e,t,i,n,s){const{displayMonths:r,months:o}=i,a=o.splice(0,o.length);return Array.from({length:r},(i,n)=>{const r=Object.assign(e.getNext(t,"m",n),{day:1});if(o[n]=null,!s){const e=a.findIndex(e=>e.firstDate.equals(r));-1!==e&&(o[n]=a.splice(e,1)[0])}return r}).forEach((t,s)=>{null===o[s]&&(o[s]=function(e,t,i,n,s={}){const{dayTemplateData:r,minDate:o,maxDate:a,firstDayOfWeek:c,markDisabled:l,outsideDays:u}=i,d=e.getToday();s.firstDate=null,s.lastDate=null,s.number=t.month,s.year=t.year,s.weeks=s.weeks||[],s.weekdays=s.weekdays||[],t=function(e,t,i){const n=e.getDaysPerWeek(),s=new Zi(t.year,t.month,1),r=e.getWeekday(s)%n;return e.getPrev(s,"d",(n+r-i)%n)}(e,t,c);for(let h=0;h<e.getWeeksPerMonth();h++){let i=s.weeks[h];i||(i=s.weeks[h]={number:0,days:[],collapsed:!0});const p=i.days;for(let c=0;c<e.getDaysPerWeek();c++){0===h&&(s.weekdays[c]=e.getWeekday(t));const i=new Zi(t.year,t.month,t.day),u=e.getNext(i),b=n.getDayAriaLabel(i);let f=!!(o&&i.before(o)||a&&i.after(a));!f&&l&&(f=l(i,{month:s.number,year:s.year}));let m=i.equals(d),g=r?r(i,{month:s.number,year:s.year}):void 0;null===s.firstDate&&i.month===s.number&&(s.firstDate=i),i.month===s.number&&u.month!==s.number&&(s.lastDate=i);let v=p[c];v||(v=p[c]={}),v.date=i,v.context=Object.assign(v.context||{},{$implicit:i,date:i,data:g,currentMonth:s.number,currentYear:s.year,disabled:f,focused:!1,selected:!1,today:m}),v.tabindex=-1,v.ariaLabel=b,v.hidden=!1,t=u}i.number=e.getWeekNumber(p.map(e=>e.date),c),i.collapsed="collapsed"===u&&p[0].date.month!==s.number&&p[p.length-1].date.month!==s.number}return s}(e,t,i,n,a.shift()||{}))}),o}(this._calendar,i,t,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e);t.months=n,t.firstDate=n.length>0?n[0].firstDate:void 0,t.lastDate=n.length>0?n[n.length-1].lastDate:void 0,"selectedDate"in e&&!cn(t.selectedDate,t)&&(t.selectedDate=null),"firstDate"in e&&(void 0===t.focusDate||t.focusDate.before(t.firstDate)||t.focusDate.after(t.lastDate))&&(t.focusDate=i);const s=!this._state.firstDate||this._state.firstDate.year!==t.firstDate.year,r=!this._state.firstDate||this._state.firstDate.month!==t.firstDate.month;"select"===t.navigation?(("minDate"in e||"maxDate"in e||0===t.selectBoxes.years.length||s)&&(t.selectBoxes.years=function(e,t,i){if(!e)return[];const n=t?Math.max(t.year,e.year-500):e.year-10,s=(i?Math.min(i.year,e.year+500):e.year+10)-n+1,r=Array(s);for(let o=0;o<s;o++)r[o]=n+o;return r}(t.firstDate,t.minDate,t.maxDate)),("minDate"in e||"maxDate"in e||0===t.selectBoxes.months.length||s)&&(t.selectBoxes.months=function(e,t,i,n){if(!t)return[];let s=e.getMonths(t.year);if(i&&t.year===i.year){const e=s.findIndex(e=>e===i.month);s=s.slice(e)}if(n&&t.year===n.year){const e=s.findIndex(e=>e===n.month);s=s.slice(0,e+1)}return s}(this._calendar,t.firstDate,t.minDate,t.maxDate))):t.selectBoxes={years:[],months:[]},"arrows"!==t.navigation&&"select"!==t.navigation||!(r||s||"minDate"in e||"maxDate"in e||"disabled"in e)||(t.prevDisabled=t.disabled||function(e,t,i){const n=Object.assign(e.getPrev(t,"m"),{day:1});return i&&(n.year===i.year&&n.month<i.month||n.year<i.year&&1===i.month)}(this._calendar,t.firstDate,t.minDate),t.nextDisabled=t.disabled||function(e,t,i){const n=Object.assign(e.getNext(t,"m"),{day:1});return i&&n.after(i)}(this._calendar,t.lastDate,t.maxDate))}return t}}return e.\u0275fac=function(t){return new(t||e)(n.fc(tn),n.fc(un))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const pn=function(){var e={PREV:0,NEXT:1};return e[e.PREV]="PREV",e[e.NEXT]="NEXT",e}();let bn=(()=>{class e{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();function fn(){return new gn}let mn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:function(){return fn()},providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:fn,token:e,providedIn:"root"}),e})(),gn=(()=>{class e extends mn{fromModel(e){return e&&vi(e.year)&&vi(e.month)&&vi(e.day)?{year:e.year,month:e.month,day:e.day}:null}toModel(e){return e&&vi(e.year)&&vi(e.month)&&vi(e.day)?{year:e.year,month:e.month,day:e.day}:null}}return e.\u0275fac=function(t){return vn(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const vn=n.Zb(gn),wn={provide:r.q,useExisting:Object(n.U)(()=>Cn),multi:!0};let yn=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbDatepickerContent",""]]}),e})(),Cn=(()=>{class e{constructor(e,t,i,s,r,a,c,l){this._service=e,this._calendar=t,this.i18n=i,this._elementRef=a,this._ngbDateAdapter=c,this._ngZone=l,this._destroyed$=new o.a,this._publicState={},this.navigate=new n.n,this.dateSelect=new n.n,this.select=this.dateSelect,this.onChange=e=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate"].forEach(e=>this[e]=s[e]),e.dateSelect$.pipe(Object(O.a)(this._destroyed$)).subscribe(e=>{this.dateSelect.emit(e)}),e.model$.pipe(Object(O.a)(this._destroyed$)).subscribe(e=>{const t=e.firstDate,i=this.model?this.model.firstDate:null;this._publicState={maxDate:e.maxDate,minDate:e.minDate,firstDate:e.firstDate,lastDate:e.lastDate,focusedDate:e.focusDate,months:e.months.map(e=>e.firstDate)};let n=!1;if(!t.equals(i)&&(this.navigate.emit({current:i?{year:i.year,month:i.month}:null,next:{year:t.year,month:t.month},preventDefault:()=>n=!0}),n&&null!==i))return void this._service.open(i);const s=e.selectedDate,o=e.focusDate,a=this.model?this.model.focusDate:null;this.model=e,rn(s,this._controlValue)&&(this._controlValue=s,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(s))),rn(o,a)&&a&&e.focusVisible&&this.focus(),r.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(e){this._service.focus(Zi.from(e))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Object(I.a)(1)).subscribe(()=>{const e=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})}navigateTo(e){this._service.open(Zi.from(e?e.day?e:Object.assign({},e,{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=Object(p.a)(this._contentEl.nativeElement,"focusin"),t=Object(p.a)(this._contentEl.nativeElement,"focusout"),{nativeElement:i}=this._elementRef;Object(b.a)(e,t).pipe(Object(D.a)(({target:e,relatedTarget:t})=>!(Ci(e,"ngb-dp-day")&&Ci(t,"ngb-dp-day")&&i.contains(e)&&i.contains(t))),Object(O.a)(this._destroyed$)).subscribe(({type:e})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===e})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const e={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].forEach(t=>e[t]=this[t]),this._service.set(e),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(e){const t={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].filter(t=>t in e).forEach(e=>t[e]=this[e]),this._service.set(t),"startDate"in e){const{currentValue:t,previousValue:i}=e.startDate;on(i,t)&&this.navigateTo(this.startDate)}}onDateSelect(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})}onNavigateDateSelect(e){this._service.open(e)}onNavigateEvent(e){switch(e){case pn.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case pn.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._service.set({disabled:e})}writeValue(e){this._controlValue=Zi.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(hn),n.Rb(tn),n.Rb(un),n.Rb(bn),n.Rb(n.h),n.Rb(n.l),n.Rb(mn),n.Rb(n.z))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker"]],contentQueries:function(e,t,i){var s;1&e&&n.Tc(i,yn,!0),2&e&&n.Kc(s=n.kc())&&(t.contentTemplate=s.first)},viewQuery:function(e,t){var i;1&e&&(n.Uc(se,!0),n.Uc(re,!0)),2&e&&(n.Kc(i=n.kc())&&(t._defaultDayTemplate=i.first),n.Kc(i=n.kc())&&(t._contentEl=i.first))},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},outputs:{navigate:"navigate",dateSelect:"dateSelect",select:"select"},exportAs:["ngbDatepicker"],features:[n.Bb([wn,hn]),n.Ab],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(e,t){if(1&e&&(n.Wc(0,oe,1,5,"ng-template",null,0,n.Xc),n.Wc(2,le,1,1,"ng-template",null,1,n.Xc),n.Xb(4,"div",2),n.Wc(5,ue,1,7,"ngb-datepicker-navigation",3),n.Wb(),n.Xb(6,"div",4,5),n.Wc(8,de,0,0,"ng-template",6),n.Wb(),n.Wc(9,he,0,0,"ng-template",6)),2&e){const e=n.Lc(3);n.Cb(5),n.wc("ngIf","none"!==t.navigation),n.Cb(1),n.Hb("ngb-dp-months",!t.contentTemplate),n.Cb(2),n.wc("ngTemplateOutlet",(null==t.contentTemplate?null:t.contentTemplate.templateRef)||e),n.Cb(1),n.wc("ngTemplateOutlet",t.footerTemplate)}},directives:function(){return[s.u,s.B,$n,s.t,xn,On]},styles:["ngb-datepicker{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}.ngb-dp-body{z-index:1050}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-months{display:-ms-flexbox;display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}"],encapsulation:2,changeDetection:0}),e})();const kn=function(){var e={Tab:9,Enter:13,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40};return e[e.Tab]="Tab",e[e.Enter]="Enter",e[e.Escape]="Escape",e[e.Space]="Space",e[e.PageUp]="PageUp",e[e.PageDown]="PageDown",e[e.End]="End",e[e.Home]="Home",e[e.ArrowLeft]="ArrowLeft",e[e.ArrowUp]="ArrowUp",e[e.ArrowRight]="ArrowRight",e[e.ArrowDown]="ArrowDown",e}();let Sn=(()=>{class e{processKey(e,t){const{state:i,calendar:n}=t;switch(e.which){case kn.PageUp:t.focusDate(n.getPrev(i.focusedDate,e.shiftKey?"y":"m",1));break;case kn.PageDown:t.focusDate(n.getNext(i.focusedDate,e.shiftKey?"y":"m",1));break;case kn.End:t.focusDate(e.shiftKey?i.maxDate:i.lastDate);break;case kn.Home:t.focusDate(e.shiftKey?i.minDate:i.firstDate);break;case kn.ArrowLeft:t.focusDate(n.getPrev(i.focusedDate,"d",1));break;case kn.ArrowUp:t.focusDate(n.getPrev(i.focusedDate,"d",n.getDaysPerWeek()));break;case kn.ArrowRight:t.focusDate(n.getNext(i.focusedDate,"d",1));break;case kn.ArrowDown:t.focusDate(n.getNext(i.focusedDate,"d",n.getDaysPerWeek()));break;case kn.Enter:case kn.Space:t.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),xn=(()=>{class e{constructor(e,t,i,n){this.i18n=e,this.datepicker=t,this._keyboardService=i,this._service=n}set month(e){this.viewModel=this._service.getMonth(e)}onKeyDown(e){this._keyboardService.processKey(e,this.datepicker)}doSelect(e){e.context.disabled||e.hidden||this.datepicker.onDateSelect(e.date)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(un),n.Rb(Cn),n.Rb(Sn),n.Rb(hn))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(e,t){1&e&&n.jc("keydown",(function(e){return t.onKeyDown(e)}))},inputs:{month:"month"},decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.Wc(0,fe,3,2,"div",0),n.Wc(1,Ce,1,1,"ng-template",1)),2&e&&(n.wc("ngIf",t.datepicker.showWeekdays),n.Cb(1),n.wc("ngForOf",t.viewModel.weeks))},directives:[s.u,s.t,s.B],styles:['ngb-datepicker-month{display:block}.ngb-dp-week-number,.ngb-dp-weekday{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:#5bc0de;color:var(--info)}.ngb-dp-week{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-day,.ngb-dp-week-number,.ngb-dp-weekday{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default}.ngb-dp-day[tabindex="0"]{z-index:1}'],encapsulation:2}),e})(),On=(()=>{class e{constructor(e){this.i18n=e,this.navigation=pn,this.months=[],this.navigate=new n.n,this.select=new n.n}onClickPrev(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(un))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker-navigation"]],inputs:{months:"months",date:"date",disabled:"disabled",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},decls:10,vars:4,consts:[[1,"ngb-dp-arrow"],["type","button",1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click",6,"aria-label","title"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"button",1),n.dc(2,ke),n.jc("click",(function(e){return t.onClickPrev(e)})),n.Sb(3,"span",2),n.Wb(),n.Wb(),n.Wc(4,xe,1,4,"ngb-datepicker-navigation-select",3),n.Wc(5,je,1,1,void 0,4),n.Xb(6,"div",5),n.Xb(7,"button",1),n.dc(8,Se),n.jc("click",(function(e){return t.onClickNext(e)})),n.Sb(9,"span",2),n.Wb(),n.Wb()),2&e&&(n.Cb(1),n.wc("disabled",t.prevDisabled),n.Cb(3),n.wc("ngIf",t.showSelect),n.Cb(1),n.wc("ngIf",!t.showSelect),n.Cb(2),n.wc("disabled",t.nextDisabled))},directives:function(){return[s.u,Gn,s.t]},styles:["ngb-datepicker-navigation{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right .ngb-dp-navigation-chevron{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],encapsulation:2,changeDetection:0}),e})();const Dn=(e,t)=>!!t&&t.some(t=>t.contains(e)),In=(e,t)=>!t||null!=function(e,t){return t?e.closest(t):null}(e,t),jn=(()=>"undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)))();function Tn(e,t,i,n,s,r,o,a){var c;i&&e.runOutsideAngular((c=()=>{const c=Object(p.a)(t,"keydown").pipe(Object(O.a)(s),Object(D.a)(e=>e.which===kn.Escape),Object(j.a)(e=>e.preventDefault())),l=Object(p.a)(t,"mousedown").pipe(Object(C.a)(e=>{const t=e.target;return 2!==e.button&&!Dn(t,o)&&("inside"===i?Dn(t,r)&&In(t,a):"outside"===i?!Dn(t,r):In(t,a)||!Dn(t,r))}),Object(O.a)(s));(function(...e){if(1===e.length){if(!Object(f.a)(e[0]))return e[0];e=e[0]}return Object(m.a)(e,void 0).lift(new w)})([c,Object(p.a)(t,"mouseup").pipe(T(l),Object(D.a)(([e,t])=>t),P(0),Object(O.a)(s))]).subscribe(()=>e.run(n))},jn?()=>setTimeout(()=>c(),100):c))}const En=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function An(e){const t=Array.from(e.querySelectorAll(En)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}const _n=(e,t,i,n=!1)=>{e.runOutsideAngular(()=>{const e=Object(p.a)(t,"focusin").pipe(Object(O.a)(i),Object(C.a)(e=>e.target));Object(p.a)(t,"keydown").pipe(Object(O.a)(i),Object(D.a)(e=>e.which===kn.Tab),T(e)).subscribe(([e,i])=>{const[n,s]=An(t);i!==n&&i!==t||!e.shiftKey||(s.focus(),e.preventDefault()),i!==s||e.shiftKey||(n.focus(),e.preventDefault())}),n&&Object(p.a)(t,"click").pipe(Object(O.a)(i),T(e),Object(C.a)(e=>e[1])).subscribe(e=>e.focus())})};class Wn{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let i,n={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))i=e.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{const t=this.offsetParent(e);i=this.offset(e,!1),t!==document.documentElement&&(n=this.offset(t,!1)),n.top+=t.clientTop,n.left+=t.clientLeft}return i.top-=n.top,i.bottom-=n.top,i.left-=n.left,i.right-=n.left,t&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i}offset(e,t=!0){const i=e.getBoundingClientRect(),n=window.pageYOffset-document.documentElement.clientTop,s=window.pageXOffset-document.documentElement.clientLeft;let r={height:i.height||e.offsetHeight,width:i.width||e.offsetWidth,top:i.top+n,bottom:i.bottom+n,left:i.left+s,right:i.right+s};return t&&(r.height=Math.round(r.height),r.width=Math.round(r.width),r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}positionElements(e,t,i,n){const[s="top",r="center"]=i.split("-"),o=n?this.offset(e,!1):this.position(e,!1),a=this.getAllStyles(t),c=parseFloat(a.marginTop),l=parseFloat(a.marginBottom),u=parseFloat(a.marginLeft),d=parseFloat(a.marginRight);let h=0,p=0;switch(s){case"top":h=o.top-(t.offsetHeight+c+l);break;case"bottom":h=o.top+o.height;break;case"left":p=o.left-(t.offsetWidth+u+d);break;case"right":p=o.left+o.width}switch(r){case"top":h=o.top;break;case"bottom":h=o.top+o.height-t.offsetHeight;break;case"left":p=o.left;break;case"right":p=o.left+o.width-t.offsetWidth;break;case"center":"top"===s||"bottom"===s?p=o.left+o.width/2-t.offsetWidth/2:h=o.top+o.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(p)}px, ${Math.round(h)}px)`;const b=t.getBoundingClientRect(),f=document.documentElement,m=window.innerHeight||f.clientHeight,g=window.innerWidth||f.clientWidth;return b.left>=0&&b.top>=0&&b.right<=g&&b.bottom<=m}}const Rn=/\s+/,Pn=new Wn;function Mn(e,t,i,n,s){let r=Array.isArray(i)?i:i.split(Rn);const o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,c=e=>{const[t,i]=e.split("-"),n=[];return s&&(n.push(`${s}-${t}`),i&&n.push(`${s}-${t}-${i}`),n.forEach(e=>{a.add(e)})),n};s&&o.forEach(e=>{a.remove(`${s}-${e}`)});let l=r.findIndex(e=>"auto"===e);l>=0&&o.forEach((function(e){null==r.find(t=>-1!==t.search("^"+e))&&r.splice(l++,1,e)}));const u=t.style;let d;u.position="absolute",u.top="0",u.left="0",u["will-change"]="transform";let h=!1;for(d of r){let i=c(d);if(Pn.positionElements(e,t,d,n)){h=!0;break}s&&i.forEach(e=>{a.remove(e)})}return h||(d=r[0],c(d),Pn.positionElements(e,t,d,n)),d}function Fn(){return new Ln}let Xn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:function(){return Fn()},providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:Fn,token:e,providedIn:"root"}),e})(),Ln=(()=>{class e extends Xn{parse(e){if(e){const t=e.trim().split("-");if(1===t.length&&gi(t[0]))return{year:pi(t[0]),month:null,day:null};if(2===t.length&&gi(t[0])&&gi(t[1]))return{year:pi(t[0]),month:pi(t[1]),day:null};if(3===t.length&&gi(t[0])&&gi(t[1])&&gi(t[2]))return{year:pi(t[0]),month:pi(t[1]),day:pi(t[2])}}return null}format(e){return e?`${e.year}-${gi(e.month)?yi(e.month):""}-${gi(e.day)?yi(e.day):""}`:""}}return e.\u0275fac=function(t){return Nn(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const Nn=n.Zb(Ln);let Bn=(()=>{class e extends bn{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"],this.restoreFocus=!0}}return e.\u0275fac=function(t){return Yn(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Yn=n.Zb(Bn),Vn={provide:r.q,useExisting:Object(n.U)(()=>Hn),multi:!0},Un={provide:r.p,useExisting:Object(n.U)(()=>Hn),multi:!0};let Hn=(()=>{class e{constructor(e,t,i,s,r,o,a,c,l,u,d){this._parserFormatter=e,this._elRef=t,this._vcRef=i,this._renderer=s,this._cfr=r,this._ngZone=o,this._calendar=a,this._dateAdapter=c,this._document=l,this._changeDetector=u,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this.dateSelect=new n.n,this.navigate=new n.n,this.closed=new n.n,this._onChange=e=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(e=>this[e]=d[e]),this._zoneSubscription=o.onStable.subscribe(()=>this._updatePopupPosition())}get disabled(){return this._disabled}set disabled(e){this._disabled=""===e||e&&"false"!==e,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}registerOnValidatorChange(e){this._validatorChange=e}setDisabledState(e){this.disabled=e}validate(e){const t=e.value;if(null==t)return null;const i=this._fromDateStruct(this._dateAdapter.fromModel(t));return this._calendar.isValid(i)?this.minDate&&i.before(Zi.from(this.minDate))?{ngbDate:{requiredBefore:this.minDate}}:this.maxDate&&i.after(Zi.from(this.maxDate))?{ngbDate:{requiredAfter:this.maxDate}}:void 0:{ngbDate:{invalid:e.value}}}writeValue(e){this._model=this._fromDateStruct(this._dateAdapter.fromModel(e)),this._writeModelValue(this._model)}manualDateChange(e,t=!1){const i=e!==this._inputValue;i&&(this._inputValue=e,this._model=this._fromDateStruct(this._parserFormatter.parse(e))),!i&&t||this._onChange(this._model?this._dateAdapter.toModel(this._model):""===e?null:e),t&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){const e=this._cfr.resolveComponentFactory(Cn);this._cRef=this._vcRef.createComponent(e),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef.instance),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(e=>{this.writeValue(e),this._onChange(e),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&window.document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,_n(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),this._cRef.instance.focus(),Tn(this._ngZone,this._document,this.autoClose,()=>this.close(),this.closed,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this.closed.emit(),this._changeDetector.markForCheck();let e=this._elWithFocus;mi(this.restoreFocus)?e=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(e=this.restoreFocus),e&&e.focus?e.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(e){this.isOpen()&&this._cRef.instance.navigateTo(e)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(e){(e.minDate||e.maxDate)&&(this._validatorChange(),this.isOpen()&&(e.minDate&&(this._cRef.instance.minDate=this._dateAdapter.toModel(e.minDate.currentValue)),e.maxDate&&(this._cRef.instance.maxDate=this._dateAdapter.toModel(e.maxDate.currentValue)),this._cRef.instance.ngOnChanges(e)))}ngOnDestroy(){this.close(),this._zoneSubscription.unsubscribe()}_applyDatepickerInputs(e){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekdays","showWeekNumbers"].forEach(t=>{void 0!==this[t]&&(e[t]=this[t])}),e.startDate=this.startDate||this._model}_applyPopupStyling(e){this._renderer.addClass(e,"dropdown-menu"),this._renderer.addClass(e,"show"),"body"===this.container&&this._renderer.addClass(e,"ngb-dp-body")}_subscribeForDatepickerOutputs(e){e.navigate.subscribe(e=>this.navigate.emit(e)),e.dateSelect.subscribe(e=>{this.dateSelect.emit(e),!0!==this.autoClose&&"inside"!==this.autoClose||this.close()})}_writeModelValue(e){const t=this._parserFormatter.format(e);this._inputValue=t,this._renderer.setProperty(this._elRef.nativeElement,"value",t),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(e)),this._onTouched())}_fromDateStruct(e){const t=e?new Zi(e.year,e.month,e.day):null;return this._calendar.isValid(t)?t:null}_updatePopupPosition(){if(!this._cRef)return;let e;if(e=mi(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this.positionTarget&&!e)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");Mn(e,this._cRef.location.nativeElement,this.placement,"body"===this.container)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Xn),n.Rb(n.l),n.Rb(n.P),n.Rb(n.F),n.Rb(n.j),n.Rb(n.z),n.Rb(tn),n.Rb(mn),n.Rb(s.e),n.Rb(n.h),n.Rb(Bn))},e.\u0275dir=n.Mb({type:e,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(e,t){1&e&&n.jc("input",(function(e){return t.manualDateChange(e.target.value)}))("change",(function(e){return t.manualDateChange(e.target.value,!0)}))("focus",(function(){return t.onFocus()}))("blur",(function(){return t.onBlur()})),2&e&&n.ac("disabled",t.disabled)},inputs:{disabled:"disabled",autoClose:"autoClose",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",restoreFocus:"restoreFocus",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],features:[n.Bb([Vn,Un,{provide:bn,useExisting:Bn}]),n.Ab]}),e})(),$n=(()=>{class e{constructor(e){this.i18n=e}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(un))},e.\u0275cmp=n.Lb({type:e,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(e,t){2&e&&n.Hb("bg-primary",t.selected)("text-white",t.selected)("text-muted",t.isMuted())("outside",t.isMuted())("active",t.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},attrs:Te,decls:1,vars:1,template:function(e,t){1&e&&n.Yc(0),2&e&&n.Zc(t.i18n.getDayNumerals(t.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}[ngbDatepickerDayView].outside{opacity:.5}"],encapsulation:2,changeDetection:0}),e})(),Gn=(()=>{class e{constructor(e,t){this.i18n=e,this._renderer=t,this.select=new n.n,this._month=-1,this._year=-1}changeMonth(e){this.select.emit(new Zi(this.date.year,pi(e),1))}changeYear(e){this.select.emit(new Zi(pi(e),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(un),n.Rb(n.F))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(e,t){var i;1&e&&(n.Uc(Ee,!0,n.l),n.Uc(Ae,!0,n.l)),2&e&&(n.Kc(i=n.kc())&&(t.monthSelect=i.first),n.Kc(i=n.kc())&&(t.yearSelect=i.first))},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},decls:8,vars:4,consts:[[1,"custom-select",3,"disabled","change",6,"aria-label","title"],["month",""],[3,"value",4,"ngFor","ngForOf"],["year",""],[3,"value"]],template:function(e,t){1&e&&(n.Xb(0,"select",0,1),n.dc(2,_e),n.jc("change",(function(e){return t.changeMonth(e.target.value)})),n.Wc(3,Re,2,3,"option",2),n.Wb(),n.Xb(4,"select",0,3),n.dc(6,We),n.jc("change",(function(e){return t.changeYear(e.target.value)})),n.Wc(7,Pe,2,2,"option",2),n.Wb()),2&e&&(n.wc("disabled",t.disabled),n.Cb(3),n.wc("ngForOf",t.months),n.Cb(1),n.wc("disabled",t.disabled),n.Cb(3),n.wc("ngForOf",t.years))},directives:[s.t,r.x,r.H],styles:["ngb-datepicker-navigation-select>.custom-select{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.custom-select:focus{z-index:1}ngb-datepicker-navigation-select>.custom-select::-ms-value{background-color:transparent!important}"],encapsulation:2,changeDetection:0}),e})(),zn=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c,r.m]]}),e})(),qn=(()=>{class e{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Kn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["",8,"navbar"]]}),e})(),Zn=(()=>{class e{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("disabled",t.disabled)},inputs:{disabled:"disabled"}}),e})(),Jn=(()=>{class e{constructor(e){this.dropdown=e,this.placement="bottom",this.isOpen=!1}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>ts)))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,Zn,!1),2&e&&n.Kc(s=n.kc())&&(t.menuItems=s)},hostVars:5,hostBindings:function(e,t){1&e&&n.jc("keydown.ArrowUp",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.ArrowDown",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Home",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.End",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Enter",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Space",(function(e){return t.dropdown.onKeyDown(e)})),2&e&&(n.Db("x-placement",t.placement),n.Hb("dropdown-menu",!0)("show",t.dropdown.isOpen()))}}),e})(),Qn=(()=>{class e{constructor(e,t){this.dropdown=e,this._elementRef=t,this.anchorEl=t.nativeElement}getNativeElement(){return this._elementRef.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>ts)),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:["aria-haspopup","true",1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,t){2&e&&n.Db("aria-expanded",t.dropdown.isOpen())}}),e})(),es=(()=>{class e extends Qn{constructor(e,t){super(e,t)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>ts)),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownToggle",""]],hostAttrs:["aria-haspopup","true",1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,t){1&e&&n.jc("click",(function(){return t.dropdown.toggle()}))("keydown.ArrowUp",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.ArrowDown",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Home",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.End",(function(e){return t.dropdown.onKeyDown(e)})),2&e&&n.Db("aria-expanded",t.dropdown.isOpen())},features:[n.Bb([{provide:Qn,useExisting:Object(n.U)(()=>e)}]),n.zb]}),e})(),ts=(()=>{class e{constructor(e,t,i,s,r,a,c){this._changeDetector=e,this._document=i,this._ngZone=s,this._elementRef=r,this._renderer=a,this._closed$=new o.a,this._open=!1,this.openChange=new n.n,this.placement=t.placement,this.container=t.container,this.autoClose=t.autoClose,this.display=c?"static":"dynamic",this._zoneSubscription=s.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Object(I.a)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.isFirstChange&&this._applyPlacementClasses()}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers())}_setCloseHandlers(){const e=this._anchor;Tn(this._ngZone,this._document,this.autoClose,()=>this.close(),this._closed$,this._menu?[this._menuElement.nativeElement]:[],e?[e.getNativeElement()]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const t=e.which,i=this._getMenuElements();let n=-1,s=!1,r=null;const o=this._isEventFromToggle(e);if(!o&&i.length&&i.forEach((t,i)=>{t.contains(e.target)&&(s=!0,r=t),t===this._document.activeElement&&(n=i)}),t!==kn.Space&&t!==kn.Enter){if(o||s){if(this.open(),i.length){switch(t){case kn.ArrowDown:n=Math.min(n+1,i.length-1);break;case kn.ArrowUp:if(this._isDropup()&&-1===n){n=i.length-1;break}n=Math.max(n-1,0);break;case kn.Home:n=0;break;case kn.End:n=i.length-1}i[n].focus()}e.preventDefault()}}else!s||!0!==this.autoClose&&"inside"!==this.autoClose||Object(p.a)(r,"click").pipe(Object(I.a)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.getNativeElement().contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(e=>!e.disabled).map(e=>e.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&this._applyPlacementClasses("dynamic"===this.display?Mn(this._anchor.anchorEl,this._bodyContainer||this._menuElement.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer,t=this._menuElement;if(t){const i=t.nativeElement;e.appendChild(this._elementRef.nativeElement,i),e.removeStyle(i,"position"),e.removeStyle(i,"transform")}this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const e=this._renderer,t=this._menuElement.nativeElement,i=this._bodyContainer=this._bodyContainer||e.createElement("div");e.setStyle(i,"position","absolute"),e.setStyle(t,"position","static"),e.setStyle(i,"z-index","1050"),e.appendChild(i,t),e.appendChild(this._document.body,i)}}_applyPlacementClasses(e){const t=this._menu;if(t){e||(e=this._getFirstPlacement(this.placement));const i=this._renderer,n=this._elementRef.nativeElement;i.removeClass(n,"dropup"),i.removeClass(n,"dropdown"),t.placement="static"===this.display?null:e;const s=-1!==e.search("^top")?"dropup":"dropdown";i.addClass(n,s);const r=this._bodyContainer;r&&(i.removeClass(r,"dropup"),i.removeClass(r,"dropdown"),i.addClass(r,s))}}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(qn),n.Rb(s.e),n.Rb(n.z),n.Rb(n.l),n.Rb(n.F),n.Rb(Kn,8))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdown",""]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,Jn,!0),n.Jb(i,Jn,!0,n.l),n.Jb(i,Qn,!0)),2&e&&(n.Kc(s=n.kc())&&(t._menu=s.first),n.Kc(s=n.kc())&&(t._menuElement=s.first),n.Kc(s=n.kc())&&(t._anchor=s.first))},hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("show",t.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[n.Ab]}),e})(),is=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})(),ns=(()=>{class e{constructor(){this.backdrop=!0,this.keyboard=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();class ss{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}class rs{constructor(e,t,i,n,s,r){this._type=e,this._injector=t,this._viewContainerRef=i,this._renderer=n,this._componentFactoryResolver=s,this._applicationRef=r}open(e,t){return this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),0,this._injector,this._contentRef.nodes)),this._windowRef}close(){this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null,this._contentRef.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null))}_getContentRef(e,t){if(e){if(e instanceof n.M){const i=e.createEmbeddedView(t);return this._applicationRef.attachView(i),new ss([i.rootNodes],i)}return new ss([[this._renderer.createText(""+e)]])}return new ss([])}}const os=()=>{};let as=(()=>{class e{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):os}_adjustBody(e){const t=this._document.body,i=t.style.paddingRight,n=parseFloat(window.getComputedStyle(t)["padding-right"]);return t.style["padding-right"]=n+e+"px",()=>t.style["padding-right"]=i}_isPresent(e){const t=this._document.body.getBoundingClientRect();return window.innerWidth-(t.left+t.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const t=this._document.body;t.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return t.removeChild(e),i}}return e.\u0275fac=function(t){return new(t||e)(n.fc(s.e))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(s.e))},token:e,providedIn:"root"}),e})(),cs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:2,hostBindings:function(e,t){2&e&&n.Eb("modal-backdrop fade show"+(t.backdropClass?" "+t.backdropClass:""))},inputs:{backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();class ls{close(e){}dismiss(e){}}class us{constructor(e,t,i,n){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=n,e.instance.dismissEvent.subscribe(e=>{this.dismiss(e)}),this.result=new Promise((e,t)=>{this._resolve=e,this._reject=t}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}close(e){this._windowCmptRef&&(this._resolve(e),this._removeModalElements())}_dismiss(e){this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(t=>{!1!==t&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.location.nativeElement;if(e.parentNode.removeChild(e),this._windowCmptRef.destroy(),this._backdropCmptRef){const e=this._backdropCmptRef.location.nativeElement;e.parentNode.removeChild(e),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}}const ds=function(){var e={BACKDROP_CLICK:0,ESC:1};return e[e.BACKDROP_CLICK]="BACKDROP_CLICK",e[e.ESC]="ESC",e}();let hs=(()=>{class e{constructor(e,t,i){this._document=e,this._elRef=t,this._zone=i,this._closed$=new o.a,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new n.n}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){const{nativeElement:e}=this._elRef;if(this._zone.runOutsideAngular(()=>{Object(p.a)(e,"keydown").pipe(Object(O.a)(this._closed$),Object(D.a)(e=>e.which===kn.Escape&&this.keyboard)).subscribe(e=>requestAnimationFrame(()=>{e.defaultPrevented||this._zone.run(()=>this.dismiss(ds.ESC))}));let t=!1;Object(p.a)(this._dialogEl.nativeElement,"mousedown").pipe(Object(O.a)(this._closed$),Object(j.a)(()=>t=!1),Object(x.a)(()=>Object(p.a)(e,"mouseup").pipe(Object(O.a)(this._closed$),Object(I.a)(1))),Object(D.a)(({target:t})=>e===t)).subscribe(()=>{t=!0}),Object(p.a)(e,"click").pipe(Object(O.a)(this._closed$)).subscribe(({target:i})=>{!0!==this.backdrop||e!==i||t||this._zone.run(()=>this.dismiss(ds.BACKDROP_CLICK)),t=!1})}),!e.contains(document.activeElement)){const t=e.querySelector("[ngbAutofocus]"),i=An(e)[0];(t||i||e).focus()}}ngOnDestroy(){const e=this._document.body,t=this._elWithFocus;let i;i=t&&t.focus&&e.contains(t)?t:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null}),this._closed$.next()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(s.e),n.Rb(n.l),n.Rb(n.z))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(e,t){var i;1&e&&n.Uc(Me,!0),2&e&&n.Kc(i=n.kc())&&(t._dialogEl=i.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:4,hostBindings:function(e,t){2&e&&(n.Db("aria-modal",!0)("aria-labelledby",t.ariaLabelledBy),n.Eb("modal fade show d-block"+(t.windowClass?" "+t.windowClass:"")))},inputs:{backdrop:"backdrop",keyboard:"keyboard",ariaLabelledBy:"ariaLabelledBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:q,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0,1),n.Xb(2,"div",2),n.uc(3),n.Wb(),n.Wb()),2&e&&n.Eb("modal-dialog"+(t.size?" modal-"+t.size:"")+(t.centered?" modal-dialog-centered":"")+(t.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],encapsulation:2}),e})(),ps=(()=>{class e{constructor(e,t,i,n,s,r){this._applicationRef=e,this._injector=t,this._document=i,this._scrollBar=n,this._rendererFactory=s,this._ngZone=r,this._activeWindowCmptHasChanged=new o.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const e=this._windowCmpts[this._windowCmpts.length-1];_n(this._ngZone,e.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(e.location.nativeElement)}})}open(e,t,i,n){const s=n.container instanceof HTMLElement?n.container:wi(n.container)?this._document.querySelector(n.container):this._document.body,r=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(r.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!s)throw new Error(`The specified modal container "${n.container||"body"}" was not found in the DOM.`);const c=new ls,l=this._getContentRef(e,n.injector||t,i,c,n);let u=!1!==n.backdrop?this._attachBackdrop(e,s):null,d=this._attachWindowComponent(e,s,l),h=new us(d,l,u,n.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.result.then(o,o),h.result.then(a,a),c.close=e=>{h.close(e)},c.dismiss=e=>{h.dismiss(e)},this._applyWindowOptions(d.instance,n),1===this._modalRefs.length&&r.addClass(this._document.body,"modal-open"),u&&u.instance&&this._applyBackdropOptions(u.instance,n),h}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,t){let i=e.resolveComponentFactory(cs).create(this._injector);return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,t,i){let n=e.resolveComponentFactory(hs).create(this._injector,i.nodes);return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n}_applyWindowOptions(e,t){this._windowAttributes.forEach(i=>{wi(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){this._backdropAttributes.forEach(i=>{wi(t[i])&&(e[i]=t[i])})}_getContentRef(e,t,i,s,r){return i?i instanceof n.M?this._createFromTemplateRef(i,s):mi(i)?this._createFromString(i):this._createFromComponent(e,t,i,s,r):new ss([])}_createFromTemplateRef(e,t){const i=e.createEmbeddedView({$implicit:t,close(e){t.close(e)},dismiss(e){t.dismiss(e)}});return this._applicationRef.attachView(i),new ss([i.rootNodes],i)}_createFromString(e){const t=this._document.createTextNode(""+e);return new ss([[t]])}_createFromComponent(e,t,i,s,r){const o=e.resolveComponentFactory(i),a=n.r.create({providers:[{provide:ls,useValue:s}],parent:t}),c=o.create(a),l=c.location.nativeElement;return r.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new ss([[l]],c.hostView,c)}_setAriaHidden(e){const t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(t=>{t!==e&&"SCRIPT"!==t.nodeName&&(this._ariaHiddenValues.set(t,t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const t=()=>{const t=this._modalRefs.indexOf(e);t>-1&&this._modalRefs.splice(t,1)};this._modalRefs.push(e),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.g),n.fc(n.r),n.fc(s.e),n.fc(as),n.fc(n.G),n.fc(n.z))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.g),Object(n.fc)(n.o),Object(n.fc)(s.e),Object(n.fc)(as),Object(n.fc)(n.G),Object(n.fc)(n.z))},token:e,providedIn:"root"}),e})(),bs=(()=>{class e{constructor(e,t,i,n){this._moduleCFR=e,this._injector=t,this._modalStack=i,this._config=n}open(e,t={}){const i=Object.assign({},this._config,t);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.j),n.fc(n.r),n.fc(ps),n.fc(ns))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.j),Object(n.fc)(n.o),Object(n.fc)(ps),Object(n.fc)(ns))},token:e,providedIn:"root"}),e})(),fs=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[bs]}),e})(),ms=(()=>{class e{constructor(){this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const gs=e=>wi(e)&&""!==e;let vs=0,ws=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbNavContent",""]]}),e})(),ys=(()=>{class e{constructor(e,t){this.elementRef=t,this.disabled=!1,this._nav=e}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){wi(this.domId)||(this.domId="ngb-nav-"+vs++)}get active(){return this._nav.activeId===this.id}get id(){return gs(this._id)?this._id:this.domId}get panelDomId(){return this.domId+"-panel"}isPanelInDom(){return(wi(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>Cs)),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbNavItem",""]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,ws,!1),2&e&&n.Kc(s=n.kc())&&(t.contentTpls=s)},hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("nav-item",!0)},inputs:{disabled:"disabled",domId:"domId",destroyOnHide:"destroyOnHide",_id:["ngbNavItem","_id"]},exportAs:["ngbNavItem"]}),e})(),Cs=(()=>{class e{constructor(e,t,i){this.role=e,this._cd=i,this.activeIdChange=new n.n,this.navChange=new n.n,this.destroyOnHide=t.destroyOnHide,this.orientation=t.orientation,this.roles=t.roles}click(e){e.disabled||this._updateActiveId(e.id)}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!wi(this.activeId)){const e=this.items.first?this.items.first.id:null;gs(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}}_updateActiveId(e,t=!0){if(this.activeId!==e){let i=!1;t&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{i=!0}}),i||(this.activeId=e,this.activeIdChange.emit(e))}}}return e.\u0275fac=function(t){return new(t||e)(n.gc("role"),n.Rb(ms),n.Rb(n.h))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbNav",""]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,ys,!1),2&e&&n.Kc(s=n.kc())&&(t.items=s)},hostVars:6,hostBindings:function(e,t){2&e&&(n.Db("aria-orientation","vertical"===t.orientation&&"tablist"===t.roles?"vertical":void 0)("role",t.role?t.role:t.roles?"tablist":void 0),n.Hb("nav",!0)("flex-column","vertical"===t.orientation))},inputs:{destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",activeId:"activeId"},outputs:{activeIdChange:"activeIdChange",navChange:"navChange"},exportAs:["ngbNav"]}),e})(),ks=(()=>{class e{constructor(e,t,i){this.role=e,this.navItem=t,this.nav=i}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}}return e.\u0275fac=function(t){return new(t||e)(n.gc("role"),n.Rb(ys),n.Rb(Cs))},e.\u0275dir=n.Mb({type:e,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostVars:14,hostBindings:function(e,t){1&e&&n.jc("click",(function(e){return t.nav.click(t.navItem),e.preventDefault()})),2&e&&(n.ac("id",t.navItem.domId),n.Db("role",t.role?t.role:t.nav.roles?"tab":void 0)("tabindex",t.navItem.disabled?-1:void 0)("aria-controls",t.navItem.isPanelInDom()?t.navItem.panelDomId:null)("aria-selected",t.navItem.active)("aria-disabled",t.navItem.disabled),n.Hb("nav-link",!0)("nav-item",t.hasNavItemClass())("active",t.navItem.active)("disabled",t.navItem.disabled))}}),e})(),Ss=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["","ngbNavOutlet",""]],hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},attrs:Fe,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","tab-pane",3,"id","active",4,"ngIf"],[1,"tab-pane",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&n.Wc(0,Be,1,1,"ng-template",0),2&e&&n.wc("ngForOf",t.nav.items)},directives:[s.t,s.u,s.B],encapsulation:2}),e})(),xs=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Os=(()=>{class e{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Ds=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationEllipsis",""]]}),e})(),Is=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationFirst",""]]}),e})(),js=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationLast",""]]}),e})(),Ts=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationNext",""]]}),e})(),Es=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationNumber",""]]}),e})(),As=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationPrevious",""]]}),e})(),_s=(()=>{class e{constructor(e){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new n.n(!0),this.disabled=e.disabled,this.boundaryLinks=e.boundaryLinks,this.directionLinks=e.directionLinks,this.ellipses=e.ellipses,this.maxSize=e.maxSize,this.pageSize=e.pageSize,this.rotate=e.rotate,this.size=e.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(e){this._updatePages(e)}ngOnChanges(e){this._updatePages(this.page)}isEllipsis(e){return-1===e}_applyEllipses(e,t){this.ellipses&&(e>0&&(e>2?this.pages.unshift(-1):2===e&&this.pages.unshift(2),this.pages.unshift(1)),t<this.pageCount&&(t<this.pageCount-2?this.pages.push(-1):t===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let e=0,t=this.pageCount,i=Math.floor(this.maxSize/2);return this.page<=i?t=this.maxSize:this.pageCount-this.page<i?e=this.pageCount-this.maxSize:(e=this.page-i-1,t=this.page+(this.maxSize%2==0?i-1:i)),[e,t]}_applyPagination(){let e=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[e,e+this.maxSize]}_setPageInRange(e){const t=this.page;this.page=fi(e,this.pageCount,1),this.page!==t&&gi(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(e){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),gi(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let t=1;t<=this.pageCount;t++)this.pages.push(t);if(this._setPageInRange(e),this.maxSize>0&&this.pageCount>this.maxSize){let e=0,t=this.pageCount;[e,t]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(e,t),this._applyEllipses(e,t)}}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Os))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-pagination"]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,Ds,!0),n.Jb(i,Is,!0),n.Jb(i,js,!0),n.Jb(i,Ts,!0),n.Jb(i,Es,!0),n.Jb(i,As,!0)),2&e&&(n.Kc(s=n.kc())&&(t.tplEllipsis=s.first),n.Kc(s=n.kc())&&(t.tplFirst=s.first),n.Kc(s=n.kc())&&(t.tplLast=s.first),n.Kc(s=n.kc())&&(t.tplNext=s.first),n.Kc(s=n.kc())&&(t.tplNumber=s.first),n.Kc(s=n.kc())&&(t.tplPrevious=s.first))},hostAttrs:["role","navigation"],inputs:{page:"page",disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",maxSize:"maxSize",pageSize:"pageSize",rotate:"rotate",size:"size",collectionSize:"collectionSize"},outputs:{pageChange:"pageChange"},features:[n.Ab],decls:18,vars:7,consts:[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["class","page-item",3,"disabled",4,"ngIf"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],["aria-hidden","true"],["class","sr-only",4,"ngIf"],[1,"sr-only"],[1,"page-item"],["href","",1,"page-link",3,"click",6,"aria-label"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"]],template:function(e,t){1&e&&(n.Wc(0,$e,2,0,"ng-template",null,0,n.Xc),n.Wc(2,Ge,2,0,"ng-template",null,1,n.Xc),n.Wc(4,ze,2,0,"ng-template",null,2,n.Xc),n.Wc(6,qe,2,0,"ng-template",null,3,n.Xc),n.Wc(8,Ke,1,0,"ng-template",null,4,n.Xc),n.Wc(10,Je,2,2,"ng-template",null,5,n.Xc),n.Xb(12,"ul"),n.Wc(13,it,4,9,"li",6),n.Wc(14,ot,4,8,"li",6),n.Wc(15,pt,3,7,"li",7),n.Wc(16,mt,4,9,"li",6),n.Wc(17,wt,4,9,"li",6),n.Wb()),2&e&&(n.Cb(12),n.Eb("pagination"+(t.size?" pagination-"+t.size:"")),n.Cb(1),n.wc("ngIf",t.boundaryLinks),n.Cb(1),n.wc("ngIf",t.directionLinks),n.Cb(1),n.wc("ngForOf",t.pages),n.Cb(1),n.wc("ngIf",t.directionLinks),n.Cb(1),n.wc("ngIf",t.boundaryLinks))},directives:[s.u,s.t,s.B],encapsulation:2,changeDetection:0}),e})(),Ws=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})();class Rs{constructor(e,t){this.open=e,this.close=t,t||(this.close=e)}isManual(){return"manual"===this.open||"manual"===this.close}}const Ps={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},Ms=e=>e>0?P(e):e=>e;function Fs(e,t,i,n,s,r,o=0,a=0){const c=function(e,t=Ps){const i=(e||"").trim();if(0===i.length)return[];const n=i.split(/\s+/).map(e=>e.split(":")).map(e=>{let i=t[e[0]]||e;return new Rs(i[0],i[1])}),s=n.filter(e=>e.isManual());if(s.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===s.length&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return n}(i);if(1===c.length&&c[0].isManual())return()=>{};const l=function(e,t,i,n){return new u.a(s=>{const r=[],o=()=>s.next(!0),a=()=>s.next(!1),c=()=>s.next(!n());return i.forEach(i=>{i.open===i.close?r.push(e.listen(t,i.open,c)):r.push(e.listen(t,i.open,o),e.listen(t,i.close,a))}),()=>{r.forEach(e=>e())}})}(e,t,c,n).pipe(function(e,t,i){return n=>{let s=null;const r=n.pipe(Object(C.a)(e=>({open:e})),Object(D.a)(e=>{const t=i();return t===e.open||s&&s.open!==t?(s&&s.open!==e.open&&(s=null),!1):(s=e,!0)}),Object(L.a)()),o=r.pipe(Object(D.a)(e=>e.open),Ms(e)),a=r.pipe(Object(D.a)(e=>!e.open),Ms(t));return Object(b.a)(o,a).pipe(Object(D.a)(e=>e===s&&(s=null,e.open!==i())),Object(C.a)(e=>e.open))}}(o,a,n)).subscribe(e=>e?s():r());return()=>l.unsubscribe()}let Xs=(()=>{class e{constructor(){this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Ls=0,Ns=(()=>{class e{isTitleTemplate(){return this.title instanceof n.M}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(e,t){2&e&&(n.ac("id",t.id),n.Eb("popover"+(t.popoverClass?" "+t.popoverClass:"")))},inputs:{title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:q,decls:4,vars:1,consts:[[1,"arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.vc(),n.Sb(0,"div",0),n.Wc(1,kt,4,2,"h3",1),n.Xb(2,"div",2),n.uc(3),n.Wb()),2&e&&(n.Cb(1),n.wc("ngIf",null!=t.title))},directives:[s.u,s.B],styles:["ngb-popover-window.bs-popover-bottom>.arrow,ngb-popover-window.bs-popover-top>.arrow{left:50%;margin-left:-.5rem}ngb-popover-window.bs-popover-bottom-left>.arrow,ngb-popover-window.bs-popover-top-left>.arrow{left:2em}ngb-popover-window.bs-popover-bottom-right>.arrow,ngb-popover-window.bs-popover-top-right>.arrow{left:auto;right:2em}ngb-popover-window.bs-popover-left>.arrow,ngb-popover-window.bs-popover-right>.arrow{top:50%;margin-top:-.5rem}ngb-popover-window.bs-popover-left-top>.arrow,ngb-popover-window.bs-popover-right-top>.arrow{top:.7em}ngb-popover-window.bs-popover-left-bottom>.arrow,ngb-popover-window.bs-popover-right-bottom>.arrow{top:auto;bottom:.7em}"],encapsulation:2,changeDetection:0}),e})(),Bs=(()=>{class e{constructor(e,t,i,s,r,o,a,c,l,u){this._elementRef=e,this._renderer=t,this._ngZone=a,this._document=c,this._changeDetector=l,this.shown=new n.n,this.hidden=new n.n,this._ngbPopoverWindowId="ngb-popover-"+Ls++,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new rs(Ns,i,r,t,s,u),this._zoneSubscription=a.onStable.subscribe(()=>{this._windowRef&&Mn(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,"bs-popover")})}_isDisabled(){return!!this.disablePopover||!this.ngbPopover&&!this.popoverTitle}open(e){this._windowRef||this._isDisabled()||(this._windowRef=this._popupService.open(this.ngbPopover,e),this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),Tn(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=Fs(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:t,disablePopover:i,popoverClass:n}){n&&this.isOpen()&&(this._windowRef.instance.popoverClass=n.currentValue),(e||t||i)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.F),n.Rb(n.r),n.Rb(n.j),n.Rb(n.P),n.Rb(Xs),n.Rb(n.z),n.Rb(s.e),n.Rb(n.h),n.Rb(n.g))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbPopover",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[n.Ab]}),e})(),Ys=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Vs=(()=>{class e{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Us=(()=>{class e{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!gi(e)||e<=0?100:e}get max(){return this._max}getValue(){return fi(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Vs))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-progressbar"]],inputs:{value:"value",max:"max",animated:"animated",striped:"striped",textType:"textType",type:"type",showValue:"showValue",height:"height"},ngContentSelectors:q,decls:4,vars:13,consts:[[1,"progress"],["role","progressbar","aria-valuemin","0"],[4,"ngIf"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0),n.Xb(1,"div",1),n.Wc(2,xt,2,1,"span",2),n.uc(3),n.Wb(),n.Wb()),2&e&&(n.Vc("height",t.height),n.Cb(1),n.Gb("progress-bar",t.type?" bg-"+t.type:"","",t.textType?" text-"+t.textType:"","\n      ",t.animated?" progress-bar-animated":"","",t.striped?" progress-bar-striped":"",""),n.Vc("width",t.getPercentValue(),"%"),n.Db("aria-valuenow",t.getValue())("aria-valuemax",t.max),n.Cb(1),n.wc("ngIf",t.showValue))},directives:[s.u],encapsulation:2,changeDetection:0}),e})(),Hs=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),$s=(()=>{class e{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Gs={provide:r.q,useExisting:Object(n.U)(()=>zs),multi:!0};let zs=(()=>{class e{constructor(e,t){this._changeDetectorRef=t,this.contexts=[],this.disabled=!1,this.hover=new n.n,this.leave=new n.n,this.rateChange=new n.n(!0),this.onChange=e=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}enter(e){this.readonly||this.disabled||this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.readonly||this.disabled||this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case kn.ArrowDown:case kn.ArrowLeft:this.update(this.rate-1);break;case kn.ArrowUp:case kn.ArrowRight:this.update(this.rate+1);break;case kn.Home:this.update(0);break;case kn.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(e,t)=>({fill:0,index:t})),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,t=!0){const i=fi(e,this.max,0);this.readonly||this.disabled||this.rate===i||(this.rate=i,this.rateChange.emit(this.rate)),t&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_getFillValue(e){const t=this.nextRate-e;return t>=1?100:t<1&&t>0?parseInt((100*t).toFixed(2),10):0}_updateState(e){this.nextRate=e,this.contexts.forEach((e,t)=>e.fill=this._getFillValue(t))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb($s),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-rating"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,n.M,!0),2&e&&n.Kc(s=n.kc())&&(t.starTemplateFromContent=s.first)},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,t){1&e&&n.jc("blur",(function(){return t.handleBlur()}))("keydown",(function(e){return t.handleKeyDown(e)}))("mouseleave",(function(){return t.reset()})),2&e&&(n.ac("tabindex",t.disabled?-1:0),n.Db("aria-valuemax",t.max)("aria-valuenow",t.nextRate)("aria-valuetext",t.ariaValueText())("aria-disabled",!!t.readonly||null))},inputs:{max:"max",readonly:"readonly",rate:"rate",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[n.Bb([Gs]),n.Ab],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"sr-only"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.Wc(0,Ot,1,1,"ng-template",null,0,n.Xc),n.Wc(2,It,4,5,"ng-template",1)),2&e&&(n.Cb(2),n.wc("ngForOf",t.contexts))},directives:[s.t,s.B],encapsulation:2,changeDetection:0}),e})(),qs=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Ks=(()=>{class e{constructor(){this.justify="start",this.orientation="horizontal",this.type="tabs"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Zs=0,Js=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbTabTitle",""]]}),e})(),Qs=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbTabContent",""]]}),e})(),er=(()=>{class e{constructor(){this.id="ngb-tab-"+Zs++,this.disabled=!1}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.contentTpl=this.contentTpls.first}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["ngb-tab"]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,Js,!1),n.Jb(i,Qs,!1)),2&e&&(n.Kc(s=n.kc())&&(t.titleTpls=s),n.Kc(s=n.kc())&&(t.contentTpls=s))},inputs:{id:"id",disabled:"disabled",title:"title"}}),e})(),tr=(()=>{class e{constructor(e){this.destroyOnHide=!0,this.tabChange=new n.n,this.type=e.type,this.justify=e.justify,this.orientation=e.orientation}set justify(e){this.justifyClass="fill"===e||"justified"===e?"nav-"+e:"justify-content-"+e}select(e){let t=this._getTabById(e);if(t&&!t.disabled&&this.activeId!==t.id){let e=!1;this.tabChange.emit({activeId:this.activeId,nextId:t.id,preventDefault:()=>{e=!0}}),e||(this.activeId=t.id)}}ngAfterContentChecked(){let e=this._getTabById(this.activeId);this.activeId=e?e.id:this.tabs.length?this.tabs.first.id:null}_getTabById(e){let t=this.tabs.filter(t=>t.id===e);return t.length?t[0]:null}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Ks))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-tabset"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,er,!1),2&e&&n.Kc(s=n.kc())&&(t.tabs=s)},inputs:{destroyOnHide:"destroyOnHide",type:"type",justify:"justify",orientation:"orientation",activeId:"activeId"},outputs:{tabChange:"tabChange"},exportAs:["ngbTabset"],decls:4,vars:4,consts:[["role","tablist"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],["ngFor","",3,"ngForOf"],[1,"nav-item"],["href","","role","tab",1,"nav-link",3,"id","click"],[3,"ngTemplateOutlet"],["role","tabpanel",3,"class","id",4,"ngIf"],["role","tabpanel",3,"id"]],template:function(e,t){1&e&&(n.Xb(0,"ul",0),n.Wc(1,Tt,4,11,"li",1),n.Wb(),n.Xb(2,"div",2),n.Wc(3,_t,1,1,"ng-template",3),n.Wb()),2&e&&(n.Eb("nav nav-"+t.type+("horizontal"==t.orientation?" "+t.justifyClass:" flex-column")),n.Cb(1),n.wc("ngForOf",t.tabs),n.Cb(2),n.wc("ngForOf",t.tabs))},directives:[s.t,s.B,s.u],encapsulation:2}),e})(),ir=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c,xs]]}),e})();class nr{constructor(e,t,i){this.hour=pi(e),this.minute=pi(t),this.second=pi(i)}changeHour(e=1){this.updateHour((isNaN(this.hour)?0:this.hour)+e)}updateHour(e){this.hour=gi(e)?(e<0?24+e:e)%24:NaN}changeMinute(e=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+e)}updateMinute(e){gi(e)?(this.minute=e%60<0?60+e%60:e%60,this.changeHour(Math.floor(e/60))):this.minute=NaN}changeSecond(e=1){this.updateSecond((isNaN(this.second)?0:this.second)+e)}updateSecond(e){gi(e)?(this.second=e<0?60+e%60:e%60,this.changeMinute(Math.floor(e/60))):this.second=NaN}isValid(e=!0){return gi(this.hour)&&gi(this.minute)&&(!e||gi(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let sr=(()=>{class e{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();function rr(){return new ar}let or=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:function(){return rr()},providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:rr,token:e,providedIn:"root"}),e})(),ar=(()=>{class e extends or{fromModel(e){return e&&vi(e.hour)&&vi(e.minute)?{hour:e.hour,minute:e.minute,second:vi(e.second)?e.second:null}:null}toModel(e){return e&&vi(e.hour)&&vi(e.minute)?{hour:e.hour,minute:e.minute,second:vi(e.second)?e.second:null}:null}}return e.\u0275fac=function(t){return cr(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const cr=n.Zb(ar);function lr(e){return new dr(e)}let ur=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:function(e){return e?new e:lr(n.fc(n.u))},providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return lr(Object(n.fc)(n.u))},token:e,providedIn:"root"}),e})(),dr=(()=>{class e extends ur{constructor(e){super(),this._periods=Object(s.N)(e,s.h.Standalone,s.H.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.u))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const hr=/[^0-9]/g,pr={provide:r.q,useExisting:Object(n.U)(()=>br),multi:!0};let br=(()=>{class e{constructor(e,t,i,n){this._config=e,this._ngbTimeAdapter=t,this._cd=i,this.i18n=n,this.onChange=e=>{},this.onTouched=()=>{},this.meridian=e.meridian,this.spinners=e.spinners,this.seconds=e.seconds,this.hourStep=e.hourStep,this.minuteStep=e.minuteStep,this.secondStep=e.secondStep,this.disabled=e.disabled,this.readonlyInputs=e.readonlyInputs,this.size=e.size}set hourStep(e){this._hourStep=vi(e)?e:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(e){this._minuteStep=vi(e)?e:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(e){this._secondStep=vi(e)?e:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(e){const t=this._ngbTimeAdapter.fromModel(e);this.model=t?new nr(t.hour,t.minute,t.second):new nr,this.seconds||t&&gi(t.second)||(this.model.second=0),this._cd.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}changeHour(e){this.model.changeHour(e),this.propagateModelChange()}changeMinute(e){this.model.changeMinute(e),this.propagateModelChange()}changeSecond(e){this.model.changeSecond(e),this.propagateModelChange()}updateHour(e){const t=this.model.hour>=12,i=pi(e);this.model.updateHour(this.meridian&&(t&&i<12||!t&&12===i)?i+12:i),this.propagateModelChange()}updateMinute(e){this.model.updateMinute(pi(e)),this.propagateModelChange()}updateSecond(e){this.model.updateSecond(pi(e)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(e){e.value=e.value.replace(hr,"")}formatHour(e){return gi(e)?yi(this.meridian?e%12==0?12:e%12:e%24):yi(NaN)}formatMinSec(e){return yi(e)}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(e){e.seconds&&!this.seconds&&this.model&&!gi(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(e=!0){e&&this.onTouched(),this.model.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(sr),n.Rb(or),n.Rb(n.h),n.Rb(ur))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},features:[n.Bb([pr]),n.Ab],decls:18,vars:25,consts:[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric",1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","input","keydown.ArrowUp","keydown.ArrowDown",6,"placeholder","aria-label"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"sr-only"],[1,"chevron","ngb-tp-chevron","bottom"],[1,"ngb-tp-input-container","ngb-tp-second"],[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""]],template:function(e,t){1&e&&(n.Xb(0,"fieldset",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Wc(3,Lt,4,7,"button",3),n.Xb(4,"input",4),n.dc(5,Wt),n.jc("change",(function(e){return t.updateHour(e.target.value)}))("input",(function(e){return t.formatInput(e.target)}))("keydown.ArrowUp",(function(e){return t.changeHour(t.hourStep),e.preventDefault()}))("keydown.ArrowDown",(function(e){return t.changeHour(0-t.hourStep),e.preventDefault()})),n.Wb(),n.Wc(6,Nt,4,7,"button",3),n.Wb(),n.Xb(7,"div",5),n.Yc(8,":"),n.Wb(),n.Xb(9,"div",6),n.Wc(10,Bt,4,7,"button",3),n.Xb(11,"input",4),n.dc(12,Rt),n.jc("change",(function(e){return t.updateMinute(e.target.value)}))("input",(function(e){return t.formatInput(e.target)}))("keydown.ArrowUp",(function(e){return t.changeMinute(t.minuteStep),e.preventDefault()}))("keydown.ArrowDown",(function(e){return t.changeMinute(0-t.minuteStep),e.preventDefault()})),n.Wb(),n.Wc(13,Yt,4,7,"button",3),n.Wb(),n.Wc(14,Vt,2,0,"div",7),n.Wc(15,Zt,5,9,"div",8),n.Wc(16,Jt,1,0,"div",7),n.Wc(17,ti,5,9,"div",9),n.Wb(),n.Wb()),2&e&&(n.Hb("disabled",t.disabled),n.wc("disabled",t.disabled),n.Cb(3),n.wc("ngIf",t.spinners),n.Cb(1),n.Hb("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),n.wc("value",t.formatHour(null==t.model?null:t.model.hour))("readOnly",t.readonlyInputs)("disabled",t.disabled),n.Cb(2),n.wc("ngIf",t.spinners),n.Cb(4),n.wc("ngIf",t.spinners),n.Cb(1),n.Hb("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),n.wc("value",t.formatMinSec(null==t.model?null:t.model.minute))("readOnly",t.readonlyInputs)("disabled",t.disabled),n.Cb(2),n.wc("ngIf",t.spinners),n.Cb(1),n.wc("ngIf",t.seconds),n.Cb(1),n.wc("ngIf",t.seconds),n.Cb(1),n.wc("ngIf",t.meridian),n.Cb(1),n.wc("ngIf",t.meridian))},directives:[s.u],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron::before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;-webkit-transform:rotate(135deg);transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-meridian,.ngb-tp-minute,.ngb-tp-second{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}'],encapsulation:2}),e})(),fr=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),mr=(()=>{class e{constructor(){this.autohide=!0,this.delay=500,this.ariaLive="polite"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),gr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbToastHeader",""]]}),e})(),vr=(()=>{class e{constructor(e,t){this.ariaLive=e,this.contentHeaderTpl=null,this.hideOutput=new n.n,null==this.ariaLive&&(this.ariaLive=t.ariaLive),this.delay=t.delay,this.autohide=t.autohide}ngAfterContentInit(){this._init()}ngOnChanges(e){"autohide"in e&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout(),this.hideOutput.emit()}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return e.\u0275fac=function(t){return new(t||e)(n.gc("aria-live"),n.Rb(mr))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-toast"]],contentQueries:function(e,t,i){var s;1&e&&n.Tc(i,gr,!0,n.M),2&e&&n.Kc(s=n.kc())&&(t.contentHeaderTpl=s.first)},hostAttrs:["role","alert","aria-atomic","true"],hostVars:5,hostBindings:function(e,t){2&e&&(n.Db("aria-live",t.ariaLive),n.Hb("toast",!0)("show",!0))},inputs:{delay:"delay",autohide:"autohide",header:"header"},outputs:{hideOutput:"hide"},exportAs:["ngbToast"],features:[n.Ab],ngContentSelectors:q,decls:5,vars:1,consts:[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"mr-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(e,t){1&e&&(n.vc(),n.Wc(0,ii,2,1,"ng-template",null,0,n.Xc),n.Wc(2,ri,6,1,"ng-template",1),n.Xb(3,"div",2),n.uc(4),n.Wb()),2&e&&(n.Cb(2),n.wc("ngIf",t.contentHeaderTpl||t.header))},directives:[s.u,s.B],styles:[".ngb-toasts{position:fixed;top:0;right:0;margin:.5em;z-index:1200}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}"],encapsulation:2}),e})(),wr=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),yr=(()=>{class e{constructor(){this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Cr=0,kr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(e,t){2&e&&(n.ac("id",t.id),n.Eb("tooltip show"+(t.tooltipClass?" "+t.tooltipClass:"")))},inputs:{id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:q,decls:3,vars:0,consts:[[1,"arrow"],[1,"tooltip-inner"]],template:function(e,t){1&e&&(n.vc(),n.Sb(0,"div",0),n.Xb(1,"div",1),n.uc(2),n.Wb())},styles:["ngb-tooltip-window.bs-tooltip-bottom .arrow,ngb-tooltip-window.bs-tooltip-top .arrow{left:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-bottom-left .arrow,ngb-tooltip-window.bs-tooltip-top-left .arrow{left:1em}ngb-tooltip-window.bs-tooltip-bottom-right .arrow,ngb-tooltip-window.bs-tooltip-top-right .arrow{left:auto;right:.8rem}ngb-tooltip-window.bs-tooltip-left .arrow,ngb-tooltip-window.bs-tooltip-right .arrow{top:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-left-top .arrow,ngb-tooltip-window.bs-tooltip-right-top .arrow{top:.4rem}ngb-tooltip-window.bs-tooltip-left-bottom .arrow,ngb-tooltip-window.bs-tooltip-right-bottom .arrow{top:auto;bottom:.4rem}"],encapsulation:2,changeDetection:0}),e})(),Sr=(()=>{class e{constructor(e,t,i,s,r,o,a,c,l,u){this._elementRef=e,this._renderer=t,this._ngZone=a,this._document=c,this._changeDetector=l,this.shown=new n.n,this.hidden=new n.n,this._ngbTooltipWindowId="ngb-tooltip-"+Cr++,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disableTooltip=o.disableTooltip,this.tooltipClass=o.tooltipClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new rs(kr,i,r,t,s,u),this._zoneSubscription=a.onStable.subscribe(()=>{this._windowRef&&Mn(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,"bs-tooltip")})}set ngbTooltip(e){this._ngbTooltip=e,!e&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(e){this._windowRef||!this._ngbTooltip||this.disableTooltip||(this._windowRef=this._popupService.open(this._ngbTooltip,e),this._windowRef.instance.tooltipClass=this.tooltipClass,this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),Tn(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}close(){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=Fs(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:e}){e&&this.isOpen()&&(this._windowRef.instance.tooltipClass=e.currentValue)}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.F),n.Rb(n.r),n.Rb(n.j),n.Rb(n.P),n.Rb(yr),n.Rb(n.z),n.Rb(s.e),n.Rb(n.h),n.Rb(n.g))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbTooltip",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[n.Ab]}),e})(),xr=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})(),Or=(()=>{class e{constructor(){this.highlightClass="ngb-highlight"}ngOnChanges(e){const t=bi(this.result),i=(Array.isArray(this.term)?this.term:[this.term]).map(e=>bi(e).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")).filter(e=>e);this.parts=i.length?t.split(new RegExp(`(${i.join("|")})`,"gmi")):[t]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term"},features:[n.Ab],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(e,t){1&e&&n.Wc(0,ci,3,2,"ng-template",0),2&e&&n.wc("ngForOf",t.parts)},directives:[s.t,s.u],styles:[".ngb-highlight{font-weight:700}"],encapsulation:2,changeDetection:0}),e})(),Dr=(()=>{class e{constructor(){this.activeIdx=0,this.focusFirst=!0,this.formatter=bi,this.selectEvent=new n.n,this.activeChangeEvent=new n.n}hasActive(){return this.activeIdx>-1&&this.activeIdx<this.results.length}getActive(){return this.results[this.activeIdx]}markActive(e){this.activeIdx=e,this._activeChanged()}next(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()}prev(){this.activeIdx<0?this.activeIdx=this.results.length-1:0===this.activeIdx?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()}resetActive(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()}select(e){this.selectEvent.emit(e)}ngOnInit(){this.resetActive()}_activeChanged(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-typeahead-window"]],hostAttrs:["role","listbox",1,"dropdown-menu","show"],hostVars:1,hostBindings:function(e,t){1&e&&n.jc("mousedown",(function(e){return e.preventDefault()})),2&e&&n.ac("id",t.id)},inputs:{focusFirst:"focusFirst",formatter:"formatter",id:"id",results:"results",term:"term",resultTemplate:"resultTemplate"},outputs:{selectEvent:"select",activeChangeEvent:"activeChange"},exportAs:["ngbTypeaheadWindow"],decls:3,vars:1,consts:[["rt",""],["ngFor","",3,"ngForOf"],[3,"result","term"],["type","button","role","option",1,"dropdown-item",3,"id","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.Wc(0,li,1,2,"ng-template",null,0,n.Xc),n.Wc(2,hi,2,9,"ng-template",1)),2&e&&(n.Cb(2),n.wc("ngForOf",t.results))},directives:[s.t,Or,s.B],encapsulation:2}),e})();const Ir=new n.q("live announcer delay",{providedIn:"root",factory:function(){return 100}});function jr(e,t=!1){let i=e.body.querySelector("#ngb-live");return null==i&&t&&(i=e.createElement("div"),i.setAttribute("id","ngb-live"),i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),i.classList.add("sr-only"),e.body.appendChild(i)),i}let Tr=(()=>{class e{constructor(e,t){this._document=e,this._delay=t}ngOnDestroy(){const e=jr(this._document);e&&e.parentElement.removeChild(e)}say(e){const t=jr(this._document,!0),i=this._delay;t.textContent="";const n=()=>t.textContent=e;null===i?n():setTimeout(n,i)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(s.e),n.fc(Ir))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(s.e),Object(n.fc)(Ir))},token:e,providedIn:"root"}),e})(),Er=(()=>{class e{constructor(){this.editable=!0,this.focusFirst=!0,this.showHint=!1,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Ar={provide:r.q,useExisting:Object(n.U)(()=>Wr),multi:!0};let _r=0,Wr=(()=>{class e{constructor(e,t,i,s,r,c,l,u,d,h,b,f){this._elementRef=e,this._renderer=i,this._live=u,this._document=d,this._ngZone=h,this._changeDetector=b,this._closed$=new o.a,this.autocomplete="off",this.placement="bottom-left",this.selectItem=new n.n,this.popupId="ngb-typeahead-"+_r++,this._onTouched=()=>{},this._onChange=e=>{},this.container=c.container,this.editable=c.editable,this.focusFirst=c.focusFirst,this.showHint=c.showHint,this.placement=c.placement,this._valueChanges=Object(p.a)(e.nativeElement,"input").pipe(Object(C.a)(e=>e.target.value)),this._resubscribeTypeahead=new a.a(null),this._popupService=new rs(Dr,s,t,i,r,f),this._zoneSubscription=l.onStable.subscribe(()=>{this.isPopupOpen()&&Mn(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container)})}ngOnInit(){const e=this._valueChanges.pipe(Object(j.a)(e=>{this._inputValueBackup=this.showHint?e:null,this._onChange(this.editable?e:void 0)})).pipe(this.ngbTypeahead),t=this._resubscribeTypeahead.pipe(Object(x.a)(()=>e));this._subscription=this._subscribeToUserInput(t)}ngOnDestroy(){this._closePopup(),this._unsubscribeFromUserInput(),this._zoneSubscription.unsubscribe()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){this._writeInputValue(this._formatItemForInput(e)),this.showHint&&(this._inputValueBackup=e)}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}dismissPopup(){this.isPopupOpen()&&(this._resubscribeTypeahead.next(null),this._closePopup(),this.showHint&&null!==this._inputValueBackup&&this._writeInputValue(this._inputValueBackup),this._changeDetector.markForCheck())}isPopupOpen(){return null!=this._windowRef}handleBlur(){this._resubscribeTypeahead.next(null),this._onTouched()}handleKeyDown(e){if(this.isPopupOpen())switch(e.which){case kn.ArrowDown:e.preventDefault(),this._windowRef.instance.next(),this._showHint();break;case kn.ArrowUp:e.preventDefault(),this._windowRef.instance.prev(),this._showHint();break;case kn.Enter:case kn.Tab:const t=this._windowRef.instance.getActive();wi(t)&&(e.preventDefault(),e.stopPropagation(),this._selectResult(t)),this._closePopup()}}_openPopup(){this.isPopupOpen()||(this._inputValueBackup=this._elementRef.nativeElement.value,this._windowRef=this._popupService.open(),this._windowRef.instance.id=this.popupId,this._windowRef.instance.selectEvent.subscribe(e=>this._selectResultClosePopup(e)),this._windowRef.instance.activeChangeEvent.subscribe(e=>this.activeDescendant=e),"body"===this.container&&window.document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._changeDetector.markForCheck(),Tn(this._ngZone,this._document,"outside",()=>this.dismissPopup(),this._closed$,[this._elementRef.nativeElement,this._windowRef.location.nativeElement]))}_closePopup(){this._closed$.next(),this._popupService.close(),this._windowRef=null,this.activeDescendant=void 0}_selectResult(e){let t=!1;this.selectItem.emit({item:e,preventDefault:()=>{t=!0}}),this._resubscribeTypeahead.next(null),t||(this.writeValue(e),this._onChange(e))}_selectResultClosePopup(e){this._selectResult(e),this._closePopup()}_showHint(){if(this.showHint&&this._windowRef.instance.hasActive()&&null!=this._inputValueBackup){const e=this._inputValueBackup.toLowerCase(),t=this._formatItemForInput(this._windowRef.instance.getActive());e===t.substr(0,this._inputValueBackup.length).toLowerCase()?(this._writeInputValue(this._inputValueBackup+t.substr(this._inputValueBackup.length)),this._elementRef.nativeElement.setSelectionRange.apply(this._elementRef.nativeElement,[this._inputValueBackup.length,t.length])):this._writeInputValue(t)}}_formatItemForInput(e){return null!=e&&this.inputFormatter?this.inputFormatter(e):bi(e)}_writeInputValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",bi(e))}_subscribeToUserInput(e){return e.subscribe(e=>{e&&0!==e.length?(this._openPopup(),this._windowRef.instance.focusFirst=this.focusFirst,this._windowRef.instance.results=e,this._windowRef.instance.term=this._elementRef.nativeElement.value,this.resultFormatter&&(this._windowRef.instance.formatter=this.resultFormatter),this.resultTemplate&&(this._windowRef.instance.resultTemplate=this.resultTemplate),this._windowRef.instance.resetActive(),this._windowRef.changeDetectorRef.detectChanges(),this._showHint()):this._closePopup();const t=e?e.length:0;this._live.say(0===t?"No results available":`${t} result${1===t?"":"s"} available`)})}_unsubscribeFromUserInput(){this._subscription&&this._subscription.unsubscribe(),this._subscription=null}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.P),n.Rb(n.F),n.Rb(n.r),n.Rb(n.j),n.Rb(Er),n.Rb(n.z),n.Rb(Tr),n.Rb(s.e),n.Rb(n.z),n.Rb(n.h),n.Rb(n.g))},e.\u0275dir=n.Mb({type:e,selectors:[["input","ngbTypeahead",""]],hostAttrs:["autocapitalize","off","autocorrect","off","role","combobox","aria-multiline","false"],hostVars:7,hostBindings:function(e,t){1&e&&n.jc("blur",(function(){return t.handleBlur()}))("keydown",(function(e){return t.handleKeyDown(e)})),2&e&&(n.ac("autocomplete",t.autocomplete),n.Db("aria-autocomplete",t.showHint?"both":"list")("aria-activedescendant",t.activeDescendant)("aria-owns",t.isPopupOpen()?t.popupId:null)("aria-expanded",t.isPopupOpen()),n.Hb("open",t.isPopupOpen()))},inputs:{autocomplete:"autocomplete",placement:"placement",container:"container",editable:"editable",focusFirst:"focusFirst",showHint:"showHint",inputFormatter:"inputFormatter",ngbTypeahead:"ngbTypeahead",resultFormatter:"resultFormatter",resultTemplate:"resultTemplate"},outputs:{selectItem:"selectItem"},exportAs:["ngbTypeahead"],features:[n.Bb([Ar])]}),e})(),Rr=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})();const Pr=[Ei,Wi,Bi,zi,Ki,zn,is,fs,xs,Ws,Ys,Hs,qs,ir,fr,wr,xr,Rr];let Mr=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[Pr,Ei,Wi,Bi,zi,Ki,zn,is,fs,xs,Ws,Ys,Hs,qs,ir,fr,wr,xr,Rr]}),e})()},"1uah":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("yCtX"),s=i("DH7j"),r=i("7o/Q"),o=i("l7GE"),a=i("ZUHj"),c=i("Lhse");function l(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),Object(n.a)(e,void 0).lift(new u(t))}class u{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new d(e,this.resultSelector))}}class d extends r.a{constructor(e,t,i=Object.create(null)){super(e),this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:null,this.values=i}_next(e){const t=this.iterators;Object(s.a)(e)?t.push(new p(e)):t.push("function"==typeof e[c.a]?new h(e[c.a]()):new b(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let t=e[i];t.stillUnsubscribed?this.destination.add(t.subscribe(t,i)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let r=0;r<t;r++){let t=e[r];if("function"==typeof t.hasValue&&!t.hasValue())return}let n=!1;const s=[];for(let r=0;r<t;r++){let t=e[r],o=t.next();if(t.hasCompleted()&&(n=!0),o.done)return void i.complete();s.push(o.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),n&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class h{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return e&&e.done}}class p{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[c.a](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class b extends o.a{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[c.a](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e,t,i,n,s){this.buffer.push(t),this.parent.checkIterators()}subscribe(e,t){return Object(a.a)(this,this.observable,this,t)}}},"27el":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("UMzN"),s=i("xoOP"),r=i("O3o7");class o{constructor(e){this.isFavorite=e.isFavorite||!e.client.id&&"Favorites"===e.client.name||!1,this.isSelected=e.isSelected||!1,this.client=new n.a(e.client),this.projectsCount=e.projectsCount,this.projects=(e.projects||[]).map(e=>new r.a(e)),this.areAllProjectsLoaded=e.areAllProjectsLoaded}updatePojectsCountBy(e){Number.isInteger(this.projectsCount)&&(this.projectsCount=this.projectsCount+e)}static groupProjectsToClientGroups(e){const t={};e.forEach(e=>{var i,n;const s=(null===(i=e.client)||void 0===i?void 0:i.id)||"";t[s]||(t[s]={clientName:(null===(n=e.client)||void 0===n?void 0:n.name)||"",projects:[]}),t[s].projects.push(e)});const i=[];for(const s in t){const e={client:new n.a({name:t[s].clientName,id:s}),isSelected:!0,projects:t[s].projects},r=new o(e);i.push(r)}return i}static filterDontCollapsedProjects(e,t){return Object(s.r)(t)?e:e.length?e.filter(e=>{const i=t[e.id];return!i||!i.isSelctedWithoutTask||e.taskCount>0||e.taskCount>i.taskIds.length}):e}}},"2rWG":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("fXoL"),s=i("2Vo4"),r=i("XNiG"),o=i("/uUt"),a=i("Kj3r"),c=i("1G5W"),l=i("DoKE"),u=i("qb1n");let d=(()=>{class e{constructor(e,t,i){this.elementRef=e,this.resizeableService=t,this.renderer=i,this.dropdownUpClassName="cl-dropup",this.dropdownLeftClassName="cl-dropdown-left",this.openToLeftIfNeed=!1,this.isHoverEnabled=!1,this.onOpen=new n.n,this.onClose=new n.n,this.disableClose=!1,this.clickSubject$=new s.a(!1),this.click$=this.clickSubject$.asObservable().pipe(Object(o.a)()),this.hoverDebouncer$=new r.a,this.unsubscribe$=new r.a,this.debounceTime=100,this.documentClicked=e=>{var t;e.target.hasAttribute("doNotCloseDropdown")||((e.target.hasAttribute("clickCloseDropdown")||(null===(t=e.target.parentElement)||void 0===t?void 0:t.hasAttribute("clickCloseDropdown")))&&this.closeDropdown(),this.elementRef.nativeElement.contains(e.target)||this.closeDropdown())},this.documentMouseOver=e=>{const t=this.elementRef.nativeElement.contains(e.target);this.hoverDebouncer$.next(t)},this.keyupPressed=e=>{"Escape"===e.code&&this.closeDropdown()}}set disabled(e){this._disabled=e,!1===e&&this.visible&&this.closeDropdown()}get disabled(){return this._disabled}keydown(e){(e.keyCode?e.keyCode:e.which)===l.i&&e.target.hasAttribute("dropdownClose")&&!e.shiftKey&&this.closeDropdown()}keyup(e){const t=e.keyCode?e.keyCode:e.which,i=e.ctrlKey;if(t!==l.h||i){if(t!==l.d||i)return e.target.hasAttribute("dropdownClose")&&!e.shiftKey?(this.focusOnNextElement(),void this.closeDropdown()):void 0;e.target.hasAttribute("clickCloseDropdown")&&this.closeDropdown()}else e.target.hasAttribute("clickCloseDropdown")&&this.closeDropdown()}isElementInside(e){return this.elementRef.nativeElement.contains(e)}focusOnNextElement(){const e=this.elementRef.nativeElement.closest("[tabRow]"),t=this.elementRef.nativeElement.closest("[tabCell]");if(!t||!e)return;const i=this.getNextElement(t,e);if(i)i.focus();else{const e=t.querySelector("[tabFocus]");e&&e.focus()}}getNextElement(e,t){try{let i=Array.from(t.querySelectorAll("[tabindex]"));i=i.filter(e=>0===Number(e.getAttribute("tabindex")));for(let t=0;t<i.length;t++)if(4===e.compareDocumentPosition(i[t]))return i[t];return null}catch(i){return null}}showDropdown(){this.disabled||this.visible||(this.isHoverEnabled&&(this.subscribeToMousOver(),this.listenerDropdownMouseOverFn=this.renderer.listen(document,"mouseover",this.documentMouseOver)),this.setIsOpenLeft(),this.visible=!0,this.clickSubject$.next(this.visible),this.listenerFn=this.renderer.listen(document,"click",this.documentClicked),this.listenerKeyboardFn=this.renderer.listen(document,"keyup",this.keyupPressed),this.onOpen.emit(),setTimeout(()=>{this.setIsOpenUp()},10))}toggleDropdown(){this.visible?this.closeDropdown():this.showDropdown()}subscribeToMousOver(){this.hoverDebouncer$.pipe(Object(a.a)(this.debounceTime),Object(o.a)(),Object(c.a)(this.unsubscribe$)).subscribe(e=>{e||this.closeDropdown()})}closeDropdown(){this.disableClose||this.resizeableService.isResizing||!this.visible||this.forceClose()}forceClose(){this.visible=!1,this.clickSubject$.next(this.visible),this.finishSubscriptions(),this.removeListeners(),this.renderer.removeClass(this.elementRef.nativeElement,this.dropdownUpClassName),this.onClose.emit()}ngOnDestroy(){this.removeListeners(),this.finishSubscriptions()}finishSubscriptions(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}removeListeners(){this.listenerFn&&this.listenerFn(),this.listenerKeyboardFn&&this.listenerKeyboardFn(),this.listenerDropdownMouseOverFn&&this.listenerDropdownMouseOverFn()}setIsOpenLeft(){if(this.openToLeftIfNeed)try{const e=this.elementRef.nativeElement.getBoundingClientRect(),t=document.getElementById("layout-main").getBoundingClientRect(),i=20,n=t.right-e.right-i+e.width,s=e.left-t.left-i;n<320&&s>n?this.renderer.addClass(this.elementRef.nativeElement,this.dropdownLeftClassName):this.renderer.removeClass(this.elementRef.nativeElement,this.dropdownLeftClassName)}catch(e){}}setIsOpenUp(){try{if(this.elementRef.nativeElement.querySelector("[alwaysUp]"))return void this.renderer.addClass(this.elementRef.nativeElement,this.dropdownUpClassName);const e=this.elementRef.nativeElement.querySelector("[openUpAtBottom]");if(!e)return;const t=this.elementRef.nativeElement.getBoundingClientRect().top,i=window.innerHeight,n=e.getBoundingClientRect().height;i-t<n+5&&t>n?this.renderer.addClass(this.elementRef.nativeElement,this.dropdownUpClassName):this.renderer.removeClass(this.elementRef.nativeElement,this.dropdownUpClassName)}catch(e){}}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(u.a),n.Rb(n.F))},e.\u0275dir=n.Mb({type:e,selectors:[["","dropdownKey",""]],hostBindings:function(e,t){1&e&&n.jc("keydown",(function(e){return t.keydown(e)}))("keyup",(function(e){return t.keyup(e)}))},inputs:{disabled:["dropdownKey","disabled"],openToLeftIfNeed:"openToLeftIfNeed",isHoverEnabled:"isHoverEnabled"},outputs:{onOpen:"onOpen",onClose:"onClose"},exportAs:["dropdownKey"]}),e})()},"33WN":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("XNiG"),s=i("l5mm"),r=i("pLZG"),o=i("Kj3r"),a=i("1G5W"),c=i("vkgz"),l=i("xoOP"),u=i("fXoL");let d=(()=>{class e{constructor(e,t){this.el=e,this.renderer=t,this.activeClass="cl-scroll-tabs-active",this.resizeDebouncer$=new n.a,this.unsubscribe$=new n.a,this.listeners={},this.state=new n.a,this.pressCounter=0,this.cancel=this.state.pipe(Object(r.a)(e=>"stop"===e))}ngOnInit(){this.resizeDebouncer$.pipe(Object(o.a)(70),Object(a.a)(this.unsubscribe$)).subscribe(()=>this.recalculate()),this.recalculate()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete(),Object.keys(this.listeners).forEach(e=>{try{this.listeners[e]()}catch(t){}})}onWindowResize(e){this.resizeDebouncer$.next()}recalculate(){const e=this.el.nativeElement;e.scrollWidth>e.parentElement.scrollWidth+10?(this.isGenerated||this.generateButtons(),this.isGenerated=!0,e.classList.add(this.activeClass)):e.classList.remove(this.activeClass)}scrollRight(e=50){this.scroll(e)}scrollLeft(e=-50){this.scroll(e)}scroll(e){this.el.nativeElement.scrollBy(e,0)}generateButtons(){const e=Object(l.f)("li","cl-nav-item cl-scroll-tab-left"),t=Object(l.f)("a","cl-nav-link"),i=Object(l.f)("img");i.src="assets/images/ui-icons/chevron-left.svg";const n=Object(l.f)("li","cl-nav-item cl-scroll-tab-right"),s=Object(l.f)("a","cl-nav-link"),r=Object(l.f)("img");r.src="assets/images/ui-icons/chevron-right.svg",t.appendChild(i),e.appendChild(t),this.renderer.insertBefore(this.el.nativeElement,e,this.el.nativeElement.firstChild),s.appendChild(r),n.appendChild(s),this.renderer.insertBefore(this.el.nativeElement,n,this.el.nativeElement.firstChild),this.addListeners(n,80,55,"right"),this.addListeners(e,-80,-55,"left")}addListeners(e,t,i,n){this.listeners[n+"Click"]=this.renderer.listen(e,"click",e=>{this.pressCounter<3&&this.scroll(t),this.pressCounter=0}),this.listeners[n+"Mousedown"]=this.renderer.listen(e,"mousedown",e=>{this.state.next("start"),Object(s.a)(100).pipe(Object(a.a)(this.cancel),Object(c.a)(e=>{this.pressCounter++,this.scroll(i)},Object(a.a)(this.unsubscribe$))).subscribe()}),this.listeners[n+"Mouseup"]=this.renderer.listen(e,"mouseup",e=>{this.state.next("stop")}),this.listeners[n+"Mouseleave"]=this.renderer.listen(e,"mouseleave",e=>{this.state.next("stop")})}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(u.l),u.Rb(u.F))},e.\u0275dir=u.Mb({type:e,selectors:[["","tabs",""]],hostBindings:function(e,t){1&e&&u.jc("resize",(function(e){return t.onWindowResize(e)}),!1,u.Nc)},inputs:{activeClass:"activeClass"},exportAs:["tabs"]}),e})()},"3QTq":function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return l}));var n=i("wd/R");function s(e,t){if(t||(t="HH:mm:ss"),e){(e=e.replace(",",".")).includes(".0")&&(e=0==e.split(".0")[1].length?e.replace(".0","h"):e);const i=e.split(/[:\/;\-]/);if(1===i.length)return function(e,t){return"h"===e.charAt(e.length-1).toLowerCase()?r(e.substring(0,e.length-1),t):"m"===e.charAt(e.length-1).toLowerCase()?function(e,t){e=e.replace(",",".");const i=Number(e);if(!isNaN(i)){let e,n,s=Math.floor(i/60);return s>=999?(s=999,e=0,n=0):(e=Math.floor(i-60*s),n=Math.round(100*i%100/100*60)),c(s,e,n,t)}}(e.substring(0,e.length-1),t):"s"===e.charAt(e.length-1).toLowerCase()?function(e,t){e=e.replace(",",".");const i=Number(e);if(!isNaN(i)){let e=Math.floor(i/3600),n=Math.floor(i/60)-60*e,s=Math.round(i-3600*e-60*n);return e>=999&&(e=999,n=0,s=0),c(e,n,s,t)}}(e.substring(0,e.length-1),t):function(e,t){e=e.replace(",",".");const i=Number(e);if(!isNaN(i)){if(i<100)return i.toString().includes(".")?r(i.toString(),t):function(e,t){const i=Math.floor(e/60);return c(i,Math.floor(e-60*i),Math.round(100*e%100/100*60),t)}(i,t);{let n;if(Number.isInteger(i))n=`${e.substring(0,e.length-2)}:\n          ${e.substring(e.length-2,e.length)}`;else{const e=i.toFixed(2),t=String(e);n=`${t.substring(0,t.length-5)}:\n          ${t.substring(t.length-5,t.length)}`}return o(n.split(":"),t)}}}(e,t)}(i[0],t);if(2===i.length)return o(i,t);if(3===i.length)return function(e,t){let i=Number(e[0].replace(",","."));if(!isNaN(i)){let n=Number(e[1].replace(",","."));if(!isNaN(n)){let s=Number(e[2].replace(",","."));if(!isNaN(s))return s=Math.floor(s),s>59&&(n+=Math.floor(s/60),s-=60*Math.floor(s/60)),n>59&&(i+=Math.floor(n/60),n=Math.floor(100*i%100/100*60)+(n-60*Math.floor(n/60))),i>999?"999:00:00":(Number.isInteger(i)||(i=Math.floor(i)),Number.isInteger(n)||(n=Math.floor(n)),c(i,n,s,t))}}}(i,t)}}function r(e,t){e=e.replace(",",".");const i=Number(e);if(!isNaN(i))return i>=999?"999:00:00":c(Math.floor(i),Math.round(100*i%100/100*60),0,t)}function o(e,t){let i=Number(e[0].replace(",","."));if(!isNaN(i)){let n=Number(e[1].replace(",","."));if(!isNaN(n)){n=Math.floor(100*i%100/100*60)+Number(n);const e=Math.floor(100*n%100/100*60);return n>59&&(i+=Math.floor(n/60),n=Math.floor(n-60*Math.floor(n/60))),i>999?"999:00:00":(Number.isInteger(i)||(i=Math.floor(i)),Number.isInteger(n)||(n=Math.floor(n)),c(i,n,e,t))}}}function a(e){const t=e.split(":");let i=3600*Number(t[0])+60*Number(t[1]);return t[2]&&(i+=Number(t[2])),i}function c(e,t,i,s){return n.duration({hour:e,minute:t,second:i}).format(s,{trim:!1})}function l(e,t){if(e)return Object(n.duration)(e).format(t,{trim:!1})}i("RiPy")},"3eYs":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("f0Wu"),s=i("Tj/N"),r=i("fXoL");let o=(()=>{class e{constructor(){const e=new s.a(JSON.parse(localStorage.getItem("user")));this.dateFormat=e&&e.settings&&e.settings.dateFormat}transform(e,t=!1,i=!1,s){if(!t){const t=n(e,this.dateFormat),s=n();if(t.isSame(s,"day"))return i?"Now":"Today"}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"formatDateToday",type:e,pure:!0}),e})()},4500:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return e.sort(),e.map(e=>this.getNameByIndex(e)).toString()}getNameByIndex(e){switch(e){case 0:return" Mon";case 1:return" Tue";case 2:return" Wed";case 3:return" Thu";case 4:return" Fri";case 5:return" Sat";case 6:return" Sun"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"displayDayOfWeek",type:e,pure:!0}),e})()},"49HY":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ofXK"),s=i("3Pt+"),r=i("gr2/"),o=i("1kSV"),a=i("tZA+"),c=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.ab,a.a,o.M]]}),e})()},"4Seb":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),s=i("wd/R"),r=i("3QTq"),o=i("yK97"),a=i("3Pt+");const c=["timeDurationInput"];let l=(()=>{class e{constructor(){this.focusOnInput=!1,this.focusOnInit=!1,this.timeChanged=new n.n,this.onFocus=new n.n}set timeInterval(e){e&&(e=new o.a(e),this._timeInterval=e,this.lastDurationBackup=e.duration,this.initData())}get timeInterval(){return this._timeInterval}ngOnInit(){this.initData()}ngAfterViewInit(){!this.focusOnInit||!this.timeDurationInput||this.timeInterval&&Object(s.duration)(this.timeInterval.duration).asSeconds()>0||this.focusTimeEntryDurationInput(this.timeDurationInput.nativeElement)}initData(){this.timeInterval&&this.format&&(this.timeEntryDurationInput=Object(r.b)(this.timeInterval.duration,this.format),this.timeEntryDurationBackup=this.timeEntryDurationInput)}focusTimeEntryDurationInput(e){this.onFocus.emit(),this.focusOnInput&&setTimeout(()=>{e.focus(),e.select()})}addFromTimeDurationInput(){if(this.timeEntryDurationInput===this.timeEntryDurationBackup)return;const e=Object(r.c)(this.timeEntryDurationInput,this.format);if(!e)return void(this.timeEntryDurationInput=this.timeEntryDurationBackup);this.timeEntryDurationInput=e;const t=Object(r.a)(e),i=this.getTimeIntervalFromSeconds(t);this.emit(i)}getTimeIntervalFromSeconds(e){const t=s(this.timeInterval.start).clone(),i=s(this.timeInterval.start).clone().add(e,"s"),n=s.duration(i.diff(t)).toISOString();return new o.a({start:t.toISOString(),end:i.toISOString(),duration:n})}arrowPressed(e){const t=Object(r.c)(this.timeEntryDurationInput,this.format);if(!t)return void(this.timeEntryDurationInput=this.timeEntryDurationBackup);let i=Object(r.a)(t);e?i+=60:i-=60,i<0&&(i=0);const n=this.getTimeIntervalFromSeconds(i);this.timeEntryDurationInput=Object(r.b)(n.duration,this.format)}emit(e){e.duration!==this.lastDurationBackup&&(this.timeInterval=e,this.timeChanged.emit(this.timeInterval))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["input-duration"]],viewQuery:function(e,t){var i;1&e&&n.ed(c,!0),2&e&&n.Kc(i=n.kc())&&(t.timeDurationInput=i.first)},inputs:{timeInterval:"timeInterval",disable:"disable",format:"format",focusOnInput:"focusOnInput",focusOnInit:"focusOnInit",removeOpacity:"removeOpacity"},outputs:{timeChanged:"timeChanged",onFocus:"onFocus"},decls:2,vars:3,consts:[["type","text","autocomplete","off",1,"cl-form-control","cl-input-time-picker-sum",3,"disabled","readOnly","ngModel","ngModelChange","blur","focus","keyup.arrowup","keyup.arrowdown","keyup.enter"],["timeDurationInput",""]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",0,1),n.jc("ngModelChange",(function(e){return t.timeEntryDurationInput=e}))("blur",(function(){return t.addFromTimeDurationInput()}))("focus",(function(){n.Oc(e);const i=n.Lc(1);return t.focusTimeEntryDurationInput(i)}))("keyup.arrowup",(function(){return t.arrowPressed(!0)}))("keyup.arrowdown",(function(){return t.arrowPressed(!1)}))("keyup.enter",(function(){return n.Oc(e),n.Lc(1).blur()})),n.Wb()}2&e&&n.wc("disabled",!t.removeOpacity&&t.disable)("readOnly",t.removeOpacity)("ngModel",t.timeEntryDurationInput)},directives:[a.c,a.s,a.v],encapsulation:2,changeDetection:0}),e})()},"4jLH":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("wd/R"),s=i("fXoL");let r=(()=>{class e{transform(e,t){return e?n(t).diff(n().subtract(1,"month"))>=0?n(t).fromNow():n(t).format("DD MMM YYYY"):"In progress"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"durationToHumanize",type:e,pure:!0}),e})()},"5+WD":function(e,t,i){"use strict";i.d(t,"a",(function(){return ye})),i.d(t,"b",(function(){return xe})),i.d(t,"c",(function(){return Oe})),i.d(t,"d",(function(){return Z})),i.d(t,"e",(function(){return J}));var n=i("fXoL"),s=i("ofXK"),r=i("8LU1"),o=i("XNiG"),a=i("LRne"),c=i("HDdC"),l=i("xgIS"),u=i("VRyK"),d=i("3N8a");class h extends d.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}var p=i("IjjT");class b extends p.a{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,n=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++n<s&&(e=t.shift()));if(this.active=!1,i){for(;++n<s&&(e=t.shift());)e.unsubscribe();throw i}}}const f=new b(h);var m=i("quSY"),g=(i("7+OI"),i("/uUt"),i("D0XW")),v=i("l7GE"),w=i("ZUHj");class y{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new C(e,this.durationSelector))}}class C extends v.a{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:t}=this;i=t(e)}catch(t){return this.destination.error(t)}const n=Object(w.a)(this,i);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,i,n){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var k=i("PqYM");function S(e,t=g.a){return i=()=>Object(k.a)(e,t),function(e){return e.lift(new y(i))};var i}var x=i("pLZG"),O=i("1G5W"),D=i("JX91");i("7o/Q");var I=i("eIep"),j=(i("UXun"),i("nLfN"));const T=new n.q("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(n.V)(s.e)}});let E=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new n.n,e){const t=e.documentElement?e.documentElement.dir:null,i=(e.body?e.body.dir:null)||t;this.value="ltr"===i||"rtl"===i?i:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(n.fc(T,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(T,8))},token:e,providedIn:"root"}),e})();i("0EQZ");let A=(()=>{class e{constructor(e,t,i){this._ngZone=e,this._platform=t,this._scrolled=new o.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new c.a(t=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(S(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(a.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Object(x.a)(e=>!e||i.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((i,n)=>{this._scrollableContainsElement(n,e)&&t.push(n)}),t}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(e,t){let i=t.nativeElement,n=e.getElementRef().nativeElement;do{if(i==n)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return Object(l.a)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.z),n.fc(j.a),n.fc(s.e,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.z),Object(n.fc)(j.a),Object(n.fc)(s.e,8))},token:e,providedIn:"root"}),e})(),_=(()=>{class e{constructor(e,t,i){this._platform=e,this._document=i,t.runOutsideAngular(()=>{const t=this._getWindow();this._change=e.isBrowser?Object(u.a)(Object(l.a)(t,"resize"),Object(l.a)(t,"orientationchange")):Object(a.a)(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._getDocument(),t=this._getWindow(),i=e.documentElement,n=i.getBoundingClientRect();return{top:-n.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,left:-n.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(S(e)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(n.fc(j.a),n.fc(n.z),n.fc(s.e,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(j.a),Object(n.fc)(n.z),Object(n.fc)(s.e,8))},token:e,providedIn:"root"}),e})();var W=i("l5mm"),R=i("lJxs"),P=i("IzEk"),M=i("vkgz");function F(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function X(e,t){const i=t?"":"none";F(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:i,msUserSelect:i,webkitUserSelect:i,MozUserSelect:i})}function L(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function N(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}const B=Object(j.e)({passive:!0}),Y=Object(j.e)({passive:!1});class V{constructor(e,t,i,n,s,r){this._config=t,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new o.a,this._pointerMoveSubscription=m.a.EMPTY,this._pointerUpSubscription=m.a.EMPTY,this._scrollSubscription=m.a.EMPTY,this._resizeSubscription=m.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new o.a,this.started=new o.a,this.released=new o.a,this.ended=new o.a,this.entered=new o.a,this.exited=new o.a,this.dropped=new o.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const t=this._handles.find(t=>{const i=e.target;return!!i&&(i===t||t.contains(i))});!t||this._disabledHandles.has(t)||this.disabled||this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{if(e.preventDefault(),!this._hasStartedDragging){const t=this._getPointerPositionOnPage(e);if(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){if(!(Date.now()>=this._dragStartTime+this._getDragStartDelay(e)))return void this._endDragSequence(e);this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const t=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t);else{const e=this._activeTransform;e.x=t.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=t.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:e,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{this._endDragSequence(e)},this.withRootElement(e),r.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=Object(r.b)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){return this._handles=e.map(e=>Object(r.c)(e)),this._handles.forEach(e=>X(e,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Object(r.c)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),t.addEventListener("mousedown",this._pointerDown,Y),t.addEventListener("touchstart",this._pointerDown,B),this._initialTransform=void 0,this._rootElement=t),this}withBoundaryElement(e){return this._boundaryElement=e?Object(r.c)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&G(this._rootElement),G(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)}enableHandle(e){this._disabledHandles.delete(e)}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_sortFromLastPointerPosition(){const e=this._pointerPositionAtLastDirectionChange;e&&this._dropContainer&&this._updateActiveDropContainer(e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&G(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&G(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(e){if(this.started.next({source:this}),z(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions(),this._dropContainer){const e=this._rootElement,i=e.parentNode,n=this._preview=this._createPreviewElement(),s=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment("");i.insertBefore(r,e),e.style.display="none",this._document.body.appendChild(i.replaceChild(s,e)),(t=this._document,t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body).appendChild(n),this._dropContainer.start(),this._initialContainer=this._dropContainer,this._initialIndex=this._dropContainer.getItemIndex(this)}else this._initialContainer=this._initialIndex=void 0;var t}_initializeDragSequence(e,t){t.stopPropagation();const i=this.isDragging(),n=z(t),s=!n&&0!==t.button,r=this._rootElement,o=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),i||s||o)return;this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor,r.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.pipe(Object(D.a)(null)).subscribe(()=>{this._scrollPosition=this._viewportRuler.getViewportScrollPosition()}),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect());const a=this._previewTemplate;this._pickupPositionInElement=a&&a.template&&!a.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const c=this._pickupPositionOnPage=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const t=this._dropContainer,i=t.getItemIndex(this),n=this._getPointerPositionOnPage(e),s=this._getDragDistance(this._getPointerPositionOnPage(e)),r=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:s}),t.drop(this,i,this._initialContainer,r,s,this._initialIndex),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t}){let i=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=i,this._dropContainer.enter(this,e,t,i===this._initialContainer&&i.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:i,currentIndex:i.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(e,t),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._preview.style.transform=U(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,i=e?e.template:null;let n;if(i){const t=e.viewContainer.createEmbeddedView(i,e.context);t.detectChanges(),n=q(t,this._document),this._previewRef=t,e.matchSize?K(n,this._rootElement):n.style.transform=U(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement;n=H(e),K(n,e)}return F(n.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"1000"}),X(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(e=>n.classList.add(e)):n.classList.add(t)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=U(e.left,e.top);const t=function(e){const t=getComputedStyle(e),i=N(t,"transition-property"),n=i.find(e=>"transform"===e||"all"===e);if(!n)return 0;const s=i.indexOf(n),r=N(t,"transition-duration"),o=N(t,"transition-delay");return L(r[s])+L(o[s])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const i=t=>{(!t||t.target===this._preview&&"transform"===t.propertyName)&&(this._preview.removeEventListener("transitionend",i),e(),clearTimeout(n))},n=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=q(this._placeholderRef,this._document)):i=H(this._rootElement),i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t){const i=this._rootElement.getBoundingClientRect(),n=e===this._rootElement?null:e,s=n?n.getBoundingClientRect():i,r=z(t)?t.targetTouches[0]:t;return{x:s.left-i.left+(r.pageX-s.left-this._scrollPosition.left),y:s.top-i.top+(r.pageY-s.top-this._scrollPosition.top)}}_getPointerPositionOnPage(e){const t=z(e)?e.touches[0]||e.changedTouches[0]:e;return{x:t.pageX-this._scrollPosition.left,y:t.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(e){const t=this._getPointerPositionOnPage(e),i=this.constrainPosition?this.constrainPosition(t,this):t,n=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===n?i.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==n||(i.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:t}=this._pickupPositionInElement,n=this._boundaryRect,s=this._previewRect,r=n.top+t,o=n.bottom-(s.height-t);i.x=$(i.x,n.left+e,n.right-(s.width-e)),i.y=$(i.y,r,o)}return i}_updatePointerDirectionDelta(e){const{x:t,y:i}=e,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-s.x),o=Math.abs(i-s.y);return r>this._config.pointerDirectionChangeThreshold&&(n.x=t>s.x?1:-1,s.x=t),o>this._config.pointerDirectionChangeThreshold&&(n.y=i>s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,X(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Y),e.removeEventListener("touchstart",this._pointerDown,B)}_applyRootElementTransform(e,t){const i=U(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?i+" "+this._initialTransform:i}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),n=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===n.width&&0===n.height)return;const s=i.left-n.left,r=n.right-i.right,o=i.top-n.top,a=n.bottom-i.bottom;i.width>n.width?(s>0&&(e+=s),r>0&&(e-=r)):e=0,i.height>n.height?(o>0&&(t+=o),a>0&&(t-=a)):t=0,e===this._passiveTransform.x&&t===this._passiveTransform.y||this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:z(e)?t.touch:t?t.mouse:0}}function U(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function H(e){const t=e.cloneNode(!0),i=t.querySelectorAll("[id]"),n=e.querySelectorAll("canvas");t.removeAttribute("id");for(let s=0;s<i.length;s++)i[s].removeAttribute("id");if(n.length){const e=t.querySelectorAll("canvas");for(let t=0;t<n.length;t++){const i=e[t].getContext("2d");i&&i.drawImage(n[t],0,0)}}return t}function $(e,t,i){return Math.max(t,Math.min(i,e))}function G(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function z(e){return"t"===e.type[0]}function q(e,t){const i=e.rootNodes[0];if(i.nodeType!==t.ELEMENT_NODE){const e=t.createElement("div");return e.appendChild(i),e}return i}function K(e,t){const i=t.getBoundingClientRect();e.style.width=i.width+"px",e.style.height=i.height+"px",e.style.transform=U(i.left,i.top)}function Z(e,t,i){const n=Q(t,e.length-1),s=Q(i,e.length-1);if(n===s)return;const r=e[n],o=s<n?-1:1;for(let a=n;a!==s;a+=o)e[a]=e[a+o];e[s]=r}function J(e,t,i,n){const s=Q(i,e.length-1),r=Q(n,t.length);e.length&&t.splice(r,0,e.splice(s,1)[0])}function Q(e,t){return Math.max(0,Math.min(t,e))}class ee{constructor(e,t,i,n,s){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=()=>!0,this.beforeStarted=new o.a,this.entered=new o.a,this.exited=new o.a,this.dropped=new o.a,this.sorted=new o.a,this._isDragging=!1,this._itemPositions=[],this._parentPositions=new Map,this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=m.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new o.a,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),Object(W.a)(0,f).pipe(Object(O.a)(this._stopScrollTimers)).subscribe(()=>{const e=this._scrollNode;1===this._verticalScrollDirection?oe(e,-2):2===this._verticalScrollDirection&&oe(e,2),1===this._horizontalScrollDirection?ae(e,-2):2===this._horizontalScrollDirection&&ae(e,2)})},this.element=Object(r.c)(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){const e=Object(r.c)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach(e=>e._startReceiving(this)),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}enter(e,t,i,n){let s;this.start(),null==n?(s=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(e,t,i))):s=n;const o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement();let l=o[s];if(l===e&&(l=o[s+1]),a>-1&&o.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){const t=l.getRootElement();t.parentElement.insertBefore(c,t),o.splice(s,0,e)}else Object(r.c)(this.element).appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,n,s,r){this._reset(),null==r&&(r=i.getItemIndex(e)),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:n,distance:s})}withItems(e){return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&this._cacheItems(),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Object(r.c)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getItemIndex(e){return this._isDragging?ne("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,t=>t.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,n){if(this.sortingDisabled||!ie(this._clientRect,t,i))return;const s=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,i,n);if(-1===r&&s.length>0)return;const o="horizontal"===this._orientation,a=ne(s,t=>t.drag===e),c=s[r],l=s[a].clientRect,u=c.clientRect,d=a>r?1:-1;this._previousSwap.drag=c.drag,this._previousSwap.delta=o?n.x:n.y;const h=this._getItemOffsetPx(l,u,d),p=this._getSiblingOffsetPx(a,s,d),b=s.slice();Z(s,a,r),this.sorted.next({previousIndex:a,currentIndex:r,container:this,item:e}),s.forEach((t,i)=>{if(b[i]===t)return;const n=t.drag===e,s=n?h:p,r=n?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=s,o?(r.style.transform=`translate3d(${Math.round(t.offset)}px, 0, 0)`,te(t.clientRect,0,s)):(r.style.transform=`translate3d(0, ${Math.round(t.offset)}px, 0)`,te(t.clientRect,s,0))})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,n=0,s=0;if(this._parentPositions.forEach((r,o)=>{o!==this._document&&r.clientRect&&!i&&ie(r.clientRect,e,t)&&([n,s]=function(e,t,i,n){const s=ce(t,n),r=le(t,i);let o=0,a=0;if(s){const t=e.scrollTop;1===s?t>0&&(o=1):e.scrollHeight-t>e.clientHeight&&(o=2)}if(r){const t=e.scrollLeft;1===r?t>0&&(a=1):e.scrollWidth-t>e.clientWidth&&(a=2)}return[o,a]}(o,r.clientRect,e,t),(n||s)&&(i=o))}),!n&&!s){const{width:r,height:o}=this._viewportRuler.getViewportSize(),a={width:r,height:o,top:0,right:r,bottom:o,left:0};n=ce(a,t),s=le(a,e),i=window}!i||n===this._verticalScrollDirection&&s===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_cacheParentPositions(){this._parentPositions.clear(),this._parentPositions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),this._scrollableElements.forEach(e=>{const t=re(e);e===this.element&&(this._clientRect=t),this._parentPositions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:t})})}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,clientRect:re(t)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const e=Object(r.c)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>e.getRootElement().style.transform=""),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,i){const n="horizontal"===this._orientation,s=t[e].clientRect,r=t[e+-1*i];let o=s[n?"width":"height"]*i;if(r){const e=n?"left":"top",t=n?"right":"bottom";-1===i?o-=r.clientRect[e]-s[t]:o+=s[e]-r.clientRect[t]}return o}_getItemOffsetPx(e,t,i){const n="horizontal"===this._orientation;let s=n?t.left-e.left:t.top-e.top;return-1===i&&(s+=n?t.width-e.width:t.height-e.height),s}_getItemIndexFromPointerPosition(e,t,i,n){const s="horizontal"===this._orientation;return ne(this._itemPositions,({drag:r,clientRect:o},a,c)=>{if(r===e)return c.length<2;if(n){const e=s?n.x:n.y;if(r===this._previousSwap.drag&&e===this._previousSwap.delta)return!1}return s?t>=Math.floor(o.left)&&t<=Math.floor(o.right):i>=Math.floor(o.top)&&i<=Math.floor(o.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_updateAfterScroll(e,t,i){const n=e===this._document?e.documentElement:e,s=this._parentPositions.get(e).scrollPosition,r=s.top-t,o=s.left-i;this._parentPositions.forEach((t,i)=>{t.clientRect&&e!==i&&n.contains(i)&&te(t.clientRect,r,o)}),this._itemPositions.forEach(({clientRect:e})=>{te(e,r,o)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()}),s.top=t,s.left=i}_isOverContainer(e,t){return se(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(n=>n._canReceive(e,t,i))}_canReceive(e,t,i){if(!se(this._clientRect,t,i)||!this.enterPredicate(e,this))return!1;const n=this._getShadowRoot().elementFromPoint(t,i);if(!n)return!1;const s=Object(r.c)(this.element);return n===s||s.contains(n)}_startReceiving(e){const t=this._activeSiblings;t.has(e)||(t.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{if(this.isDragging()){const t=e.target;if(this._parentPositions.get(t)){let e,i;if(t===this._document){const t=this._viewportRuler.getViewportScrollPosition();e=t.top,i=t.left}else e=t.scrollTop,i=t.scrollLeft;this._updateAfterScroll(t,e,i)}}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Object(j.c)(Object(r.c)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}}function te(e,t,i){e.top+=t,e.bottom=e.top+e.height,e.left+=i,e.right=e.left+e.width}function ie(e,t,i){const{top:n,right:s,bottom:r,left:o,width:a,height:c}=e,l=.05*a,u=.05*c;return i>n-u&&i<r+u&&t>o-l&&t<s+l}function ne(e,t){for(let i=0;i<e.length;i++)if(t(e[i],i,e))return i;return-1}function se(e,t,i){const{top:n,bottom:s,left:r,right:o}=e;return i>=n&&i<=s&&t>=r&&t<=o}function re(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function oe(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function ae(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function ce(e,t){const{top:i,bottom:n,height:s}=e,r=.05*s;return t>=i-r&&t<=i+r?1:t>=n-r&&t<=n+r?2:0}function le(e,t){const{left:i,right:n,width:s}=e,r=.05*s;return t>=i-r&&t<=i+r?1:t>=n-r&&t<=n+r?2:0}const ue=Object(j.e)({passive:!1,capture:!0});let de=(()=>{class e{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new o.a,this.pointerUp=new o.a,this.scroll=new o.a,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.size&&e.preventDefault()},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,ue)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,ue)}startDragging(e,t){if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){const e=t.type.startsWith("touch"),i=e?"touchend":"mouseup";this._globalListeners.set(e?"touchmove":"mousemove",{handler:e=>this.pointerMove.next(e),options:ue}).set(i,{handler:e=>this.pointerUp.next(e),options:!0}).set("scroll",{handler:e=>this.scroll.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ue}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.z),n.fc(s.e))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.z),Object(n.fc)(s.e))},token:e,providedIn:"root"}),e})();const he={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let pe=(()=>{class e{constructor(e,t,i,n){this._document=e,this._ngZone=t,this._viewportRuler=i,this._dragDropRegistry=n}createDrag(e,t=he){return new V(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new ee(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(s.e),n.fc(n.z),n.fc(_),n.fc(de))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(s.e),Object(n.fc)(n.z),Object(n.fc)(_),Object(n.fc)(de))},token:e,providedIn:"root"}),e})();const be=new n.q("CDK_DRAG_PARENT");let fe=(()=>{class e{constructor(e,t){this.element=e,this._stateChanges=new o.a,this._disabled=!1,this._parentDrag=t,X(e.nativeElement,!1)}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(r.b)(e),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(be,8))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]}}),e})(),me=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"}}),e})(),ge=(()=>{class e{constructor(e){this.templateRef=e,this._matchSize=!1}get matchSize(){return this._matchSize}set matchSize(e){this._matchSize=Object(r.b)(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","cdkDragPreview",""]],inputs:{matchSize:"matchSize",data:"data"}}),e})();const ve=new n.q("CDK_DRAG_CONFIG"),we=new n.q("CDK_DROP_LIST");let ye=(()=>{class e{constructor(e,t,i,s,r,a,l,u,d){this.element=e,this.dropContainer=t,this._document=i,this._ngZone=s,this._viewContainerRef=r,this._dir=l,this._changeDetectorRef=d,this._destroyed=new o.a,this.started=new n.n,this.released=new n.n,this.ended=new n.n,this.entered=new n.n,this.exited=new n.n,this.dropped=new n.n,this.moved=new c.a(e=>{const t=this._dragRef.moved.pipe(Object(R.a)(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{t.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5}),this._dragRef.data=this,a&&this._assignDefaults(a),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=Object(r.b)(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Object(P.a)(1),Object(O.a)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Object(D.a)(this._handles),Object(M.a)(e=>{const t=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._dragRef.withHandles(t)}),Object(I.a)(e=>Object(u.a)(...e.map(e=>e._stateChanges.pipe(Object(D.a)(e))))),Object(O.a)(this._destroyed)).subscribe(e=>{const t=this._dragRef,i=e.element.nativeElement;e.disabled?t.disableHandle(i):t.enableHandle(i)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const t=e.rootElementSelector,i=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,t=this.rootElementSelector?Ce(e,this.rootElementSelector):e;if(t&&t.nodeType!==this._document.ELEMENT_NODE)throw Error(`cdkDrag must be attached to an element node. Currently attached to "${t.nodeName}".`);this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return Ce(this.element.nativeElement,e);const t=Object(r.c)(e);if(Object(n.W)()&&!t.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return t}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,i=this.dragStartDelay,n=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof i&&i?i:Object(r.d)(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(n).withPreviewTemplate(s),t&&e.withDirection(t.value)}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:i,constrainPosition:n,previewClass:s,boundaryElement:r,draggingDisabled:o,rootElementSelector:a}=e;this.disabled=null!=o&&o,this.dragStartDelay=i||0,t&&(this.lockAxis=t),n&&(this.constrainPosition=n),s&&(this.previewClass=s),r&&(this.boundaryElement=r),a&&(this.rootElementSelector=a)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(we,12),n.Rb(s.e),n.Rb(n.z),n.Rb(n.P),n.Rb(ve,8),n.Rb(E,8),n.Rb(pe),n.Rb(n.h))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,ge,!0),n.Jb(i,me,!0),n.Jb(i,fe,!0)),2&e&&(n.Kc(s=n.kc())&&(t._previewTemplate=s.first),n.Kc(s=n.kc())&&(t._placeholderTemplate=s.first),n.Kc(s=n.kc())&&(t._handles=s))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&n.Hb("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[n.Bb([{provide:be,useExisting:e}]),n.Ab]}),e})();function Ce(e,t){let i=e.parentElement;for(;i;){if(i.matches?i.matches(t):i.msMatchesSelector(t))return i;i=i.parentElement}return null}let ke=(()=>{class e{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(r.b)(e)}ngOnDestroy(){this._items.clear()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"]}),e})(),Se=0,xe=(()=>{class e{constructor(t,i,s,r,a,c,l){this.element=t,this._changeDetectorRef=s,this._dir=r,this._group=a,this._scrollDispatcher=c,this._destroyed=new o.a,this.connectedTo=[],this.id="cdk-drop-list-"+Se++,this.enterPredicate=()=>!0,this.dropped=new n.n,this.entered=new n.n,this.exited=new n.n,this.sorted=new n.n,this._unsortedItems=new Set,this._dropListRef=i.createDropList(t),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(e,t)=>this.enterPredicate(e.data,t.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),a&&a._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=Object(r.b)(e)}ngAfterContentInit(){if(this._scrollDispatcher){const e=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(e=>e.getElementRef().nativeElement);this._dropListRef.withScrollableParents(e)}}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}start(){this._dropListRef.start()}drop(e,t,i,n){this._dropListRef.drop(e._dragRef,t,i._dropListRef,n,{x:0,y:0})}enter(e,t,i){this._dropListRef.enter(e._dragRef,t,i)}exit(e){this._dropListRef.exit(e._dragRef)}getItemIndex(e){return this._dropListRef.getItemIndex(e._dragRef)}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Object(D.a)(this._dir.value),Object(O.a)(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{const i=Object(r.a)(this.connectedTo).map(t=>"string"==typeof t?e._dropLists.find(e=>e.id===t):t);this._group&&this._group._items.forEach(e=>{-1===i.indexOf(e)&&i.push(e)}),t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=Object(r.b)(this.sortingDisabled),t.autoScrollDisabled=Object(r.b)(this.autoScrollDisabled),t.connectedTo(i.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:t,draggingDisabled:i,sortingDisabled:n,listAutoScrollDisabled:s,listOrientation:r}=e;this.disabled=null!=i&&i,this.sortingDisabled=null!=n&&n,this.autoScrollDisabled=null!=s&&s,this.orientation=r||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(pe),n.Rb(n.h),n.Rb(E,8),n.Rb(ke,12),n.Rb(A),n.Rb(ve,8))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(n.ac("id",t.id),n.Hb("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[n.Bb([{provide:ke,useValue:void 0},{provide:we,useExisting:e}])]}),e._dropLists=[],e})(),Oe=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[pe]}),e})()},"5Ra6":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("f0Wu"),s=i("fXoL");let r=(()=>{class e{constructor(){}addOffsetToUTCTime(e){const t=e.utcOffset();return n.parseZone(e).add(t,"m")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"5SNR":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),s=i("ofXK");const r=["template"];function o(e,t){1&e&&n.Tb(0)}function a(e,t){1&e&&n.Tb(0)}function c(e,t){if(1&e&&(n.Xb(0,"td",6),n.Wc(1,a,1,0,"ng-container",4),n.Wb()),2&e){const e=t.$implicit;n.wc("ngClass","cl-responsive-table-td-"+(t.index+1)),n.Cb(1),n.wc("ngTemplateOutlet",e)}}function l(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"td",3),n.Wc(2,o,1,0,"ng-container",4),n.Wb(),n.Wc(3,c,2,2,"td",5),n.oc(4,"slice"),n.Ub()),2&e){const e=n.nc(2);n.Cb(2),n.wc("ngTemplateOutlet",e.templates[0]),n.Cb(1),n.wc("ngForOf",n.qc(4,2,e.templates,1))}}function u(e,t){1&e&&n.Tb(0)}function d(e,t){1&e&&n.Tb(0)}function h(e,t){if(1&e&&(n.Xb(0,"tr",15),n.Xb(1,"th",16),n.Xb(2,"div",17),n.Yc(3),n.Wb(),n.Wb(),n.Xb(4,"td",18),n.Wc(5,d,1,0,"ng-container",4),n.Wb(),n.Wb()),2&e){const e=t.$implicit,i=t.index,s=n.nc(3).labels;n.Cb(3),n.Zc(s[i+1]),n.Cb(2),n.wc("ngTemplateOutlet",e)}}function p(e,t){if(1&e&&(n.Xb(0,"table",13),n.Xb(1,"tbody"),n.Wc(2,h,6,2,"tr",14),n.oc(3,"slice"),n.Wb(),n.Wb()),2&e){const e=n.nc(3);n.Cb(2),n.wc("ngForOf",n.qc(3,1,e.templates,1))}}function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"td",7),n.Xb(1,"div",8),n.Wc(2,u,1,0,"ng-container",4),n.Xb(3,"a",9),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.isExpanded=!t.isExpanded})),n.Xb(4,"span",10),n.Sb(5,"img",11),n.Wb(),n.Wb(),n.Wb(),n.Wc(6,p,4,4,"table",12),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngTemplateOutlet",e.templates[0]),n.Cb(3),n.wc("src",e.isExpanded?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc),n.Cb(1),n.wc("ngIf",e.isExpanded)}}function f(e,t){if(1&e&&(n.Wc(0,l,5,5,"ng-container",1),n.Wc(1,b,7,3,"ng-template",null,2,n.Xc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.isDesktop)("ngIfElse",e)}}let m=(()=>{class e{constructor(e){this.cd=e}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["responsive-row"],["","responsive-row",""]],viewQuery:function(e,t){var i;1&e&&n.ed(r,!0),2&e&&n.Kc(i=n.kc())&&(t.template=i.first)},inputs:{isDesktop:"isDesktop",templates:"templates",isExpanded:"isExpanded"},decls:2,vars:0,consts:[["template",""],[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-pl-lg-3","cl-py-2","cl-pr-0","cl-cut-text-wrapper-td","cl-responsive-table-td-0"],[4,"ngTemplateOutlet"],["class","cl-p-0 cl-cut-text-wrapper-td",3,"ngClass",4,"ngFor","ngForOf"],[1,"cl-p-0","cl-cut-text-wrapper-td",3,"ngClass"],[1,"cl-p-lg-2","cl-py-lg-custom-3","cl-cut-text-wrapper-td","cl-border-right"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-ml-auto","cl-auto-pointer-event",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"],["class","cl-table table cl-table-bordered cl-remove-cell-borders cl-text-gray-6 cl-mt-2",4,"ngIf"],[1,"cl-table","table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-6","cl-mt-2"],["class","cl-bg-light",4,"ngFor","ngForOf"],[1,"cl-bg-light"],[1,"cl-py-2","cl-py-lg-0"],[1,"cl-h5","cl-mb-0"],[1,"cl-py-2","cl-py-lg-0","cl-px-0","cl-cut-text-wrapper-td","cl-w-50"]],template:function(e,t){1&e&&n.Wc(0,f,3,2,"ng-template",null,0,n.Xc)},directives:[s.u,s.B,s.t,s.r],pipes:[s.F],encapsulation:2,changeDetection:0}),e})()},"5lh1":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("3Pt+"),s=i("ofXK"),r=i("7EHt"),o=i("9Trn"),a=i("5+WD"),c=i("0Gvx"),l=i("zJCG"),u=i("1Mzi"),d=i("tyNb"),h=i("liYL"),p=i("fXoL");let b=(()=>{class e{}return e.\u0275mod=p.Pb({type:e}),e.\u0275inj=p.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.m,s.c,r.a,o.a,a.c,c.a,l.a,u.a,d.g,h.a]]}),e})()},"5pgj":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fV9S");class s{constructor(e,t,i,s,r){this.date=e,this.time=t||"P0D",this.timeEntries=i,this.editMode=s,this.weekStatus=r?new n.a(r):null}}},"5x7/":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this.totalTime=e.totalTime,this.totalBillableTime=e.totalBillableTime,this.totalAmount=e.totalAmount,this.day=e._id||e.day}}},"62PR":function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i("gcYM"),s=i("1G5W"),r=i("Kj3r"),o=i("fXoL"),a=i("f0Wu"),c=i("yK97"),l=i("qfBg"),u=i("XNiG"),d=i("lGQG"),h=i("EVdn"),p=i("B4wx"),b=i("ofXK"),f=i("B01t");const m=["datepicker"];function g(e,t){1&e&&(o.Xb(0,"span",2),o.Sb(1,"img",3),o.Wb())}function v(e,t){if(1&e){const e=o.Yb();o.Xb(0,"span",6,7),o.jc("click",(function(){o.Oc(e);const t=o.Lc(1);return o.nc(2).openDatepicker(),t.blur()}))("focus",(function(){return o.Oc(e),o.nc(2).openDatepicker()})),o.Sb(2,"img",3),o.Wb()}}function w(e,t){if(1&e){const e=o.Yb();o.Xb(0,"span",8,9),o.jc("focus",(function(){return o.Oc(e),o.nc(2).openDatepicker()}))("selected",(function(t){return o.Oc(e),o.nc(2).selectedDate(t)})),o.Sb(2,"img",3),o.Wb()}if(2&e){const e=o.nc(2);o.wc("options",e.options)}}function y(e,t){if(1&e&&(o.Wc(0,v,3,0,"span",4),o.Wc(1,w,3,1,"ng-template",null,5,o.Xc)),2&e){const e=o.Lc(2),t=o.nc();o.wc("ngIf",!t.calendarIsOpen)("ngIfElse",e)}}let C=(()=>{class e{constructor(e,t){this.authService=e,this.cd=t,this.openUp=!1,this.selected=new o.n,this.daysOfWeek=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],this.timeFormats={long:p.a.HOUR24,short:p.a.HOUR12},this.options={locale:{format:"YYYY-MM-DD",firstDay:(this.daysOfWeek.indexOf(this.authService.getUser()?this.authService.getUser().settings.weekStart:"MONDAY")+1)%7},alwaysShowCalendars:!0,startDate:this.dateTime,autoApply:!0,opens:"center",showCustomRangeLabel:!1,singleDatePicker:!0},this.calendarIsOpen=!1}set dateTime(e){this._dateTime=e,e&&this.isInitialized&&this.setStartTime()}get dateTime(){return this._dateTime}ngOnInit(){this.setStartTime(),this.openUp&&(this.options.drops="up"),this.minDate&&(this.options.minDate=this.minDate),this.maxDate&&(this.options.maxDate=a.tz(this.maxDate,this.timeZone).format("YYYY-MM-DD")),this.isInitialized=!0}setStartTime(){const e=a.tz(this.dateTime,this.timeZone),t=e.get("year"),i=e.get("month"),n=e.get("date"),s=a().date(n).month(i).year(t);this.options.startDate=s,this.options.start=s}selectedDate(e){const t=e.start.get("year"),i=e.start.get("month"),n=e.start.get("date");this.selected.emit({year:t,month:i,day:n}),this.calendarIsOpen=!1}openDatepicker(){this.disableEdit||(this.calendarIsOpen||(this.calendarIsOpen=!0,this.cd.detectChanges()),setTimeout(()=>{if(this.picker)try{h(this.picker.nativeElement).data("daterangepicker").show()}catch(e){}},100))}closeDatepicker(e=!1){this.calendarIsOpen=!1,e&&this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(d.a),o.Rb(o.h))},e.\u0275cmp=o.Lb({type:e,selectors:[["input-single-date"],["","input-single-date",""]],viewQuery:function(e,t){var i;1&e&&o.ed(m,!0),2&e&&o.Kc(i=o.kc())&&(t.picker=i.first)},inputs:{disableEdit:"disableEdit",openUp:"openUp",dateTime:"dateTime",timeZone:"timeZone",minDate:"minDate",maxDate:"maxDate"},outputs:{selected:"selected"},decls:3,vars:2,consts:[["class","cl-non-selectable",4,"ngIf","ngIfElse"],["datepickerTemplate",""],[1,"cl-non-selectable"],["src","assets/images/ui-icons/calendar.svg"],["tabindex","0","class","pointer cl-non-selectable",3,"click","focus",4,"ngIf","ngIfElse"],["calendar",""],["tabindex","0",1,"pointer","cl-non-selectable",3,"click","focus"],["fakeCalendar",""],["daterangepicker","","tabindex","0",1,"pointer","cl-non-selectable",3,"options","focus","selected"],["datepicker",""]],template:function(e,t){if(1&e&&(o.Wc(0,g,2,0,"span",0),o.Wc(1,y,3,2,"ng-template",null,1,o.Xc)),2&e){const e=o.Lc(2);o.wc("ngIf",t.disableEdit)("ngIfElse",e)}},directives:[b.u,f.b],encapsulation:2,changeDetection:0}),e})();var k=i("Ymxs"),S=i("1Tmk"),x=i("1k8b"),O=i("enr5"),D=i("3Pt+"),I=i("3eYs");const j=["startInput"];function T(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",3),o.Xb(1,"input-time-ampm",4,5),o.jc("timeChanged",(function(t){return o.Oc(e),o.nc().timeChanged("start",t)}))("blur",(function(){return o.Oc(e),o.nc().blur()}))("focus",(function(){return o.Oc(e),o.nc().focus()})),o.Wb(),o.Sb(3,"span",6),o.Xb(4,"input-time-ampm",7),o.jc("blur",(function(){return o.Oc(e),o.nc().blur()}))("focus",(function(){return o.Oc(e),o.nc().focus("end")}))("timeChanged",(function(t){return o.Oc(e),o.nc().timeChanged("end",t)})),o.Wb(),o.Wb()}if(2&e){const e=o.nc();o.Cb(1),o.wc("disableEdit",e.disableEdit)("removeOpacity",e.removeOpacity)("focusOnInput",e.focusOnInput)("dateTime",e.dateTime.start)("timeFormat",e.timeFormat)("timeZone",e.timeZone),o.Cb(3),o.wc("disableEdit",e.disableEdit)("removeOpacity",e.removeOpacity)("focusOnInput",e.focusOnInput)("dateTime",e.dateTime.end)("timeFormat",e.timeFormat)("timeZone",e.timeZone)}}function E(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",8),o.Xb(1,"input-single-date",9),o.jc("selected",(function(t){return o.Oc(e),o.nc().dateChanged(t)})),o.Wb(),o.Wb()}if(2&e){const e=o.nc();o.Cb(1),o.wc("openUp",e.openUp)("timeZone",e.timeZone)("disableEdit",e.disableEdit)("dateTime",e.dateTime.start)("minDate",e.minDate)("maxDate",e.maxDate)}}function A(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",10),o.Xb(1,"input",11,12),o.jc("keyup.enter",(function(){return o.Oc(e),o.Lc(2).blur()}))("keydown.arrowup",(function(){return o.Oc(e),o.nc().textualDateDebounce("up")}))("keydown.arrowdown",(function(){return o.Oc(e),o.nc().textualDateDebounce("down")}))("focus",(function(){o.Oc(e);const t=o.Lc(2),i=o.nc();return i.textualDateInFocus=!0,i.setFocus(t)}))("blur",(function(){o.Oc(e);const t=o.nc();return t.textualDateInFocus=!1,t.textualDateChanged()}))("ngModelChange",(function(t){return o.Oc(e),o.nc().textualDateValue=t})),o.oc(3,"formatDateToday"),o.Wb(),o.Wb()}if(2&e){const e=o.nc();o.Cb(1),o.wc("disabled",!e.removeOpacity&&e.disableEdit)("readOnly",e.removeOpacity)("ngModel",o.sc(3,3,e.textualDateValue,e.textualDateInFocus,e.showNowInsteadToday,e.retriggerPipe))}}let _=(()=>{class e{constructor(e,t,i,n,s){this.userService=e,this.toaster=t,this.workspaceService=i,this.authService=n,this.changedDayService=s,this.pickedDate=new o.n,this.debounce=!0,this.showNowInsteadToday=!1,this.mode="date_and_time",this.textualDate=!1,this.canTriggerNextDay=!1,this.isAdminOrOwner=!1,this.userFormat="DD.MM.YYYY",this.retriggerPipe=!1,this.updateDatetime$=new u.a,this.unsubscribe$=new u.a,this.debouncer$=new u.a}set dateTime(e){const t=new c.a(e);this._dateTime=t,this._dateTime&&this.initialized&&this.initData()}get dateTime(){return this._dateTime}ngOnInit(){if(this.timeZone=this.timeZone||this.userService.getTimeZone(),this.initData(),this.debounce&&this.subscribeToTimeDebouncer(),this.textualDate&&(this.textualDateBackup=this.textualDateValue,this.debouncer$.pipe(Object(n.a)(100),Object(s.a)(this.unsubscribe$)).subscribe(this.textualDateChanged.bind(this))),this.isAdminOrOwner=this.authService.isAdminOrOwner(),!this.isAdminOrOwner){const e=this.workspaceService.getLocalDefaultWorkspace();e&&e.lockTimeEntries&&(this.minDate=a.tz(e.lockTimeEntries,this.timeZone).format("YYYY-MM-DD"))}this.changedDayService.changeDayTrigger$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>{if(this.textualDate){if(this.canTriggerNextDay){const e=a(this.dateTime.start).startOf("day");1===a().startOf("day").diff(e,"days")&&this.dateChanged({year:e.get("year"),month:e.get("month"),day:e.get("date")+1})}this.retriggerPipe=!this.retriggerPipe}})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}textualDateDebounce(e){this.debouncer$.next(e)}checkIsDateInRange(e){if(this.minDate&&a(e).isBefore(this.minDate))return this.toaster.pop("error","Can't add time to locked period."),!1;if(this.maxDate){const t=e.clone().startOf("day"),i=this.maxDate.clone().startOf("day");if(t.isAfter(i))return this.toaster.pop("error",`Can't set time after ${i.format(this.userFormat)}.`),!1}return!0}textualDateChanged(e){const t=this.textualDateValue.replace(/[^0-9]/gi,".").split(".").filter(e=>e).slice(-3),i=a(t,this.userFormat);if(!i.isValid())return void(this.textualDateValue=this.textualDateBackup);if("up"===e?i.add(1,"days"):"down"===e&&i.subtract(1,"days"),!this.checkIsDateInRange(i))return void(this.textualDateValue=this.textualDateBackup);this.textualDateValue=i.format(this.userFormat);const n=i.year(),s=i.month(),r=i.date(),o=a(this.dateTime.end).diff(a(this.dateTime.start),"ms"),c=a.tz(this.dateTime.start,this.timeZone).set({year:n,month:s,date:r});this.dateTime.start=c.toISOString();const l=c.add(o,"ms");if(this.dateTime.end=l.toISOString(),e)return;const u=a.tz(this.dateTime.start,this.timeZone).format(this.userFormat);this.textualDateBackup===u||this.emitNewDateTime(!0)}setFocus(e){this.datepicker&&this.datepicker.closeDatepicker(!0),setTimeout(()=>{e.focus(),e.select()},0)}setFocusToStartTime(){this.startInput.focusToInput()}dateChanged({year:e,month:t,day:i}){const n=a(this.dateTime.end).diff(a(this.dateTime.start),"ms"),s=a.tz(this.dateTime.start,this.timeZone).set({year:e,month:t,date:i});this.dateTime.start=s.toISOString();const r=s.add(n,"ms");this.dateTime.end=r.toISOString(),this.emitNewDateTime(!0)}emitNewDateTime(e=!1){if(this.dateTime.start=a(this.dateTime.start).toISOString(),this.dateTime.end=a(this.dateTime.end).toISOString(),a(this.dateTime.end).isBefore(a(this.dateTime.start)))this.dateTime.end=a(this.dateTime.end).add(1,"days").toISOString();else if(!e){const e=a(this.dateTime.end).diff(a(this.dateTime.start),"days");e>=1&&e>this.backupDurationInDays&&(this.dateTime.end=a(this.dateTime.end).subtract(1,"days").toISOString())}this.dateTime.start=a.utc(this.dateTime.start).format(),this.dateTime.end=a.utc(this.dateTime.end).format();const t=a(this.dateTime.start),i=a(this.dateTime.end),n=a.duration(i.diff(t)).toISOString();this.dateTime.duration=n,this.intervalBackup=new c.a(this.dateTime),this.pickedDate.emit(this.dateTime)}closeDatepicker(e=!1){this.datepicker&&this.datepicker.closeDatepicker(e)}focus(e){"end"===e&&this.closeDatepicker(),this.checkForUpdate=!1,this.updateDatetime$.next()}blur(){this.checkForUpdate=!0,this.updateDatetime$.next()}timeChanged(e,t){this.dateTime[e]=t,this.isValueChanged=!0,this.checkForUpdate=!0,this.debounce?this.updateDatetime$.next():this.emitNewDateTime()}subscribeToTimeDebouncer(){this.updateDatetime$.pipe(Object(r.a)(100),Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.checkForUpdate&&this.isValueChanged&&(this.checkForUpdate=!1,this.isValueChanged=!1,this.emitNewDateTime())})}initData(){this.dateTime&&((!this.intervalBackup||this.intervalBackup.start!==this.dateTime.start||this.intervalBackup.end!==this.dateTime.end)&&(this.backupDurationInDays=Math.floor(a.duration(this.dateTime.duration).asDays())),this.dateTime.start=a.tz(this.dateTime.start,this.timeZone).format(),this.dateTime.end=a.tz(this.dateTime.end,this.timeZone).format(),this.textualDate&&(this.userFormat=this.dateFormat||this.userService.getDateFormatForUser(),this.textualDateValue=a.tz(this.dateTime.start,this.timeZone).format(this.userFormat)),this.initialized=!0)}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(l.a),o.Rb(k.a),o.Rb(S.a),o.Rb(d.a),o.Rb(x.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["single-date-picker2"],["","single-date-picker2",""]],viewQuery:function(e,t){var i;1&e&&(o.ed(C,!0),o.ed(j,!0)),2&e&&(o.Kc(i=o.kc())&&(t.datepicker=i.first),o.Kc(i=o.kc())&&(t.startInput=i.first))},inputs:{debounce:"debounce",openUp:"openUp",focusOnInput:"focusOnInput",removeOpacity:"removeOpacity",showNowInsteadToday:"showNowInsteadToday",dateTime:"dateTime",disableEdit:"disableEdit",mode:"mode",textualDate:"textualDate",maxDate:"maxDate",canTriggerNextDay:"canTriggerNextDay",dateFormat:"dateFormat",timeFormat:"timeFormat",timeZone:"timeZone"},outputs:{pickedDate:"pickedDate"},decls:3,vars:3,consts:[["class","cl-component-divided-left cl-single-date-picker",4,"ngIf"],["class","cl-component-divided-left cl-no-divider-border cl-ml-n3 recorder-date-picker",4,"ngIf"],["class","cl-component-divided-left cl-input-date-picker-container cl-no-divider-border cl-ml-n3 cl-d-lg-custom-inline-flex",4,"ngIf"],[1,"cl-component-divided-left","cl-single-date-picker"],[1,"cl-text-right",3,"disableEdit","removeOpacity","focusOnInput","dateTime","timeFormat","timeZone","timeChanged","blur","focus"],["startInput",""],[1,"cl-h-line-divider"],[3,"disableEdit","removeOpacity","focusOnInput","dateTime","timeFormat","timeZone","blur","focus","timeChanged"],[1,"cl-component-divided-left","cl-no-divider-border","cl-ml-n3","recorder-date-picker"],[3,"openUp","timeZone","disableEdit","dateTime","minDate","maxDate","selected"],[1,"cl-component-divided-left","cl-input-date-picker-container","cl-no-divider-border","cl-ml-n3","cl-d-lg-custom-inline-flex"],["type","text","autocomplete","off",1,"cl-form-control","cl-input-date-picker",3,"disabled","readOnly","ngModel","keyup.enter","keydown.arrowup","keydown.arrowdown","focus","blur","ngModelChange"],["inputDate",""]],template:function(e,t){1&e&&(o.Wc(0,T,5,12,"div",0),o.Wc(1,E,2,6,"div",1),o.Wc(2,A,4,8,"div",2)),2&e&&(o.wc("ngIf","date_and_time"===t.mode||"time_only"===t.mode),o.Cb(1),o.wc("ngIf","date_and_time"===t.mode||"date_only"===t.mode),o.Cb(1),o.wc("ngIf",t.textualDate))},directives:[b.u,O.a,C,D.c,D.s,D.v],pipes:[I.a],encapsulation:2,changeDetection:0}),e})()},"6Dzi":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),s=i("ofXK");function r(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",8),n.jc("click",(function(){return n.Oc(e),n.nc().expandMobileView()})),n.Xb(1,"span",9),n.Sb(2,"img",4),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("src",e.isExpandedMobileView?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc)}}function o(e,t){if(1&e&&(n.Xb(0,"th"),n.Xb(1,"span",12),n.Yc(2),n.Wb(),n.Wb()),2&e){const e=t.$implicit;n.Cb(2),n.Zc(e)}}function a(e,t){if(1&e&&(n.Vb(0),n.Wc(1,o,3,1,"th",10),n.Xb(2,"th"),n.Xb(3,"span",11),n.Yc(4,"Total:"),n.Wb(),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngForOf",e.labels)}}let c=(()=>{class e{constructor(){this.onExpand=new n.n,this.onExpandMobileView=new n.n}ngOnInit(){}toggleExpand(){this.onExpand.emit(!this.isExpanded)}expandMobileView(){this.isExpandedMobileView=!this.isExpandedMobileView,this.onExpandMobileView.emit(this.isExpandedMobileView)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["weekly-group-header"],["","weekly-group-header",""]],inputs:{isExpanded:"isExpanded",isExpandedMobileView:"isExpandedMobileView",hideExpandAll:"hideExpandAll",isDesktop:"isDesktop",labels:"labels",mainLabel:"mainLabel"},outputs:{onExpand:"onExpand",onExpandMobileView:"onExpandMobileView"},decls:9,vars:4,consts:[[1,"cl-h6","cl-mb-0","cl-py-2","cl-py-lg-custom-0","cl-footable-first-visible"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-d-flex","cl-ml-0",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0","cl-ml-lg-custom-2"],[3,"src"],[1,"cl-h5","cl-mb-0"],["class","cl-ml-auto",3,"click",4,"ngIf"],[4,"ngIf"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[4,"ngFor","ngForOf"],[1,"cl-h6","cl-mb-0"],[1,"cl-h6"]],template:function(e,t){1&e&&(n.Xb(0,"th",0),n.Xb(1,"div",1),n.Xb(2,"a",2),n.jc("click",(function(){return t.toggleExpand()})),n.Xb(3,"span",3),n.Sb(4,"img",4),n.Wb(),n.Wb(),n.Xb(5,"div",5),n.Yc(6),n.Wb(),n.Wc(7,r,3,1,"a",6),n.Wb(),n.Wb(),n.Wc(8,a,5,1,"ng-container",7)),2&e&&(n.Cb(4),n.wc("src",t.isExpanded?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc),n.Cb(2),n.Zc(t.mainLabel),n.Cb(1),n.wc("ngIf",!t.isDesktop),n.Cb(1),n.wc("ngIf",t.isDesktop))},directives:[s.u,s.t],encapsulation:2,changeDetection:0}),e})()},"6FRn":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Ymxs"),s=i("fXoL");let r=(()=>{class e{constructor(e){this.toaster=e}copyToClipboard(e){try{const t=e.value&&e.value.length||99999;e.select(),e.setSelectionRange(0,t),document.execCommand("copy"),this.toaster.pop("success","Copied")}catch(t){}}}return e.\u0275fac=function(t){return new(t||e)(s.fc(n.a))},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac}),e})()},"6GAr":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("V3bs");const r=["container"],o=["*"];let a=(()=>{class e{constructor(){}ngOnInit(){}ngAfterViewInit(){const e=this.container.nativeElement.querySelector("[autofocus]");e&&e.focus()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["list-items"]],viewQuery:function(e,t){var i;1&e&&n.ed(r,!0),2&e&&n.Kc(i=n.kc())&&(t.container=i.first)},ngContentSelectors:o,decls:5,vars:0,consts:[["arrowNavigation","",1,"cl-scroll-area"],["tabindex","0",1,"cl-no-focus-tabindex"],["container",""],["dropdownClose","","tabindex","0"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0),n.Xb(1,"div",1,2),n.uc(3),n.Wb(),n.Sb(4,"span",3),n.Wb())},directives:[s.a],encapsulation:2,changeDetection:0}),e})()},"6gTr":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.DURATION="DURATION",e.DECIMAL_DURATION="DECIMAL_DURATION",e.BAR_CHART="BAR_CHART",e.PIE_CHART_1="PIE_CHART_1",e.PIE_CHART_2="PIE_CHART_2",e.PIE_CHART_3="PIE_CHART_3",e.RTL="RTL",e}({})},"6qRu":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("O3o7"),s=i("tnjF");class r{constructor(e,t){this._task=e&&new s.a(e),this._project=t&&new n.a(t)}get task(){return this._task}set task(e){this._task=e}get project(){return this._project}set project(e){this._project=e}}},"6t6a":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.NONE="",e.UPON_RECEIPT="Upon receipt",e.AFTER_10="10 days after issue",e.AFTER_15="15 days after issue",e.AFTER_30="30 days after issue",e.AFTER_60="60 days after issue",e.AFTER_90="90 days after issue",e}({})},"6yyQ":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i){if(!e||0===e.length)return[];const n=(t-1)*i,s=e.length;if(n>s)return e;let r=n+i;return r>s&&(r=s),e.slice(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"paginate",type:e,pure:!0}),e})()},"7+OI":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("HDdC");function s(e){return!!e&&(e instanceof n.a||"function"==typeof e.lift&&"function"==typeof e.subscribe)}},"7EHt":function(e,t,i){"use strict";i.d(t,"a",(function(){return q})),i.d(t,"b",(function(){return G})),i.d(t,"c",(function(){return z}));var n=i("fXoL"),s=i("8LU1"),r=i("XNiG"),o=i("quSY"),a=i("0EQZ");let c=0,l=(()=>{class e{constructor(){this._stateChanges=new r.a,this._openCloseAllActions=new r.a,this.id="cdk-accordion-"+c++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Object(s.b)(e)}openAll(){this._openCloseAll(!0)}closeAll(){this._openCloseAll(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete()}_openCloseAll(e){this.multi&&this._openCloseAllActions.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[n.Ab]}),e})(),u=0,d=(()=>{class e{constructor(e,t,i){this.accordion=e,this._changeDetectorRef=t,this._expansionDispatcher=i,this._openCloseAllSubscription=o.a.EMPTY,this.closed=new n.n,this.opened=new n.n,this.destroyed=new n.n,this.expandedChange=new n.n,this.id="cdk-accordion-child-"+u++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((e,t)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===t&&this.id!==e&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Object(s.b)(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(s.b)(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(l,12),n.Rb(n.h),n.Rb(a.b))},e.\u0275dir=n.Mb({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[n.Bb([{provide:l,useValue:void 0}])]}),e})(),h=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();var p=i("ofXK");function b(){throw Error("Host already has a portal attached")}class f{attach(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&b(),this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class m extends f{constructor(e,t,i,n){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=n}}class g extends f{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class v extends f{constructor(e){super(),this.element=e instanceof n.l?e.nativeElement:e}}let w=(()=>{class e extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&b(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof m?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof g?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof v?(this._attachedPortal=e,this.attachDomPortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new n.n,this.attachDomPortal=e=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");const i=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(i,t),this._getRootNode().appendChild(t),super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),n=t.createComponent(i,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.j),n.Rb(n.P),n.Rb(p.e))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[n.zb]}),e})(),y=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();var C=i("LRne");i("vkgz"),i("Kj3r");var k=i("pLZG"),S=(i("lJxs"),i("IzEk")),x=i("nLfN");i("HDdC"),"undefined"!=typeof Element&&Element;const O=Object(x.e)({passive:!0,capture:!0});let D=(()=>{class e{constructor(e,t,i){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=e=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=e.composedPath?e.composedPath()[0]:e.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._document=i}monitor(e,t=!1){if(!this._platform.isBrowser)return Object(C.a)(null);const i=Object(s.c)(e);if(this._elementInfo.has(i)){let e=this._elementInfo.get(i);return e.checkChildren=t,e.subject.asObservable()}let n={unlisten:()=>{},checkChildren:t,subject:new r.a};this._elementInfo.set(i,n),this._incrementMonitoredElementCount();let o=e=>this._onFocus(e,i),a=e=>this._onBlur(e,i);return this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",o,!0),i.addEventListener("blur",a,!0)}),n.unlisten=()=>{i.removeEventListener("focus",o,!0),i.removeEventListener("blur",a,!0)},n.subject.asObservable()}stopMonitoring(e){const t=Object(s.c)(e),i=this._elementInfo.get(t);i&&(i.unlisten(),i.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())}focusVia(e,t,i){const n=Object(s.c)(e);this._setOriginForCurrentEventQueue(t),"function"==typeof n.focus&&n.focus(i)}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,i){i?e.classList.add(t):e.classList.remove(t)}_setClasses(e,t){this._elementInfo.get(e)&&(this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t))}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originTimeoutId=setTimeout(()=>this._origin=null,1)})}_wasCausedByTouch(e){let t=e.target;return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const i=this._elementInfo.get(t);if(!i||!i.checkChildren&&t!==e.target)return;let n=this._origin;n||(n=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"),this._setClasses(t,n),this._emitOrigin(i.subject,n),this._lastFocusOrigin=n}_onBlur(e,t){const i=this._elementInfo.get(t);!i||i.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(i.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{const e=this._getDocument(),t=this._getWindow();e.addEventListener("keydown",this._documentKeydownListener,O),e.addEventListener("mousedown",this._documentMousedownListener,O),e.addEventListener("touchstart",this._documentTouchstartListener,O),t.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){if(!--this._monitoredElementCount){const e=this._getDocument(),t=this._getWindow();e.removeEventListener("keydown",this._documentKeydownListener,O),e.removeEventListener("mousedown",this._documentMousedownListener,O),e.removeEventListener("touchstart",this._documentTouchstartListener,O),t.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.z),n.fc(x.a),n.fc(p.e,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.z),Object(n.fc)(x.a),Object(n.fc)(p.e,8))},token:e,providedIn:"root"}),e})();var I=i("/uUt"),j=i("JX91"),T=i("EY2u"),E=i("VRyK"),A=i("R0Ic"),_=i("R1ws");const W=["body"];function R(e,t){}const P=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],M=["mat-expansion-panel-header","*","mat-action-row"],F=function(e,t){return{collapsedHeight:e,expandedHeight:t}},X=function(e,t){return{value:e,params:t}};function L(e,t){if(1&e&&n.Sb(0,"span",2),2&e){const e=n.nc();n.wc("@indicatorRotate",e._getExpandedState())}}const N=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],B=["mat-panel-title","mat-panel-description","*"],Y=new n.q("MAT_ACCORDION"),V={indicatorRotate:Object(A.m)("indicatorRotate",[Object(A.j)("collapsed, void",Object(A.k)({transform:"rotate(0deg)"})),Object(A.j)("expanded",Object(A.k)({transform:"rotate(180deg)"})),Object(A.l)("expanded <=> collapsed, void => collapsed",Object(A.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),expansionHeaderHeight:Object(A.m)("expansionHeight",[Object(A.j)("collapsed, void",Object(A.k)({height:"{{collapsedHeight}}"}),{params:{collapsedHeight:"48px"}}),Object(A.j)("expanded",Object(A.k)({height:"{{expandedHeight}}"}),{params:{expandedHeight:"64px"}}),Object(A.l)("expanded <=> collapsed, void => collapsed",Object(A.g)([Object(A.h)("@indicatorRotate",Object(A.f)(),{optional:!0}),Object(A.e)("225ms cubic-bezier(0.4,0.0,0.2,1)")]))]),bodyExpansion:Object(A.m)("bodyExpansion",[Object(A.j)("collapsed, void",Object(A.k)({height:"0px",visibility:"hidden"})),Object(A.j)("expanded",Object(A.k)({height:"*",visibility:"visible"})),Object(A.l)("expanded <=> collapsed, void => collapsed",Object(A.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))])};let U=(()=>{class e{constructor(e){this._template=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),H=0;const $=new n.q("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let G=(()=>{class e extends d{constructor(e,t,i,s,o,a,c){super(e,t,i),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new n.n,this.afterCollapse=new n.n,this._inputChanges=new r.a,this._headerId="mat-expansion-panel-header-"+H++,this._bodyAnimationDone=new r.a,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe(Object(I.a)((e,t)=>e.fromState===t.fromState&&e.toState===t.toState)).subscribe(e=>{"void"!==e.fromState&&("expanded"===e.toState?this.afterExpand.emit():"collapsed"===e.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Object(s.b)(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Object(j.a)(null),Object(k.a)(()=>this.expanded&&!this._portal),Object(S.a)(1)).subscribe(()=>{this._portal=new g(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(Y,12),n.Rb(n.h),n.Rb(a.b),n.Rb(n.P),n.Rb(p.e),n.Rb(_.a,8),n.Rb($,8))},e.\u0275cmp=n.Lb({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,U,!0),2&e&&n.Kc(s=n.kc())&&(t._lazyContent=s.first)},viewQuery:function(e,t){var i;1&e&&n.ed(W,!0),2&e&&n.Kc(i=n.kc())&&(t._body=i.first)},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,t){2&e&&n.Hb("mat-expanded",t.expanded)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-expansion-panel-spacing",t._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[n.Bb([{provide:Y,useValue:void 0}]),n.zb,n.Ab],ngContentSelectors:M,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(n.vc(P),n.uc(0),n.Xb(1,"div",0,1),n.jc("@bodyExpansion.done",(function(e){return t._bodyAnimationDone.next(e)})),n.Xb(3,"div",2),n.uc(4,1),n.Wc(5,R,0,0,"ng-template",3),n.Wb(),n.uc(6,2),n.Wb()),2&e&&(n.Cb(1),n.wc("@bodyExpansion",t._getExpandedState())("id",t.id),n.Db("aria-labelledby",t._headerId),n.Cb(4),n.wc("cdkPortalOutlet",t._portal))},directives:[w],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[V.bodyExpansion]},changeDetection:0}),e})(),z=(()=>{class e{constructor(e,t,i,n,s){this.panel=e,this._element=t,this._focusMonitor=i,this._changeDetectorRef=n,this._parentChangeSubscription=o.a.EMPTY,this._animationsDisabled=!0;const r=e.accordion?e.accordion._stateChanges.pipe(Object(k.a)(e=>!(!e.hideToggle&&!e.togglePosition))):T.a;this._parentChangeSubscription=Object(E.a)(e.opened,e.closed,r,e._inputChanges.pipe(Object(k.a)(e=>!!(e.hideToggle||e.disabled||e.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Object(k.a)(()=>e._containsFocus())).subscribe(()=>i.focusVia(t,"program")),i.monitor(t).subscribe(t=>{t&&e.accordion&&e.accordion._handleHeaderFocus(this)}),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}_animationStarted(){this._animationsDisabled=!1}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_keydown(e){switch(e.keyCode){case 32:case 13:(function(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey})(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e="program",t){this._focusMonitor.focusVia(this._element,e,t)}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(G,1),n.Rb(n.l),n.Rb(D),n.Rb(n.h),n.Rb($,8))},e.\u0275cmp=n.Lb({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header"],hostVars:19,hostBindings:function(e,t){1&e&&(n.Ib("@expansionHeight.start",(function(){return t._animationStarted()})),n.jc("click",(function(){return t._toggle()}))("keydown",(function(e){return t._keydown(e)}))),2&e&&(n.Db("id",t.panel._headerId)("tabindex",t.disabled?-1:0)("aria-controls",t._getPanelId())("aria-expanded",t._isExpanded())("aria-disabled",t.panel.disabled),n.dd("@.disabled",t._animationsDisabled)("@expansionHeight",n.Cc(16,X,t._getExpandedState(),n.Cc(13,F,t.collapsedHeight,t.expandedHeight))),n.Hb("mat-expanded",t._isExpanded())("mat-expansion-toggle-indicator-after","after"===t._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===t._getTogglePosition()))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:B,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,t){1&e&&(n.vc(N),n.Xb(0,"span",0),n.uc(1),n.uc(2,1),n.uc(3,2),n.Wb(),n.Wc(4,L,1,1,"span",1)),2&e&&(n.Cb(4),n.wc("ngIf",t._showToggle()))},directives:[p.u],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[V.indicatorRotate,V.expansionHeaderHeight]},changeDetection:0}),e})(),q=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[p.c,h,y]]}),e})()},"8+Zx":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("xoOP"),s=i("hkzH"),r=i("y+xF"),o=i("LfE4");class a{constructor(e){if(this.defaultStatus="ACTIVE",this.exclude=(e=e||{}).exclude||!1,this.defaultStatus=e.defaultStatus||"ACTIVE",this.options=e.options||{status:this.defaultStatus},e.map){for(const t in e.map)e.map[t]=e.map[t]||[];this.map=e.map}else this.map={}}removeWithoutIfNeed(){if(this.options.contains===s.d.CONTAINS_ONLY||this.options.status===o.a.ARCHIVED){this.removeSingleKey(r.b);for(const e in this.map){const t=this.map[e].indexOf(r.b);t>-1&&this.map[e].splice(t,1)}}}reset(){this.exclude=!1,this.clearMapValues()}removeSingleKey(e){delete this.map[e]}clearMap(){this.map={}}clearMapValues(){for(const e in this.map)this.map[e]=[]}get mapsLength(){let e=0;for(const t in this.map)e+=this.map[t].length;return e}isDirty(e){if(this.exclude)return!e||e!==this.mapsLength;for(const t in this.map)if(this.map[t].length>0)return!0;return!1}isSelectedAll(e){if(!this.exclude){if(e){const{total:t,selected:i}=e.getSelectedData();return t>0&&t===i}return!1}for(const t in this.map)if(this.map[t]&&this.map[t].length)return!1;return!0}getTotalOfChecked(){let e=0;for(const t in this.map)e+=this.map[t].length;return e}getContainsFilter(e){if(this.isFilterDisabled)return;if(!this.isDirty())return;const t={contains:this.exclude?s.d.DOES_NOT_CONTAIN:s.d.CONTAINS,ids:this.map[e]?this.map[e].slice():[]},i=this.options.status;i&&(t.status=i);const n=this.options.contains;return n&&(t.containedInTimeentry=n),t}static containsFilterToCheckboxValues(e,t,i){const n={exclude:e.contains===s.d.DOES_NOT_CONTAIN,map:{[t]:[...e.ids||[]]},options:i,defaultStatus:e.status};return new a(n)}getSelectedData(e,t=0,i=!1){const n=this.generateLabel(e);if(!this.exclude)return{numberOfSelected:this.getTotalOfChecked(),label:n};if(t)return{numberOfSelected:t-this.getTotalOfChecked(),label:n};if(!e)return{numberOfSelectedApproximately:"...",label:n};const s=e.getSelectedData().selected;if(i)return{numberOfSelected:s,label:n};const r=s-1;return{numberOfSelectedApproximately:r<=0?"...":r+"+",label:n}}generateLabel(e){return e?e.getAllSelectedEntities().map(e=>e.name).join(", "):""}static generateValuesDataFromMap(e,t="id",i){const n=new a;return e.forEach(e=>{const s=e.value.filter(e=>e.selected);s&&s.length&&(n.map[i||e.key]=s.map(e=>e.entity[t]))}),n}static updateMapFromValuesData(e,t,i="id",n){t.maps.forEach(t=>{t.value.forEach(s=>{const r=e.map[n||t.key];let o=r&&r.includes(s.entity[i]);e.exclude&&(o=!o),s.setSelected(o)})})}updateSingleMap(e,t,i){let n=i;if(this.exclude&&(n=!n),n){if(!this.map[e])return void(this.map[e]=[t]);if(-1!==this.map[e].indexOf(t))return;return this.map[e]||console.warn("NO PROPERTY"),void this.map[e].push(t)}this.map[e]?this.map[e].indexOf(t)<0?console.warn("Missing VALUE!!!",e,t):(this.map[e]&&this.map[e].splice(this.map[e].indexOf(t),1),this.map[e].length||delete this.map[e]):console.warn("Missing KEY!!!",this.map[e])}toggleMultipleIds(e,t,i){i?this.pushIds(e,t):this.removeIds(e,t)}pushIds(e,t){if(!t||!t.length)return;if(!this.map[e])return void(this.map[e]=t);const i=[...this.map[e],...t];this.map[e]=[...new Set(i)]}removeIds(e,t){t&&t.length&&this.map[e]&&(this.map[e]=this.map[e].filter(e=>!t.includes(e)))}static clone(e){const t={exclude:e.exclude,map:Object(n.e)(e.map),options:Object(n.e)(e.options)};return new a(t)}isWithoutChecked(e){const t=this.map[e];return!!t&&t.indexOf(r.b)>-1}sameWith(e){if(!e)return!1;if(e.exclude!==this.exclude)return!1;if(Object.keys(e.map).length!==Object.keys(this.map).length)return!1;for(const t in e.map){if(!this.map[t])return!1;if(!Object(n.c)(e.map[t],this.map[t]))return!1}return!0}static areContainFiltersSame(e,t){return e&&t?e.status==t.status&&e.containedInTimeentry==t.containedInTimeentry&&e.contains===t.contains&&!Object(n.c)(e.ids,t.ids):e==t}getQuery(){return Object(n.r)(this.map)||this.isFilterDisabled?null:this.map}static isContainsFiltersSame(e,t){return!e&&!t||(e&&t?e.status==t.status&&e.containedInTimeentry==t.containedInTimeentry&&e.contains===t.contains&&!!Object(n.c)(e.ids,t.ids):e==t)}}},"87RK":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return Math.abs(Number(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"simpleAbs",type:e,pure:!0}),e})()},"8IBD":function(e,t,i){"use strict";i.d(t,"a",(function(){return Vt}));var n=i("lvCY"),s=i("1Tmk"),r=i("O3o7"),o=i("aLCL"),a=i("1G5W"),c=i("IzEk"),l=i("tQGB"),u=i("XNiG"),d=i("itXk"),h=i("lGQG"),p=i("aDua"),b=i("nLyk"),f=i("rsZi"),m=i("hl/z"),g=i("HApq"),v=i("PW4C"),w=i("n2sY"),y=i("xoOP"),C=i("Ymxs"),k=i("i/9y"),S=i("fXoL"),x=i("1kSV"),O=i("tyNb"),D=i("ofXK"),I=i("VHTt"),j=i("LfE4"),T=i("jpmO"),E=i("Jmk/"),A=i("NHP+"),_=i("LRne"),W=i("cp0P"),R=i("YjdQ"),P=i("QTph"),M=i("Qyj8"),F=i("T+Hu"),X=i("DoKE"),L=i("QKuU"),N=i("eGqU"),B=i("3Pt+"),Y=i("C0N5");const V=["projectNameInput"];function U(e,t){if(1&e){const e=S.Yb();S.Xb(0,"a",31),S.jc("click",(function(){S.Oc(e);const i=t.$implicit;return S.nc(2).selectArchived(i)})),S.Yc(1),S.Wb()}if(2&e){const e=t.$implicit,i=S.nc(2);S.Hb("cl-active",e.label===i.archivedFilterValue.label),S.Cb(1),S.ad(" ",e.label," ")}}function H(e,t){if(1&e&&(S.Xb(0,"div",29),S.Wc(1,U,2,3,"a",30),S.Wb()),2&e){const e=S.nc();S.Cb(1),S.wc("ngForOf",e.archivedDropdown)}}function $(e,t){if(1&e&&(S.Xb(0,"span",32),S.Yc(1),S.Wb()),2&e){const e=S.nc();S.Cb(1),S.Zc(e.clientFilterCount)}}function G(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",33),S.Xb(1,"checkbox-filter-dropdown",34),S.jc("emitSelected",(function(t){return S.Oc(e),S.nc().clientDropdownClosed(t)}))("loadMore",(function(t){return S.Oc(e),S.nc().loadMoreClients(t)}))("userFilterChanged",(function(t){return S.Oc(e),S.nc().clientFilterChanged(t)}))("clearSelectedList",(function(){return S.Oc(e),S.nc().clearClientSelection()}))("emitSelectionOfAllEntities",(function(t){return S.Oc(e),S.nc().selectedAllClients(t)})),S.Wb(),S.Wb()}if(2&e){const e=S.nc();S.Cb(1),S.wc("entity",e.projectGroupingLabel)("hasWithoutEntity",e.hasWithoutEntity)("entityMap",e.clientMaps)("withoutSelected",e.withoutClient)("selectedAll",e.selectAllClients)("saveSelected",!0)("refreshAfterStatusChanged",!0)("queryStatus",e.clientStatus)("statusHasArchived",!0)}}function z(e,t){if(1&e&&(S.Xb(0,"span",32),S.Yc(1),S.Wb()),2&e){const e=S.nc();S.Cb(1),S.Zc(e.teamFilterCount)}}function q(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",35),S.Xb(1,"checkbox-filter-dropdown",36),S.jc("emitSelected",(function(t){return S.Oc(e),S.nc().userDropdownClosed(t)}))("loadMore",(function(t){return S.Oc(e),S.nc().loadMoreUsers(t)}))("userFilterChanged",(function(t){return S.Oc(e),S.nc().userFilterChanged(t)}))("clearSelectedList",(function(){return S.Oc(e),S.nc().clearUserSelection()}))("emitSelectionOfAllEntities",(function(t){return S.Oc(e),S.nc().selectedAllUsers(t)})),S.Wb(),S.Wb()}if(2&e){const e=S.nc();S.Cb(1),S.wc("entity","access")("hasWithoutEntity",!1)("entityMap",e.teamMaps)("withoutSelected",!1)("selectedAll",e.selectAllUsers)("placeholder","Find member...")("saveSelected",!0)("refreshAfterStatusChanged",!0)("queryStatus",e.userStatus)}}function K(e,t){if(1&e&&(S.Xb(0,"span",32),S.Yc(1),S.Wb()),2&e){const e=S.nc();S.Cb(1),S.Zc(e.billingFilterCount)}}function Z(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",33),S.Xb(1,"checkbox-filter-dropdown",37),S.jc("emitSelected",(function(t){return S.Oc(e),S.nc().billingDropdownClosed(t)})),S.Wb(),S.Wb()}if(2&e){const e=S.nc();S.Cb(1),S.wc("entity",e.billingMap[0].key)("entityMap",e.billingMap)("showNameFilter",!1)("showActiveArchived",!1)("showSelectAll",!1)}}function J(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",38),S.Xb(1,"a",39),S.jc("click",(function(){return S.Oc(e),S.nc().clearFilters()})),S.Yc(2,"Clear filters"),S.Wb(),S.Wb()}}let Q=(()=>{class e{constructor(e,t,i,n){this.clientService=e,this.userService=t,this.userGroupService=i,this.cd=n,this.showClearFilterChange=new S.n,this.emitFilter=new S.n,this.emitClearFilters=new S.n,this.archivedDropdown=[new I.a(j.a.ACTIVE,"Active"),new I.a(j.a.ARCHIVED,"Archived"),new I.a(j.a.ALL,"All")],this.archivedFilterValue=this.archivedDropdown[0],this.billingMap=[{key:"Billing",value:[{entity:{name:"Billable",enum:T.a.BILLABLE},selected:!1,isDisabled:!1},{entity:{name:"Non billable",enum:T.a.NON_BILLABLE},selected:!1,isDisabled:!1}]}],this.billingFilterCount=0,this.billingFilterValue=T.a.NONE,this.searchByName="",this.clients=[],this.clientMaps=[],this.clientFilterCount=0,this.withoutClient=!1,this.selectAllClients=!1,this.clientIds=[],this.clientStatus="ACTIVE",this.refreshClientList=!0,this.clientRefreshListAfterFilterChange=!1,this.hasWithoutEntity=!0,this.users=[],this.userGroups=[],this.teamMaps=[],this.teamFilterCount=0,this.selectAllUsers=!1,this.userIds=[],this.userStatus="ACTIVE",this.refreshUserList=!0,this.refreshUserGroupList=!0,this.userRefreshListAfterFilterChange=!1,this.unsubscribe$=new A.a}set filter(e){if(Object(y.r)(e))return;this.archivedFilterValue=I.a.getDropdownOf(this.archivedDropdown,e.archived),this.billingFilterValue=e.billable,e.billable===T.a.BOTH?(this.billingFilterCount=2,this.billingMap[0].value.forEach(e=>e.selected=!0)):e.billable===T.a.NONE?(this.billingFilterCount=0,this.billingMap[0].value.forEach(e=>e.selected=!1)):(this.billingFilterCount=1,this.billingMap[0].value[e.billable===T.a.BILLABLE?0:1].selected=!0),this.searchByName=e.name,this.clientIds=e.clients||[],this.selectAllClients=!e.containsClient;const t=this.clientIds.indexOf("without")>-1;this.withoutClient=this.selectAllClients?!t:t,this.userIds=e.users||[],this.selectAllUsers=!e.containsUser,this.clientStatus=e.containsClient&&0===this.clientIds.length?"ACTIVE":e.clientStatus,this.userStatus=e.containsUser&&0===this.userIds.length?"ACTIVE":e.userStatus,this.pageLimit=e.limit,this.checkDropdownCloseToShowClear(),this.getClients({status:this.clientStatus}),this.getUsersAndUserGroups({status:this.userStatus,noGroups:!1,noUsers:!1})}ngOnInit(){this.clientMaps.push(Object(F.a)("Clients",[])),this.teamMaps.push(Object(F.a)("Groups",[])),this.teamMaps.push(Object(F.a)("Users",[]))}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}checkSearchByNameToShowClear(){""!==this.searchByName&&this.showClearFilterChange.emit(!0)}getClients(e){const t=[];t.push(Object(F.a)("Clients",[])),this.refreshClientList?this.clients=[]:this.clientMaps[0].value.forEach(e=>{t[0].value.push(e)}),e.archived=e.status&&"ALL"!==e.status?"INACTIVE"===e.status||"ARCHIVED"===e.status?"ARCHIVED":"ACTIVE":"ALL",this.clientService.getClients(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.clients=[...this.clients,...e],t[0].value=[...t[0].value,...e.map(e=>new R.a(e,this.selectAllClients||this.clientIds.indexOf(e.id)>-1))],this.clientMaps=t;const i=[...this.clientIds,...this.clientMaps[0].value.filter(e=>e.selected).map(e=>e.entity.id)];if(this.withoutClient)i.push("without");else{const e=i.indexOf("without");e>-1&&i.splice(e,1)}this.clientIds=[...new Set(i)],this.clientFilterCount=!this.selectAllClients||"ALL"!==this.clientStatus&&this.clientStatus?this.clientIds.length>=50?"50+":this.clientIds.length:"...",this.cd.detectChanges()})}loadMoreClients(e){this.clientMaps[0].value.length%this.pageLimit==0&&(this.refreshClientList=!1,this.clientRefreshListAfterFilterChange=!1,this.getClients(e))}clientFilterChanged(e){this.refreshClientList=!0,this.selectAllClients=!1,this.withoutClient=!!e.selectedWithout,e.changedStatus?(this.clientRefreshListAfterFilterChange=!1,this.hasWithoutEntity=!0,this.clientIds=[],this.withoutClient=!1):(this.clientRefreshListAfterFilterChange=!0,this.hasWithoutEntity=!1,this.clientIds=this.clientIds.filter(t=>!e.unselectedEntities.includes(t)),""===e.name&&(this.hasWithoutEntity=!0)),e.status&&(this.clientStatus=e.status),this.getClients(e)}loadMoreUsers(e){this.refreshUserGroupList=!1,this.refreshUserList=!1,this.teamMaps[0].value.length%this.pageLimit!=0&&(e.noGroups=!0),this.teamMaps[1].value.length%this.pageLimit!=0&&(e.noUsers=!0),this.userRefreshListAfterFilterChange=!1,this.getUsersAndUserGroups(e)}userFilterChanged(e){this.refreshUserList=!0,this.refreshUserGroupList=!0,this.selectAllUsers=!1,e.changedStatus?(this.userRefreshListAfterFilterChange=!1,this.userIds=[]):(this.userRefreshListAfterFilterChange=!0,this.userIds=this.userIds.filter(t=>!e.unselectedEntities.includes(t))),e.status&&(this.userStatus=e.status),e.noGroups=!1,e.noUsers=!1,this.getUsersAndUserGroups(e)}selectedAllClients(e){this.selectAllClients=e}selectedAllUsers(e){this.selectAllUsers=e}clearClientSelection(){this.clientIds=[],this.clientFilterCount=0,this.selectAllClients=!1,this.withoutClient=!1,this.clientMaps.forEach(e=>{e.value.map(e=>e.selected=!1)}),this.cd.detectChanges()}clearUserSelection(){this.userIds=[],this.teamFilterCount=0,this.selectAllUsers=!1,this.teamMaps.forEach(e=>{e.value.map(e=>e.selected=!1)}),this.cd.detectChanges()}getUsersAndUserGroups(e){const t=[];t.push(Object(F.a)("Groups",[])),t.push(Object(F.a)("Users",[])),this.refreshUserGroupList?this.userGroups=[]:this.teamMaps[0].value.forEach(e=>{t[0].value.push(e)}),this.refreshUserList?this.users=[]:this.teamMaps[1].value.forEach(e=>{t[1].value.push(e)});const i=[];i.push("INACTIVE"===e.status||e.noGroups?Object(_.a)(null):this.userGroupService.getUserGroups(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$))),i.push(e.noUsers?Object(_.a)(null):this.userService.getUsers(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$))),Object(W.a)(...i).subscribe(([e,i])=>{e&&(this.userGroups=[...this.userGroups,...e.groups],t[0].value=[...t[0].value,...e.groups.map(e=>new R.a(e,this.selectAllUsers||this.userIds.indexOf(e.id)>-1))]),i&&(this.users=[...this.users,...i],t[1].value=[...t[1].value,...i.map(e=>new R.a(e,this.selectAllUsers||this.userIds.indexOf(e.id)>-1))]),this.teamMaps=t;const n=[...this.userIds,...this.teamMaps[0].value.filter(e=>e.selected).map(e=>e.entity.id),...this.teamMaps[1].value.filter(e=>e.selected).map(e=>e.entity.id)];this.userIds=[...new Set(n)],this.teamFilterCount=!this.selectAllUsers||"ALL"!==this.userStatus&&this.userStatus?this.userIds.length>=50?"50+":this.userIds.length:"...",this.cd.detectChanges()})}selectArchived(e){this.archivedFilterValue=e,this.checkDropdownCloseToShowClear()}checkArchivedToShowClear(){"ACTIVE"!==this.archivedFilterValue.value&&this.showClearFilterChange.emit(!0)}clientDropdownClosed(e){if(!e)return;this.selectAllClients=e.selectedAll,this.withoutClient=e.selectedWithout,this.clientStatus=e.status;const t=e.entities[0]?e.entities[0]:this.clientMaps[0];this.clientIds=this.clientIds.filter(t=>!e.unselectedEntities.includes(t));const i=[...this.clientIds,...t.value.filter(e=>e.selected).map(e=>e.entity.id)];if(this.withoutClient)i.push("without");else{const e=i.indexOf("without");e>-1&&i.splice(e,1)}this.clientIds=[...new Set(i)],this.refreshClientList=!0,this.clientRefreshListAfterFilterChange?(this.getClients({status:this.clientStatus}),this.hasWithoutEntity=!0,this.clientRefreshListAfterFilterChange=!1):this.clientFilterCount=!this.selectAllClients||e.name||e.status?this.clientIds.length>=50?"50+":this.clientIds.length:"...",this.checkDropdownCloseToShowClear(),this.cd.detectChanges()}checkClientsToShowClear(){(this.clientIds.length||this.selectAllClients||this.withoutClient)&&this.showClearFilterChange.emit(!0)}userDropdownClosed(e){if(!e)return;this.selectAllUsers=e.selectedAll,this.userStatus=e.status;const t=e.entities[0]&&e.entities[1]?e.entities:this.teamMaps;this.userIds=this.userIds.filter(t=>!e.unselectedEntities.includes(t));const i=t[0].value.filter(e=>e.selected),n=t[1].value.filter(e=>e.selected),s=[...this.userIds,...i.map(e=>e.entity.id),...n.map(e=>e.entity.id)];this.userIds=[...new Set(s)],this.userRefreshListAfterFilterChange?(this.getUsersAndUserGroups({status:this.userStatus,noGroups:!1,noUsers:!1}),this.userRefreshListAfterFilterChange=!1):this.teamFilterCount=!e.selectedAll||e.name||e.status?this.userIds.length>=50?"50+":this.userIds.length:"...",this.checkDropdownCloseToShowClear(),this.cd.detectChanges()}checkUsersToShowClear(){(this.userIds.length||this.selectAllUsers)&&this.showClearFilterChange.emit(!0)}billingDropdownClosed(){const e=this.billingMap[0].value.filter(e=>e.selected);this.billingFilterCount=e.length,this.billingFilterValue=1===this.billingFilterCount?e[0].entity.enum:this.billingFilterCount?T.a.BOTH:T.a.NONE,this.checkDropdownCloseToShowClear(),this.cd.detectChanges()}checkBillingToShowClear(){this.billingFilterCount>0&&this.showClearFilterChange.emit(!0)}clearFilters(){this.teamMaps.forEach(e=>{e.value=[]}),this.clientMaps.forEach(e=>{e.value=[]}),this.billingMap[0].value.forEach(e=>e.selected=!1),this.selectAllUsers=!1,this.selectAllClients=!1,this.clientFilterCount=0,this.teamFilterCount=0,this.archivedFilterValue=this.archivedDropdown[0],this.billingFilterValue=T.a.NONE,this.billingFilterCount=0,this.refreshClientList=!0,this.refreshUserList=!0,this.refreshUserGroupList=!0,this.emitClearFilters.emit(!0)}applyFilter(){this.emitFilter.emit({name:this.searchByName,archived:this.archivedFilterValue.value,billable:this.billingFilterValue,clients:this.selectAllClients?this.withoutClient?[]:["without"]:this.clientIds,clientStatus:this.clientStatus,containsClient:!this.selectAllClients,users:this.selectAllUsers?[]:this.userIds,userStatus:this.userStatus,containsUser:!this.selectAllUsers})}focusProjectNameInput(){this.projectNameInput.nativeElement.focus()}checkDropdownCloseToShowClear(e){e&&(e.keyCode||e.charCode)===X.d||(this.showClearFilterChange.emit(!1),this.checkArchivedToShowClear(),this.checkBillingToShowClear(),this.checkSearchByNameToShowClear(),this.checkClientsToShowClear(),this.checkUsersToShowClear())}}return e.\u0275fac=function(t){return new(t||e)(S.Rb(E.a),S.Rb(M.a),S.Rb(P.a),S.Rb(S.h))},e.\u0275cmp=S.Lb({type:e,selectors:[["projects-filter"]],viewQuery:function(e,t){var i;1&e&&S.ed(V,!0),2&e&&S.Kc(i=S.kc())&&(t.projectNameInput=i.first)},inputs:{projectGroupingLabel:"projectGroupingLabel",filter:"filter",showClearFilter:"showClearFilter"},outputs:{showClearFilterChange:"showClearFilterChange",emitFilter:"emitFilter",emitClearFilters:"emitClearFilters"},decls:43,vars:7,consts:[[1,"cl-card","cl-border-bottom","cl-mb-4"],[1,"cl-component-row","cl-p-0"],[1,"cl-row","cl-no-gutters","cl-w-100"],[1,"cl-col-lg-custom-auto"],[1,"cl-report-entry-actions","cl-d-flex","cl-justify-content-between","cl-justify-content-lg-custom-start"],[1,"cl-component-divided-left","cl-no-divider-border","cl-d-none","cl-d-lg-flex"],[1,"cl-h5","cl-mb-0"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-dropdown-toggle"],["class","cl-dropdown-menu",4,"dropdownContent"],["dropdown","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-dropdown-toggle","cl-text-capitalize"],["class","cl-badge cl-badge-filter",4,"ngIf"],["class","cl-dropdown-menu cl-prevent-close",4,"dropdownContent"],["class","cl-dropdown-menu cl-lg-custom-down-r-0",4,"dropdownContent"],[1,"cl-col"],[1,"cl-d-flex","cl-align-items-center","cl-py-1","cl-py-lg-custom-0","cl-pr-2"],[1,"cl-component-divided-left","cl-remove-divider-mob","cl-flex-grow-1","cl-px-0","cl-px-lg-custom-2","cl-ml-2"],[1,"cl-input-group"],[1,"cl-input-group-prepend",3,"click"],[1,"cl-input-group-text","cl-bg-white","cl-input-timetracker-main","cl-hover-pointer"],["src","assets/images/ui-icons/search.svg"],["type","text","placeholder","Project name",1,"cl-form-control","cl-input-timetracker-main",3,"ngModel","keyup.enter","keyup","ngModelChange"],["projectNameInput",""],[1,"cl-ml-auto"],[1,"cl-mx-2"],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-auto","cl-btn-sm","cl-d-flex","cl-d-lg-custom-none",2,"margin-top","0.9rem",3,"keyup.enter","click"],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-auto","cl-d-none","cl-d-lg-custom-block",3,"keyup.enter","click"],["class","cl-reset-filter",4,"ngIf"],[1,"cl-dropdown-menu"],["class","cl-dropdown-item","closeDropdown","",3,"cl-active","click",4,"ngFor","ngForOf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[1,"cl-badge","cl-badge-filter"],[1,"cl-dropdown-menu","cl-prevent-close"],[3,"entity","hasWithoutEntity","entityMap","withoutSelected","selectedAll","saveSelected","refreshAfterStatusChanged","queryStatus","statusHasArchived","emitSelected","loadMore","userFilterChanged","clearSelectedList","emitSelectionOfAllEntities"],[1,"cl-dropdown-menu","cl-lg-custom-down-r-0"],[3,"entity","hasWithoutEntity","entityMap","withoutSelected","selectedAll","placeholder","saveSelected","refreshAfterStatusChanged","queryStatus","emitSelected","loadMore","userFilterChanged","clearSelectedList","emitSelectionOfAllEntities"],[3,"entity","entityMap","showNameFilter","showActiveArchived","showSelectAll","emitSelected"],[1,"cl-reset-filter"],[3,"click"]],template:function(e,t){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"div",3),S.Xb(4,"div",4),S.Xb(5,"div",5),S.Xb(6,"span",6),S.Yc(7,"Filter"),S.Wb(),S.Wb(),S.Xb(8,"div",7),S.Xb(9,"div",8),S.Yc(10),S.Wb(),S.Wc(11,H,2,1,"div",9),S.Wb(),S.Xb(12,"div",10),S.Xb(13,"div",11),S.Yc(14),S.Wc(15,$,2,1,"span",12),S.Wb(),S.Wc(16,G,2,9,"div",13),S.Wb(),S.Xb(17,"div",10),S.Xb(18,"div",8),S.Yc(19," Access "),S.Wc(20,z,2,1,"span",12),S.Wb(),S.Wc(21,q,2,9,"div",14),S.Wb(),S.Xb(22,"div",10),S.Xb(23,"div",11),S.Yc(24," Billing "),S.Wc(25,K,2,1,"span",12),S.Wb(),S.Wc(26,Z,2,5,"div",13),S.Wb(),S.Wb(),S.Wb(),S.Xb(27,"div",15),S.Xb(28,"div",16),S.Xb(29,"div",17),S.Xb(30,"div",18),S.Xb(31,"div",19),S.jc("click",(function(){return t.focusProjectNameInput()})),S.Xb(32,"div",20),S.Sb(33,"img",21),S.Wb(),S.Wb(),S.Xb(34,"input",22,23),S.jc("keyup.enter",(function(){return t.applyFilter()}))("keyup",(function(e){return t.checkDropdownCloseToShowClear(e)}))("ngModelChange",(function(e){return t.searchByName=e})),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(36,"div",24),S.Xb(37,"div",25),S.Xb(38,"button",26),S.jc("keyup.enter",(function(){return t.applyFilter()}))("click",(function(){return t.applyFilter()})),S.Yc(39," Apply "),S.Wb(),S.Xb(40,"button",27),S.jc("keyup.enter",(function(){return t.applyFilter()}))("click",(function(){return t.applyFilter()})),S.Yc(41," Apply filter "),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wc(42,J,3,0,"div",28)),2&e&&(S.Cb(10),S.ad(" ",t.archivedFilterValue.label," "),S.Cb(4),S.ad(" ",t.projectGroupingLabel," "),S.Cb(1),S.wc("ngIf",0!==t.clientFilterCount),S.Cb(5),S.wc("ngIf",0!==t.teamFilterCount),S.Cb(5),S.wc("ngIf",0!==t.billingFilterCount),S.Cb(9),S.wc("ngModel",t.searchByName),S.Cb(8),S.wc("ngIf",t.showClearFilter))},directives:[L.a,N.a,D.u,B.c,B.s,B.v,D.t,Y.a],encapsulation:2,changeDetection:0}),e})();function ee(e,t){1&e&&S.uc(0,0,["*ngTemplateOutlet","selectAllDivTemplate"])}function te(e,t){1&e&&S.uc(0,1,["*ngTemplateOutlet","bulkButtons"])}function ie(e,t){if(1&e){const e=S.Yb();S.Xb(0,"th",9),S.Xb(1,"div",10),S.Xb(2,"a",11),S.jc("click",(function(){return S.Oc(e),S.nc(2).sortByDuration()})),S.Yc(3," Tracked "),S.Wb(),S.Wb(),S.Wb()}if(2&e){const e=S.nc(2);S.Cb(2),S.Hb("cl-up",e.sortBy===e.SortBy.DURATION&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.DURATION&&e.sortOrder===e.SortOrder.DESCENDING)}}function ne(e,t){if(1&e){const e=S.Yb();S.Xb(0,"th",9),S.Xb(1,"div",10),S.Xb(2,"a",11),S.jc("click",(function(){return S.Oc(e),S.nc(2).sortByAmount()})),S.Yc(3," Amount "),S.Wb(),S.Wb(),S.Wb()}if(2&e){const e=S.nc(2);S.Cb(2),S.Hb("cl-up",e.sortBy===e.SortBy.BUDGET&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.BUDGET&&e.sortOrder===e.SortOrder.DESCENDING)}}function se(e,t){if(1&e){const e=S.Yb();S.Xb(0,"a",11),S.jc("click",(function(){return S.Oc(e),S.nc(3).sortByProgress()})),S.Yc(1," Progress "),S.Wb()}if(2&e){const e=S.nc(3);S.Hb("cl-up",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.DESCENDING)}}function re(e,t){1&e&&(S.Xb(0,"div",16),S.Yc(1,"Progress"),S.Wb())}function oe(e,t){if(1&e&&(S.Xb(0,"th",9),S.Xb(1,"div",10),S.Wc(2,se,2,4,"a",14),S.Wc(3,re,2,0,"div",15),S.Wb(),S.Wb()),2&e){const e=S.nc(2);S.Cb(2),S.wc("ngIf",e.isAdminOrOwner),S.Cb(1),S.wc("ngIf",!e.isAdminOrOwner)}}function ae(e,t){1&e&&(S.Xb(0,"th",9),S.Xb(1,"div",10),S.Xb(2,"div",16),S.Yc(3,"Access"),S.Wb(),S.Wb(),S.Wb())}function ce(e,t){1&e&&(S.Xb(0,"th",9),S.Xb(1,"div",10),S.Xb(2,"div",17),S.Yc(3,"Favorites"),S.Wb(),S.Wb(),S.Wb())}function le(e,t){1&e&&(S.Xb(0,"th",18),S.Xb(1,"div",17),S.Yc(2,"Edit"),S.Wb(),S.Wb())}function ue(e,t){if(1&e){const e=S.Yb();S.Vb(0),S.Xb(1,"th",5),S.Xb(2,"div",6),S.Wc(3,ee,1,0,void 0,7),S.Xb(4,"a",8),S.jc("click",(function(){return S.Oc(e),S.nc().sortByName()})),S.Yc(5," Name "),S.Wb(),S.Wc(6,te,1,0,void 0,7),S.Wb(),S.Wb(),S.Xb(7,"th",9),S.Xb(8,"div",10),S.Xb(9,"a",11),S.jc("click",(function(){return S.Oc(e),S.nc().sortByClient()})),S.Yc(10),S.Wb(),S.Wb(),S.Wb(),S.Wc(11,ie,4,4,"th",12),S.Wc(12,ne,4,4,"th",12),S.Wc(13,oe,4,2,"th",12),S.Wc(14,ae,4,0,"th",12),S.Wc(15,ce,4,0,"th",12),S.Wc(16,le,3,0,"th",13),S.Ub()}if(2&e){const e=S.nc(),t=S.Lc(6),i=S.Lc(4);S.Cb(3),S.wc("ngTemplateOutlet",t),S.Cb(1),S.Hb("cl-up",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.DESCENDING),S.Cb(2),S.wc("ngTemplateOutlet",i),S.Cb(3),S.Hb("cl-up",e.sortBy===e.SortBy.CLIENT_NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-up",e.sortBy===e.SortBy.CLIENT_NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.CLIENT_NAME&&e.sortOrder===e.SortOrder.DESCENDING),S.Cb(1),S.ad(" ",e.projectGroupingLabel," "),S.Cb(1),S.wc("ngIf",null==e.labels?null:e.labels.includes("Tracked")),S.Cb(1),S.wc("ngIf",null==e.labels?null:e.labels.includes("Amount")),S.Cb(1),S.wc("ngIf",null==e.labels?null:e.labels.includes("Progress")),S.Cb(1),S.wc("ngIf",null==e.labels?null:e.labels.includes("Access")),S.Cb(1),S.wc("ngIf",null==e.labels?null:e.labels.includes("Favorites")),S.Cb(1),S.wc("ngIf",null==e.labels?null:e.labels.includes("Edit"))}}function de(e,t){1&e&&S.uc(0,2,["*ngTemplateOutlet","selectAllDivTemplate"])}function he(e,t){1&e&&S.uc(0,3,["*ngTemplateOutlet","bulkButtons"])}function pe(e,t){if(1&e){const e=S.Yb();S.Xb(0,"th",19),S.Xb(1,"div",6),S.Wc(2,de,1,0,void 0,7),S.Xb(3,"div",16),S.Yc(4," Name "),S.Wb(),S.Wc(5,he,1,0,void 0,7),S.Xb(6,"a",20),S.jc("click",(function(){return S.Oc(e),S.nc().expandAll()})),S.Xb(7,"span",21),S.Sb(8,"img",22),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){const e=S.nc(),t=S.Lc(6),i=S.Lc(4);S.Cb(2),S.wc("ngTemplateOutlet",t),S.Cb(3),S.wc("ngTemplateOutlet",i),S.Cb(3),S.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",S.Qc)}}function be(e,t){if(1&e){const e=S.Yb();S.Xb(0,"span",24),S.Xb(1,"a",25,26),S.jc("click",(function(){S.Oc(e);const t=S.Lc(2),i=S.nc(3);return i.openPopover(t,i.emitBulkEnum.archive)})),S.Yc(3),S.Wb(),S.Wb()}if(2&e){const e=S.nc(3),t=S.Lc(8);S.Cb(1),S.wc("ngbPopover",t),S.Cb(2),S.ad(" ",e.allArchived?"Restore":"Archive"," ")}}function fe(e,t){if(1&e){const e=S.Yb();S.Xb(0,"span",24),S.Xb(1,"a",25,26),S.jc("click",(function(){S.Oc(e);const t=S.Lc(2),i=S.nc(3);return i.openPopover(t,i.emitBulkEnum.delete)})),S.Yc(3," Delete "),S.Wb(),S.Wb()}if(2&e){S.nc(3);const e=S.Lc(8);S.Cb(1),S.wc("ngbPopover",e)}}function me(e,t){if(1&e){const e=S.Yb();S.Vb(0),S.Xb(1,"span",24),S.Xb(2,"a",25,26),S.jc("click",(function(){S.Oc(e);const t=S.Lc(3),i=S.nc(2);return i.openPopover(t,i.emitBulkEnum.edit)})),S.Yc(4," Bulk Edit "),S.Wb(),S.Wb(),S.Wc(5,be,4,2,"span",27),S.Wc(6,fe,4,1,"span",27),S.Ub()}if(2&e){const e=S.nc(2),t=S.Lc(8);S.Cb(2),S.wc("ngbPopover",t),S.Cb(3),S.wc("ngIf",!e.someArchived||e.allArchived),S.Cb(1),S.wc("ngIf",e.allArchived)}}function ge(e,t){if(1&e&&S.Wc(0,me,7,3,"ng-container",23),2&e){const e=S.nc();S.wc("ngIf",e.someProjectsSelected)}}function ve(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",29),S.Xb(1,"input",30),S.jc("ngModelChange",(function(t){return S.Oc(e),S.nc(2).allProjectsSelected=t}))("ngModelChange",(function(){S.Oc(e);const t=S.nc(2);return t.emitProjectSelection.emit(t.allProjectsSelected)})),S.Wb(),S.Sb(2,"label",31),S.Wb()}if(2&e){const e=S.nc(2);S.Cb(1),S.wc("ngModel",e.allProjectsSelected)}}function we(e,t){if(1&e&&S.Wc(0,ve,3,1,"div",28),2&e){const e=S.nc();S.wc("ngIf",e.isAdminOrOwner)}}function ye(e,t){if(1&e){const e=S.Yb();S.Xb(0,"a",32),S.jc("click",(function(){return S.Oc(e),S.nc().router.navigateByUrl("upgrade")})),S.Yc(1,"Upgrade"),S.Wb(),S.Yc(2," to use bulk edit.\n")}}const Ce=["*","*","*","*"];var ke=function(e){return e[e.edit=0]="edit",e[e.archive=1]="archive",e[e.delete=2]="delete",e}({});let Se=(()=>{class e{constructor(e){this.router=e,this.sortBy=b.a.NAME,this.sortOrder=f.a.ASCENDING,this.emitBulkEdit=new S.n,this.emitArchive=new S.n,this.emitDelete=new S.n,this.emitProjectSelection=new S.n,this.emitSorting=new S.n,this.onExpandAll=new S.n,this.SortBy=b.a,this.SortOrder=f.a,this.emitBulkEnum=ke,this.isExpandAll=!1}set isManager(e){this._isManager=e}get isManager(){return this._isManager}set someProjectsSelected(e){this._someProjectsSelected=e}get someProjectsSelected(){return this._someProjectsSelected}set allArchived(e){this._allArchived=e}get allArchived(){return this._allArchived}sortByName(){this.sortBy===b.a.NAME?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.NAME,this.sortOrder=f.a.ASCENDING),this.applySorting()}sortByClient(){this.sortBy===b.a.CLIENT_NAME?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.CLIENT_NAME,this.sortOrder=f.a.ASCENDING),this.applySorting()}sortByDuration(){this.sortBy===b.a.DURATION?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.DURATION,this.sortOrder=f.a.DESCENDING),this.applySorting()}sortByAmount(){this.sortBy===b.a.BUDGET?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.BUDGET,this.sortOrder=f.a.DESCENDING),this.applySorting()}sortByProgress(){this.sortBy===b.a.PROGRESS?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.PROGRESS,this.sortOrder=f.a.DESCENDING),this.applySorting()}applySorting(){this.emitSorting.emit({sortBy:this.sortBy,sortOrder:this.sortOrder})}openPopover(e,t){if(this.hasBulkEditPermission)switch(t){case ke.edit:this.emitBulkEdit.emit();break;case ke.archive:this.emitArchive.emit();break;case ke.delete:this.emitDelete.emit()}else e.isOpen()?e.close():e.open()}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}}return e.\u0275fac=function(t){return new(t||e)(S.Rb(O.c))},e.\u0275cmp=S.Lb({type:e,selectors:[["projects-table-header"],["","projects-table-header",""]],inputs:{isManager:"isManager",someProjectsSelected:"someProjectsSelected",allArchived:"allArchived",someArchived:"someArchived",archivedFilter:"archivedFilter",allProjectsSelected:"allProjectsSelected",hasBulkEditPermission:"hasBulkEditPermission",isAdminOrOwner:"isAdminOrOwner",projectGroupingLabel:"projectGroupingLabel",isDesktop:"isDesktop",labels:"labels",sortBy:"sortBy",sortOrder:"sortOrder"},outputs:{emitBulkEdit:"emitBulkEdit",emitArchive:"emitArchive",emitDelete:"emitDelete",emitProjectSelection:"emitProjectSelection",emitSorting:"emitSorting",onExpandAll:"onExpandAll"},ngContentSelectors:Ce,decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],["bulkButtons",""],["selectAllDivTemplate",""],["popContent",""],[1,"cl-h6","cl-mb-0","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[4,"ngTemplateOutlet"],[1,"cl-text-gray-6","cl-sort-by","d-none","cl-d-lg-inline-flex",3,"click"],[1,"cl-d-none","cl-d-lg-table-cell"],[1,"cl-ml-lg-custom-n2"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex",3,"click"],["class","cl-d-none cl-d-lg-table-cell",4,"ngIf"],["class","cl-d-none cl-d-lg-table-cell cl-lh-0",4,"ngIf"],["class","cl-text-gray-6 cl-sort-by cl-d-none cl-d-lg-inline-flex",3,"cl-up","cl-down","click",4,"ngIf"],["class","cl-h5 cl-mb-0",4,"ngIf"],[1,"cl-h5","cl-mb-0"],[1,"cl-h5","cl-mb-0","cl-d-lg-none"],[1,"cl-d-none","cl-d-lg-table-cell","cl-lh-0"],[1,"cl-pl-lg-3"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"],[4,"ngIf"],[1,"cl-bulk-edit-link"],["triggers","manual","placement","left","container","body",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["class","cl-bulk-edit-link",4,"ngIf"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","customCheck1",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customCheck1",1,"cl-custom-control-label"],[3,"click"]],template:function(e,t){if(1&e&&(S.vc(Ce),S.Wc(0,ue,17,19,"ng-container",0),S.Wc(1,pe,9,3,"ng-template",null,1,S.Xc),S.Wc(3,ge,1,1,"ng-template",null,2,S.Xc),S.Wc(5,we,1,1,"ng-template",null,3,S.Xc),S.Wc(7,ye,3,0,"ng-template",null,4,S.Xc)),2&e){const e=S.Lc(2);S.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[D.u,D.B,x.L,B.a,B.s,B.v],encapsulation:2}),e})();var xe=i("wd/R"),Oe=(i("j4ir"),i("wkZx")),De=i("G4ky"),Ie=i("5SNR"),je=i("KnX9"),Te=i("l4Lo"),Ee=i("rg2B");function Ae(e,t){1&e&&S.Tb(0)}function _e(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",16),S.Xb(1,"input",17),S.jc("ngModelChange",(function(t){return S.Oc(e),S.nc(2).project.bulkSelected=t}))("ngModelChange",(function(){return S.Oc(e),S.nc(2).emitBulkSelected.emit()})),S.Wb(),S.Sb(2,"label",18),S.Wb()}if(2&e){const e=S.nc(2);S.Cb(1),S.wc("id",e.project.id)("ngModel",e.project.bulkSelected),S.Cb(1),S.wc("for",e.project.id)}}function We(e,t){1&e&&(S.Xb(0,"div",19),S.Sb(1,"img",20),S.Wb())}function Re(e,t){if(1&e&&(S.Xb(0,"div",11),S.Wc(1,_e,3,3,"div",12),S.Xb(2,"a",13),S.Sb(3,"i",14),S.Xb(4,"span"),S.Yc(5),S.Wb(),S.Wb(),S.Wc(6,We,2,0,"div",15),S.Wb()),2&e){const e=S.nc();S.Cb(1),S.wc("ngIf",e.isAdmin),S.Cb(1),S.Vc("text-decoration",e.project.archived?"line-through":"none"),S.xc("title",e.project.name),S.yc("routerLink","/projects/",e.project.id,"/edit"),S.Cb(1),S.Vc("background-color",e.project.color),S.Cb(2),S.Zc(e.project.name),S.Cb(1),S.wc("ngIf",e.project.isTemplate)}}function Pe(e,t){if(1&e&&(S.Xb(0,"a",21),S.Xb(1,"div",22),S.Xb(2,"span",23),S.Yc(3),S.Wb(),S.Wb(),S.Wb()),2&e){const e=S.nc();S.yc("routerLink","/projects/",e.project.id,"/edit"),S.wc("fragment",e.isAdmin||e.isAdminOrManager?"settings":""),S.Cb(2),S.xc("title",e.project.client&&e.project.client.id?e.project.client.name:"--"),S.Cb(1),S.ad(" ",e.project.client&&e.project.client.id?e.project.client.name:"--"," ")}}function Me(e,t){if(1&e&&(S.Xb(0,"div",28),S.Yc(1),S.oc(2,"roundIfWholeNumber"),S.Wb()),2&e){const e=S.nc(3);S.Cb(1),S.ad(" of ",S.pc(2,1,e.projectEstimate),"h ")}}function Fe(e,t){if(1&e&&(S.Xb(0,"a",26),S.Xb(1,"div"),S.Xb(2,"div"),S.Yc(3),S.oc(4,"roundIfWholeNumber"),S.Wb(),S.Wc(5,Me,3,3,"div",27),S.Wb(),S.Wb()),2&e){const e=S.nc(2);S.Vc("cursor",e.showProjectStatus?"pointer":"default"),S.wc("routerLink",e.showProjectStatus?"/projects/"+e.project.id+"/edit":""),S.Cb(2),S.Hb("cl-text-danger",e.isOverEstimate)("cl-text-gray-6",!e.isOverEstimate),S.Cb(1),S.ad(" ",S.pc(4,9,e.projectDuration),"h "),S.Cb(2),S.wc("ngIf",e.projectEstimate)}}function Xe(e,t){1&e&&(S.Xb(0,"p",29),S.Yc(1,"-"),S.Wb())}function Le(e,t){if(1&e&&(S.Wc(0,Fe,6,11,"a",24),S.Wc(1,Xe,2,0,"p",25)),2&e){const e=S.nc();S.wc("ngIf",e.showProjectStatus),S.Cb(1),S.wc("ngIf",!e.showProjectStatus)}}function Ne(e,t){if(1&e&&(S.Xb(0,"div",28),S.Yc(1),S.oc(2,"roundIfWholeNumber"),S.Wb()),2&e){const e=S.nc(3);S.Cb(1),S.bd(" of ",S.pc(2,2,e.projectBudgetEstimate)," "," "+e.workspace.hourlyRate.currency," ")}}function Be(e,t){if(1&e&&(S.Xb(0,"a",26),S.Xb(1,"div"),S.Xb(2,"div"),S.Yc(3),S.oc(4,"roundIfWholeNumber"),S.Wb(),S.Wc(5,Ne,3,4,"div",27),S.Wb(),S.Wb()),2&e){const e=S.nc(2);S.Vc("cursor",e.showProjectStatus?"pointer":"default"),S.wc("routerLink",e.showProjectStatus?"/projects/"+e.project.id+"/edit":""),S.Cb(2),S.Hb("cl-text-danger",e.isOverBudgetEstimate)("cl-text-gray-6",!e.isOverBudgetEstimate),S.Cb(1),S.bd(" ",S.pc(4,10,e.project.budget),""," "+e.workspace.hourlyRate.currency," "),S.Cb(2),S.wc("ngIf",e.projectBudgetEstimate)}}function Ye(e,t){1&e&&(S.Xb(0,"p",29),S.Yc(1,"-"),S.Wb())}function Ve(e,t){if(1&e&&(S.Wc(0,Be,6,12,"a",24),S.Wc(1,Ye,2,0,"p",25)),2&e){const e=S.nc();S.wc("ngIf",e.showProjectStatus&&e.canSeeRates),S.Cb(1),S.wc("ngIf",!e.showProjectStatus)}}function Ue(e,t){if(1&e&&(S.Xb(0,"a",32),S.Xb(1,"div",33),S.Sb(2,"percentage-progress-bar",34),S.Wb(),S.Wb()),2&e){const e=S.nc(2);S.Vc("cursor",e.showProjectStatus?"pointer":"default"),S.wc("routerLink",e.showProjectStatus?"/projects/"+e.project.id+"/edit":""),S.Cb(2),S.wc("percentage",e.project.progress)("showPercentageOutsideOfProgress",!0)}}function He(e,t){1&e&&(S.Xb(0,"div",35),S.Xb(1,"div"),S.Yc(2,"-"),S.Wb(),S.Wb())}function $e(e,t){if(1&e&&(S.Wc(0,Ue,3,5,"a",30),S.Wc(1,He,3,0,"ng-template",null,31,S.Xc)),2&e){const e=S.Lc(2),t=S.nc();S.wc("ngIf",t.showProjectStatus&&t.project.estimateType!=t.EstimateType.NO_ESTIMATE)("ngIfElse",e)}}function Ge(e,t){if(1&e&&(S.Xb(0,"a",36),S.Yc(1),S.Wb()),2&e){const e=S.nc();S.yc("routerLink","/projects/",e.project.id,"/edit"),S.Cb(1),S.ad(" ",e.project.public?"Public":"Private"," ")}}function ze(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",37),S.Xb(1,"div",38),S.Xb(2,"a",39),S.jc("click",(function(){return S.Oc(e),S.nc().toggleFavorite()})),S.Wb(),S.Wb(),S.Wb()}if(2&e){const e=S.nc();S.Cb(2),S.Hb("cl-active",e.project.favorite)}}function qe(e,t){if(1&e){const e=S.Yb();S.Xb(0,"a",51),S.jc("click",(function(){return S.Oc(e),S.nc(4).router.navigateByUrl("upgrade")})),S.Yc(1,"Upgrade"),S.Wb(),S.Yc(2," to use templates.")}}function Ke(e,t){if(1&e){const e=S.Yb();S.Xb(0,"a",52,53),S.jc("click",(function(){S.Oc(e);const t=S.Lc(1);return S.nc(4).setAsTemplate(t)})),S.Yc(2),S.Wb()}if(2&e){S.nc();const e=S.Lc(3),t=S.nc(3);S.wc("ngbPopover",e),S.Db("closeDropdown",t.hasProjectTemplateFeature?"":null),S.Cb(2),S.ad(" ",t.project.isTemplate?"Don't use as template":"Set as template"," ")}}function Ze(e,t){if(1&e){const e=S.Yb();S.Xb(0,"a",49),S.jc("click",(function(){return S.Oc(e),S.nc(4).emitProjectAction.emit("delete")})),S.Yc(1," Delete "),S.Wb()}}function Je(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",45),S.Xb(1,"div",46),S.Wc(2,qe,3,0,"ng-template",null,47,S.Xc),S.Wc(4,Ke,3,3,"a",48),S.Xb(5,"a",49),S.jc("click",(function(){return S.Oc(e),S.nc(3).emitProjectAction.emit("archive")})),S.Yc(6),S.Wb(),S.Wc(7,Ze,2,0,"a",50),S.Wb(),S.Wb()}if(2&e){const e=S.nc(3);S.Cb(4),S.wc("ngIf",e.hasCreatePermissions),S.Cb(2),S.ad(" ",e.project.archived?"Restore":"Archive"," "),S.Cb(1),S.wc("ngIf",e.project.archived)}}function Qe(e,t){1&e&&(S.Xb(0,"div",41),S.Xb(1,"div",42),S.Sb(2,"img",43),S.Wb(),S.Wc(3,Je,8,3,"div",44),S.Wb())}function et(e,t){if(1&e&&S.Wc(0,Qe,4,0,"div",40),2&e){const e=S.nc();S.wc("ngIf",e.isAdmin||e.isAdminOrManager)}}const tt=function(e){return{labels:e}},it=function(e,t,i,n,s,r,o,a,c){return[e,t,i,n,s,r,o,a,c]};let nt=(()=>{class e{constructor(e,t,i){this.projectService=e,this.router=t,this.cd=i,this.EstimateType=De.a,this.emitBulkSelected=new S.n,this.emitProjectAction=new S.n}set managerPermissions(e){this._managerPermissions=e,this.isAdminOrManager=this.isAdmin||e.indexOf(this.project.id)>-1,this.showProjectStatus=this.isAdminOrManager||!this.onlyAdminsSeeProjectStatus,this.cd.detectChanges()}get managerPermissions(){return this._managerPermissions}ngOnInit(){this.projectDuration=Object(xe.duration)(this.project.duration).asHours(),this.project.estimateType===De.a.TIME_ESTIMATE&&this.getTimeEstimate(),this.project.estimateType===De.a.PROJECT_BUDGET&&this.getProjectBudget(),this.totalTime=Object(xe.duration)(this.project.duration),this.setIsNoEstimate()}ngAfterViewInit(){this.cd.detectChanges()}toggleFavorite(){this.project.favorite=!this.project.favorite,this.project.favorite?this.projectService.makeProjectFavorite(this.project):this.projectService.removeProjectAsFavorite(this.project.id)}setAsTemplate(e){this.hasProjectTemplateFeature?this.emitProjectAction.emit("template"):e.isOpen()?e.close():e.open()}getTimeEstimate(){this.projectEstimate="MANUAL"===this.project.timeEstimate.type?this.project.timeEstimate.estimate:this.project.tasks?Object(Oe.a)(this.project.tasks.map(e=>e.estimate)).asHours():0,this.isOverEstimate=this.projectEstimate&&this.projectDuration>this.projectEstimate,this.cd.detectChanges()}getProjectBudget(){this.projectBudgetEstimate="MANUAL"===this.project.budgetEstimate.type?this.project.budgetEstimate.estimate:this.project.tasks.map(e=>e.budgetEstimate?e.budgetEstimate/100:0).reduce((e,t)=>e+t,0),this.isOverBudgetEstimate=this.projectBudgetEstimate&&this.project.budget>this.projectBudgetEstimate,this.cd.detectChanges()}setIsNoEstimate(){this.isNoEstimate=this.project.estimateType===De.a.NO_ESTIMATE||this.project.estimateType===De.a.PROJECT_BUDGET&&0===this.project.budgetEstimate.estimate||this.project.estimateType===De.a.TIME_ESTIMATE&&0===this.project.timeEstimate.estimate}}return e.\u0275fac=function(t){return new(t||e)(S.Rb(o.a),S.Rb(O.c),S.Rb(S.h))},e.\u0275cmp=S.Lb({type:e,selectors:[["projects-table-row"],["","projects-table-row",""]],inputs:{project:"project",workspace:"workspace",isDesktop:"isDesktop",canSeeRates:"canSeeRates",projectColumns:"projectColumns",onlyAdminsSeeProjectStatus:"onlyAdminsSeeProjectStatus",labels:"labels",isAdmin:"isAdmin",hasProjectTemplateFeature:"hasProjectTemplateFeature",hasCreatePermissions:"hasCreatePermissions",expandAll:"expandAll",managerPermissions:"managerPermissions"},outputs:{emitBulkSelected:"emitBulkSelected",emitProjectAction:"emitProjectAction"},decls:20,vars:27,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["col6",""],["col7",""],["col8",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100","cl-py-0","cl-py-lg-custom-2","cl-pr-3"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-cut-text","cl-project-name","cl-project-name-colored","cl-brown","cl-text-dark",3,"title","routerLink"],[1,"cl-entry__project__dot"],["class","cl-mx-2 cl-d-print-none",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"id","ngModel","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-mx-2","cl-d-print-none"],["src","assets/images/ui-icons/template.svg"],[1,"cl-component-divided-left","cl-d-flex","cl-text-dark","cl-text-decoration-none",3,"routerLink","fragment"],[1,"cl-cut-text-wrapper","cl-w-100","cl-d-flex","cl-justify-content-center","cl-justify-content-lg-start"],[1,"cl-cut-text",3,"title"],["class","cl-component-divided-left cl-w-100 cl-text-decoration-none cl-d-flex cl-align-items-center","fragment","status",3,"routerLink","cursor",4,"ngIf"],["class","cl-component-divided-left",4,"ngIf"],["fragment","status",1,"cl-component-divided-left","cl-w-100","cl-text-decoration-none","cl-d-flex","cl-align-items-center",3,"routerLink"],["class","cl-text-gray-9 cl-small",4,"ngIf"],[1,"cl-text-gray-9","cl-small"],[1,"cl-component-divided-left"],["fragment","status","class","cl-text-decoration-none cl-text-dark cl-d-flex cl-align-items-center cl-lh-1 cl-w-100 cl-component-divided-left",3,"routerLink","cursor",4,"ngIf","ngIfElse"],["noprogress",""],["fragment","status",1,"cl-text-decoration-none","cl-text-dark","cl-d-flex","cl-align-items-center","cl-lh-1","cl-w-100","cl-component-divided-left",3,"routerLink"],[1,"cl-pr-3","cl-d-flex","cl-align-items-center","cl-w-100"],[1,"cl-w-100",3,"percentage","showPercentageOutsideOfProgress"],[1,"cl-px-2","cl-d-flex","cl-align-items-center","cl-w-100"],["fragment","access",1,"cl-component-divided-left","cl-w-100","cl-hover-pointer","cl-text-dark","cl-text-decoration-none",3,"routerLink"],[1,"cl-d-flex","cl-justify-content-lg-end"],[1,"cl-component-divided-left","cl-hover-pointer"],[1,"cl-dropdown-star","cl-ml-0",3,"click"],["class","cl-dropdown cl-d-flex cl-justify-content-lg-end cl-hover-pointer","dropdown","",4,"ngIf"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-lg-end","cl-hover-pointer"],["closeDropdown","","role","button",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg","closeDropdown",""],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["popContent",""],["class","cl-dropdown-item","triggers","manual","placement","left","container","body",3,"ngbPopover","click",4,"ngIf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],[3,"click"],["triggers","manual","placement","left","container","body",1,"cl-dropdown-item",3,"ngbPopover","click"],["featurePopover","ngbPopover"]],template:function(e,t){if(1&e&&(S.Wc(0,Ae,1,0,"ng-container",0),S.Sb(1,"responsive-row",1,2),S.oc(3,"projectColumnDecider"),S.Wc(4,Re,7,9,"ng-template",null,3,S.Xc),S.Wc(6,Pe,4,4,"ng-template",null,4,S.Xc),S.Wc(8,Le,2,2,"ng-template",null,5,S.Xc),S.Wc(10,Ve,2,2,"ng-template",null,6,S.Xc),S.Wc(12,$e,3,2,"ng-template",null,7,S.Xc),S.Wc(14,Ge,2,2,"ng-template",null,8,S.Xc),S.Wc(16,ze,3,2,"ng-template",null,9,S.Xc),S.Wc(18,et,1,1,"ng-template",null,10,S.Xc)),2&e){const e=S.Lc(2),i=S.Lc(5),n=S.Lc(7),s=S.Lc(9),r=S.Lc(11),o=S.Lc(13),a=S.Lc(15),c=S.Lc(17),l=S.Lc(19);S.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",S.Bc(15,tt,t.labels)),S.Cb(1),S.wc("isDesktop",t.isDesktop)("templates",S.tc(3,5,S.Jc(17,it,[t.projectColumns,i,n,s,r,o,a,c,l])))("isExpanded",t.expandAll)}},directives:[D.B,Ie.a,D.u,O.f,B.a,B.s,B.v,je.a,L.a,N.a,x.L],pipes:[Te.a,Ee.a],encapsulation:2,changeDetection:0}),e})();var st=i("mXn0"),rt=i("kojQ"),ot=i("pLZG"),at=i("ZaaN"),ct=i("sNAh"),lt=i("Oieg"),ut=i("Tj/N"),dt=i("ePBx"),ht=i("nss9"),pt=i("2rWG"),bt=i("sbmM"),ft=i("qUN8"),mt=i("iNpZ"),gt=i("+dED"),vt=i("9ymm"),wt=i("Q+u6");const yt=["clientDropdown"];function Ct(e,t){1&e&&S.Sb(0,"div",49)}function kt(e,t){1&e&&S.Sb(0,"div",49)}const St=function(){return[]};function xt(e,t){if(1&e){const e=S.Yb();S.Xb(0,"dropdown-filter",50,51),S.jc("allSelected",(function(t){return S.Oc(e),S.nc().setAllSelected(t)}))("closeFilter",(function(t){return S.Oc(e),S.nc().closeFilter(t)})),S.Wb()}if(2&e){const e=S.nc();S.wc("entityList",e.usersAndUserGroupMaps)("selectedUsers",S.Ac(8,St))("onlyCheckbox",!1)("placeholder","Filter users or groups")("everyoneSelected",e.selectAll)("disableEveryoneEntry",!0)("showSelectAll",!0)("selectedUsers",e.selectedEntries)}}function Ot(e,t){1&e&&S.Sb(0,"div",49)}function Dt(e,t){1&e&&S.Sb(0,"div",49)}function It(e,t){if(1&e){const e=S.Yb();S.Xb(0,"select-client-dropdown",52),S.jc("choosenItem",(function(t){return S.Oc(e),S.nc().showItem(t)}))("withoutClient",(function(t){return S.Oc(e),S.nc().noClient(t)})),S.Wb()}if(2&e){const e=S.nc();S.wc("projectGroupingLabel",e.projectGroupingLabel)("selectedId",e.projectBulkEdit.clientId)}}function jt(e,t){1&e&&S.Sb(0,"div",49)}function Tt(e,t){1&e&&S.Sb(0,"div",49)}function Et(e,t){1&e&&S.Sb(0,"div",49)}function At(e,t){1&e&&S.Sb(0,"div",49)}let _t=(()=>{class e{constructor(e,t,i,n){this.authService=e,this.workspaceService=t,this.userGroupService=i,this.projectService=n,this.close=new S.n,this.updated=new S.n,this.visibility=!1,this.team=!1,this.color=!1,this.client=!1,this.billable=!1,this.isTeamDropdownOpen=!1,this.editPermission=!1,this.activeUsers=[],this.projectGroupingLabel="",this.selectAll=!1,this.unsubscribe$=new A.a,this.overwriteTeam=!1}ngOnInit(){this.numberOfProjects=this.projects.length.toString(),this.projectBulkEdit=new r.a,this.projectBulkEdit.estimate=new at.a,this.projectBulkEdit.clientId="",this.projectBulkEdit.memberships=[],this.projectBulkEdit.hourlyRate=new ct.a,this.projectBulkEdit.billable=!1,this.projectBulkEdit.public=!1,this.editPermission=this.authService.isAdminOrOwner(),this.addedUserIds=[],this.addedUserGroupIds=[],this.workspaceService.defaultWorkspace$.pipe(Object(ot.a)(e=>!!e),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.projectGroupingLabel=e.projectGroupingLabel,this.projectBulkEdit.clientName="Select "+this.projectGroupingLabel,this.workspaceId=e.id,this.workspaceCurrency=e.hourlyRate.currency}),this.workspaceService.activeUsers.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.activeUsers=e,this.userGroupService.getAllUserGroups()}),this.userGroupService.userGroups.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.userGroups=e,this.addUsersAndUserGroupsToMap(this.userGroups,this.activeUsers)}),this.workspaceService.getDefaultWorkspace(),this.workspaceService.getAllUsersForWorkspace()}addColor(e){this.projectBulkEdit.color=e}openTeamDropdown(){this.team&&(this.isTeamDropdownOpen=!0)}showItem(e){this.projectBulkEdit.clientId=e.id,this.projectBulkEdit.clientName=e.name,this.clientDropdown&&this.clientDropdown.closeDropdown()}noClient(e){this.projectBulkEdit.clientId="",this.projectBulkEdit.clientName=e}addUsersAndUserGroupsToMap(e,t){const i=[];(e=e.filter(e=>"Admins"!=e.name)).length>0&&i.push(this.fromEntityToMap(e,"Groups")),t.length>0&&i.push(this.fromEntityToMap(t,"Users")),this.usersAndUserGroupMaps=i}fromEntityToMap(e,t){return{key:t,value:e.map(e=>new R.a(e))}}closeFilter(e){this.deserializeMapToEntities(this.usersAndUserGroupMaps),this.isTeamDropdownOpen=!1}deserializeMapToEntities(e){this.transformMapsToIdsOfEntity(e),this.updateSelectedEntries()}transformMapsToIdsOfEntity(e){e&&e.forEach(e=>{"Groups"===e.key&&this.toUserGroupIds(e.value),"Users"===e.key&&this.toUsersIds(e.value)})}toUserGroupIds(e){this.addedUserGroupIds=e.filter(e=>e.selected).map(e=>new lt.a(e.entity).id)}toUsersIds(e){this.addedUserIds=e.filter(e=>e.selected).map(e=>new ut.a(e.entity).id)}editProjects(){try{const e=Number(this.projectBulkEdit.hourlyRate.amount.toString().replace(",","."));this.projectBulkEdit.hourlyRate.amount=e}catch(e){}this.projectService.updateMany(this.projects,this.getChangeFields(),this.projectBulkEdit,this.addedUserIds,this.addedUserGroupIds).pipe(Object(a.a)(this.unsubscribe$)).subscribe(()=>{this.updated.emit(!0)})}get isFormValid(){if(this.billable&&this.projectBulkEdit.billable){const e=this.projectBulkEdit.hourlyRate.amount;if(!Object(y.u)(e)||e<0)return!1}return!0}closeBulk(){this.close.emit(!0)}getChangeFields(){const e=[];return this.visibility&&e.push(ht.a.VISIBILITY),this.team&&this.overwriteTeam&&e.push(ht.a.MEMBERS),this.team&&!this.overwriteTeam&&e.push(ht.a.MEMBERS_ADD),this.client&&e.push(ht.a.CLIENT),this.color&&e.push(ht.a.COLOR),this.billable&&e.push(ht.a.BILLABLE),this.projectBulkEdit.hourlyRate&&this.projectBulkEdit.hourlyRate.amount&&e.push(ht.a.HOURLY_RATE),e}setAllSelected(e){this.selectAll=e}updateSelectedEntries(){this.selectedEntries=[...this.addedUserIds,...this.addedUserGroupIds]}}return e.\u0275fac=function(t){return new(t||e)(S.Rb(h.a),S.Rb(s.a),S.Rb(dt.a),S.Rb(o.a))},e.\u0275cmp=S.Lb({type:e,selectors:[["project-bulk-edit"]],viewQuery:function(e,t){var i;1&e&&S.ed(yt,!0),2&e&&S.Kc(i=S.kc())&&(t.clientDropdown=i.first)},inputs:{projects:"projects"},outputs:{close:"close",updated:"updated"},decls:98,vars:28,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-form-group","cl-row","cl-align-items-center"],[1,"cl-col-sm-3","cl-col-form-label"],[1,"cl-custom-control","cl-custom-control-inline","cl-custom-checkbox"],["type","checkbox","id","visibility-1","name","visibility",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","visibility-1",1,"cl-custom-control-label"],[1,"cl-col-sm-9"],["class","cl-blocker",4,"ngIf"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox","id","visibility-2","name","visibility2",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","visibility-2",1,"cl-custom-control-label"],[1,"cl-mt-0"],[1,"cl-form-group","cl-row"],["type","checkbox","id","team","name","team",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","team",1,"cl-custom-control-label"],[1,"cl-dropdown","cl-dropdown-large"],["type","button",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle",3,"click"],[3,"entityList","selectedUsers","onlyCheckbox","placeholder","everyoneSelected","disableEveryoneEntry","showSelectAll","allSelected","closeFilter",4,"ngIf"],[1,"cl-form-group","cl-row","cl-position-relative"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","nonBillable","name","defaultBillableProjects",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","nonBillable",1,"cl-custom-control-label"],["type","radio","id","billable","name","defaultBillableProjects",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","billable",1,"cl-custom-control-label"],["type","checkbox","id","client","name","client",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","client",1,"cl-custom-control-label",2,"text-transform","capitalize"],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex"],["clientDropdown","dropdownKey"],["dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-cut-text","cl-text-left","cl-dropdown-toggle"],["class","cl-dropdown-menu",3,"projectGroupingLabel","selectedId","choosenItem","withoutClient",4,"dropdownKeyContent"],["type","checkbox","id","color","name","color",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","color",1,"cl-custom-control-label"],[3,"editPermission","color"],["type","checkbox","id","bill","name","billable",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","bill",1,"cl-custom-control-label"],[1,"cl-col-sm-2"],["type","checkbox","id","bill1","name","billable1",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","bill1",1,"cl-custom-control-label"],[1,"cl-col-auto","cl-form-group","cl-mb-0"],[1,"cl-text-gray-9"],[1,"cl-col-sm-2","cl-form-group","cl-mb-0"],["type","text","name","billable2","autocomplete","off","inputNumber","",1,"cl-form-control",3,"disabled","ngModel","inputChange"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button","ngbAutofocus","",1,"cl-btn","cl-btn-primary",3,"disabled","click"],[1,"cl-blocker"],[3,"entityList","selectedUsers","onlyCheckbox","placeholder","everyoneSelected","disableEveryoneEntry","showSelectAll","allSelected","closeFilter"],["teamMemberFilter",""],[1,"cl-dropdown-menu",3,"projectGroupingLabel","selectedId","choosenItem","withoutClient"]],template:function(e,t){1&e&&(S.Xb(0,"div",0),S.Xb(1,"h1",1),S.Yc(2),S.Wb(),S.Xb(3,"button",2),S.jc("click",(function(){return t.closeBulk()})),S.Xb(4,"span"),S.Sb(5,"img",3),S.Wb(),S.Wb(),S.Wb(),S.Xb(6,"div",4),S.Xb(7,"form"),S.Xb(8,"div",5),S.Xb(9,"div",6),S.Xb(10,"div",7),S.Xb(11,"input",8),S.jc("ngModelChange",(function(e){return t.visibility=e})),S.Wb(),S.Xb(12,"label",9),S.Yc(13,"Visibillity"),S.Wb(),S.Wb(),S.Wb(),S.Xb(14,"div",10),S.Wc(15,Ct,1,0,"div",11),S.Xb(16,"div",12),S.Xb(17,"input",13),S.jc("ngModelChange",(function(e){return t.projectBulkEdit.public=e})),S.Wb(),S.Xb(18,"label",14),S.Yc(19,"Public (visible to the whole team)"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Sb(20,"hr",15),S.Sb(21,"hr",15),S.Xb(22,"div",16),S.Xb(23,"div",6),S.Xb(24,"div",7),S.Xb(25,"input",17),S.jc("ngModelChange",(function(e){return t.team=e})),S.Wb(),S.Xb(26,"label",18),S.Yc(27,"Access"),S.Wb(),S.Wb(),S.Wb(),S.Xb(28,"div",10),S.Wc(29,kt,1,0,"div",11),S.Xb(30,"div",19),S.Xb(31,"button",20),S.jc("click",(function(){return t.openTeamDropdown()})),S.Yc(32,"Select members"),S.Wb(),S.Wc(33,xt,2,9,"dropdown-filter",21),S.Wb(),S.Wb(),S.Wb(),S.Xb(34,"div",22),S.Wc(35,Ot,1,0,"div",11),S.Sb(36,"div",6),S.Xb(37,"div",10),S.Xb(38,"div",23),S.Xb(39,"input",24),S.jc("ngModelChange",(function(e){return t.overwriteTeam=e})),S.Wb(),S.Xb(40,"label",25),S.Yc(41,"Add to existing"),S.Wb(),S.Wb(),S.Xb(42,"div",23),S.Xb(43,"input",26),S.jc("ngModelChange",(function(e){return t.overwriteTeam=e})),S.Wb(),S.Xb(44,"label",27),S.Yc(45,"Overwrite existing"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Sb(46,"hr",15),S.Xb(47,"div",16),S.Xb(48,"div",6),S.Xb(49,"div",7),S.Xb(50,"input",28),S.jc("ngModelChange",(function(e){return t.client=e})),S.Wb(),S.Xb(51,"label",29),S.Yc(52),S.Wb(),S.Wb(),S.Wb(),S.Xb(53,"div",10),S.Wc(54,Dt,1,0,"div",11),S.Xb(55,"div",30,31),S.Xb(57,"button",32),S.Yc(58),S.Wb(),S.Wc(59,It,1,2,"select-client-dropdown",33),S.Wb(),S.Wb(),S.Wb(),S.Sb(60,"hr",15),S.Xb(61,"div",16),S.Xb(62,"div",6),S.Xb(63,"div",7),S.Xb(64,"input",34),S.jc("ngModelChange",(function(e){return t.color=e})),S.Wb(),S.Xb(65,"label",35),S.Yc(66,"Color"),S.Wb(),S.Wb(),S.Wb(),S.Xb(67,"div",10),S.Wc(68,jt,1,0,"div",11),S.Xb(69,"color-chooser",36),S.jc("color",(function(e){return t.addColor(e)})),S.Wb(),S.Wb(),S.Wb(),S.Sb(70,"hr",15),S.Xb(71,"div",5),S.Xb(72,"div",6),S.Xb(73,"div",7),S.Xb(74,"input",37),S.jc("ngModelChange",(function(e){return t.billable=e})),S.Wb(),S.Xb(75,"label",38),S.Yc(76,"Billable"),S.Wb(),S.Wb(),S.Wb(),S.Xb(77,"div",39),S.Wc(78,Tt,1,0,"div",11),S.Xb(79,"div",12),S.Xb(80,"input",40),S.jc("ngModelChange",(function(e){return t.projectBulkEdit.billable=e})),S.Wb(),S.Xb(81,"label",41),S.Yc(82,"Yes"),S.Wb(),S.Wb(),S.Wb(),S.Xb(83,"div",42),S.Wc(84,Et,1,0,"div",11),S.Xb(85,"span",43),S.Yc(86,"Billable rate"),S.Wb(),S.Wb(),S.Xb(87,"div",44),S.Wc(88,At,1,0,"div",11),S.Xb(89,"input",45),S.jc("inputChange",(function(e){return t.projectBulkEdit.hourlyRate.amount=e})),S.Wb(),S.Wb(),S.Xb(90,"div",42),S.Xb(91,"span",43),S.Yc(92),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(93,"div",46),S.Xb(94,"a",47),S.jc("click",(function(){return t.closeBulk()})),S.Yc(95,"Cancel"),S.Wb(),S.Xb(96,"button",48),S.jc("click",(function(){return t.editProjects()})),S.Yc(97,"Save"),S.Wb(),S.Wb()),2&e&&(S.Cb(2),S.ad("Bulk edit ",t.numberOfProjects," projects"),S.Cb(9),S.wc("ngModel",t.visibility),S.Cb(4),S.wc("ngIf",!t.visibility),S.Cb(2),S.wc("ngModel",t.projectBulkEdit.public),S.Cb(8),S.wc("ngModel",t.team),S.Cb(4),S.wc("ngIf",!t.team),S.Cb(4),S.wc("ngIf",t.isTeamDropdownOpen),S.Cb(2),S.wc("ngIf",!t.team),S.Cb(4),S.wc("value",!1)("ngModel",t.overwriteTeam),S.Cb(4),S.wc("value",!0)("ngModel",t.overwriteTeam),S.Cb(7),S.wc("ngModel",t.client),S.Cb(2),S.Zc(t.projectGroupingLabel),S.Cb(2),S.wc("ngIf",!t.client),S.Cb(4),S.Zc(t.projectBulkEdit.clientName),S.Cb(6),S.wc("ngModel",t.color),S.Cb(4),S.wc("ngIf",!t.color),S.Cb(1),S.wc("editPermission",t.color),S.Cb(5),S.wc("ngModel",t.billable),S.Cb(4),S.wc("ngIf",!t.billable),S.Cb(2),S.wc("ngModel",t.projectBulkEdit.billable),S.Cb(4),S.wc("ngIf",!t.billable),S.Cb(4),S.wc("ngIf",!t.billable),S.Cb(1),S.wc("disabled",!t.projectBulkEdit.billable)("ngModel",t.projectBulkEdit.hourlyRate.amount),S.Cb(3),S.Zc(t.workspaceCurrency),S.Cb(4),S.wc("disabled",!t.isFormValid))},directives:[B.I,B.t,B.u,B.a,B.s,B.v,D.u,B.A,B.c,pt.a,bt.a,ft.a,mt.a,gt.a,vt.a,wt.a],encapsulation:2}),e})();var Wt=i("AHJ+");const Rt=["deleteModal"];function Pt(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",21),S.Xb(1,"a",22),S.jc("click",(function(){S.Oc(e);const t=S.nc(),i=S.Lc(22);return t.openModal(i)})),S.Yc(2," Create new "),S.Xb(3,"span",23),S.Yc(4,"project"),S.Wb(),S.Wb(),S.Wb()}}function Mt(e,t){if(1&e){const e=S.Yb();S.Xb(0,"div",24),S.Xb(1,"tr",25),S.jc("emitBulkSelected",(function(){return S.Oc(e),S.nc().setIfSomeSelected()}))("emitProjectAction",(function(i){S.Oc(e);const n=t.$implicit;return S.nc().projectAction(i,n)})),S.Wb(),S.Wb()}if(2&e){const e=t.$implicit,i=S.nc();S.Cb(1),S.wc("project",e)("workspace",i.workspace)("isDesktop",i.isDesktop)("canSeeRates",i.canSeeRates)("labels",i.labels)("projectColumns",i.projectColumns)("onlyAdminsSeeProjectStatus",i.workspace.onlyAdminsSeeProjectStatus)("isAdmin",i.isAdminOrOwner)("managerPermissions",i.managerPermissions)("hasProjectTemplateFeature",i.hasProjectTemplateFeature)("hasCreatePermissions",i.hasCreatePermissions)("expandAll",i.expandAll)}}function Ft(e,t){if(1&e){const e=S.Yb();S.Xb(0,"new-project",26),S.jc("projectCreated",(function(i){S.Oc(e);const n=t.$implicit;return S.nc().addProjectToList(i),n.close()}))("close",(function(i){return S.Oc(e),t.$implicit.close(i)})),S.Wb()}if(2&e){const e=S.nc();S.wc("isAdminOrOwner",e.isAdminOrOwner)("workspace",e.workspace)}}function Xt(e,t){if(1&e&&(S.Xb(0,"span",30),S.Yc(1),S.Wb()),2&e){const e=S.nc(2);S.Cb(1),S.ad(" Warning: Approved time for '",e.selectedProject.name,"' will lose project information. ")}}function Lt(e,t){if(1&e){const e=S.Yb();S.Xb(0,"delete-confirm-modal",27),S.jc("onDelete",(function(){S.Oc(e);const i=t.$implicit;return S.nc().deleteProject(i)}))("onClose",(function(i){return S.Oc(e),t.$implicit.close(i)})),S.Wc(1,Xt,2,1,"span",28),S.Xb(2,"p",29),S.Yc(3),S.Wb(),S.Wb()}if(2&e){const e=S.nc();S.wc("title","Delete")("btnText","Delete")("showConfirmation",e.workspace.timeApprovalEnabled)("inProgress",e.inProgress),S.Cb(1),S.wc("ngIf",e.workspace.timeApprovalEnabled),S.Cb(2),S.ad(" ","The "+e.selectedProject.name+" project will also be removed from all time entries it is assigned to. This action cannot be reversed."," ")}}function Nt(e,t){if(1&e){const e=S.Yb();S.Xb(0,"project-bulk-edit",31),S.jc("close",(function(){return t.$implicit.close()}))("updated",(function(i){S.Oc(e);const n=t.$implicit;return S.nc().updatedMany(i),n.close()})),S.Wb()}if(2&e){const e=S.nc();S.wc("projects",e.bulkList)}}function Bt(e,t){if(1&e){const e=S.Yb();S.Xb(0,"delete-confirm-modal",32),S.jc("onDelete",(function(i){S.Oc(e);const n=t.$implicit,s=S.nc();return n.close(i),s.deleteMany()}))("onClose",(function(i){return S.Oc(e),t.$implicit.close(i)})),S.Xb(1,"p",33),S.Yc(2),S.Wb(),S.Xb(3,"p",29),S.Yc(4),S.Wb(),S.Wb()}if(2&e){const e=S.nc();S.wc("title","Delete")("btnText","Delete"),S.Cb(2),S.ad(" ","Are you sure you want to delete "+e.bulkList.length+" projects?"," "),S.Cb(2),S.ad(" ","Projects will also be removed from all time entries they are assigned to. This action cannot be reversed."," ")}}function Yt(e,t){if(1&e){const e=S.Yb();S.Xb(0,"simple-modal",34),S.jc("confirmed",(function(i){S.Oc(e);const n=t.$implicit,s=S.nc();return n.close(i),s.archiveMany(s.allArchived)}))("close",(function(i){return S.Oc(e),t.$implicit.close(i)})),S.Xb(1,"p",33),S.Yc(2),S.Wb(),S.Wb()}if(2&e){const e=S.nc();S.wc("title",e.allArchived?"Restore":"Archive")("isDanger",!0)("btnText",e.allArchived?"Restore":"Archive"),S.Cb(2),S.ad(" ","Are you sure you want to "+(e.allArchived?"restore ":"archive ")+e.bulkList.length+" projects?"," ")}}let Vt=(()=>{class e{constructor(e,t,i,n,s,r,o,a,c,l,d,h,p){this.workspaceService=e,this.authService=t,this.projectService=i,this.browserService=n,this.systemSettingsService=s,this.loader=r,this.cd=o,this.modalService=a,this.router=c,this.activatedRoute=l,this.uiSettingsService=d,this.projectsFilterStore=h,this.toaster=p,this.projects=[],this.bulkList=[],this.isAllSelected=!1,this.managerPermissions=[],this.showClearFilter=!1,this.unsubscribe$=new u.a}ngOnInit(){this.user=this.authService.getUser(),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasBulkEditFeature=this.workspace.hasFeature(k.a.BULK_EDIT),this.hasProjectTemplateFeature=this.workspace.hasFeature(k.a.PROJECT_TEMPLATES),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.canSeeRates=this.isAdminOrOwner||!this.workspace.onlyAdminsSeeBillableRates,this.canSeeProjectStatus=this.isAdminOrOwner||!this.workspace.onlyAdminsSeeProjectStatus,this.hasCreatePermissions=this.isAdminOrOwner||!this.workspace.onlyAdminsCreateProject,this.setBrowserWidth(),this.getParams(),this.systemSettingsService.getSystemSettings(),this.setLabels()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setBrowserWidth(){this.browserService.isBreakpointLg$.pipe(Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setPaginationUrl(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.navigate({page:this.page,limit:this.limit},!0,!1)}defaultFilter(){this.queryFilter=this.projectsFilterStore.defaultFilter(),this.queryFilter.sortColumn=this.sortColumn,this.queryFilter.sortOrder=this.sortOrder,this.queryFilter.page=this.page,this.queryFilter.limit=this.limit}clearFilter(){this.defaultFilter(),this.showClearFilter=!1,this.navigate(this.queryFilter,!0,!0)}applyFilter(e){this.page=1,e.page=this.page,this.navigate(e,!1,!0)}applySorting(e){this.sortColumn=e.sortBy,this.sortOrder=e.sortOrder,this.navigate({sortColumn:this.sortColumn,sortOrder:this.sortOrder},!0,!1)}getProjects(){this.loader.showBar(),this.queryFilter.containsClient&&!this.queryFilter.clients.length&&(this.queryFilter.clientStatus="ALL"),this.queryFilter.containsUser&&!this.queryFilter.users.length&&(this.queryFilter.userStatus="ALL"),this.projectService.getProjectsCount(this.queryFilter).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.total=e,this.cd.detectChanges(),this.browserService.scrollToTop()}),this.projectService.getProjects(this.queryFilter).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.projects=e,this.isAdminOrOwner||this.projectService.getAllAuthorizationsForUser(this.user.id,e.map(e=>e.id)).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.managerPermissions=e.filter(e=>"PROJECT_MANAGER"===e.name).map(e=>e.objectId),this.isManagerOfAnyProject=this.projects.some(e=>this.managerPermissions.indexOf(e.id)>-1),this.checkIfShouldShowStatusColumns(),this.cd.detectChanges()}),this.loader.hide(),this.checkIfShouldShowStatusColumns(),this.setIfSomeSelected()},()=>{this.loader.hide()})}projectAction(e,t){switch(this.selectedProject=t,e){case"archive":this.archiveProject();break;case"delete":this.openModal(this.deleteModal);break;case"template":this.setAsTemplate()}}openModal(e){this.modalService.open(e,{centered:!0})}deleteProject(e){this.inProgress=!0,this.projectService.deleteProject(this.selectedProject.id).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(()=>{this.inProgress=!1,e.close(),this.projects.splice(this.projects.indexOf(this.selectedProject),1),this.cd.detectChanges()},()=>this.inProgress=!1)}archiveProject(){const e=Object(y.e)(this.selectedProject);e.archived=!e.archived,this.projectService.updateProject(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.selectedProject.archived=e.archived,this.projects=this.projects.map(t=>t.id===e.id?(t.archived=e.archived,Object(y.e)(t)):t),this.cd.detectChanges()},e=>{this.toaster.pop("error",e&&e.error&&e.error.message)})}setAsTemplate(){this.hasProjectTemplateFeature&&(this.selectedProject.isTemplate=!this.selectedProject.isTemplate,this.projectService.updateIsProjectTemplate(this.selectedProject).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe())}bulkEdit(e){this.bulkList=this.projects.filter(e=>e.bulkSelected).map(e=>e.id),this.openModal(e)}updatedMany(e){e&&(this.page=0,this.someProjectsSelected=!1,this.isAllSelected=!1,this.getProjects())}archiveMany(e){const t=new r.a;t.archived=!e,this.projectService.updateMany(this.bulkList,["ARCHIVED"],t).pipe(Object(a.a)(this.unsubscribe$)).subscribe(()=>{this.projects.filter(e=>this.bulkList.indexOf(e.id)>-1).map(t=>t.archived=!e),this.selectAll(!1)})}deleteMany(){this.projectService.deleteMany(this.bulkList).pipe(Object(a.a)(this.unsubscribe$)).subscribe(e=>{const t=e.map(e=>e.id);this.projects=this.projects.filter(e=>-1===t.indexOf(e.id)),this.cd.markForCheck(),0===this.projects.length?this.getProjects():this.setIfSomeSelected()})}addProjectToList(e){this.projects.unshift(new r.a(e)),this.managerPermissions.push(e.id),this.checkIfShouldShowStatusColumns(),this.cd.detectChanges()}selectAll(e){this.isAllSelected=e,this.someProjectsSelected=e,this.projects=this.projects.map(t=>((t=new r.a(t)).bulkSelected=e,t)),this.setIfSomeSelected()}expandAllRows(e){this.expandAll=e,this.cd.detectChanges()}setIfSomeSelected(){0===this.projects.length?(this.allArchived=!1,this.someArchived=!1,this.someProjectsSelected=!1,this.isAllSelected=!1):(this.allArchived=this.projects.filter(e=>e.bulkSelected).every(e=>e.archived),this.someArchived=this.projects.filter(e=>e.bulkSelected).some(e=>e.archived),this.someProjectsSelected=this.projects.some(e=>e.bulkSelected),this.isAllSelected=this.projects.every(e=>e.bulkSelected)),this.cd.detectChanges()}checkIfShouldShowStatusColumns(){this.showStatusColumns=this.canSeeProjectStatus||this.projects.some(e=>this.managerPermissions.indexOf(e.id)>-1),this.setLabels(),this.cd.detectChanges()}addParamsToRoute(){const e=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({archived:this.queryFilter.archived},{clients:this.queryFilter.clients.length>0?this.queryFilter.clients.join(","):null}),{users:this.queryFilter.users.length>0?this.queryFilter.users.join(","):null}),{billable:this.queryFilter.billable}),{name:this.queryFilter.name||null}),{containsClient:this.queryFilter.containsClient}),{containsUser:this.queryFilter.containsUser}),{page:this.queryFilter.page}),{limit:this.queryFilter.limit}),{sortColumn:this.queryFilter.sortColumn}),{sortOrder:this.queryFilter.sortOrder}),t=this.router.createUrlTree([],{queryParams:e}),i=this.router.serializeUrl(t);this.router.navigateByUrl(i,{replaceUrl:!0})}updateLocalStorage(){this.uiSettingsService.setSettings(v.b.PROJECTS_DATA,{limit:this.limit,sortOrder:this.sortOrder,sortColumn:this.sortColumn})}getParams(){Object(d.a)(this.activatedRoute.queryParams.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)),this.projectsFilterStore.filter.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)),this.projectsFilterStore.changedWorkspaceIndicator.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$))).subscribe(([e,t,i])=>{const s=this.uiSettingsService.getSettings(v.b.PROJECTS_DATA)||{};this.page=Number(e.page)||1,this.limit=Number(e.limit)||Number(s.limit)||n.j,this.sortColumn=e.sortColumn||s.sortColumn||b.a.NAME,this.sortOrder=e.sortOrder||s.sortOrder||f.a.ASCENDING;const r=!Object(y.r)(e);this.navigate(Object.assign(Object.assign({},!i&&r?e:t),{page:this.page,limit:this.limit,sortColumn:this.sortColumn,sortOrder:this.sortOrder}),!1,r)})}fillQueryFilter(e){this.queryFilter||this.defaultFilter(),Object.keys(e).forEach(t=>{if("clients"===t||"users"===t){const i=Array.isArray(e[t])?e[t]:e[t].indexOf(",")>-1?e[t].split(","):[e[t]];this.queryFilter[t]=Object.assign([],i)}else this.queryFilter[t]="containsClient"!==t&&"containsUser"!==t||"string"!=typeof e[t]?e[t]:"true"===e[t]})}navigate(e,t,i){this.fillQueryFilter(e),t&&this.updateLocalStorage(),i&&this.projectsFilterStore.setFilter(this.queryFilter),this.addParamsToRoute(),this.getProjects(),this.cd.detectChanges()}setLabels(){this.labels=["Name",this.workspace.projectGroupingLabel],this.projectColumns=["col1","col2"],this.showStatusColumns&&(this.labels.push("Tracked"),this.projectColumns.push("col3"),this.canSeeRates&&(this.labels.push("Amount"),this.projectColumns.push("col4")),this.labels.push("Progress"),this.projectColumns.push("col5")),this.labels.push("Access"),this.projectColumns.push("col6"),this.workspace.projectFavorites&&(this.labels.push("Favorites"),this.projectColumns.push("col7")),(this.isAdminOrOwner||this.managerPermissions.length)&&(this.labels.push("Edit"),this.projectColumns.push("col8"))}}return e.\u0275fac=function(t){return new(t||e)(S.Rb(s.a),S.Rb(h.a),S.Rb(o.a),S.Rb(l.a),S.Rb(g.a),S.Rb(m.a),S.Rb(S.h),S.Rb(x.q),S.Rb(O.c),S.Rb(O.a),S.Rb(v.a),S.Rb(w.a),S.Rb(C.a))},e.\u0275cmp=S.Lb({type:e,selectors:[["projects"]],viewQuery:function(e,t){var i;1&e&&(S.ed(p.a,!0),S.ed(Rt,!0)),2&e&&(S.Kc(i=S.kc())&&(t.pager=i.first),S.Kc(i=S.kc())&&(t.deleteModal=i.first))},decls:31,vars:22,consts:[[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],[1,"cl-col","cl-d-print-none"],["class","cl-d-flex cl-align-items-center cl-justify-content-end",4,"ngIf"],[1,"cl-d-print-none",3,"projectGroupingLabel","filter","showClearFilter","emitFilter","emitClearFilters","showClearFilterChange"],[1,"cl-card","cl-border-bottom-0","cl-mb-0","cl-d-print-none"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],[1,"cl-projects-table","cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-6"],["projects-table-header","",3,"someProjectsSelected","allProjectsSelected","allArchived","someArchived","archivedFilter","hasBulkEditPermission","isAdminOrOwner","isManager","projectGroupingLabel","sortBy","sortOrder","isDesktop","labels","emitBulkEdit","emitArchive","emitDelete","emitSorting","emitProjectSelection","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-mt-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],["modalNewProject",""],["deleteModal",""],["bulkEditModal",""],["deleteManyModal",""],["archiveModal",""],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-end"],[1,"cl-btn","cl-btn-outline-primary",3,"click"],[1,"cl-d-none","cl-d-md-inline"],[1,"cl-row-hover-shadow"],["projects-table-row","",3,"project","workspace","isDesktop","canSeeRates","labels","projectColumns","onlyAdminsSeeProjectStatus","isAdmin","managerPermissions","hasProjectTemplateFeature","hasCreatePermissions","expandAll","emitBulkSelected","emitProjectAction"],[3,"isAdminOrOwner","name","taskName","workspace","projectCreated","close"],[3,"title","btnText","showConfirmation","inProgress","onDelete","onClose"],["class","cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],[1,"cl-text-muted","cl-cut-text-wrap"],[1,"cl-alert","cl-alert-warning","cl-justify-content-center"],[3,"projects","close","updated"],[3,"title","btnText","onDelete","onClose"],[1,"cl-h2","cl-cut-text-wrap"],[3,"title","isDanger","btnText","confirmed","close"]],template:function(e,t){if(1&e){const e=S.Yb();S.Xb(0,"main",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"div",3),S.Xb(4,"div",4),S.Xb(5,"h1"),S.Yc(6,"Projects"),S.Wb(),S.Wb(),S.Xb(7,"div",5),S.Wc(8,Pt,5,0,"div",6),S.Wb(),S.Wb(),S.Wb(),S.Xb(9,"projects-filter",7),S.jc("emitFilter",(function(e){return t.applyFilter(e)}))("emitClearFilters",(function(){return t.clearFilter()}))("showClearFilterChange",(function(e){return t.showClearFilter=e})),S.Wb(),S.Xb(10,"div",8),S.Xb(11,"div",9),S.Xb(12,"span",10),S.Yc(13,"Projects"),S.Wb(),S.Wb(),S.Wb(),S.Xb(14,"table",11),S.Xb(15,"thead"),S.Xb(16,"tr",12),S.jc("emitBulkEdit",(function(){S.Oc(e);const i=S.Lc(26);return t.bulkEdit(i)}))("emitArchive",(function(){S.Oc(e);const i=S.Lc(30);return t.bulkEdit(i)}))("emitDelete",(function(){S.Oc(e);const i=S.Lc(28);return t.bulkEdit(i)}))("emitSorting",(function(e){return t.applySorting(e)}))("emitProjectSelection",(function(e){return t.selectAll(e)}))("onExpandAll",(function(e){return t.expandAllRows(e)})),S.Wb(),S.Wb(),S.Xb(17,"tbody"),S.Wc(18,Mt,2,12,"div",13),S.Wb(),S.Wb(),S.Xb(19,"div",14),S.Xb(20,"pager",15),S.jc("pageChanged",(function(e){return t.setPaginationUrl(e)}))("limitChanged",(function(e){return t.setPaginationUrl(e)})),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wc(21,Ft,1,2,"ng-template",null,16,S.Xc),S.Wc(23,Lt,4,6,"ng-template",null,17,S.Xc),S.Wc(25,Nt,1,1,"ng-template",null,18,S.Xc),S.Wc(27,Bt,5,4,"ng-template",null,19,S.Xc),S.Wc(29,Yt,3,4,"ng-template",null,20,S.Xc)}2&e&&(S.Cb(8),S.wc("ngIf",t.hasCreatePermissions),S.Cb(1),S.wc("projectGroupingLabel",t.workspace.projectGroupingLabel)("filter",t.queryFilter)("showClearFilter",t.showClearFilter),S.Cb(7),S.wc("someProjectsSelected",t.someProjectsSelected)("allProjectsSelected",t.isAllSelected)("allArchived",t.allArchived)("someArchived",t.someArchived)("archivedFilter",null==t.queryFilter?null:t.queryFilter.archived)("hasBulkEditPermission",t.hasBulkEditFeature)("isAdminOrOwner",t.isAdminOrOwner)("isManager",t.isManagerOfAnyProject)("projectGroupingLabel",t.workspace.projectGroupingLabel)("sortBy",t.sortColumn)("sortOrder",t.sortOrder)("isDesktop",t.isDesktop)("labels",t.labels),S.Cb(2),S.wc("ngForOf",t.projects),S.Cb(2),S.wc("visible",t.total>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.total))},directives:[D.u,Q,Se,D.t,p.a,nt,st.a,rt.a,_t,Wt.a],encapsulation:2,changeDetection:0}),e})()},"8LU1":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return r}));var n=i("fXoL");function s(e){return null!=e&&""+e!="false"}function r(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function o(e){return Array.isArray(e)?e:[e]}function a(e){return e instanceof n.l?e.nativeElement:e}},"8XW9":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("ofXK"),s=i("3Pt+"),r=i("dlKe"),o=i("9Trn"),a=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.b,o.a]]}),e})()},"8pWl":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},"91AR":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){e&&(this.type=e.type,this.value=e.value,this.isChecked=e.isChecked,this.label=e.label)}sameWith(e){return this.isChecked===e.isChecked&&this.type===e.type&&this.value===e.value}updateValue(e){e&&(this.value=e.value,this.isChecked=e.isChecked)}}},"9AGB":function(e,t,i){"use strict";var n=i("w5QO");function s(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:n.noop}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e)},t.pipeFromArray=s},"9Eqt":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("wd/R"),s=i("fXoL");let r=(()=>{class e{transform(e,t){return n.utc(e).format(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"momentUtcFormat",type:e,pure:!0}),e})()},"9G2T":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("B4wx"),r=i("fXoL");let o=(()=>{class e{transform(e,t){const i=t&&t===s.a.HOUR12?"h:mm A":"HH:mm";return"Started on "+n(e).format("MMM DD, YYYY")+", at "+n(e).format(i||"h:mm A")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"formatStart",type:e,pure:!0}),e})()},"9Gc3":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("2rWG"),s=i("fXoL");let r=(()=>{class e{constructor(e){this.parent=e}set disableDropdown(e){"boolean"==typeof e&&this.parent&&(this.parent.disableClose=e)}forceClose(){this.parent&&this.parent.forceClose()}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(n.a))},e.\u0275dir=s.Mb({type:e,selectors:[["","disableCloseDropdownKey",""]],inputs:{disableDropdown:["disableCloseDropdownKey","disableDropdown"]},exportAs:["forceDropdown"]}),e})()},"9O0/":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},"9Trn":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},"9a6x":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("Ymxs");class s{constructor(e){this.forceTasks=e.forceTasks,this.forceProjects=!!e.canSeeTimeSheet||e.forceProjects,this.forceTags=!e.canSeeTimeSheet&&e.forceTags,this.forceDescription=!e.canSeeTimeSheet&&e.forceDescription,this.favoriteProjectsEnabled=e.projectFavorites,this.taskRequired=e.forceTasks,this.onlyAdminCanCreateProjects=e.onlyAdminsCreateProject,this.projectGroupingLabel=e.projectGroupingLabel}}var r=i("1Tmk"),o=i("pLZG"),a=i("fXoL");let c=(()=>{class e{constructor(e,t){this.toaster=e,this.workspaceService=t,this.subscribeToForceOptions()}subscribeToForceOptions(){this.workspaceDefaltSub=this.workspaceService.defaultWorkspace$.pipe(Object(o.a)(e=>!!e)).subscribe(e=>{this.forceOptions=new s(e)})}isValid(e,t){const i=[],n=t||this.forceOptions;return n&&n.forceDescription&&!e.description&&i.push("description"),!n||!n.forceTags||e.tags&&e.tags.length>0||i.push("tag"),!n||!n.forceProjects||e.project&&e.project.id||i.push("project"),!(n&&n.forceTasks&&e.project&&e.project.tasks&&e.project.tasks.length>0)||e.task&&e.task.id||i.push("task"),!(i.length>0&&(this.toaster.pop("error","This entry can't be saved, please add "+i.join(", ")+"."),1))}validateDescription(e){return!(this.forceOptions&&this.forceOptions.forceDescription&&!e&&(this.toaster.pop("error","This entry can't be saved, please add description."),1))}validateTag(e){return!(this.forceOptions&&this.forceOptions.forceTags&&!(e&&e.length>0)&&(this.toaster.pop("error","This entry can't be saved, please add a tag."),1))}validateProjectAndTask(e){const t=[],i=e.workspace?e.workspace:this.forceOptions;return!i||!i.forceProjects||e.project&&e.project.id||t.push("project"),!(e.project&&e.project.tasks&&e.project.tasks.length>0&&i&&i.forceTasks)||e.task&&e.task.id||t.push("task"),!(t.length>0&&(this.toaster.pop("error","This entry can't be saved, please add a "+t.join(", ")+"."),1))}ngOnDestroy(){this.workspaceDefaltSub&&this.workspaceDefaltSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.fc(n.a),a.fc(r.a))},e.\u0275prov=a.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"9lpP":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("ofXK"),s=i("3Pt+"),r=i("gr2/"),o=i("1kSV"),a=i("tZA+"),c=i("tyNb"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.ab,a.a,o.M,c.g]]}),e})()},"9ymm":function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("fXoL"),s=i("YjdQ"),r=i("1+cd"),o=(i("k2Yt"),i("ofXK")),a=i("dlKe"),c=i("3Pt+"),l=i("e0xV"),u=i("okBH"),d=i("BhhM");const h=["focusInput"];function p(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"input",9,10),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).inputValue=t})),n.Wb(),n.Ub()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("ngModel",e.inputValue)("placeholder",e.placeholder)}}function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",11),n.Xb(1,"input-search",12),n.jc("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.inputValue=t,i.searchChanged()})),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("debounceTime",300)("autofocus",!0)("search",e.inputValue)("placeholder",e.placeholder)}}function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",16),n.Xb(1,"div",17),n.jc("click",(function(){return n.Oc(e),n.nc(3).toggleSelect()})),n.Xb(2,"input",18),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(3).checkboxMark=t})),n.Wb(),n.Xb(3,"label",19),n.jc("click",(function(){return n.Oc(e),n.nc(3).everyoneCheck()})),n.Yc(4),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(2),n.wc("ngModel",e.checkboxMark)("indeterminate",!e.everyoneSelected&&e.anySelected&&!e.reminderAllSelected)("checked",e.everyoneSelected),n.Cb(2),n.ad(" ",e.isReminder?"Everyone (including new users)":"Select all"," ")}}function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",16),n.Xb(1,"div",17),n.jc("click",(function(){return n.Oc(e),n.nc(3).reminderSelect()})),n.Xb(2,"input",20),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(3).reminderCheckbox=t})),n.Wb(),n.Xb(3,"label",19),n.jc("click",(function(){return n.Oc(e),n.nc(3).checkAllReminder()})),n.Yc(4,"Select all"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(2),n.wc("ngModel",e.reminderCheckbox)("indeterminate",!e.reminderAllSelected&&e.anySelected&&!e.everyoneSelected)("checked",e.reminderAllSelected)("disabled",e.everyoneSelected)}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",24),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc().$implicit;return n.nc(3).toggleCheckBox(i,s.key)})),n.Xb(1,"div",25),n.Sb(2,"input",26),n.Xb(3,"label",27),n.Xb(4,"div",28),n.Yc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(4);n.Cb(2),n.wc("checked",e.selected)("disabled",i.shouldDisable(e)),n.Cb(3),n.ad(" ",null==e.entity.name?e.entity.email:e.entity.name,"")}}function v(e,t){if(1&e&&(n.Xb(0,"div",21),n.Xb(1,"div",22),n.Yc(2),n.Wb(),n.Wc(3,g,6,3,"div",23),n.oc(4,"sortBy"),n.oc(5,"filter"),n.Wb()),2&e){const e=t.$implicit,i=n.nc(3);n.Cb(2),n.Zc(e.key),n.Cb(1),n.wc("ngForOf",n.qc(4,2,n.rc(5,5,e.value,i.inputValue,i.nameMapper),i.sortByNameMapper))}}function w(e,t){if(1&e&&(n.Vb(0),n.Wc(1,f,5,4,"div",13),n.Wc(2,m,5,4,"div",13),n.Xb(3,"div",14),n.Wc(4,v,6,9,"div",15),n.Wb(),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",e.showSelectAll),n.Cb(1),n.wc("ngIf",e.isReminder),n.Cb(2),n.wc("ngForOf",e.entityList)}}function y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",3),n.Xb(1,"div",4),n.Wc(2,p,3,2,"ng-container",5),n.Wc(3,b,2,4,"ng-template",null,6,n.Xc),n.Wb(),n.Xb(5,"div",7),n.jc("scrolled",(function(){return n.Oc(e),n.nc().scrolling()})),n.Wc(6,w,5,3,"ng-container",8),n.Wb(),n.Wb()}if(2&e){const e=n.Lc(4),t=n.nc();n.Cb(2),n.wc("ngIf",!t.isExternalSearch)("ngIfElse",e),n.Cb(3),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(1),n.wc("ngIf",!!t.entityList)}}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",35),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc().$implicit;return n.nc(2).toggleCheckBox(i,s.key)}))("keyup.enter",(function(){const e=t.$implicit;return e.selected=!e.selected}))("keyup.space",(function(){const e=t.$implicit;return e.selected=!e.selected})),n.Sb(1,"div",36),n.Xb(2,"span",37),n.jc("blur",(function(){n.Oc(e);const i=t.$implicit;return n.nc().i===i.entity.length})),n.Yc(3),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(),s=i.$implicit,r=i.i;n.Hb("dropdown-filter--values__disabled",e.isDisabled),n.Cb(1),n.Hb("tick",e.selected&&!e.isDisabled)("check-box__disabled",e.isDisabled)("disabled-tick","Selected projects"==s.key),n.Cb(1),n.Hb("dropdown-filter__item__disabled",e.isDisabled)("disabled-name","Selected projects"==s.key),n.xc("tabindex",r),n.Cb(1),n.ad(" ",e.entity," ")}}function k(e,t){if(1&e&&(n.Xb(0,"div",33),n.Wc(1,C,4,14,"div",34),n.oc(2,"filter"),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.wc("ngForOf",n.rc(2,1,e.value,i.inputValue,i.nameMapper))}}function S(e,t){if(1&e&&(n.Xb(0,"div",29),n.Xb(1,"div",30),n.Xb(2,"div",31),n.Wc(3,k,3,5,"div",32),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(3),n.wc("ngForOf",e.entityList)}}let x=(()=>{class e{constructor(e,t){this.reminderService=e,this.cd=t,this.checkboxMark=!1,this.canOpen=!0,this.disableEveryoneEntry=!1,this.isExternalSearch=!1,this.totalEntities=0,this.closeFilter=new n.n,this.allSelected=new n.n,this.allSelectedReminder=new n.n,this.onSearchChange=new n.n,this.onOpen=new n.n,this.onScroll=new n.n,this.savedSelectedElements=[],this.anySelected=!1,this.firstTime=!0,this.sortByNameMapper=e=>null!=e.entity.name?e.entity.name:e.entity.email}get entityList(){return this._entityList}set entityList(e){e&&(this._entityList=e,this.checkSelected())}get selectedUsers(){return this._selectedUsers}set selectedUsers(e){e&&(this._selectedUsers=e,this.anySelected=e.length>0&&"everyone"!==e[0],this.checkSelected())}ngOnInit(){this.onOpen.emit(!0)}ngAfterViewInit(){this.focusSearchInput&&this.focusSearchInput.nativeElement.focus()}closeDropDownFilter(e){!this.isReminder||this.everyoneSelected||!this.isEditing||this.anySelected||this.reminderAllSelected?(e.stopPropagation(),this.showSelectAll&&this.everyoneSelected&&!this.disableEveryoneEntry&&(this.savedSelectedElements=[{key:"Everyone",value:[new s.a({id:"everyone"},!0)]}]),this.closeFilter.emit(this.savedSelectedElements),this.showSelectAll&&this.allSelected.emit(this.everyoneSelected),this.allSelectedReminder.emit(this.reminderAllSelected)):this.reminderService.toastForEmptyTeam(!1)}toggleSelect(){this.checkboxMark=!this.checkboxMark,this.anySelected=!1,this.checkboxMark?this.selectAll():this.deselectAll()}reminderSelect(){this.everyoneSelected||(this.reminderCheckbox=!this.reminderCheckbox,this.anySelected=!1,this.reminderCheckbox?this.selectAll():this.deselectAll(),this.savedSelectedElements=[],this.savedSelectedElements=this.entityList)}selectAll(){this.entityList.forEach(e=>e.value.forEach(e=>e.selected=!0)),this.cd.detectChanges()}deselectAll(){this.entityList.forEach(e=>e.value.forEach(e=>e.selected=!1)),this.cd.detectChanges()}nameMapper(e){return e.entity.name}toggleCheckBox(e,t){if(e.isDisabled)return;e.selected=!e.selected;const i=this.savedSelectedElements.filter(e=>e.key===t)[0].value;i.some(t=>t.entity.id===e.entity.id)?i.filter(t=>t.entity.id===e.entity.id)[0].selected=e.selected:i.push(e),this.showSelectAll&&(this.everyoneSelected=!1,this.anySelected=!!this.savedSelectedElements.filter(e=>e.value.some(e=>e.selected)).length,this.setAllReminder()),this.cd.detectChanges(),this.shouldDisable(e)}everyoneCheck(){this.everyoneSelected=!this.everyoneSelected,this.reminderAllSelected=!1,this.cd.detectChanges()}checkAllReminder(){this.everyoneSelected||(this.reminderAllSelected=!this.reminderAllSelected,this.cd.detectChanges())}shouldDisable(e){if(this.adminGroup){if(this.ownerId!=this.currentUserId&&this.isUserAdmin&&e.selected)return e.isDisabled=!0,!0;if(e.entity.id===this.ownerId)return e.isDisabled=!0,!0}return"Admins"===e.entity.name&&this.ownerId!=this.currentUserId&&this.isUserAdmin||"Admins"===e.entity.name&&this.ownerId==this.user.id||this.isReminder&&this.everyoneSelected?(e.isDisabled=!0,!0):(e.isDisabled=!1,!1)}searchChanged(){this.savedSelectedElements.forEach(e=>e.value.forEach(e=>{const t=this.selectedUsers.indexOf(e.entity.id);t<0&&e.selected&&this.selectedUsers.push(e.entity.id),t>0&&!e.selected&&this.selectedUsers.splice(t,1)})),this.onSearchChange.emit(this.inputValue)}scrolling(){this.onScroll.emit()}checkSelected(){this.selectedUsers&&this.entityList&&(this.entityList.forEach(e=>{e.value.forEach(e=>{e.selected=this.selectedUsers.indexOf(e.entity.id)>-1||"everyone"===this.selectedUsers[0],"Admins"===e.entity.name&&this.ownerId===this.user.id&&(e.isDisabled=!0)})}),this.cd.detectChanges(),this.firstTime&&(this.instantiateSavedList(),this.firstTime=!1),this.everyoneSelected||"everyone"===this.selectedUsers[0]?this.toggleSelect():this.reminderAllSelected&&this.reminderSelect())}instantiateSavedList(){this.savedSelectedElements=this.entityList.map(e=>({key:e.key,value:this.selectedUsers?e.value.filter(e=>this.selectedUsers.indexOf(e.entity.id)>-1):[]}))}setAllReminder(){this.isReminder&&(this.reminderAllSelected=this.totalEntities===this.savedSelectedElements[0].value.filter(e=>e.selected).length+this.savedSelectedElements[1].value.filter(e=>e.selected).length)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(r.a),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-filter"]],viewQuery:function(e,t){var i;1&e&&n.ed(h,!0),2&e&&n.Kc(i=n.kc())&&(t.focusSearchInput=i.first)},inputs:{canOpen:"canOpen",entityList:"entityList",placeholder:"placeholder",onlyCheckbox:"onlyCheckbox",isReminder:"isReminder",selectedUsers:"selectedUsers",isEditing:"isEditing",ownerId:"ownerId",user:"user",showSelectAll:"showSelectAll",everyoneSelected:"everyoneSelected",reminderAllSelected:"reminderAllSelected",currentUserId:"currentUserId",isUserAdmin:"isUserAdmin",adminGroup:"adminGroup",disableEveryoneEntry:"disableEveryoneEntry",isExternalSearch:"isExternalSearch",totalEntities:"totalEntities"},outputs:{closeFilter:"closeFilter",allSelected:"allSelected",allSelectedReminder:"allSelectedReminder",onSearchChange:"onSearchChange",onOpen:"onOpen",onScroll:"onScroll"},decls:3,vars:2,consts:[[1,"invisible--container__level-1",3,"click"],["class","cl-dropdown-menu cl-prevent-close",4,"ngIf"],["class","dropdown-filter--container time-audit__filter-container",4,"ngIf"],[1,"cl-dropdown-menu","cl-prevent-close"],[1,"cl-dropdown-menu-header"],[4,"ngIf","ngIfElse"],["external",""],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],[4,"ngIf"],["type","text","autocomplete","off",1,"cl-form-control",3,"ngModel","placeholder","ngModelChange"],["focusInput",""],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","autofocus","search","placeholder","onSearchChange"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-border-bottom cl-border-light",4,"ngIf"],[1,"cl-dropdown-section-wrapper"],["class","cl-dropdown-section",4,"ngFor","ngForOf"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-border-bottom","cl-border-light"],[1,"cl-custom-control","cl-custom-checkbox",3,"click"],["type","checkbox",1,"cl-custom-control-input","cl-checkbox-custom-state",3,"ngModel","indeterminate","checked","ngModelChange"],[1,"cl-custom-control-label",3,"click"],["type","checkbox",1,"cl-custom-control-input","cl-checkbox-custom-state",3,"ngModel","indeterminate","checked","disabled","ngModelChange"],[1,"cl-dropdown-section"],[1,"cl-dropdown-header","cl-h5"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",3,"click",4,"ngFor","ngForOf"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper",3,"click"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"checked","disabled"],[1,"cl-custom-control-label"],[1,"cl-cut-text"],[1,"dropdown-filter--container","time-audit__filter-container"],["id","time-audit__filter-custom",1,"dropdown-filter","dropdown-filter--custom"],[1,"dropdown-filter__list"],["class","dropdown-filter__item--container",4,"ngFor","ngForOf"],[1,"dropdown-filter__item--container"],["class","dropdown-filter--values",3,"dropdown-filter--values__disabled","click","keyup.enter","keyup.space",4,"ngFor","ngForOf"],[1,"dropdown-filter--values",3,"click","keyup.enter","keyup.space"],[1,"check-box"],[1,"dropdown-filter__item",3,"tabindex","blur"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.jc("click",(function(e){return t.closeDropDownFilter(e)})),n.Wb(),n.Wc(1,y,7,6,"div",1),n.Wc(2,S,4,1,"div",2)),2&e&&(n.Cb(1),n.wc("ngIf",!t.onlyCheckbox),n.Cb(1),n.wc("ngIf",t.entityList&&t.canOpen&&t.onlyCheckbox))},directives:[o.u,a.a,c.c,c.s,c.v,l.a,o.t,c.a],pipes:[u.a,d.a],encapsulation:2,changeDetection:0}),e})()},AEYL:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("XNiG"),s=i("fXoL");let r=(()=>{class e{constructor(){this.removedUserFromProject$=new n.a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac}),e})()},"AHJ+":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("ofXK");function r(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",5),n.Xb(1,"h1",6),n.Yc(2),n.Wb(),n.Xb(3,"button",7),n.jc("click",(function(){return n.Oc(e),n.nc().close.emit()})),n.Xb(4,"span",8),n.Sb(5,"img",9),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.Zc(e.title)}}const o=["*"];let a=(()=>{class e{constructor(){this.btnText="ok",this.btnCancel="Cancel",this.close=new n.n,this.confirmed=new n.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["simple-modal"]],inputs:{title:"title",btnText:"btnText",btnCancel:"btnCancel",isDanger:"isDanger",inProgress:"inProgress"},outputs:{close:"close",confirmed:"confirmed"},ngContentSelectors:o,decls:8,vars:5,consts:[["class","cl-modal-header",4,"ngIf"],[1,"cl-modal-body"],[1,"cl-modal-footer"],[3,"click"],["ngbAutofocus","","type","button",1,"cl-btn",3,"disabled","ngClass","click"],[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"]],template:function(e,t){1&e&&(n.vc(),n.Wc(0,r,6,1,"div",0),n.Xb(1,"div",1),n.uc(2),n.Wb(),n.Xb(3,"div",2),n.Xb(4,"a",3),n.jc("click",(function(){return t.close.emit()})),n.Yc(5),n.Wb(),n.Xb(6,"button",4),n.jc("click",(function(){return t.confirmed.emit()})),n.Yc(7),n.Wb(),n.Wb()),2&e&&(n.wc("ngIf",t.title),n.Cb(5),n.Zc(t.btnCancel),n.Cb(1),n.wc("disabled",t.inProgress)("ngClass",t.isDanger?"cl-btn-danger":"cl-btn-primary"),n.Cb(1),n.Zc(t.btnText))},directives:[s.u,s.r],encapsulation:2}),e})()},AHy6:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{constructor(){this.onClose=new n.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["modal-header"]],inputs:{title:"title"},outputs:{onClose:"onClose"},decls:6,vars:1,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"h1",1),n.Yc(2),n.Wb(),n.Xb(3,"button",2),n.jc("click",(function(){return t.onClose.emit()})),n.Xb(4,"span",3),n.Sb(5,"img",4),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.Cb(2),n.Zc(t.title))},encapsulation:2,changeDetection:0}),e})()},AIwn:function(e,t,i){"use strict";i.d(t,"a",(function(){return me}));var n=i("fXoL"),s=i("XNiG"),r=i("avDW"),o=i("1G5W"),a=i("xoOP"),c=i("Ymxs"),l=i("9a6x"),u=(i("iO9P"),i("yK97")),d=i("1Tmk"),h=i("OmiP"),p=(i("GidR"),i("Vpr3")),b=i("hkzH"),f=i("lGQG"),m=i("lvCY"),g=(i("IQK1"),i("VYrk")),v=i("dMTz"),w=i("1kSV"),y=i("ofXK"),C=i("5SNR"),k=i("3Pt+"),S=i("2rWG"),x=i("pCWH"),O=i("qUN8"),D=i("Nu56"),I=i("sbmM"),j=i("4Seb"),T=i("GAki"),E=i("MPSC"),A=i("FfKB"),_=i("kKK/"),W=i("62PR"),R=i("6GAr"),P=i("AHJ+"),M=i("tyNb"),F=i("rg2B"),X=i("Lwft");const L=["dropdown"];function N(e,t){1&e&&n.Tb(0)}function B(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",31),n.Xb(1,"input",32),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(3).timeEntry.bulkEdit=t}))("change",(function(){n.Oc(e);const t=n.nc(3);return t.selectChange(t.timeEntry.bulkEdit)})),n.Wb(),n.Sb(2,"label",33),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(1),n.xc("id",e.timeEntry.id),n.wc("disabled",e.disableEdit)("ngModel",e.timeEntry.bulkEdit),n.Cb(1),n.xc("for",e.timeEntry.id)}}function Y(e,t){if(1&e&&(n.Vb(0),n.Wc(1,B,3,4,"div",30),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",!e.disableEdit)}}function V(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input-duration",34),n.jc("timeChanged",(function(t){return n.Oc(e),n.nc(2).dateTimeChanged(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("ngbTooltip",e.isRounding?"Editing time is not allowed while rounding is turned on.":"")("disable",e.isRounding||e.disableEdit)("format",e.format)("timeInterval",e.timeEntry.timeInterval)}}function U(e,t){if(1&e){const e=n.Yb();n.Xb(0,"project-picker",35,36),n.jc("selectedProjectAndTask",(function(t){return n.Oc(e),n.nc(2).selectProjectAndTask(t)}))("onResize",(function(t){return n.Oc(e),n.Lc(1).onResizeChange(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("selectedProject",e.timeEntry.project)("selectedTask",e.timeEntry.task)("hideWorkspaces",!0)}}function H(e,t){if(1&e){const e=n.Yb();n.Xb(0,"tag-dropdown",37),n.jc("close",(function(t){return n.Oc(e),n.nc(2).selectTags(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("resizeableName","tagPicker")("resizeToLeft",!0)("entryTags",e.timeEntry.tags)}}function $(e,t){if(1&e&&(n.Xb(0,"span",38),n.Yc(1," Invoiced "),n.Wb()),2&e){const e=n.nc(2);n.xc("title",e.timeEntry.invoiceTooltip)}}function G(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",13),n.Xb(1,"div",14),n.Wc(2,Y,2,1,"ng-container",15),n.Xb(3,"div",16),n.Xb(4,"input",17,18),n.jc("focus",(function(){n.Oc(e);const t=n.nc();return t.backupDescription=t.timeEntry.description}))("ngModelChange",(function(t){return n.Oc(e),n.nc().timeEntry.description=t}))("change",(function(){return n.Oc(e),n.nc().updateDescription()}))("keyup.enter",(function(){return n.Oc(e),n.Lc(5).blur()})),n.Wb(),n.Xb(6,"div",19),n.Yc(7),n.Wb(),n.Wb(),n.Xb(8,"div",20),n.Wc(9,V,1,4,"input-duration",21),n.Wb(),n.Wb(),n.Xb(10,"div",22),n.Xb(11,"div",23),n.Sb(12,"div",24),n.Wc(13,U,2,3,"project-picker",25),n.Wb(),n.Wb(),n.Xb(14,"div",26),n.Sb(15,"tag-names-text-only",27),n.Wc(16,H,1,3,"tag-dropdown",28),n.Wb(),n.Wc(17,$,2,1,"span",29),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("ngIf",!e.sharedReport),n.Cb(2),n.wc("placeholder",e.sharedReport?"No description":"Add description")("disabled",!e.sharedReport&&e.disableEdit)("readOnly",e.sharedReport)("ngModel",e.timeEntry.description),n.Db("title",e.timeEntry.description),n.Cb(3),n.ad(" ",e.timeEntry.description," "),n.Cb(2),n.wc("ngIf",!e.isDesktop),n.Cb(2),n.wc("dropdownKey",e.disableEdit),n.Cb(1),n.wc("isDisabled",e.disableEdit)("project",e.timeEntry.project)("task",e.timeEntry.task)("projectData",e.projectData),n.Cb(2),n.wc("dropdownKey",e.disableEdit),n.Cb(1),n.wc("tags",e.timeEntry.tags)("hideAddingTags",e.disableEdit),n.Cb(2),n.wc("ngIf",e.invoicingEnabled&&e.timeEntry.hasInvoice)}}function z(e,t){1&e&&(n.Vb(0),n.Yc(1," - "),n.Ub())}function q(e,t){if(1&e&&(n.Yc(0),n.oc(1,"roundIfWholeNumber"),n.oc(2,"centsToDollars")),2&e){const e=n.nc(2);n.ad(" ",n.pc(1,1,n.pc(2,3,e.timeEntry.amount))," ")}}function K(e,t){if(1&e&&(n.Xb(0,"div",39),n.Xb(1,"div",40),n.Wc(2,z,2,0,"ng-container",41),n.Wc(3,q,3,5,"ng-template",null,42,n.Xc),n.Wb(),n.Wb()),2&e){const e=n.Lc(4),t=n.nc();n.Cb(1),n.Db("title",t.amountTooltip),n.Cb(1),n.wc("ngIf",t.hideAmount)("ngIfElse",e)}}function Z(e,t){if(1&e){const e=n.Yb();n.Xb(0,"billable-icon",43),n.jc("changed",(function(t){return n.Oc(e),n.nc().changeBillable(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("disableEdit",e.disableEdit)("billable",e.timeEntry.billable)}}function J(e,t){if(1&e&&(n.Xb(0,"div",46),n.Xb(1,"div",47),n.Xb(2,"span",48),n.Yc(3),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(3),n.Zc(e.timeEntry.user.name||e.timeEntry.user.email)}}function Q(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",49,50),n.Xb(2,"dropdown-items",51,52),n.jc("onFilterOptionChange",(function(t){return n.Oc(e),n.nc(2).onFilterChange(t)}))("onChanged",(function(t){n.Oc(e);const i=n.Lc(1);return n.nc(2).userChanged(t,i)}))("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreUsers()}))("onOpen",(function(){return n.Oc(e),n.nc(2).open()})),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2),t=n.Lc(22);n.wc("ngbPopover",t),n.Cb(2),n.wc("enableSearch",!0)("list",e.users)("type","DROPDOWN")("filterQuery",e.query)("placeholder","Search users")("initLabel",e.timeEntry.user.name||e.timeEntry.user.email)("itemLabel",e.timeEntry.user.name||e.timeEntry.user.email)("value",e.timeEntry.user.id)("offlineSearch",!1)}}function ee(e,t){if(1&e&&(n.Wc(0,J,4,1,"div",44),n.Wc(1,Q,4,10,"ng-template",null,45,n.Xc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.disableEdit||!t.isAdminOrOwner)("ngIfElse",e)}}function te(e,t){if(1&e){const e=n.Yb();n.Xb(0,"single-date-picker2",53),n.jc("pickedDate",(function(t){return n.Oc(e),n.nc().dateTimeChanged(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("ngbTooltip",e.isRounding&&!e.disableManualModeEdit?"Editing time is not allowed while rounding is turned on.":"")("textualDate",!0)("disableEdit",e.isRounding||e.disableEdit||e.disableManualModeEdit)("removeOpacity",e.sharedReport)("mode","time_only")("dateTime",e.timeEntry.timeInterval)("timeFormat",e.timeFormat)("dateFormat",e.dateFormat)("timeZone",e.timeZone)}}function ie(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",54),n.Xb(1,"input-duration",55),n.jc("timeChanged",(function(t){return n.Oc(e),n.nc().dateTimeChanged(t)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.isRounding&&!e.disableManualModeEdit?"Editing time is not allowed while rounding is turned on.":"")("disable",e.isRounding||e.disableEdit||e.disableManualModeEdit)("removeOpacity",e.sharedReport)("format",e.format)("timeInterval",e.timeEntry.timeInterval)}}function ne(e,t){1&e&&n.Sb(0,"img",61)}function se(e,t){1&e&&n.Sb(0,"img",62)}function re(e,t){if(1&e&&(n.Xb(0,"div",58),n.Wc(1,ne,1,0,"img",59),n.Wc(2,se,1,0,"ng-template",null,60,n.Xc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(2);n.Cb(1),n.wc("ngIf",t.timeEntry.approvalRequestId)("ngIfElse",e)}}function oe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",72,73),n.jc("keyup.enter",(function(){n.Oc(e);const t=n.Lc(1);return n.nc(4).duplicateEntry(t)}))("keyup.space",(function(){n.Oc(e);const t=n.Lc(1);return n.nc(4).duplicateEntry(t)}))("click",(function(){n.Oc(e);const t=n.Lc(1);return n.nc(4).duplicateEntry(t)})),n.Yc(2," Duplicate "),n.Wb()}if(2&e){const e=n.nc(4),t=n.Lc(20);n.wc("ngbPopover",t),n.Db("clickCloseDropdown",e.showUpgradeToEnable?null:"")}}function ae(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",69),n.Xb(1,"list-items"),n.Wc(2,oe,3,2,"a",70),n.Xb(3,"a",71),n.jc("keyup.enter",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(18);return t.openDeleteModal(i)}))("keyup.space",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(18);return t.openDeleteModal(i)}))("click",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(18);return t.openDeleteModal(i)})),n.Yc(4," Delete "),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(2),n.wc("ngIf",e.isAdminOrOwner)}}function ce(e,t){1&e&&(n.Xb(0,"div",63),n.Xb(1,"div",64),n.Sb(2,"img",65),n.Wb(),n.Wc(3,ae,5,1,"div",66),n.Sb(4,"span",67,68),n.Wb())}function le(e,t){if(1&e&&(n.Wc(0,re,4,2,"div",56),n.Wc(1,ce,6,0,"ng-template",null,57,n.Xc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.disableEdit)("ngIfElse",e)}}function ue(e,t){if(1&e){const e=n.Yb();n.Xb(0,"simple-modal",74),n.jc("confirmed",(function(){n.Oc(e);const i=t.$implicit;return n.nc().confirmDelete(i)}))("close",(function(i){return n.Oc(e),t.$implicit.close(i)})),n.Yc(1," Are you sure you want to delete entry? "),n.Wb()}if(2&e){const e=n.nc();n.wc("title","Delete")("inProgress",e.inProgress)("isDanger",!0)("btnText","Delete")}}const de=function(){return["/upgrade"]};function he(e,t){1&e&&(n.Yc(0," BASIC feature "),n.Xb(1,"a",75),n.Yc(2,"Upgrade"),n.Wb()),2&e&&(n.Cb(1),n.wc("routerLink",n.Ac(1,de)))}function pe(e,t){1&e&&(n.Xb(0,"a",75),n.Yc(1,"Upgrade"),n.Wb(),n.Yc(2," to add time for others\n")),2&e&&n.wc("routerLink",n.Ac(1,de))}const be=function(e){return{labels:e}},fe=function(e,t,i,n,s,r,o){return[e,t,i,n,s,r,o]};let me=(()=>{class e{constructor(e,t,i,r,o,a,c,l){this.cd=e,this.trackerService=t,this.toaster=i,this.modalService=r,this.authService=o,this.entryHelper=a,this.workspaceService=c,this.reportService=l,this.onSelectChange=new n.n,this.onDelete=new n.n,this.onDuplicate=new n.n,this.onEarnedChange=new n.n,this.labels=["","amount","billing","user","time","duration","edit"],this.unsubscribe$=new s.a,this.AmountOptions=v.a,this.users=[],this.query={},this.sortByTagNameMapper=e=>e.name}ngOnInit(){this.resetQuery(),this.currentUserEntry=!!this.authService.getUser()&&this.authService.getUser().id===this.timeEntry.user.id}ngAfterViewInit(){this.cd.detectChanges()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get showUpgradeToEnable(){return!this.currentUserEntry&&this.isAdminOrOwner&&!this.hasAddTimeForOthersFeature}get amountTooltip(){return this.onlyAdminsSeeBillableRates&&!this.isAdminOrOwner?"":this.amountOption===v.a.EARNED&&this.timeEntry.billable?"Billable rate: "+this.timeEntry.hourlyRate/100:this.amountOption===v.a.COST?"Cost rate: "+this.timeEntry.costRate/100:this.amountOption===v.a.PROFIT?`Billable rate: ${this.timeEntry.hourlyRate/100}\nCost rate: `+this.timeEntry.costRate/100:""}get hideAmount(){return!(!this.onlyAdminsSeeBillableRates||this.isAdminOrOwner)||this.amountOption===v.a.HIDE_AMOUNT||this.amountOption===v.a.EARNED&&!this.timeEntry.billable}get disableManualModeEdit(){return this.disableManualMode&&!this.isAdminOrOwner}selectChange(e){this.onSelectChange.emit(e)}userChanged(e,t){if(!this.hasAddTimeForOthersFeature)return t.open(),void this.dropdownItems.setValue(this.timeEntry.user.id);this.timeEntry.user.id=e,this.trackerService.updateUser(this.timeEntry.id,e).subscribe(e=>{this.timeEntry.updateHourlyRateAndEarned({hourlyRate:e.hourlyRate&&e.hourlyRate.amount,costRate:e.costRate&&e.costRate.amount,type:this.amountOption}),this.onEarnedChange.emit(),this.cd.markForCheck()})}open(){this.getUsers(this.query)}onFilterChange(e){this.resetQuery(),this.query.email=e.searchTerm,this.reachedLimit=!1,this.getUsers(this.query)}resetQuery(){this.query={page:1,limit:m.f,name:"",sortColumn:"name",statuses:[b.k.ACTIVE]},this.reachedLimit=!1}loadMoreUsers(){this.query.page++,this.getUsers(this.query)}getUsers(e){this.reachedLimit||this.workspaceService.getUsers(e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(({count:t,users:i})=>{1===e.page&&(this.users=[]);const n=i.map(e=>new h.a(e.id,e.name||e.email+" (not joined yet)"));this.users.push.apply(this.users,n),this.reachedLimit=this.users.length>=t||i.length<e.limit,this.cd.markForCheck(),this.dropdownItems&&this.dropdownItems.triggerDetection()})}updateDescription(){this.timeEntry.description=Object(a.G)(this.timeEntry.description,this.toaster),this.entryHelper.validateDescription(this.timeEntry.description)?this.trackerService.updateDescription(this.timeEntry.id,this.timeEntry.description).pipe(Object(o.a)(this.unsubscribe$)).subscribe(()=>{}):this.timeEntry.description=this.backupDescription}selectProjectAndTask(e){Object(a.E)(this.timeEntry,e,this.workspaceService.getLocalDefaultWorkspace());const t=this.timeEntry.billable;this.trackerService.updateProjectAndTask(this.timeEntry).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.timeEntry.billable=e.billable,this.timeEntry.updateHourlyRateAndEarned({hourlyRate:e.hourlyRate&&e.hourlyRate.amount,costRate:e.costRate&&e.costRate.amount,type:this.amountOption}),this.onEarnedChange.emit(),t!==this.timeEntry.billable&&this.totalInfo.changeBillableTime({duration:this.timeEntry.timeInterval.duration,isBillable:this.timeEntry.billable}),this.timeEntry.customFieldValues=e.customFieldValues.map(e=>new g.a(e)),this.cd.markForCheck()})}selectTags(e){this.entryHelper.validateTag(e)&&(this.timeEntry.tags=e,this.cd.markForCheck(),this.trackerService.updateTags(this.timeEntry.id,e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{}))}changeBillable(e){if(this.timeEntry.billable===e)return;this.timeEntry.billable=e;const t=this.timeEntry.timeInterval.duration;this.trackerService.updateBillable(this.timeEntry.id,e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(i=>{this.timeEntry.billable=i.billable,this.timeEntry.updateHourlyRateAndEarned({hourlyRate:i.hourlyRate&&i.hourlyRate.amount,costRate:i.costRate&&i.costRate.amount,type:this.amountOption}),this.totalInfo.changeBillableTime({duration:t,isBillable:e}),this.onEarnedChange.emit(),this.cd.markForCheck()})}setIsSelected(e){this.disableEdit||(this.timeEntry.bulkEdit=e,this.cd.markForCheck())}dateTimeChanged(e){const t=new u.a(this.timeEntry.timeInterval),i=this.timeEntry.billable;this.timeEntry.timeInterval=e,this.trackerService.editTimeInterval(this.timeEntry.id,e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.timeEntry.timeInterval=e.timeInterval;const n=new u.a(e.timeInterval);this.totalInfo.entryDurationChanged(t,n,i),this.timeEntry.refreshEarned(this.amountOption),this.onEarnedChange.emit(),this.cd.markForCheck()},e=>{this.timeEntry.timeInterval=t,this.cd.markForCheck()})}openDeleteModal(e){this.modalService.open(e,{centered:!0})}confirmDelete(e){this.inProgress=!0,this.trackerService.deleteTimeEntry(this.timeEntry).pipe(Object(o.a)(this.unsubscribe$)).subscribe(()=>{this.inProgress=!1,e.close(),this.onDelete.emit(this.timeEntry)},()=>{this.inProgress=!1,e.close()})}duplicateEntry(e){this.showUpgradeToEnable?e.isOpen()?e.close():e.open():this.reportService.duplicateTimeEntry(this.timeEntry).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.onDuplicate.next(e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(r.a),n.Rb(c.a),n.Rb(w.q),n.Rb(f.a),n.Rb(l.a),n.Rb(d.a),n.Rb(p.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["detailed-row"],["","detailed-row",""]],viewQuery:function(e,t){var i;1&e&&n.ed(L,!0),2&e&&n.Kc(i=n.kc())&&(t.dropdownItems=i.first)},inputs:{hasAddTimeForOthersFeature:"hasAddTimeForOthersFeature",totalInfo:"totalInfo",isDesktop:"isDesktop",timeEntry:"timeEntry",projectData:"projectData",isRounding:"isRounding",isAdminOrOwner:"isAdminOrOwner",disableEdit:"disableEdit",sharedReport:"sharedReport",onlyAdminsSeeBillableRates:"onlyAdminsSeeBillableRates",expandAll:"expandAll",amountOption:"amountOption",format:"format",customFields:"customFields",disableManualMode:"disableManualMode",dateFormat:"dateFormat",timeFormat:"timeFormat",timeZone:"timeZone",invoicingEnabled:"invoicingEnabled"},outputs:{onSelectChange:"onSelectChange",onDelete:"onDelete",onDuplicate:"onDuplicate",onEarnedChange:"onEarnedChange"},decls:23,vars:15,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","isExpanded","templates"],["responsive",""],["col1",""],["col3",""],["col4",""],["col5",""],["col6",""],["col7",""],["col8",""],["deleteModal",""],["popContent",""],["popContentAddTime",""],[1,"cl-d-lg-custom-flex","cl-align-items-center","cl-w-100","cl-mr-n4","cl-mr-lg-n3"],[1,"cl-d-flex","cl-align-items-center","cl-reports-desc"],[4,"ngIf"],[1,"cl-fake-input-wrapper","cl-cut-text","cl-w-100","cl-mr-2"],["type","text","tabindex","0","autocomplete","off","spellcheck","true",1,"cl-form-control","cl-input-description",3,"placeholder","disabled","readOnly","ngModel","focus","ngModelChange","change","keyup.enter"],["description",""],[1,"cl-form-control","cl-fake-input"],[1,"cl-mr-0","cl-mr-md-n1","cl-mr-lg-n2"],["placement","bottom",3,"ngbTooltip","disable","format","timeInterval","timeChanged",4,"ngIf"],[1,"cl-d-flex","cl-cut-text-wrapper","cl-pr-4","cl-pr-lg-custom-0","cl-my-1","cl-my-lg-custom-0","cl-reports-project"],["tabCell","",1,"cl-dropdown","cl-dropdown-large","cl-cut-text-wrapper",3,"dropdownKey"],["project-picker-label","",1,"cl-cut-text","cl-w-100-hidden",3,"isDisabled","project","task","projectData"],["openUpAtBottom","","class","cl-dropdown-menu","resizeable","",3,"selectedProject","selectedTask","hideWorkspaces","selectedProjectAndTask","onResize",4,"dropdownKeyContent"],["tabCell","",1,"cl-pl-lg-custom-1","cl-px-lg-custom-2","cl-reports-tags","cl-relative",3,"dropdownKey"],["dropdownKeyButton","","tabindex","0",1,"cl-d-flex","cl-justify-content-lg-custom-end","pointer",3,"tags","hideAddingTags"],["openUpAtBottom","","resizeable","","class","cl-dropdown-menu cl-entry-tag-dropdown cl-lg-custom-down-l-0",3,"resizeableName","resizeToLeft","entryTags","close",4,"dropdownKeyContent"],["class","cl-badge-status-green cl-badge-approve cl-text-capitalize cl-mr-2",3,"title",4,"ngIf"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"disabled","id","ngModel","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],["placement","bottom",3,"ngbTooltip","disable","format","timeInterval","timeChanged"],["openUpAtBottom","","resizeable","",1,"cl-dropdown-menu",3,"selectedProject","selectedTask","hideWorkspaces","selectedProjectAndTask","onResize"],["projectPicker",""],["openUpAtBottom","","resizeable","",1,"cl-dropdown-menu","cl-entry-tag-dropdown","cl-lg-custom-down-l-0",3,"resizeableName","resizeToLeft","entryTags","close"],[1,"cl-badge-status-green","cl-badge-approve","cl-text-capitalize","cl-mr-2",3,"title"],[1,"cl-component-divided-left","cl-cut-text","cl-w-100"],[1,"cl-w-100","cl-text-center","cl-text-lg-left","cl-text-lg-custom-right"],[4,"ngIf","ngIfElse"],["amountTemplate",""],[1,"cl-component-divided-left",3,"disableEdit","billable","changed"],["class","cl-dropdown",4,"ngIf","ngIfElse"],["usersDropdownTemplate",""],[1,"cl-dropdown"],[1,"cl-component-divided-left","cl-w-100"],[1,"cl-cut-text"],["triggers","manual","placement","left","container","body",3,"ngbPopover"],["changeUserPopover","ngbPopover"],[1,"cl-component-divided-left","cl-d-flex","cl-d-report-user-dropdown",3,"enableSearch","list","type","filterQuery","placeholder","initLabel","itemLabel","value","offlineSearch","onFilterOptionChange","onChanged","loadMore","onOpen"],["dropdown",""],["placement","bottom",1,"cl-d-flex","cl-justify-content-between",3,"ngbTooltip","textualDate","disableEdit","removeOpacity","mode","dateTime","timeFormat","dateFormat","timeZone","pickedDate"],[1,"cl-component-divided-left","cl-align-self-center","cl-d-flex"],["placement","bottom",3,"ngbTooltip","disable","removeOpacity","format","timeInterval","timeChanged"],["class","cl-text-center",4,"ngIf","ngIfElse"],["optionsTemplate",""],[1,"cl-text-center"],["title","Entry is approved","src","assets/ui-icons/checkmark-green-circle.svg",4,"ngIf","ngIfElse"],["lockIconTemplate",""],["title","Entry is approved","src","assets/ui-icons/checkmark-green-circle.svg"],["title","Can't edit locked entries. Contact your admin for more information.","src","assets/images/ui-icons/locked.svg"],["dropdownKey","","tabCell","",1,"cl-dropdown"],["dropdownKeyButton","","tabindex","0",1,"pointer","cl-non-selectable","cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["openUpAtBottom","","class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownKeyContent"],["tabFocus","","tabindex","0"],["tabFocusDuplicate",""],["openUpAtBottom","",1,"cl-dropdown-menu","cl-dropdown-menu-right"],["class","cl-dropdown-item","triggers","manual","placement","left","container","body","tabindex","-1",3,"ngbPopover","keyup.enter","keyup.space","click",4,"ngIf"],["tabindex","-1","clickCloseDropdown","",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],["triggers","manual","placement","left","container","body","tabindex","-1",1,"cl-dropdown-item",3,"ngbPopover","keyup.enter","keyup.space","click"],["featurePopover","ngbPopover"],[3,"title","inProgress","isDanger","btnText","confirmed","close"],["doNotCloseDropdown","",3,"routerLink"]],template:function(e,t){if(1&e&&(n.Wc(0,N,1,0,"ng-container",0),n.Sb(1,"responsive-row",1,2),n.Wc(3,G,18,17,"ng-template",null,3,n.Xc),n.Wc(5,K,5,3,"ng-template",null,4,n.Xc),n.Wc(7,Z,1,2,"ng-template",null,5,n.Xc),n.Wc(9,ee,3,2,"ng-template",null,6,n.Xc),n.Wc(11,te,1,9,"ng-template",null,7,n.Xc),n.Wc(13,ie,2,5,"ng-template",null,8,n.Xc),n.Wc(15,le,3,2,"ng-template",null,9,n.Xc),n.Wc(17,ue,2,4,"ng-template",null,10,n.Xc),n.Wc(19,he,3,2,"ng-template",null,11,n.Xc),n.Wc(21,pe,3,2,"ng-template",null,12,n.Xc)),2&e){const e=n.Lc(2),i=n.Lc(4),s=n.Lc(6),r=n.Lc(8),o=n.Lc(10),a=n.Lc(12),c=n.Lc(14),l=n.Lc(16);n.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.Bc(5,be,t.labels)),n.Cb(1),n.wc("isDesktop",t.isDesktop)("isExpanded",t.expandAll)("templates",n.Hc(7,fe,i,s,r,o,a,c,l))}},directives:[y.B,C.a,y.u,k.c,k.s,k.v,S.a,x.a,O.a,D.a,I.a,k.a,j.a,w.Z,T.a,E.a,A.a,w.L,_.a,W.a,R.a,P.a,M.f],pipes:[F.a,X.a],encapsulation:2,changeDetection:0}),e})()},AY7I:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{static required(e){return!e.value||"string"==typeof e.value&&!e.value.trim()?{required:!0}:null}static requiredFalse(e){return e.value?{requiredFalse:!0}:null}static differentThan(e){return t=>t.value===e?{differentThan:!0}:null}static minLength(e){return t=>!t.value||"string"==typeof t.value&&t.value.trim().length<e?{minlength:!0}:null}static maxLength(e){return t=>t.value&&"string"==typeof t.value&&t.value.trim().length>e?{maxlength:!0}:null}static minAmount(e){return t=>t.value&&t.value.length<e?{minamount:!0}:null}static maxAmount(e){return t=>t.value&&t.value.length>e?{maxamount:!0}:null}static domain(){return e=>{if(e.value){const t=e.value;if(!new RegExp("^[0-9A-Za-z]+$").test(t))return{domain:!0}}return null}}}},AmrI:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.USERS="USERS",e.MANAGERS="MANAGERS",e.ADMINS="ADMINS",e}({})},B01t:function(e,t,i){"use strict";i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return a}));var n=i("fXoL"),s=(i("eHjp"),i("EVdn")),r=i.n(s);let o=(()=>{let e=class{constructor(){this.settings={}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),a=(()=>{let e=class{constructor(e,t,i){this.input=e,this.config=t,this.differs=i,this.targetOptions={},this._differ={},this.options={},this.selected=new n.n,this.cancelDaterangepicker=new n.n,this.applyDaterangepicker=new n.n,this.hideCalendarDaterangepicker=new n.n,this.showCalendarDaterangepicker=new n.n,this.hideDaterangepicker=new n.n,this.showDaterangepicker=new n.n,this._differ.options=this.differs.find(this.options).create(),this._differ.settings=this.differs.find(this.config.settings).create()}ngAfterViewInit(){this.render(),this.attachEvents()}ngDoCheck(){let e=this._differ.options.diff(this.options),t=this._differ.settings.diff(this.config.settings);(e||t)&&(this.render(),this.attachEvents(),this.activeRange&&this.datePicker&&(this.datePicker.setStartDate(this.activeRange.start),this.datePicker.setEndDate(this.activeRange.end)))}ngOnDestroy(){this.destroyPicker()}render(){if(this.targetOptions=Object.assign({},this.config.settings,this.options),r()(this.input.nativeElement).daterangepicker(this.targetOptions,this.callback.bind(this)),this.options.customClasses&&this.options.customClasses.length)for(let e of this.options.customClasses)this.datePicker=r()(this.input.nativeElement).data("daterangepicker").container.addClass(e);else this.datePicker=r()(this.input.nativeElement).data("daterangepicker")}callback(e,t,i){this.activeRange={start:e,end:t,label:i},this.selected.emit(this.activeRange)}destroyPicker(){try{r()(this.input.nativeElement).data("daterangepicker").remove()}catch(e){console.log(e.message)}}attachEvents(){r()(this.input.nativeElement).on("cancel.daterangepicker",(e,t)=>{this.cancelDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("apply.daterangepicker",(e,t)=>{this.applyDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("hideCalendar.daterangepicker",(e,t)=>{this.hideCalendarDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("showCalendar.daterangepicker",(e,t)=>{this.showCalendarDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("hide.daterangepicker",(e,t)=>{this.hideDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("show.daterangepicker",(e,t)=>{this.showDaterangepicker.emit({event:e,picker:t})})}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(o),n.Rb(n.t))},e.\u0275dir=n.Mb({type:e,selectors:[["","daterangepicker",""]],inputs:{options:"options"},outputs:{selected:"selected",cancelDaterangepicker:"cancelDaterangepicker",applyDaterangepicker:"applyDaterangepicker",hideCalendarDaterangepicker:"hideCalendarDaterangepicker",showCalendarDaterangepicker:"showCalendarDaterangepicker",hideDaterangepicker:"hideDaterangepicker",showDaterangepicker:"showDaterangepicker"}}),e})(),c=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[]]}),e})()},B1Fc:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("Ymxs"),r=i("3Pt+");let o=(()=>{class e{constructor(e,t,i,s,r){this.element=e,this.renderer=t,this.viewContainer=i,this.toaster=s,this.model=r,this.errorToast=!0,this.errorHighlight=!1,this.invalidInput=new n.n,this.errorClass="cl-is-invalid",this.onFocus=()=>{this.renderer.removeClass(this.element.nativeElement,this.errorClass)}}ngOnInit(){this.errorHighlight&&(this.listenerFn=this.renderer.listen(this.element.nativeElement,"focus",this.onFocus))}ngOnDestroy(){this.listenerFn&&this.listenerFn()}clearErrors(){this.templateError&&this.viewContainer.clear(),this.renderer.removeClass(this.element.nativeElement,this.errorClass)}handleError(e,t){this.errorToast&&!t&&this.toaster.pop("error",e),this.errorHighlight&&this.renderer.addClass(this.element.nativeElement,this.errorClass),this.templateError&&this.viewContainer.createEmbeddedView(this.templateError),this.invalidInput.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.l),n.fc(n.F),n.fc(n.P),n.fc(s.a),n.fc(r.v))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})()},BO2n:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.WORKSPACE="WORKSPACE",e.WORKSPACE_MEMBER="WORKSPACE_MEMBER",e.PROJECT="PROJECT",e.PROJECT_MEMBER="PROJECT_MEMBER",e.TASK="TASK",e}({})},BhhM:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n){return t&&i?e.filter(e=>{return n=i(e),s=t,!(!n||!s)&&-1!==n.toLowerCase().indexOf(s.toLowerCase());var n,s}):e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"filter",type:e,pure:!0}),e})()},BuEj:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.SUMMARY="SUMMARY",e.DETAILED="DETAILED",e.WEEKLY="WEEKLY",e}({})},"C+R2":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("fXoL"),s=(i("NTZZ"),i("XNiG")),r=i("lvCY"),o=i("XLnJ"),a=i("iO9P"),c=i("uX6w"),l=i("vqWo"),u=i("ofXK"),d=i("AIwn"),h=i("pOhx"),p=i("aDua");function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"tr",10),n.Xb(1,"td",11),n.Xb(2,"custom-fields-values",12,13),n.jc("entryChanged",(function(t){return n.Oc(e),n.nc().$implicit.customFieldValues=t})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.Lc(3),t=n.nc().$implicit,i=n.nc();n.Cb(1),n.Hb("cl-remove-padding-and-border",!e.customFieldValuesModified.length),n.Cb(1),n.wc("timeEntryId",t.id)("customFields",i.customFields)("disableEdit",!0)("projectId",null==t.project?null:t.project.id)("customFieldValues",t.customFieldValues)}}function f(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",7),n.Sb(2,"tr",8),n.Wc(3,b,4,7,"tr",9),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.nc();n.Cb(2),n.wc("onlyAdminsSeeBillableRates",i.report.workspace.onlyAdminsSeeBillableRates)("isAdminOrOwner",i.isAdminOrOwner)("totalInfo",i.detailedResponse.totals)("timeEntry",e)("customFields",i.customFields)("expandAll",i.expandAll)("format",i.format)("projectData",i.projectData)("disableEdit",!0)("sharedReport",!0)("isRounding",i.report.filters.rounding)("amountOption",i.report.filters.amountOptions)("dateFormat",i.report.filters.dateFormat||i.report.user.dateFormat)("timeFormat",i.report.filters.timeFormat||i.report.user.timeFormat)("timeZone",i.report.filters.timeZone||i.report.user.timeZone)("isDesktop",i.isDesktop),n.Cb(1),n.wc("ngIf",null==i.customFields?null:i.customFields.length)}}function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"pager",14),n.jc("pageChanged",(function(t){return n.Oc(e),n.nc().setPagination(t)}))("limitChanged",(function(t){return n.Oc(e),n.nc().setPagination(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("page",e.pagination.page)("limit",e.pagination.pageSize)("total",e.detailedResponse.totals.entriesCount)}}let g=(()=>{class e{constructor(){this.sortingUpdated=new n.n,this.paginationUpdated=new n.n,this.export=new n.n,this.pagination={},this.ExportType=o.a,this.unsubscribe$=new s.a}set detailedResponse(e){e&&(this._detailedResponse=e,this.initData())}get detailedResponse(){return this._detailedResponse}ngOnInit(){this.initData(),this.showPagination=this.detailedResponse.timeentries.length>=r.j||this.detailedResponse.timeentries.length>=this.pagination.pageSize}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}initData(){this.projectData=new a.a(null,null),this.sortData={sortOrder:this.report.filters.sortOrder,sortColumn:this.report.filters.sortColumn.toString()},this.pagination.page=this.report.filters.page,this.pagination.pageSize=this.report.filters.pageSize}setPagination(e){this.pagination.page=e.page||this.pagination.page,this.pagination.pageSize=e.limit||this.pagination.pageSize,this.paginationUpdated.emit(this.pagination)}columnOrderChanged(e){this.sortingUpdated.emit(e)}expandAllRows(e){this.expandAll=e}exportReport(e){this.export.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["shared-report-detailed"]],inputs:{report:"report",isAdminOrOwner:"isAdminOrOwner",format:"format",isDesktop:"isDesktop",detailedResponse:"detailedResponse",customFields:"customFields"},outputs:{sortingUpdated:"sortingUpdated",paginationUpdated:"paginationUpdated",export:"export"},decls:9,vars:15,consts:[[1,"cl-card","cl-border-bottom-0","cl-mb-0",3,"amountOption","totalNumberOfEntries","isCostRateActive","isRounding","totalInfo","canSeeRates","workspaceInfo","isShared","exportAsPdf","exportAsCsv","exportAsExcel"],[1,"cl-page-component-wrapper"],[1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-responsive","cl-text-gray-6","cl-detailed-reports-table"],["detailed-header","",3,"numberOfEntries","isDesktop","amountOption","sortOrder","sortColumn","onExpandAll","onChange"],["detailedHeader",""],[4,"ngFor","ngForOf"],[3,"page","limit","total","pageChanged","limitChanged",4,"ngIf"],[1,"cl-row-hover-shadow","cl-shared-reports"],["detailed-row","",3,"onlyAdminsSeeBillableRates","isAdminOrOwner","totalInfo","timeEntry","customFields","expandAll","format","projectData","disableEdit","sharedReport","isRounding","amountOption","dateFormat","timeFormat","timeZone","isDesktop"],["class","cl-disabled",4,"ngIf"],[1,"cl-disabled"],["colspan","8",1,"cl-py-0","cl-border-top-0","cl-detailed-reports-custom-fields-row"],[3,"timeEntryId","customFields","disableEdit","projectId","customFieldValues","entryChanged"],["ref",""],[3,"page","limit","total","pageChanged","limitChanged"]],template:function(e,t){1&e&&(n.Xb(0,"table-info",0),n.jc("exportAsPdf",(function(){return t.exportReport(t.ExportType.PDF)}))("exportAsCsv",(function(){return t.exportReport(t.ExportType.CSV)}))("exportAsExcel",(function(){return t.exportReport(t.ExportType.XLSX)})),n.Wb(),n.Xb(1,"div",1),n.Xb(2,"table",2),n.Xb(3,"thead"),n.Xb(4,"tr",3,4),n.jc("onExpandAll",(function(e){return t.expandAllRows(e)}))("onChange",(function(e){return t.columnOrderChanged(e)})),n.Wb(),n.Wb(),n.Xb(6,"tbody"),n.Wc(7,f,4,17,"ng-container",5),n.Wb(),n.Wb(),n.Wb(),n.Wc(8,m,1,3,"pager",6)),2&e&&(n.wc("amountOption",t.report.filters.amountOptions)("totalNumberOfEntries",t.detailedResponse.totals.entriesCount)("isCostRateActive",t.report.workspace.costRateActive)("isRounding",t.report.filters.rounding)("totalInfo",t.detailedResponse.totals)("canSeeRates","HIDE_AMOUNT"!=t.report.filters.amountOptions)("workspaceInfo",t.report.workspace)("isShared",!0),n.Cb(4),n.wc("numberOfEntries",null==t.detailedResponse.timeentries?null:t.detailedResponse.timeentries.length)("isDesktop",t.isDesktop)("amountOption",t.report.filters.amountOptions)("sortOrder",t.report.filters.sortOrder)("sortColumn",t.report.filters.sortColumn),n.Cb(3),n.wc("ngForOf",t.detailedResponse.timeentries),n.Cb(1),n.wc("ngIf",t.showPagination))},directives:[c.a,l.a,u.t,u.u,d.a,h.a,p.a],encapsulation:2}),e})()},C0N5:function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n=i("fXoL"),s=i("XNiG"),r=i("Kj3r"),o=i("T+Hu"),a=i("ofXK"),c=i("dlKe"),l=i("3Pt+");const u=["filterDropdown"],d=["filterInput"];function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",5),n.Xb(1,"input",6,7),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().nameFilter=t}))("ngModelChange",(function(t){return n.Oc(e),n.nc().inputValueChanged(t)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("placeholder",e.placeholder)("ngModel",e.nameFilter)}}function p(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",23),n.Yc(2,"Active"),n.Wb(),n.Ub())}function b(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",23),n.Yc(2,"Inactive"),n.Wb(),n.Ub())}function f(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",23),n.Yc(2,"Archived"),n.Wb(),n.Ub())}function m(e,t){1&e&&(n.Xb(0,"span",23),n.Yc(1,"Active & Inactive"),n.Wb())}function g(e,t){1&e&&(n.Xb(0,"span",23),n.Yc(1,"Active & Archived"),n.Wb())}function v(e,t){if(1&e&&(n.Vb(0),n.Wc(1,m,2,0,"span",24),n.Wc(2,g,2,0,"span",24),n.Ub()),2&e){const e=n.nc(3);n.Cb(1),n.wc("ngIf",!e.statusHasArchived),n.Cb(1),n.wc("ngIf",e.statusHasArchived)}}function w(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",17),n.Xb(1,"a",18),n.jc("click",(function(){return n.Oc(e),n.nc(2).toggleStatusFilter()})),n.Vb(2,19),n.Wc(3,p,3,0,"ng-container",20),n.Wc(4,b,3,0,"ng-container",20),n.Wc(5,f,3,0,"ng-container",20),n.Wc(6,v,3,2,"ng-container",21),n.Ub(),n.Sb(7,"img",22),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngSwitch",e.query.status),n.Cb(1),n.wc("ngSwitchCase","ACTIVE"),n.Cb(1),n.wc("ngSwitchCase","INACTIVE"),n.Cb(1),n.wc("ngSwitchCase","ARCHIVED")}}function y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc(2).filterByStatus("INACTIVE")})),n.Xb(1,"div",15),n.Yc(2,"Inactive"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("cl-active",e.query&&"INACTIVE"==e.query.status)}}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc(2).filterByStatus("ARCHIVED")})),n.Xb(1,"div",15),n.Yc(2,"Archived"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("cl-active",e.query&&"ARCHIVED"==e.query.status)}}function k(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",8),n.Xb(2,"div",9),n.Xb(3,"div",10),n.Yc(4,"Show"),n.Wb(),n.Wc(5,w,8,4,"div",11),n.Wb(),n.Wb(),n.Xb(6,"div",12),n.Xb(7,"div",13),n.Xb(8,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc().filterByStatus("ACTIVE")})),n.Xb(9,"div",15),n.Yc(10,"Active"),n.Wb(),n.Wb(),n.Wc(11,y,3,2,"a",16),n.Wc(12,C,3,2,"a",16),n.Xb(13,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc().filterByStatus(null)})),n.Xb(14,"div",15),n.Yc(15,"All"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc();n.Cb(5),n.wc("ngIf",e.query),n.Cb(1),n.wc("hidden",e.filterHidden),n.Cb(2),n.Hb("cl-active",e.query&&"ACTIVE"==e.query.status),n.Cb(3),n.wc("ngIf",!e.statusHasArchived),n.Cb(1),n.wc("ngIf",e.statusHasArchived),n.Cb(1),n.Hb("cl-active",!e.query.status||"ALL"==e.query.status)}}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"input",30),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).selectedAll=t}))("ngModelChange",(function(){return n.Oc(e),n.nc(2).toggleSelectAll()})),n.Wb(),n.Xb(3,"label",31),n.Yc(4,"Select all"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngModel",e.selectedAll)}}function x(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"input",32),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).withoutSelected=t})),n.Wb(),n.Xb(3,"label",33),n.Yc(4),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngModel",e.withoutSelected),n.Cb(2),n.ad(" Without ",e.entity," ")}}function O(e,t){if(1&e&&(n.Xb(0,"div",38),n.Yc(1),n.Wb()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.ad(" ",e.key," ")}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",39),n.Xb(1,"div",29),n.Xb(2,"input",40),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i}))("ngModelChange",(function(i){n.Oc(e);const s=t.index,r=n.nc(2).index;return n.nc(2).selected(i,r,s)})),n.Wb(),n.Xb(3,"label",41),n.Xb(4,"div",15),n.Yc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(2).index;n.Cb(2),n.wc("id","customCheck2-tt-1-"+s+i)("ngModel",e.selected),n.Cb(1),n.wc("for","customCheck2-tt-1-"+s+i),n.Cb(2),n.ad(" ",e.entity.name," ")}}function I(e,t){if(1&e&&(n.Xb(0,"div",35),n.Wc(1,O,2,1,"div",36),n.Wc(2,D,6,4,"div",37),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc(2);n.Cb(1),n.wc("ngIf",t.entityMap.length>1),n.Cb(1),n.wc("ngForOf",e.value)}}function j(e,t){if(1&e&&(n.Xb(0,"div"),n.Wc(1,I,3,2,"div",34),n.Wb()),2&e){const e=t.$implicit;n.Cb(1),n.wc("ngIf",e.value&&e.value.length>0)}}function T(e,t){if(1&e&&(n.Vb(0),n.Wc(1,S,5,1,"div",25),n.Wc(2,x,5,2,"div",25),n.Xb(3,"div",26),n.Wc(4,j,2,1,"div",27),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.showSelectAll),n.Cb(1),n.wc("ngIf",e.hasWithoutEntity),n.Cb(2),n.wc("ngForOf",e.entityMap)}}function E(e,t){if(1&e&&(n.Xb(0,"div",42),n.Xb(1,"div",9),n.Yc(2),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(2),n.ad(" ",e.noResultMessage," ")}}let A=(()=>{class e{constructor(e){this.cd=e,this.showSelectAll=!0,this._saveSelected=!1,this.refreshAfterStatusChanged=!1,this.showActiveArchived=!0,this.noResultMessage="No members left",this.showNameFilter=!0,this.emitSelected=new n.n,this.loadMore=new n.n,this.userFilterChanged=new n.n,this.clearSelectedList=new n.n,this.emitSelectionOfAllEntities=new n.n,this.filterHidden=!0,this.query={name:"",page:1,status:"ACTIVE"},this.hasResults=!0,this.inputDebouncer=new s.a,this.statusHasArchived=!1,this.entryMapSelected=[],this.unselected=[]}set entityMap(e){if(this._entityMap=e,this.saveSelected)for(let t=0;t<this.entityMap.length;t++)this.entityMap[t]&&this.entryMapSelected[t]&&Array.isArray(this.entityMap[t].value)&&this.entityMap[t].value.length>0&&this.syncEntityMapWithSaved(!1);this.hasResults=this.entityMap.some(e=>Array.isArray(e.value)&&e.value.length>0),this.checkIfAllSelected(),this.cd.detectChanges()}get entityMap(){return this._entityMap}set saveSelected(e){this._saveSelected=e}get saveSelected(){return this._saveSelected}set queryStatus(e){this.query.status=e}ngOnInit(){this.getEntityPlural(),this.saveSelected&&this.syncEntityMapWithSaved(!0),this.inputDebouncer.pipe(Object(r.a)(300)).subscribe(e=>{this.query.name=e,this.query.page=1,this.query.unselectedEntities=this.unselected.length?this.unselected.map(e=>e.entity.id):[],this.query.selectedAll=!(!this.showSelectAll||!this.hasResults)&&this.selectedAll,this.query.selectedWithout=this.withoutSelected,this.query.changedStatus=!1,this.userFilterChanged.emit(this.query)})}ngAfterViewInit(){this.showNameFilter&&this.filterInput.nativeElement.focus()}ngOnDestroy(){var e;this.emitSelected.emit({selectedAll:!(!this.showSelectAll||this.query.name||!this.hasResults)&&this.selectedAll,selectedWithout:this.withoutSelected,name:(null===(e=this.query.name)||void 0===e?void 0:e.trim())||"",status:this.query.status,entities:this.saveSelected&&this.entryMapSelected.length?this.entryMapSelected:this.entityMap,unselectedEntities:this.unselected.length?this.unselected.map(e=>e.entity.id):[]})}onScroll(){this.query.page=this.query.page+1,this.loadMore.emit(this.query)}inputValueChanged(e){this.inputDebouncer.next(e)}toggleSelectAll(){this.withoutSelected=this.hasWithoutEntity?!!this.selectedAll:this.withoutSelected,this.entityMap.forEach((e,t)=>{e.value.map((e,i)=>{e.selected=!!this.selectedAll,this.updateSelectedEntityMap(!!this.selectedAll,t,i)})}),this.emitSelectionOfAllEntities.emit(this.selectedAll),this.selectedAll||this.query.name||this.clearSelectedList.emit(!0)}selected(e,t,i){this.saveSelected&&this.updateSelectedEntityMap(e,t,i),this.showSelectAll&&this.checkIfAllSelected()}updateSelectedEntityMap(e,t,i){const n=this.entryMapSelected[t].value.findIndex(e=>e.entity.id===this.entityMap[t].value[i].entity.id),s=this.unselected.findIndex(e=>e.entity.id===this.entityMap[t].value[i].entity.id);e?(s>-1&&this.unselected.splice(s,1),-1===n&&this.entryMapSelected[t].value.push(this.entityMap[t].value[i])):(-1===s&&this.unselected.push(this.entityMap[t].value[i]),n>-1&&this.entryMapSelected[t].value.splice(n,1))}checkIfAllSelected(){if(!this.showSelectAll)return;const e=this.entityMap.every(e=>e.value.every(e=>!0===e.selected));e!==this.selectedAll&&this.emitSelectionOfAllEntities.emit(e)}getEntityPlural(){const e=this.entity.toLowerCase();this.entityInPlural="client"===e||"department"===e?this.entity+"s":this.entity,this.placeholder=this.placeholder?this.placeholder:`Find ${this.entityInPlural}...`}filterByStatus(e){this.query.changedStatus=!0,this.query.name="",this.query.status=e,this.query.page=1,this.query.unselectedEntities=this.unselected.length?this.unselected.map(e=>e.entity.id):[],this.withoutSelected=!1,this.refreshAfterStatusChanged&&this.entryMapSelected.forEach(e=>e.value=[]),this.toggleStatusFilter(),this.userFilterChanged.emit(this.query)}toggleStatusFilter(){this.filterHidden=!this.filterHidden}syncEntityMapWithSaved(e){for(let t=0;t<this.entityMap.length;t++)e&&(this.entryMapSelected[t]=Object(o.a)(this.entityMap[t].key,[])),this.entityMap[t].value.forEach(e=>{let i=!1;this.entryMapSelected[t].value&&this.entryMapSelected[t].value.map(e=>e.entity.id).includes(e.entity.id)&&(e.selected=!0,i=!0),e.selected&&!i&&this.entryMapSelected[t].value.push(e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["checkbox-filter-dropdown"]],viewQuery:function(e,t){var i;1&e&&(n.ed(u,!0),n.ed(d,!0)),2&e&&(n.Kc(i=n.kc())&&(t.filterDropdown=i.first),n.Kc(i=n.kc())&&(t.filterInput=i.first))},inputs:{entity:"entity",hasWithoutEntity:"hasWithoutEntity",entityMap:"entityMap",withoutSelected:"withoutSelected",selectedAll:"selectedAll",showSelectAll:"showSelectAll",placeholder:"placeholder",saveSelected:"saveSelected",refreshAfterStatusChanged:"refreshAfterStatusChanged",showActiveArchived:"showActiveArchived",noResultMessage:"noResultMessage",queryStatus:"queryStatus",showNameFilter:"showNameFilter",statusHasArchived:"statusHasArchived"},outputs:{emitSelected:"emitSelected",loadMore:"loadMore",userFilterChanged:"userFilterChanged",clearSelectedList:"clearSelectedList",emitSelectionOfAllEntities:"emitSelectionOfAllEntities"},decls:6,vars:7,consts:[["class","cl-dropdown-menu-header",4,"ngIf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["filterDropdown",""],[4,"ngIf"],["class","cl-dropdown-item",4,"ngIf"],[1,"cl-dropdown-menu-header"],["type","text",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange"],["filterInput",""],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],["class","cl-cut-text-wrapper",4,"ngIf"],["id","active-inactive-1",1,"cl-collapse",3,"hidden"],[1,"cl-collapse-content"],[1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],[1,"cl-cut-text"],["class","cl-dropdown-item cl-cut-text-wrapper",3,"cl-active","click",4,"ngIf"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["src","assets/ui-icons/chevron-down.svg"],[1,"cl-dropdown-item-expand","cl-cut-text"],["class","cl-dropdown-item-expand cl-cut-text",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-border-bottom cl-border-light",4,"ngIf"],[1,"cl-dropdown-section-wrapper"],[4,"ngFor","ngForOf"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-border-bottom","cl-border-light"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","customCheckAll-1",1,"cl-custom-control-input","cl-checkbox-custom-state",3,"ngModel","ngModelChange"],["for","customCheckAll-1",1,"cl-custom-control-label"],["type","checkbox","id","customCheck1-tt-1",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customCheck1-tt-1",1,"cl-custom-control-label"],["class","cl-dropdown-section",4,"ngIf"],[1,"cl-dropdown-section"],["class","cl-dropdown-header cl-h5",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf"],[1,"cl-dropdown-header","cl-h5"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],["type","checkbox",1,"cl-custom-control-input",3,"id","ngModel","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-dropdown-item"]],template:function(e,t){1&e&&(n.Wc(0,h,3,2,"div",0),n.Xb(1,"div",1,2),n.jc("scrolled",(function(){return t.onScroll()})),n.Wc(3,k,16,8,"ng-container",3),n.Wc(4,T,5,3,"ng-container",3),n.Wc(5,E,3,1,"div",4),n.Wb()),2&e&&(n.wc("ngIf",t.showNameFilter),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngIf",t.showActiveArchived),n.Cb(1),n.wc("ngIf",t.hasResults),n.Cb(1),n.wc("ngIf",!t.hasResults))},directives:[a.u,c.a,l.c,l.s,l.v,a.y,a.z,a.A,a.t,l.a],encapsulation:2,changeDetection:0}),e})()},C1xe:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("8pWl"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.a]]}),e})()},Cpkn:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._billable=e&&e.billable,this._nonBillable=e&&e.nonBillable,this._taskStatus=e&&e.taskStatus,this._progress=e&&e.progress?e.progress:0,this._totalAmount=e&&e.totalAmount/100}get billable(){return this._billable}set billable(e){this._billable=e}get nonBillable(){return this._nonBillable}set nonBillable(e){this._nonBillable=e}get taskStatus(){return this._taskStatus}set taskStatus(e){this._taskStatus=e}get totalAmount(){return this._totalAmount}set totalAmount(e){this._totalAmount=e}get progress(){return this._progress}}},D0uv:function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var n=i("fXoL"),s=i("1G5W"),r=i("Kj3r"),o=i("XNiG"),a=(i("JBiw"),i("8+Zx")),c=i("cGux"),l=i("hkzH"),u=i("LfE4"),d=i("xoOP"),h=i("lvCY"),p=i("1YN2"),b=i("ofXK"),f=i("dlKe"),m=i("e0xV"),g=i("3Pt+"),v=i("y+xF");let w=(()=>{class e{transform(e,t,i){return t?e.filter(e=>e.key!==v.b):e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"filterWithout",type:e,pure:!0}),e})();var y=i("okBH");const C=["scrollArea"];function k(e,t){1&e&&(n.Vb(0),n.Xb(1,"div",7),n.Xb(2,"div",8),n.Sb(3,"div",9),n.Wb(),n.Wb(),n.Sb(4,"div",10),n.Ub())}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12),n.Xb(1,"div",13),n.Xb(2,"input-search",14),n.jc("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.searchValue=t,!i.offlineSearch&&i.searchChanged()})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("debounceTime",e.debounceSearch)("autofocus",!0)("search",e.searchValue)("placeholder",e.placeholder)}}function x(e,t){if(1&e&&(n.Vb(0),n.Wc(1,S,3,4,"div",11),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.hasResults||e.searchValue)}}function O(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",26),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc(2).$implicit;return n.nc().selectFilter(s,i.value)})),n.Xb(1,"div",27),n.Yc(2),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(2).$implicit,s=n.nc();n.Hb("cl-active",e.value===s.checkboxValues.options[i.key]),n.Cb(2),n.Zc(e.label)}}function D(e,t){if(1&e&&(n.Xb(0,"div",23),n.Xb(1,"div",24),n.Wc(2,O,3,3,"a",25),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(2),n.wc("ngForOf",e.options)}}function I(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",15),n.Xb(2,"div",16),n.Xb(3,"div",17),n.Yc(4,"Show"),n.Wb(),n.Xb(5,"div",18),n.Xb(6,"a",19),n.jc("click",(function(){const e=t.$implicit;return e.isExpanded=!e.isExpanded})),n.Xb(7,"span",20),n.Yc(8),n.Wb(),n.Sb(9,"img",21),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wc(10,D,3,1,"div",22),n.Ub()),2&e){const e=t.$implicit,i=n.nc();n.Cb(8),n.ad(" ",e.getLabelOf(i.checkboxValues.options[e.key])||e.key," "),n.Cb(2),n.wc("ngIf",e.isExpanded)}}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",31),n.Xb(1,"div",32),n.Xb(2,"input",33),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).isSelectedAll=t}))("change",(function(t){return n.Oc(e),n.nc(2).toggleAllChanged(t)})),n.Wb(),n.Xb(3,"label",34),n.Yc(4,"Select all"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("indeterminate",!e.isSelectedAll&&(null==e.selectedData?null:e.selectedData.selected)>0)("ngModel",e.isSelectedAll)("disabled",e.isSelectedAllDisabled||e.inProgress)}}function T(e,t){if(1&e&&(n.Xb(0,"div",38),n.Yc(1),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(1),n.ad(" ",e.label," ")}}function E(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",39),n.Xb(1,"div",32),n.Xb(2,"input",40),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i}))("change",(function(){n.Oc(e);const i=t.$implicit,s=n.nc().$implicit;return n.nc(2).onCheckboxChange(i,s.key)})),n.Wb(),n.Xb(3,"label",41),n.Xb(4,"div",42),n.Yc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc().index,r=n.nc(2);n.Cb(2),n.wc("ngModel",e.selected)("id",s+"_"+i)("disabled",e.isDisabled),n.Cb(1),n.wc("for",s+"_"+i),n.Cb(2),n.ad(" ",r.labelProp?e.entity[r.labelProp]:e.entity," ")}}function A(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",35),n.Wc(2,T,2,1,"div",36),n.Wc(3,E,6,5,"div",37),n.oc(4,"sortBy"),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.Hb("cl-pt-0",!i.showTitles||e.hideTitle),n.Cb(1),n.wc("ngIf",i.showTitles&&!e.hideTitle&&(null==e.value?null:e.value.length)),n.Cb(1),n.wc("ngForOf",n.rc(4,5,i.filterSelectable(e.value),i.sortByNameMapper,i.triggerPipeDetection))("ngForTrackBy",i.trackByFn)}}function _(e,t){if(1&e&&(n.Vb(0),n.Wc(1,j,5,3,"div",28),n.Xb(2,"div",29),n.Wc(3,A,5,9,"ng-container",30),n.oc(4,"filterWithout"),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.showSelectAll),n.Cb(2),n.wc("ngForOf",n.rc(4,3,null==e.selectableMaps?null:e.selectableMaps.maps,e.hideWithout,e.triggerPipeDetection))("ngForTrackBy",e.trackByFnMap)}}function W(e,t){if(1&e&&(n.Xb(0,"div",15),n.Xb(1,"div",16),n.Yc(2),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(2),n.ad(" No ",e.filterName||"results"," ")}}let R=(()=>{class e{constructor(e){this.cd=e,this._countMap=new c.a,this.placeholder="Search",this.showSearch=!0,this.showTitles=!0,this.showSelectAll=!0,this.labelProp="name",this.valueProp="id",this.offlineSearch=!1,this.preventOfflineFiltering=!1,this.debounceSearch=300,this.resizeableName="dropdownCheckbox",this.isResizeable=!0,this.onCloseFilter=new n.n,this.loadMore=new n.n,this.onChange=new n.n,this.onFilterOptionChange=new n.n,this.onSearchChange=new n.n,this.onContainOptionChange=new n.n,this.onSelectAllWithTextInput=new n.n,this.pageSize=h.f,this.selectedData={total:0,selected:0},this.triggerPipeDetection=0,this.Contains=l.d,this.ArchivedFilter=u.a,this.unsubscribe$=new o.a,this.onChange$=new o.a,this.sortByNameMapper=e=>e.entity[this.labelProp||"name"]||""}set isReceivedAllData(e){this._isReceivedAllData=e,this.isInitialized&&this.setIndeterminate()}get isReceivedAllData(){return this._isReceivedAllData}set countMap(e){e&&(this._countMap=e,this.isInitialized&&this.setIndeterminate())}get countMap(){return this._countMap}ngOnInit(){this.initialize(),this.checkboxValuesBackup=a.a.clone(this.checkboxValues),this.subscribeToChanges(),this.subscribeToCount(),this.offlineSearch&&(this.debounceSearch=0)}ngOnDestroy(){this.emitOnClose(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get hideWithout(){return this.checkboxValues.options.contains===l.d.CONTAINS_ONLY||this.checkboxValues.options.status===u.a.ARCHIVED}emitOnClose(){const e=this.checkboxValues.sameWith(this.checkboxValuesBackup),t=this.generateResponse();e?this.onCloseFilter.emit(t):this.onChange.emit(t)}generateResponse(){this.checkboxValues.removeWithoutIfNeed(),a.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,this.valueProp,this.singleMapProperty);const e=this.countNumber||this.countMap.count(),t=this.checkboxValues.getSelectedData(this.selectableMaps,e,this.offlineSearch||this.isReceivedAllData);return{checkboxValues:this.checkboxValues,selectableMaps:this.selectableMaps,numberOfSelected:t.numberOfSelected,numberOfSelectedApproximately:t.numberOfSelectedApproximately,label:t.label}}initialize(){this.initSelected(),this.refreshSelectedData(),this.setIndeterminate(),this.isInitialized=!0}onScroll(){this.loadMore.emit()}subscribeToCount(){this.countMap.onChange.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.setIndeterminate(),this.cd.detectChanges()})}subscribeToChanges(){this.selectableMaps.onChange.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.onChange$.next()),this.onChange$.pipe(Object(r.a)(60),Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.initSelected(),this.refreshSelectedData(),this.setIndeterminate(),this.triggerPipeDetection++,this.cd.detectChanges()})}initSelected(){this.selectableMaps&&this.selectableMaps.maps&&(this.checkboxValues?a.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,this.valueProp,this.singleMapProperty):this.checkboxValues=a.a.generateValuesDataFromMap(this.selectableMaps.maps,this.valueProp,this.singleMapProperty))}onCheckboxChange(e,t){this.updateCheckboxValues(e,t),e.selected?this.selectedData.selected++:this.selectedData.selected--,this.setIndeterminate()}toggleAllChanged(){if(!this.searchValue)return this.checkboxValues.exclude=this.isSelectedAll,this.checkboxValues.clearMapValues(),this.selectableMaps.setSelected(this.checkboxValues.exclude),void this.refreshSelectedData();let e=0;const t=this.isSelectedAll;this.selectableMaps.maps.forEach(i=>{const n=this.filterSelectable(i.value);n.forEach(e=>e.selected=t);const s=n.map(e=>e.entity.id);this.checkboxValues.toggleMultipleIds(this.singleMapProperty||i.key,s,t),e+=n.length}),this.refreshSelectedData(),this.setIndeterminate(),this.isSelectedAll=t,e>=this.pageSize&&this.onSelectAllWithTextInput.emit({searchTerm:this.searchValue,isSelected:t})}filterSelectable(e){return this.preventOfflineFiltering||!this.searchValue?e:e.filter(e=>Object(d.z)(e.entity.name,this.searchValue))}selectFilter(e,t){const i=e.key;e.isExpanded=!1,this.checkboxValues.options[i]!==t&&(this.checkboxValues.options[i]=t,"contains"!==i?(this.checkboxValues.reset(),this.countMap&&this.countMap.reset(),this.searchValue="",this.onFilterOptionChange.emit({filter:i,value:t,searchTerm:this.searchValue})):this.onContainOptionChange.emit(t))}searchChanged(){this.onSearchChange.emit(this.offlineSearch?"":this.searchValue),this.refreshSelectedData(),this.setIndeterminate()}trackByFn(e,t){return t}trackByFnMap(e,t){return t.key}updateCheckboxValues(e,t){this.checkboxValues.updateSingleMap(t=this.singleMapProperty||t,e.entity[this.valueProp],e.selected)}onResizeChange(e){if(!e)try{const e=this.scrollArea.nativeElement;e.scrollTop+e.getBoundingClientRect().height>e.scrollHeight-60&&this.onScroll()}catch(t){}}refreshSelectedData(){this.selectedData=this.selectableMaps.getSelectedData(this.searchValue,this.hideWithout)}setIndeterminate(){const{total:e,selected:t}=this.selectedData;this.isSelectedAllDisabled=!e,this.hasResults=!this.isSelectedAllDisabled,this.isSelectedAll=!1,this.offlineSearch||this.isReceivedAllData||e<this.pageSize?this.isSelectedAll=e>0&&e===t:this.searchValue||(this.isSelectedAll=this.checkboxValues.isSelectedAll(this.selectableMaps))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-checkbox"]],viewQuery:function(e,t){var i;1&e&&n.ed(C,!0),2&e&&n.Kc(i=n.kc())&&(t.scrollArea=i.first)},inputs:{selectableMaps:"selectableMaps",checkboxValues:"checkboxValues",isReceivedAllData:"isReceivedAllData",countMap:"countMap",singleMapProperty:"singleMapProperty",countNumber:"countNumber",searchValue:"searchValue",placeholder:"placeholder",showSearch:"showSearch",showTitles:"showTitles",showSelectAll:"showSelectAll",labelProp:"labelProp",valueProp:"valueProp",offlineSearch:"offlineSearch",preventOfflineFiltering:"preventOfflineFiltering",debounceSearch:"debounceSearch",resizeableName:"resizeableName",isResizeable:"isResizeable",filterName:"filterName",inProgressSelectAll:"inProgressSelectAll",inProgressLoading:"inProgressLoading",pageSize:"pageSize",filterOptions:"filterOptions"},outputs:{onCloseFilter:"onCloseFilter",loadMore:"loadMore",onChange:"onChange",onFilterOptionChange:"onFilterOptionChange",onSearchChange:"onSearchChange",onContainOptionChange:"onContainOptionChange",onSelectAllWithTextInput:"onSelectAllWithTextInput"},decls:9,vars:10,consts:[["resizeable","",1,"cl-dropdown-menu",3,"isResizeable","resizeableName","onResize"],[4,"ngIf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["scrollArea",""],[4,"ngFor","ngForOf"],["class","cl-dropdown-item cl-border-bottom cl-border-light",4,"ngIf"],["dropdownClose","","tabindex","0"],[1,"cl-relative"],[1,"cl-progress-bar-wrapper",2,"position","absolute","top","0"],[1,"cl-progress-bar-anim"],[1,"cl-blocker"],["class","cl-dropdown-menu-header",4,"ngIf"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","autofocus","search","placeholder","onSearchChange"],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[1,"cl-dropdown-item-expand","cl-cut-text"],["src","assets/images/ui-icons/chevron-down.svg"],["class","cl-collapse cl-show",4,"ngIf"],[1,"cl-collapse","cl-show"],[1,"cl-collapse-content"],["doNotCloseDropdown","","class","cl-dropdown-item cl-cut-text-wrapper",3,"cl-active","click",4,"ngFor","ngForOf"],["doNotCloseDropdown","",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],["doNotCloseDropdown","",1,"cl-cut-text"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-border-bottom cl-border-light",4,"ngIf"],[1,"cl-dropdown-section-wrapper"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-border-bottom","cl-border-light"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","selectAll",1,"cl-custom-control-input","cl-checkbox-custom-state",3,"indeterminate","ngModel","disabled","ngModelChange","change"],["for","selectAll",1,"cl-custom-control-label"],[1,"cl-dropdown-section"],["class","cl-dropdown-header cl-h5",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-header","cl-h5"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","disabled","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.jc("onResize",(function(e){return t.onResizeChange(e)})),n.Wc(1,k,5,0,"ng-container",1),n.Wc(2,x,2,1,"ng-container",1),n.Xb(3,"div",2,3),n.jc("scrolled",(function(){return t.onScroll()})),n.Wc(5,I,11,2,"ng-container",4),n.Wc(6,_,5,7,"ng-container",1),n.Wc(7,W,3,1,"div",5),n.Wb(),n.Sb(8,"span",6),n.Wb()),2&e&&(n.wc("isResizeable",t.isResizeable)("resizeableName",t.resizeableName),n.Cb(1),n.wc("ngIf",t.inProgressSelectAll),n.Cb(1),n.wc("ngIf",t.showSearch),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngForOf",t.filterOptions),n.Cb(1),n.wc("ngIf",t.hasResults),n.Cb(1),n.wc("ngIf",!t.hasResults&&!t.inProgressLoading))},directives:[p.a,b.u,f.a,b.t,m.a,g.a,g.s,g.v],pipes:[w,y.a],encapsulation:2,changeDetection:0}),e})()},DCUz:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("wd/R"),s=i("fXoL");let r=(()=>{class e{transform(e,t){return Object(n.duration)(e,"s").format(t||"HH:mm:ss",{trim:!1})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"secondsToDuration",type:e,pure:!0}),e})()},DeEi:function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var n=i("3Pt+"),s=i("ofXK"),r=i("ujiw"),o=i("fXoL"),a=(i("j4ir"),i("KBaq")),c=i("1kSV");const l=function(e){return[e]};function u(e,t){if(1&e&&(o.Xb(0,"span",6),o.Yc(1),o.Wb()),2&e){const e=o.nc();o.wc("ngClass",o.Bc(2,l,e.workspace.bgClass)),o.Cb(1),o.ad(" ",e.workspace.subscriptionPlanTitle," ")}}function d(e,t){if(1&e){const e=o.Yb();o.Xb(0,"a",13),o.jc("click",(function(){return o.Oc(e),o.nc(2).setAsDefault.emit()}))("keyup.enter",(function(){return o.Oc(e),o.nc(2).setAsDefault.emit()}))("keyup.space",(function(){return o.Oc(e),o.nc(2).setAsDefault.emit()})),o.Yc(1,"Activate"),o.Wb()}}function h(e,t){1&e&&(o.Xb(0,"span",14),o.Sb(1,"img",15),o.Xb(2,"span",16),o.Yc(3,"Active"),o.Wb(),o.Wb())}function p(e,t){if(1&e){const e=o.Yb();o.Xb(0,"button",17,18),o.jc("click",(function(){o.Oc(e);const t=o.Lc(1);return o.nc(2).leaveWorkspace(),t.blur()}))("keyup.enter",(function(){return o.Oc(e),o.nc(2).leaveWorkspace()}))("keyup.space",(function(){return o.Oc(e),o.nc(2).leaveWorkspace()})),o.Sb(3,"img",19),o.Wb()}if(2&e){const e=o.nc(2);o.wc("ngbTooltip",e.title),o.Cb(3),o.wc("src",e.isOwner?"assets/images/ui-icons/close.svg":"assets/ui-icons/leave.svg",o.Qc)}}function b(e,t){if(1&e&&(o.Xb(0,"span",21,22),o.Sb(2,"img",19),o.Wb()),2&e){const e=o.nc(3);o.wc("ngbTooltip",e.title),o.Cb(2),o.wc("src",e.isOwner?"assets/images/ui-icons/close.svg":"assets/ui-icons/leave.svg",o.Qc)}}function f(e,t){if(1&e&&o.Wc(0,b,3,2,"span",20),2&e){const e=o.nc(2);o.wc("ngIf",!e.canLeave)}}function m(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",7),o.Wc(1,d,2,0,"a",8),o.Wc(2,h,4,0,"ng-template",null,9,o.Xc),o.Xb(4,"button",10),o.jc("click",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.enter",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.space",(function(){return o.Oc(e),o.nc().openSettings.emit()})),o.Yc(5," Settings "),o.Wb(),o.Wc(6,p,4,2,"button",11),o.Wc(7,f,1,1,"ng-template",null,12,o.Xc),o.Wb()}if(2&e){const e=o.Lc(3),t=o.Lc(8),i=o.nc();o.Cb(1),o.wc("ngIf",i.defaultWorkspaceId!==i.workspace.id)("ngIfElse",e),o.Cb(3),o.wc("disabled",!i.hasSettingsPermision),o.Cb(2),o.wc("ngIf",i.canLeave)("ngIfElse",t)}}function g(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",7),o.Xb(1,"button",23),o.jc("click",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.enter",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.space",(function(){return o.Oc(e),o.nc().openSettings.emit()})),o.Yc(2," Log in "),o.Wb(),o.Sb(3,"button",24),o.Wb()}}let v=(()=>{class e{constructor(){this.setAsDefault=new o.n,this.openSettings=new o.n,this.onLeave=new o.n,this.isSelfHosted=a.a.environment.selfHosted}ngOnInit(){}get title(){if(this.canLeave)return this.isOwner?"Delete workspace":"Leave workspace";const e=this.isOwner?"delete":"leave";return this.hasOnlyOneWorkspace?`Can't ${e} your only workspace. Create a new workspace first.`:this.workspace.id===this.defaultWorkspaceId?`Can't ${e} active workspace. Switch to a different one first.`:this.isOwner?`Owners can't ${e} workspace until they either transfer ownership\n              to someone else or are the only member left in the workspace.`:`Can't ${e} workspace until they either transfer ownership\n            to someone else or are the only member left in the workspace.`}leaveWorkspace(){this.canLeave&&this.onLeave.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Lb({type:e,selectors:[["workspace-row"]],inputs:{workspace:"workspace",defaultWorkspaceId:"defaultWorkspaceId",hasSettingsPermision:"hasSettingsPermision",isOwner:"isOwner",hasOnlyOneWorkspace:"hasOnlyOneWorkspace",canLeave:"canLeave"},outputs:{setAsDefault:"setAsDefault",openSettings:"openSettings",onLeave:"onLeave"},decls:8,vars:4,consts:[[1,"cl-d-flex","cl-flex-column","cl-flex-lg-row","cl-w-100","cl-align-items-start","cl-align-items-lg-center","cl-justify-content-start","cl-justify-content-lg-between"],[1,"cl-cut-text-wrapper","cl-my-2","cl-my-lg-0","cl-px-2","cl-px-lg-3","cl-w-100"],[1,"cl-listing-project-client","cl-d-flex","cl-align-items-center"],[1,"cl-cut-text"],["class","cl-ml-2 cl-px-2 cl-badge cl-badge-pill cl-text-white cl-text-uppercase",3,"ngClass",4,"ngIf"],["class","cl-d-flex cl-w-100 cl-w-lg-auto cl-align-items-center cl-justify-content-end cl-template-separator-mob",4,"ngIf"],[1,"cl-ml-2","cl-px-2","cl-badge","cl-badge-pill","cl-text-white","cl-text-uppercase",3,"ngClass"],[1,"cl-d-flex","cl-w-100","cl-w-lg-auto","cl-align-items-center","cl-justify-content-end","cl-template-separator-mob"],["class","cl-d-inline-block","tabindex","0",3,"click","keyup.enter","keyup.space",4,"ngIf","ngIfElse"],["activateTemplate",""],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-3",3,"disabled","click","keyup.enter","keyup.space"],["class","cl-btn-fixed-40 cl-text-center cl-ml-1","tabindex","0","triggers","hover","placement","left",3,"ngbTooltip","click","keyup.enter","keyup.space",4,"ngIf","ngIfElse"],["canLeaveTemplate",""],["tabindex","0",1,"cl-d-inline-block",3,"click","keyup.enter","keyup.space"],[1,"cl-text-success","cl-d-inline-block"],["src","assets/images/ui-icons/checkmark-green.svg"],[1,"cl-ml-2"],["tabindex","0","triggers","hover","placement","left",1,"cl-btn-fixed-40","cl-text-center","cl-ml-1",3,"ngbTooltip","click","keyup.enter","keyup.space"],["btn","","tooltipManual","ngbTooltip"],[3,"src"],["class","cl-btn-fixed-40 cl-text-center cl-ml-1 cl-btn-disabled-opacity","triggers","hover","placement","left",3,"ngbTooltip",4,"ngIf"],["triggers","hover","placement","left",1,"cl-btn-fixed-40","cl-text-center","cl-ml-1","cl-btn-disabled-opacity",3,"ngbTooltip"],["tooltipManual","ngbTooltip"],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-3",3,"click","keyup.enter","keyup.space"],[1,"cl-btn-fixed-40","cl-text-center","cl-ml-1"]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.Xb(1,"div",1),o.Xb(2,"span",2),o.Xb(3,"span",3),o.Yc(4),o.Wb(),o.Wc(5,u,2,4,"span",4),o.Wb(),o.Wb(),o.Wc(6,m,9,5,"div",5),o.Wc(7,g,4,0,"div",5),o.Wb()),2&e&&(o.Cb(4),o.Zc(t.workspace.name),o.Cb(1),o.wc("ngIf",!t.isSelfHosted&&"FREE"!==t.workspace.subscriptionPlanTitle.toUpperCase()),o.Cb(1),o.wc("ngIf",!t.workspace.onSubdomain),o.Cb(1),o.wc("ngIf",t.workspace.onSubdomain))},directives:[s.u,s.r,c.Z],encapsulation:2,changeDetection:0}),e})();var w=i("E10L"),y=i("1Tmk"),C=i("1G5W"),k=i("XNiG");function S(e,t){1&e&&(o.Xb(0,"span",17),o.Yc(1," Your paid subscription will be automatically cancelled. "),o.Wb())}function x(e,t){if(1&e&&(o.Vb(0),o.Xb(1,"p",15),o.Yc(2),o.Wb(),o.Wc(3,S,2,0,"span",16),o.Ub()),2&e){const e=o.nc();o.Cb(2),o.ad(" All tracked time and projects in ",e.workspaceData.name," will be deleted forever. This can't be reversed. "),o.Cb(1),o.wc("ngIf",!e.isSelfHosted&&e.workspaceData.subscription&&"TRIAL"!==e.workspaceData.subscription)}}function O(e,t){1&e&&(o.Xb(0,"p",18),o.Yc(1," If you leave, you won't be able to get back unless someone invites you again. Are you sure you want to leave? "),o.Wb())}let D=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.cd=t,this.workspaceService=i,this.onClose=new o.n,this.unsubscribe$=new k.a,this.isSelfHosted=a.a.environment.selfHosted}ngOnInit(){var e;this.deleteWorkspaceForm=this.formBuilder.group({confirmationModel:["",[n.G.required]]},{validator:(e=this.workspaceData.type,t=>{const i=t.controls.confirmationModel;i.value.trim().toLowerCase()!==e.trim().toLowerCase()?i.setErrors({matchInputs:!0}):i.setErrors(null)})})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onSubmit(){this.inProgress||(this.inProgress=!0,this.workspaceService.leaveWorkspace(this.workspaceData.id).pipe(Object(C.a)(this.unsubscribe$)).subscribe(()=>this.onClose.emit(this.workspaceData.id),()=>{this.inProgress=!1,this.cd.detectChanges()}))}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(n.f),o.Rb(o.h),o.Rb(y.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["delete-workspace-modal"]],inputs:{workspaceData:"workspaceData"},outputs:{onClose:"onClose"},decls:24,vars:9,consts:[[3,"formGroup","ngSubmit"],[1,"cl-modal-body","cl-text-center","cl-pt-4","cl-pb-3"],[1,"cl-mb-3"],[1,"cl-img-fluid",3,"src"],[1,"cl-h1","cl-mb-2","cl-text-gray-3"],[1,"cl-capitalize"],[4,"ngIf","ngIfElse"],["leaveTemplate",""],[1,"cl-my-3"],[1,"cl-form-group","cl-text-left","cl-mb-0"],[1,"cl-uppercase"],["type","text","formControlName","confirmationModel",1,"cl-form-control"],[1,"cl-modal-footer"],["tabindex","0",1,"cl-color-blue",3,"click","keyup.enter","keyup.space"],["type","submit","tabindex","0",1,"cl-btn",3,"ngClass","disabled"],[1,"cl-mb-2","cl-text-gray-6"],["class","cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],[1,"cl-alert","cl-alert-warning","cl-justify-content-center"],[1,"cl-mb-0","cl-text-gray-6"]],template:function(e,t){if(1&e&&(o.Xb(0,"form",0),o.jc("ngSubmit",(function(){return t.onSubmit()})),o.Xb(1,"div",1),o.Xb(2,"div",2),o.Sb(3,"img",3),o.Wb(),o.Xb(4,"div",4),o.Xb(5,"span",5),o.Yc(6),o.Wb(),o.Yc(7," workspace "),o.Wb(),o.Wc(8,x,4,2,"ng-container",6),o.Wc(9,O,2,0,"ng-template",null,7,o.Xc),o.Sb(11,"hr",8),o.Xb(12,"div",9),o.Xb(13,"label"),o.Yc(14,"Type "),o.Xb(15,"span",10),o.Yc(16),o.Wb(),o.Yc(17," to confirm"),o.Wb(),o.Sb(18,"input",11),o.Wb(),o.Wb(),o.Xb(19,"div",12),o.Xb(20,"a",13),o.jc("click",(function(){return t.onClose.emit()}))("keyup.enter",(function(){return t.onClose.emit()}))("keyup.space",(function(){return t.onClose.emit()})),o.Yc(21,"Cancel"),o.Wb(),o.Xb(22,"button",14),o.Yc(23),o.Wb(),o.Wb(),o.Wb()),2&e){const e=o.Lc(10);o.wc("formGroup",t.deleteWorkspaceForm),o.Cb(3),o.wc("src","delete"===t.workspaceData.type?"assets/images/illustrations/delete-workspace.svg":"assets/images/illustrations/leave-workspace.svg",o.Qc),o.Cb(3),o.Zc(t.workspaceData.type),o.Cb(2),o.wc("ngIf","delete"===t.workspaceData.type)("ngIfElse",e),o.Cb(8),o.Zc(t.workspaceData.type),o.Cb(6),o.wc("ngClass","delete"===t.workspaceData.type?"cl-btn-danger":"cl-btn-primary")("disabled",t.deleteWorkspaceForm.invalid||t.inProgress),o.Cb(1),o.ad(" ",t.workspaceData.type," Workspace ")}},directives:[n.I,n.t,n.k,s.u,n.c,n.s,n.i,s.r],encapsulation:2,changeDetection:0}),e})();var I=i("AY7I");function j(e,t){1&e&&(o.Xb(0,"div",10),o.Yc(1," Workspace name has to be between 2 and 250 characters long "),o.Wb())}let T=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.cd=t,this.workspaceService=i,this.unsubscribe$=new k.a,this.onClose=new o.n}ngOnInit(){this.createWorkspaceForm=this.formBuilder.group({name:["",[I.a.required,I.a.minLength(2),I.a.maxLength(250)]]})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get name(){return this.createWorkspaceForm.get("name")}get isNameInvalid(){return this.name.dirty&&this.name.touched&&!!this.name.errors}trim(){this.createWorkspaceForm.patchValue({name:this.name.value.trim()})}onSubmit(){this.inProgress||(this.trim(),this.createWorkspaceForm.invalid||(this.inProgress=!0,this.workspaceService.createWorkspace(this.name.value).pipe(Object(C.a)(this.unsubscribe$)).subscribe(e=>this.onClose.emit(e),()=>{this.inProgress=!1,this.cd.detectChanges()})))}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(n.f),o.Rb(o.h),o.Rb(y.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["create-workspace-modal"]],outputs:{onClose:"onClose"},decls:13,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"cl-modal-body"],[1,"cl-form-group","cl-row","cl-mb-0"],["for","cl-template-name-create",1,"cl-col-sm-3","cl-col-form-label"],[1,"cl-col-sm-9"],["type","text","formControlName","name","ngbAutofocus","",1,"cl-form-control",3,"blur"],["class","cl-invalid-feedback",4,"ngIf"],[1,"cl-modal-footer"],["tabindex","0",3,"keyup.enter","keyup.space","click"],["type","submit","tabindex","0",1,"cl-btn","cl-btn-primary",3,"disabled"],[1,"cl-invalid-feedback"]],template:function(e,t){1&e&&(o.Xb(0,"form",0),o.jc("ngSubmit",(function(){return t.onSubmit()})),o.Xb(1,"div",1),o.Xb(2,"div",2),o.Xb(3,"label",3),o.Yc(4," Workspace name "),o.Wb(),o.Xb(5,"div",4),o.Xb(6,"input",5),o.jc("blur",(function(){return t.trim()})),o.Wb(),o.Wc(7,j,2,0,"div",6),o.Wb(),o.Wb(),o.Wb(),o.Xb(8,"div",7),o.Xb(9,"a",8),o.jc("keyup.enter",(function(){return t.onClose.emit()}))("keyup.space",(function(){return t.onClose.emit()}))("click",(function(){return t.onClose.emit()})),o.Yc(10,"Cancel"),o.Wb(),o.Xb(11,"button",9),o.Yc(12,"Create"),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.wc("formGroup",t.createWorkspaceForm),o.Cb(6),o.Hb("cl-is-invalid",t.isNameInvalid),o.Cb(1),o.wc("ngIf",t.isNameInvalid),o.Cb(4),o.wc("disabled",t.createWorkspaceForm.invalid||t.inProgress))},directives:[n.I,n.t,n.k,n.c,n.s,n.i,s.u],encapsulation:2,changeDetection:0}),e})();var E=i("9Trn"),A=i("0Gvx"),_=i("5lh1"),W=i("AHy6"),R=i("QKuU"),P=i("eGqU"),M=i("sbmM"),F=i("TmxI"),X=i("qUN8"),L=i("2rWG"),N=i("9Gc3"),B=i("AHJ+"),Y=i("wxL3");let V=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.m,s.c,n.C,w.a,c.ab,E.a,A.a,_.a]]}),e})();o.Rc(r.a,[n.I,n.x,n.H,n.c,n.y,n.B,n.a,n.E,n.F,n.A,n.s,n.t,n.D,n.o,n.n,n.z,n.b,n.d,n.v,n.w,n.u,s.r,s.s,s.t,s.u,s.B,s.x,s.y,s.z,s.A,s.v,s.w,n.h,n.k,n.i,n.l,n.e,W.a,c.Z,R.a,P.a,M.a,F.a,X.a,L.a,N.a,B.a,Y.a,r.a,v,T,D],[s.b,s.I,s.q,s.l,s.F,s.g,s.D,s.G,s.d,s.f,s.j,s.k,s.m])},Dfhc:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("B01t"),s=i("ofXK"),r=i("1kSV"),o=i("tyNb"),a=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},imports:[[n.a,s.c,r.M,o.g]]}),e})()},DlQD:function(e,t,i){!function(t){"use strict";var i={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:m,table:m,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||k.defaults,this.rules=i.normal,this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.rules=i.gfm)}i._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,i._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,i.def=h(i.def).replace("label",i._label).replace("title",i._title).getRegex(),i.bullet=/(?:[*+-]|\d{1,9}\.)/,i.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,i.item=h(i.item,"gm").replace(/bull/g,i.bullet).getRegex(),i.list=h(i.list).replace(/bull/g,i.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+i.def.source+")").getRegex(),i._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",i._comment=/<!--(?!-?>)[\s\S]*?-->/,i.html=h(i.html,"i").replace("comment",i._comment).replace("tag",i._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),i.paragraph=h(i._paragraph).replace("hr",i.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",i._tag).getRegex(),i.blockquote=h(i.blockquote).replace("paragraph",i.paragraph).getRegex(),i.normal=g({},i),i.gfm=g({},i.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),i.pedantic=g({},i.normal,{html:h("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",i._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:m,paragraph:h(i.normal._paragraph).replace("hr",i.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",i.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),n.rules=i,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,t){var n,s,r,o,a,c,l,d,h,p,b,f,m,g,y,C;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e)){var k=this.tokens[this.tokens.length-1];e=e.substring(r[0].length),k&&"paragraph"===k.type?k.text+="\n"+r[0].trimRight():(r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?r:w(r,"\n")}))}else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(e))&&(c={type:"table",header:v(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(r[0].length),b=0;b<c.align.length;b++)c.align[b]=/^ *-+: *$/.test(c.align[b])?"right":/^ *:-+: *$/.test(c.align[b])?"center":/^ *:-+ *$/.test(c.align[b])?"left":null;for(b=0;b<c.cells.length;b++)c.cells[b]=v(c.cells[b],c.header.length);this.tokens.push(c)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),this.tokens.push(l={type:"list_start",ordered:g=(o=r[2]).length>1,start:g?+o:"",loose:!1}),d=[],n=!1,m=(r=r[0].match(this.rules.item)).length,b=0;b<m;b++)p=(c=r[b]).length,~(c=c.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(p-=c.length,c=c.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+p+"}","gm"),"")),b!==m-1&&(a=i.bullet.exec(r[b+1])[0],(o.length>1?1===a.length:a.length>1||this.options.smartLists&&a!==o)&&(e=r.slice(b+1).join("\n")+e,b=m-1)),s=n||/\n\n(?!\s*$)/.test(c),b!==m-1&&(n="\n"===c.charAt(c.length-1),s||(s=n)),s&&(l.loose=!0),C=void 0,(y=/^\[[ xX]\] /.test(c))&&(C=" "!==c[1],c=c.replace(/^\[[ xX]\] +/,"")),d.push(h={type:"list_item_start",task:y,checked:C,loose:s}),this.tokens.push(h),this.token(c,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(m=d.length,b=0;b<m;b++)d[b].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):u(r[0]):r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),f=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(e))&&(c={type:"table",header:v(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(r[0].length),b=0;b<c.align.length;b++)c.align[b]=/^ *-+: *$/.test(c.align[b])?"right":/^ *:-+: *$/.test(c.align[b])?"center":/^ *:-+ *$/.test(c.align[b])?"left":null;for(b=0;b<c.cells.length;b++)c.cells[b]=v(c.cells[b].replace(/^ *\| *| *\| *$/g,""),c.header.length);this.tokens.push(c)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2].charAt(0)?1:2,text:r[1]});else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var s={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:m,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function r(e,t){if(this.options=t||k.defaults,this.links=e,this.rules=s.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.rules=this.options.breaks?s.breaks:s.gfm)}function o(e){this.options=e||k.defaults}function a(){}function c(e){this.tokens=[],this.token=null,this.options=e||k.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new l}function l(){this.seen={}}function u(e,t){if(t){if(u.escapeTest.test(e))return e.replace(u.escapeReplace,(function(e){return u.replacements[e]}))}else if(u.escapeTestNoEncode.test(e))return e.replace(u.escapeReplaceNoEncode,(function(e){return u.replacements[e]}));return e}function d(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function h(e,t){return e=e.source||e,t=t||"",{replace:function(t,i){return i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,i),this},getRegex:function(){return new RegExp(e,t)}}}function p(e,t,i){if(e){try{var n=decodeURIComponent(d(i)).replace(/[^\w:]/g,"").toLowerCase()}catch(s){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!f.test(i)&&(i=function(e,t){return b[" "+e]||(b[" "+e]=/^[^:]+:\/*[^/]*$/.test(e)?e+"/":w(e,"/",!0)),e=b[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(s){return null}return i}s._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",s.em=h(s.em).replace(/punctuation/g,s._punctuation).getRegex(),s._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,s._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,s._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,s.autolink=h(s.autolink).replace("scheme",s._scheme).replace("email",s._email).getRegex(),s._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,s.tag=h(s.tag).replace("comment",i._comment).replace("attribute",s._attribute).getRegex(),s._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,s._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,s._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,s.link=h(s.link).replace("label",s._label).replace("href",s._href).replace("title",s._title).getRegex(),s.reflink=h(s.reflink).replace("label",s._label).getRegex(),s.normal=g({},s),s.pedantic=g({},s.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",s._label).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",s._label).getRegex()}),s.gfm=g({},s.normal,{escape:h(s.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),s.gfm.url=h(s.gfm.url,"i").replace("email",s.gfm._extended_email).getRegex(),s.breaks=g({},s.gfm,{br:h(s.br).replace("{2,}","*").getRegex(),text:h(s.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),r.rules=s,r.output=function(e,t,i){return new r(t,i).output(e)},r.prototype.output=function(e){for(var t,i,n,s,o,a,c="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),c+=u(o[1]);else if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(o[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(o[0])&&(this.inRawBlock=!1),e=e.substring(o[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):u(o[0]):o[0];else if(o=this.rules.link.exec(e)){var l=y(o[2],"()");if(l>-1){var d=4+o[1].length+l;o[2]=o[2].substring(0,l),o[0]=o[0].substring(0,d).trim(),o[3]=""}e=e.substring(o[0].length),this.inLink=!0,n=o[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n))?(n=t[1],s=t[3]):s="":s=o[3]?o[3].slice(1,-1):"",n=n.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(o,{href:r.escapes(n),title:r.escapes(s)}),this.inLink=!1}else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){c+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,c+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),c+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),c+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),c+=this.renderer.codespan(u(o[2].trim(),!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),c+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),c+=this.renderer.del(this.output(o[1]));else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),n="@"===o[2]?"mailto:"+(i=u(this.mangle(o[1]))):i=u(o[1]),c+=this.renderer.link(n,null,i);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.text.exec(e))e=e.substring(o[0].length),c+=this.renderer.text(this.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):u(o[0]):o[0]:u(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===o[2])n="mailto:"+(i=u(o[0]));else{do{a=o[0],o[0]=this.rules._backpedal.exec(o[0])[0]}while(a!==o[0]);i=u(o[0]),n="www."===o[1]?"http://"+i:i}e=e.substring(o[0].length),c+=this.renderer.link(n,null,i)}return c},r.escapes=function(e){return e?e.replace(r.rules._escapes,"$1"):e},r.prototype.outputLink=function(e,t){var i=t.href,n=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(i,n,this.output(e[1])):this.renderer.image(i,n,u(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,i="",n=e.length,s=0;s<n;s++)t=e.charCodeAt(s),Math.random()>.5&&(t="x"+t.toString(16)),i+="&#"+t+";";return i},o.prototype.code=function(e,t,i){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(e,n);null!=s&&s!==e&&(i=!0,e=s)}return n?'<pre><code class="'+this.options.langPrefix+u(n,!0)+'">'+(i?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:u(e,!0))+"</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,i,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(i)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t,i){var n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,i){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<a href="'+u(e)+'"';return t&&(n+=' title="'+t+'"'),n+">"+i+"</a>"},o.prototype.image=function(e,t,i){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<img src="'+e+'" alt="'+i+'"';return t&&(n+=' title="'+t+'"'),n+(this.options.xhtml?"/>":">")},o.prototype.text=function(e){return e},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(e){return e},a.prototype.link=a.prototype.image=function(e,t,i){return""+i},a.prototype.br=function(){return""},c.parse=function(e,t){return new c(t).parse(e)},c.prototype.parse=function(e){this.inline=new r(e.links,this.options),this.inlineText=new r(e.links,g({},this.options,{renderer:new a})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},c.prototype.next=function(){return this.token=this.tokens.pop(),this.token},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,d(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,i,n,s="",r="";for(i="",e=0;e<this.token.header.length;e++)i+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(i),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],i="",n=0;n<t.length;n++)i+=this.renderer.tablecell(this.inline.output(t[n]),{header:!1,align:this.token.align[n]});r+=this.renderer.tablerow(i)}return this.renderer.table(s,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var o=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,o,a);case"list_item_start":r="";var c=this.token.loose,l=this.token.checked,u=this.token.task;for(this.token.task&&(r+=this.renderer.checkbox(l));"list_item_end"!==this.next().type;)r+=c||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(r,u,l);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var h='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(h);console.log(h)}},l.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var i=t;do{this.seen[i]++,t=i+"-"+this.seen[i]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var b={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(){}function g(e){for(var t,i,n=1;n<arguments.length;n++)for(i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function v(e,t){var i=e.replace(/\|/g,(function(e,t,i){for(var n=!1,s=t;--s>=0&&"\\"===i[s];)n=!n;return n?"|":" |"})).split(/ \|/),n=0;if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function w(e,t,i){if(0===e.length)return"";for(var n=0;n<e.length;){var s=e.charAt(e.length-n-1);if(s!==t||i){if(s===t||!i)break;n++}else n++}return e.substr(0,e.length-n)}function y(e,t){if(-1===e.indexOf(t[1]))return-1;for(var i=0,n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])i++;else if(e[n]===t[1]&&--i<0)return n;return-1}function C(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function k(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(i||"function"==typeof t){i||(i=t,t=null),C(t=g({},k.defaults,t||{}));var s,r,o=t.highlight,a=0;try{s=n.lex(e,t)}catch(d){return i(d)}r=s.length;var l=function(e){if(e)return t.highlight=o,i(e);var n;try{n=c.parse(s,t)}catch(d){e=d}return t.highlight=o,e?i(e):i(null,n)};if(!o||o.length<3)return l();if(delete t.highlight,!r)return l();for(;a<s.length;a++)!function(e){"code"!==e.type?--r||l():o(e.text,e.lang,(function(t,i){return t?l(t):null==i||i===e.text?--r||l():(e.text=i,e.escaped=!0,void(--r||l()))}))}(s[a])}else try{return t&&(t=g({},k.defaults,t)),C(t),c.parse(n.lex(e,t),t)}catch(d){if(d.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||k.defaults).silent)return"<p>An error occurred:</p><pre>"+u(d.message+"",!0)+"</pre>";throw d}}m.exec=m,k.options=k.setOptions=function(e){return g(k.defaults,e),k},k.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new o,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},k.defaults=k.getDefaults(),k.Parser=c,k.parser=c.parse,k.Renderer=o,k.TextRenderer=a,k.Lexer=n,k.lexer=n.lex,k.InlineLexer=r,k.inlineLexer=r.output,k.Slugger=l,k.parse=k,e.exports=k}(this||("undefined"!=typeof window?window:global))},E10L:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},EBvn:function(e,t,i){"use strict";i.d(t,"a",(function(){return R})),i("YDZJ");var n=i("RkOr"),s=i("wd/R"),r=i("y+xF"),o=i("hkzH"),a=i("fXoL"),c=i("ofXK"),l=i("tyNb"),u=i("znhS"),d=i("rg2B"),h=i("Lwft");const p=function(e){return{"cl-extended":e}};function b(e,t){if(1&e){const e=a.Yb();a.Xb(0,"a",13),a.jc("click",(function(){a.Oc(e);const t=a.nc();return t.group.isExpanded=!t.group.isExpanded})),a.Xb(1,"span",14),a.Yc(2),a.Wb(),a.Wb()}if(2&e){const e=a.nc();a.Cb(1),a.wc("ngClass",a.Bc(2,p,e.group.isExpanded)),a.Cb(1),a.Zc(e.group.children.length)}}function f(e,t){if(1&e&&a.Sb(0,"i",15),2&e){const e=a.nc();a.Vc("background-color",e.group.color)}}function m(e,t){1&e&&a.Tb(0)}function g(e,t){if(1&e&&(a.Xb(0,"a",16),a.Wc(1,m,1,0,"ng-container",17),a.Wb()),2&e){const e=a.nc(),t=a.Lc(10);a.wc("queryParams",e.queryParams),a.Cb(1),a.wc("ngTemplateOutlet",t)}}function v(e,t){1&e&&a.Tb(0)}function w(e,t){if(1&e&&(a.Xb(0,"span"),a.Wc(1,v,1,0,"ng-container",17),a.Wb()),2&e){a.nc();const e=a.Lc(10);a.Cb(1),a.wc("ngTemplateOutlet",e)}}function y(e,t){if(1&e&&a.Sb(0,"i",15),2&e){const e=a.nc(4);a.Vc("background-color",e.group.projectColor)}}function C(e,t){if(1&e&&(a.Vb(0),a.Wc(1,y,1,2,"i",5),a.Xb(2,"span"),a.Yc(3),a.Wb(),a.Ub()),2&e){const e=a.nc(3);a.Cb(1),a.wc("ngIf",0!==e.group.level),a.Cb(1),a.Vc("color",e.group.projectColor),a.Cb(1),a.ad(" ",e.group.projectName," ")}}function k(e,t){if(1&e&&(a.Xb(0,"span",22),a.Yc(1),a.Wb()),2&e){const e=a.nc(3);a.Cb(1),a.ad(" - ",e.group.clientName," ")}}function S(e,t){if(1&e&&(a.Vb(0),a.Xb(1,"span",20),a.Yc(2),a.Wb(),a.Wc(3,C,4,4,"ng-container",11),a.Wc(4,k,2,1,"span",21),a.Ub()),2&e){const e=a.nc(2);a.Cb(1),a.Vc("color",e.group.type===e.SummaryGroupColumn.PROJECT&&e.group.color),a.wc("title",e.group.name||e.group.withoutLabel),a.Cb(1),a.ad(" ",e.group.name||e.group.withoutLabel," "),a.Cb(1),a.wc("ngIf",e.group.projectName&&e.canShowProjectData),a.Cb(1),a.wc("ngIf",e.group.clientName&&e.canShowProjectData&&e.canShowClientData)}}function x(e,t){if(1&e&&a.Yc(0),2&e){const e=a.nc(2);a.ad(" ",e.getDate," ")}}function O(e,t){if(1&e&&(a.Wc(0,S,5,6,"ng-container",18),a.Wc(1,x,1,1,"ng-template",null,19,a.Xc)),2&e){const e=a.Lc(2),t=a.nc();a.wc("ngIf",t.group.type!==t.SummaryGroupColumn.DATE)("ngIfElse",e)}}function D(e,t){if(1&e&&(a.Xb(0,"div",10),a.Yc(1),a.oc(2,"timeFormat"),a.Wb()),2&e){const e=a.nc(2);a.Cb(1),a.Zc(a.qc(2,1,null==e.group.estimate?null:e.group.estimate.amount,e.format))}}function I(e,t){if(1&e&&(a.Xb(0,"div",24),a.Yc(1),a.oc(2,"roundIfWholeNumber"),a.oc(3,"centsToDollars"),a.Wb()),2&e){const e=a.nc(2);a.Cb(1),a.bd("",a.pc(2,2,a.pc(3,4,null==e.group.estimate?null:e.group.estimate.amount))," ",e.currency,"")}}function j(e,t){1&e&&(a.Xb(0,"div",10),a.Yc(1," - "),a.Wb())}function T(e,t){if(1&e&&(a.Vb(0),a.Wc(1,D,3,4,"div",23),a.Wc(2,I,4,6,"div",12),a.Wc(3,j,2,0,"div",23),a.Ub()),2&e){const e=a.nc();a.Cb(1),a.wc("ngIf","TIME"==(null==e.group.estimate?null:e.group.estimate.type)&&(null==e.group.estimate?null:e.group.estimate.amount)),a.Cb(1),a.wc("ngIf","BUDGET"==(null==e.group.estimate?null:e.group.estimate.type)&&(null==e.group.estimate?null:e.group.estimate.amount)),a.Cb(1),a.wc("ngIf",!(null!=e.group.estimate&&e.group.estimate.type&&null!=e.group.estimate&&e.group.estimate.amount&&"NONE"!==(null==e.group.estimate?null:e.group.estimate.type)))}}function E(e,t){if(1&e&&(a.Xb(0,"div",24),a.Yc(1),a.oc(2,"roundIfWholeNumber"),a.oc(3,"centsToDollars"),a.Wb()),2&e){const e=a.nc();a.Cb(1),a.bd("",a.pc(2,2,a.pc(3,4,e.group.amount))," ",e.currency,"")}}function A(e,t){if(1&e&&a.Sb(0,"summary-group",26),2&e){const e=t.$implicit,i=a.nc(2);a.wc("currency",i.currency)("format",i.format)("isExpanded",i.isExpanded)("group",e)("showEstimate",i.showEstimate)("filterGroups",i.filterGroups)("level",i.level+1)("hideAmount",i.hideAmount)("userFormat",i.userFormat)("enabledStandardFilters",i.enabledStandardFilters)("enableLinks",i.enableLinks)("dateRange",i.dateRange)}}function _(e,t){if(1&e&&(a.Vb(0),a.Wc(1,A,1,12,"summary-group",25),a.Ub()),2&e){const e=a.nc();a.Cb(1),a.wc("ngForOf",e.group.children)}}const W=function(e,t){return[e,t]};let R=(()=>{class e{constructor(){this.level=0,this._enabledStandardFilters=[],this.SummaryGroupColumn=n.a,this.map=new Map([[n.a.TIMEENTRY,o.e],[n.a.USER,o.j],[n.a.USER_GROUP,o.f],[n.a.CLIENT,o.h.CLIENTS],[n.a.PROJECT,o.h.PROJECTS],[n.a.TASK,o.h.TASKS],[n.a.TAG,o.h.TAGS]])}set isExpanded(e){this.group&&this.group.children&&(this.group.children.forEach(t=>t.isExpanded=e),this.group.isExpanded=e)}set enabledStandardFilters(e){e&&(this._enabledStandardFilters=e,this.isInitialized&&(this.filterIsAvailable=this.isFilterAvailable()))}get enabledStandardFilters(){return this._enabledStandardFilters}ngOnInit(){this.type=this.filterGroups[this.level],this.queryParams=this.generateQueryParams(),this.canShowProjectData=this.calculateCanShowProject(),this.canShowClientData=this.calculateCanShowClient(),this.filterIsAvailable=this.isFilterAvailable(),this.isInitialized=!0}get getDate(){return s(this.group.name).format(this.userFormat)}isFilterAvailable(){return this.type===n.a.USER||this.type===n.a.USER_GROUP?this.enabledStandardFilters.includes(o.h.USERS_AND_GROUP):this.type===n.a.DATE||this.enabledStandardFilters.includes(this.map.get(this.type))}calculateCanShowProject(){return!!this.group.name&&(this.type!==n.a.TASK||this.filterGroups[this.level-1]!==n.a.PROJECT&&this.filterGroups[this.level-2]!==n.a.PROJECT)}calculateCanShowClient(){return this.type!==n.a.TASK||this.filterGroups[this.level-1]!==n.a.CLIENT&&this.filterGroups[this.level-2]!==n.a.CLIENT}generateQueryParams(){if(!this.enableLinks)return;const e={};if(this.dateRange&&(e.start=this.dateRange.start.toISOString(),e.end=this.dateRange.end.toISOString()),this.type===n.a.TIMEENTRY)return this.group.name?e[this.map.get(this.type)]=this.group.name||"":e.withoutDescription=!0,e;if(this.type===n.a.DATE){const e=s.utc(this.group.name);return{start:e.startOf("day").toISOString(),end:e.clone().endOf("day").toISOString()}}if(this.type===n.a.USER_GROUP&&!this.group.ids.length)return null;const t={[this.map.get(this.type)]:this.group.ids.length?this.group.ids:[r.b]};return e.filterValuesData=JSON.stringify(t),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Lb({type:e,selectors:[["summary-group"],[""]],inputs:{group:"group",currency:"currency",format:"format",hideAmount:"hideAmount",showEstimate:"showEstimate",filterGroups:"filterGroups",userFormat:"userFormat",enableLinks:"enableLinks",dateRange:"dateRange",isExpanded:"isExpanded",level:"level",enabledStandardFilters:"enabledStandardFilters"},decls:18,vars:15,consts:[[1,"cl-component-row","cl-flex-column","cl-flex-lg-row","cl-hover-shadow",3,"ngClass"],[1,"cl-reports-summary-table-col-1"],["class","cl-badge-same-entries-wrapper",3,"click",4,"ngIf"],[1,"cl-cut-text-wrapper"],[1,"cl-cut-text"],["class","cl-entry__project__dot",3,"background-color",4,"ngIf"],["routerLink","/reports/detailed","class","cl-text-dark cl-hover-no-underline",3,"queryParams",4,"ngIf","ngIfElse"],["textTemplate",""],["labelContentTemplate",""],[1,"cl-reports-summary-table-col-2"],[1,"cl-reports-summary-table-col-2-1"],[4,"ngIf"],["class","cl-reports-summary-table-col-2-2",4,"ngIf"],[1,"cl-badge-same-entries-wrapper",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0",3,"ngClass"],[1,"cl-entry__project__dot"],["routerLink","/reports/detailed",1,"cl-text-dark","cl-hover-no-underline",3,"queryParams"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["dateTemplate",""],[1,"cl-mr-2",3,"title"],["class","cl-text-gray-9",4,"ngIf"],[1,"cl-text-gray-9"],["class","cl-reports-summary-table-col-2-1",4,"ngIf"],[1,"cl-reports-summary-table-col-2-2"],[3,"currency","format","isExpanded","group","showEstimate","filterGroups","level","hideAmount","userFormat","enabledStandardFilters","enableLinks","dateRange",4,"ngFor","ngForOf"],[3,"currency","format","isExpanded","group","showEstimate","filterGroups","level","hideAmount","userFormat","enabledStandardFilters","enableLinks","dateRange"]],template:function(e,t){if(1&e&&(a.Xb(0,"div",0),a.Xb(1,"div",1),a.Wc(2,b,3,4,"a",2),a.Xb(3,"div",3),a.Xb(4,"div",4),a.Wc(5,f,1,2,"i",5),a.Wc(6,g,2,2,"a",6),a.Wc(7,w,2,1,"ng-template",null,7,a.Xc),a.Wc(9,O,3,2,"ng-template",null,8,a.Xc),a.Wb(),a.Wb(),a.Wb(),a.Xb(11,"div",9),a.Xb(12,"div",10),a.Yc(13),a.oc(14,"timeFormat"),a.Wb(),a.Wc(15,T,4,3,"ng-container",11),a.Wc(16,E,4,6,"div",12),a.Wb(),a.Wb(),a.Wc(17,_,2,1,"ng-container",11)),2&e){const e=a.Lc(8);a.wc("ngClass",a.Cc(12,W,1===t.level?"cl-component-row-colored":"",2===t.level?"cl-component-row-colored-lvl-2 cl-summary-group-lvl-2":"")),a.Cb(2),a.wc("ngIf",t.group.children),a.Cb(3),a.wc("ngIf",t.group.type===t.SummaryGroupColumn.PROJECT||0===t.group.level),a.Cb(1),a.wc("ngIf",t.enableLinks&&t.queryParams&&t.filterIsAvailable)("ngIfElse",e),a.Cb(7),a.Zc(a.qc(14,9,t.group.duration,t.format)),a.Cb(2),a.wc("ngIf",t.showEstimate),a.Cb(1),a.wc("ngIf",!t.hideAmount),a.Cb(1),a.wc("ngIf",t.group.children&&t.group.isExpanded)}},directives:[c.r,c.u,l.f,c.B,c.t,e],pipes:[u.a,d.a,h.a],encapsulation:2,changeDetection:0}),e})()},EONh:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("ofXK"),s=i("3Pt+"),r=i("9Trn"),o=i("hT48"),a=i("iTUp"),c=i("dlKe"),l=i("LNDd"),u=i("1kSV"),d=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.a,a.a,c.b,l.a,u.M]]}),e})()},EVdn:function(e,t,i){var n;!function(t,i){"use strict";"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,(function(i,s){"use strict";var r=[],o=Object.getPrototypeOf,a=r.slice,c=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},l=r.push,u=r.indexOf,d={},h=d.toString,p=d.hasOwnProperty,b=p.toString,f=b.call(Object),m={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},w=i.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,i){var n,s,r=(i=i||w).createElement("script");if(r.text=e,t)for(n in y)(s=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,s);i.head.appendChild(r).parentNode.removeChild(r)}function k(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var S=function(e,t){return new S.fn.init(e,t)};function x(e){var t=!!e&&"length"in e&&e.length,i=k(e);return!g(e)&&!v(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:"3.5.1",constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:r.sort,splice:r.splice},S.extend=S.fn.extend=function(){var e,t,i,n,s,r,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||g(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(l&&n&&(S.isPlainObject(n)||(s=Array.isArray(n)))?(i=o[t],r=s&&!Array.isArray(i)?[]:s||S.isPlainObject(i)?i:{},s=!1,o[t]=S.extend(l,r,n)):void 0!==n&&(o[t]=n));return o},S.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==h.call(e)||(t=o(e))&&("function"!=typeof(i=p.call(t,"constructor")&&t.constructor)||b.call(i)!==f))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){C(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(x(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(x(Object(e))?S.merge(i,"string"==typeof e?[e]:e):l.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:u.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,s=e.length;n<i;n++)e[s++]=t[n];return e.length=s,e},grep:function(e,t,i){for(var n=[],s=0,r=e.length,o=!i;s<r;s++)!t(e[s],s)!==o&&n.push(e[s]);return n},map:function(e,t,i){var n,s,r=0,o=[];if(x(e))for(n=e.length;r<n;r++)null!=(s=t(e[r],r,i))&&o.push(s);else for(r in e)null!=(s=t(e[r],r,i))&&o.push(s);return c(o)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=r[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var O=function(e){var t,i,n,s,r,o,a,c,l,u,d,h,p,b,f,m,g,v,w,y="sizzle"+1*new Date,C=e.document,k=0,S=0,x=ce(),O=ce(),D=ce(),I=ce(),j=function(e,t){return e===t&&(d=!0),0},T={}.hasOwnProperty,E=[],A=E.pop,_=E.push,W=E.push,R=E.slice,P=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",X="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+F+"*("+X+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+X+"))|)"+F+"*\\]",N=":("+X+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",B=new RegExp(F+"+","g"),Y=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),V=new RegExp("^"+F+"*,"+F+"*"),U=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),H=new RegExp(F+"|>"),$=new RegExp(N),G=new RegExp("^"+X+"$"),z={ID:new RegExp("^#("+X+")"),CLASS:new RegExp("^\\.("+X+")"),TAG:new RegExp("^("+X+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},q=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,se=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){h()},oe=ye((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{W.apply(E=R.call(C.childNodes),C.childNodes)}catch(Oe){W={apply:E.length?function(e,t){_.apply(e,R.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ae(e,t,n,s){var r,a,l,u,d,b,g,v=t&&t.ownerDocument,C=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return n;if(!s&&(h(t),t=t||p,f)){if(11!==C&&(d=Q.exec(e)))if(r=d[1]){if(9===C){if(!(l=t.getElementById(r)))return n;if(l.id===r)return n.push(l),n}else if(v&&(l=v.getElementById(r))&&w(t,l)&&l.id===r)return n.push(l),n}else{if(d[2])return W.apply(n,t.getElementsByTagName(e)),n;if((r=d[3])&&i.getElementsByClassName&&t.getElementsByClassName)return W.apply(n,t.getElementsByClassName(r)),n}if(i.qsa&&!I[e+" "]&&(!m||!m.test(e))&&(1!==C||"object"!==t.nodeName.toLowerCase())){if(g=e,v=t,1===C&&(H.test(e)||U.test(e))){for((v=ee.test(e)&&ge(t.parentNode)||t)===t&&i.scope||((u=t.getAttribute("id"))?u=u.replace(ne,se):t.setAttribute("id",u=y)),a=(b=o(e)).length;a--;)b[a]=(u?"#"+u:":scope")+" "+we(b[a]);g=b.join(",")}try{return W.apply(n,v.querySelectorAll(g)),n}catch(k){I(e,!0)}finally{u===y&&t.removeAttribute("id")}}}return c(e.replace(Y,"$1"),t,n,s)}function ce(){var e=[];return function t(i,s){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=s}}function le(e){return e[y]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(Oe){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var i=e.split("|"),s=i.length;s--;)n.attrHandle[i[s]]=t}function he(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function be(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le((function(t){return t=+t,le((function(i,n){for(var s,r=e([],i.length,t),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))}))}))}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=ae.support={},r=ae.isXML=function(e){var t=(e.ownerDocument||e).documentElement;return!q.test(e.namespaceURI||t&&t.nodeName||"HTML")},h=ae.setDocument=function(e){var t,s,o=e?e.ownerDocument||e:C;return o!=p&&9===o.nodeType&&o.documentElement?(b=(p=o).documentElement,f=!r(p),C!=p&&(s=p.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",re,!1):s.attachEvent&&s.attachEvent("onunload",re)),i.scope=ue((function(e){return b.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),i.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=J.test(p.getElementsByClassName),i.getById=ue((function(e){return b.appendChild(e).id=y,!p.getElementsByName||!p.getElementsByName(y).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i,n,s,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(s=t.getElementsByName(e),n=0;r=s[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&f)return t.getElementsByClassName(e)},g=[],m=[],(i.qsa=J.test(p.querySelectorAll))&&(ue((function(e){var t;b.appendChild(e).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+y+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+y+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),b.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(i.matchesSelector=J.test(v=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector||b.msMatchesSelector))&&ue((function(e){i.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",N)})),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=J.test(b.compareDocumentPosition),w=t||J.test(b.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return d=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==p||e.ownerDocument==C&&w(C,e)?-1:t==p||t.ownerDocument==C&&w(C,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return d=!0,0;var i,n=0,s=e.parentNode,r=t.parentNode,o=[e],a=[t];if(!s||!r)return e==p?-1:t==p?1:s?-1:r?1:u?P(u,e)-P(u,t):0;if(s===r)return he(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?he(o[n],a[n]):o[n]==C?-1:a[n]==C?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),i.matchesSelector&&f&&!I[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var n=v.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Oe){I(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),w(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var s=n.attrHandle[t.toLowerCase()],r=s&&T.call(n.attrHandle,t.toLowerCase())?s(e,t,!f):void 0;return void 0!==r?r:i.attributes||!f?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ae.escape=function(e){return(e+"").replace(ne,se)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],s=0,r=0;if(d=!i.detectDuplicates,u=!i.sortStable&&e.slice(0),e.sort(j),d){for(;t=e[r++];)t===e[r]&&(s=n.push(r));for(;s--;)e.splice(n[s],1)}return u=null,e},s=ae.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=s(t);return i},(n=ae.selectors={cacheLength:50,createPseudo:le,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&$.test(i)&&(t=o(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&x(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var s=ae.attr(n,e);return null==s?"!="===t:!t||(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.slice(-i.length)===i:"~="===t?(" "+s.replace(B," ")+" ").indexOf(i)>-1:"|="===t&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,s){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,c){var l,u,d,h,p,b,f=r!==o?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!c&&!a,w=!1;if(m){if(r){for(;f;){for(h=t;h=h[f];)if(a?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;b=f="only"===e&&!b&&"nextSibling"}return!0}if(b=[o?m.firstChild:m.lastChild],o&&v){for(w=(p=(l=(u=(d=(h=m)[y]||(h[y]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===k&&l[1])&&l[2],h=p&&m.childNodes[p];h=++p&&h&&h[f]||(w=p=0)||b.pop();)if(1===h.nodeType&&++w&&h===t){u[e]=[k,p,w];break}}else if(v&&(w=p=(l=(u=(d=(h=t)[y]||(h[y]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===k&&l[1]),!1===w)for(;(h=++p&&h&&h[f]||(w=p=0)||b.pop())&&((a?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++w||(v&&((u=(d=h[y]||(h[y]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[k,w]),h!==t)););return(w-=s)===n||w%n==0&&w/n>=0}}},PSEUDO:function(e,t){var i,s=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return s[y]?s(t):s.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,i){for(var n,r=s(e,t),o=r.length;o--;)e[n=P(e,r[o])]=!(i[n]=r[o])})):function(e){return s(e,0,i)}):s}},pseudos:{not:le((function(e){var t=[],i=[],n=a(e.replace(Y,"$1"));return n[y]?le((function(e,t,i,s){for(var r,o=n(e,null,s,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))})):function(e,s,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}})),has:le((function(e){return function(t){return ae(e,t).length>0}})),contains:le((function(e){return e=e.replace(te,ie),function(t){return(t.textContent||s(t)).indexOf(e)>-1}})),lang:le((function(e){return G.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===b},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,i){return[i<0?i+t:i]})),even:me((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:me((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:me((function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:me((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=be(t);function ve(){}function we(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ye(e,t,i){var n=t.dir,s=t.next,r=s||n,o=i&&"parentNode"===r,a=S++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,s);return!1}:function(t,i,c){var l,u,d,h=[k,a];if(c){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,c))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(u=(d=t[y]||(t[y]={}))[t.uniqueID]||(d[t.uniqueID]={}),s&&s===t.nodeName.toLowerCase())t=t[n]||t;else{if((l=u[r])&&l[0]===k&&l[1]===a)return h[2]=l[2];if(u[r]=h,h[2]=e(t,i,c))return!0}return!1}}function Ce(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function ke(e,t,i,n,s){for(var r,o=[],a=0,c=e.length,l=null!=t;a<c;a++)(r=e[a])&&(i&&!i(r,n,s)||(o.push(r),l&&t.push(a)));return o}function Se(e,t,i,n,s,r){return n&&!n[y]&&(n=Se(n)),s&&!s[y]&&(s=Se(s,r)),le((function(r,o,a,c){var l,u,d,h=[],p=[],b=o.length,f=r||function(e,t,i){for(var n=0,s=t.length;n<s;n++)ae(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),m=!e||!r&&t?f:ke(f,h,e,a,c),g=i?s||(r?e:b||n)?[]:o:m;if(i&&i(m,g,a,c),n)for(l=ke(g,p),n(l,[],a,c),u=l.length;u--;)(d=l[u])&&(g[p[u]]=!(m[p[u]]=d));if(r){if(s||e){if(s){for(l=[],u=g.length;u--;)(d=g[u])&&l.push(m[u]=d);s(null,g=[],l,c)}for(u=g.length;u--;)(d=g[u])&&(l=s?P(r,d):h[u])>-1&&(r[l]=!(o[l]=d))}}else g=ke(g===o?g.splice(b,g.length):g),s?s(null,o,g,c):W.apply(o,g)}))}function xe(e){for(var t,i,s,r=e.length,o=n.relative[e[0].type],a=o||n.relative[" "],c=o?1:0,u=ye((function(e){return e===t}),a,!0),d=ye((function(e){return P(t,e)>-1}),a,!0),h=[function(e,i,n){var s=!o&&(n||i!==l)||((t=i).nodeType?u(e,i,n):d(e,i,n));return t=null,s}];c<r;c++)if(i=n.relative[e[c].type])h=[ye(Ce(h),i)];else{if((i=n.filter[e[c].type].apply(null,e[c].matches))[y]){for(s=++c;s<r&&!n.relative[e[s].type];s++);return Se(c>1&&Ce(h),c>1&&we(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(Y,"$1"),i,c<s&&xe(e.slice(c,s)),s<r&&xe(e=e.slice(s)),s<r&&we(e))}h.push(i)}return Ce(h)}return ve.prototype=n.filters=n.pseudos,n.setFilters=new ve,o=ae.tokenize=function(e,t){var i,s,r,o,a,c,l,u=O[e+" "];if(u)return t?0:u.slice(0);for(a=e,c=[],l=n.preFilter;a;){for(o in i&&!(s=V.exec(a))||(s&&(a=a.slice(s[0].length)||a),c.push(r=[])),i=!1,(s=U.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(Y," ")}),a=a.slice(i.length)),n.filter)!(s=z[o].exec(a))||l[o]&&!(s=l[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return t?a.length:a?ae.error(e):O(e,c).slice(0)},a=ae.compile=function(e,t){var i,s=[],r=[],a=D[e+" "];if(!a){for(t||(t=o(e)),i=t.length;i--;)(a=xe(t[i]))[y]?s.push(a):r.push(a);(a=D(e,function(e,t){var i=t.length>0,s=e.length>0,r=function(r,o,a,c,u){var d,b,m,g=0,v="0",w=r&&[],y=[],C=l,S=r||s&&n.find.TAG("*",u),x=k+=null==C?1:Math.random()||.1,O=S.length;for(u&&(l=o==p||o||u);v!==O&&null!=(d=S[v]);v++){if(s&&d){for(b=0,o||d.ownerDocument==p||(h(d),a=!f);m=e[b++];)if(m(d,o||p,a)){c.push(d);break}u&&(k=x)}i&&((d=!m&&d)&&g--,r&&w.push(d))}if(g+=v,i&&v!==g){for(b=0;m=t[b++];)m(w,y,o,a);if(r){if(g>0)for(;v--;)w[v]||y[v]||(y[v]=A.call(c));y=ke(y)}W.apply(c,y),u&&!r&&y.length>0&&g+t.length>1&&ae.uniqueSort(c)}return u&&(k=x,l=C),w};return i?le(r):r}(r,s))).selector=e}return a},c=ae.select=function(e,t,i,s){var r,c,l,u,d,h="function"==typeof e&&e,p=!s&&o(e=h.selector||e);if(i=i||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===t.nodeType&&f&&n.relative[c[1].type]){if(!(t=(n.find.ID(l.matches[0].replace(te,ie),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(r=z.needsContext.test(e)?0:c.length;r--&&!n.relative[u=(l=c[r]).type];)if((d=n.find[u])&&(s=d(l.matches[0].replace(te,ie),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(r,1),!(e=s.length&&we(c)))return W.apply(i,s),i;break}}return(h||a(e,p))(s,t,!f,i,!t||ee.test(e)&&ge(t.parentNode)||t),i},i.sortStable=y.split("").sort(j).join("")===y,i.detectDuplicates=!!d,h(),i.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(M,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ae}(i);S.find=O,S.expr=O.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=O.uniqueSort,S.text=O.getText,S.isXMLDoc=O.isXML,S.contains=O.contains,S.escapeSelector=O.escape;var D=function(e,t,i){for(var n=[],s=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&S(e).is(i))break;n.push(e)}return n},I=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},j=S.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(e,t,i){return g(t)?S.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?S.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?S.grep(e,(function(e){return u.call(t,e)>-1!==i})):S.filter(t,e,i)}S.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,i,n=this.length,s=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<n;t++)if(S.contains(s[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)S.find(e,s[t],i);return n>1?S.uniqueSort(i):i},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&j.test(e)?S(e):e||[],!1).length}});var _,W=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,i){var n,s;if(!e)return this;if(i=i||_,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:W.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(S.merge(this,S.parseHTML(n[1],(t=t instanceof S?t[0]:t)&&t.nodeType?t.ownerDocument||t:w,!0)),E.test(n[1])&&S.isPlainObject(t))for(n in t)g(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(s=w.getElementById(n[2]))&&(this[0]=s,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==i.ready?i.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,_=S(w);var R=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,s=this.length,r=[],o="string"!=typeof e&&S(e);if(!j.test(e))for(;n<s;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&S.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?S.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?u.call(S(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return D(e,"parentNode")},parentsUntil:function(e,t,i){return D(e,"parentNode",i)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return D(e,"nextSibling")},prevAll:function(e){return D(e,"previousSibling")},nextUntil:function(e,t,i){return D(e,"nextSibling",i)},prevUntil:function(e,t,i){return D(e,"previousSibling",i)},siblings:function(e){return I((e.parentNode||{}).firstChild,e)},children:function(e){return I(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(i,n){var s=S.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=S.filter(n,s)),this.length>1&&(P[e]||S.uniqueSort(s),R.test(e)&&s.reverse()),this.pushStack(s)}}));var F=/[^\x20\t\r\n\f]+/g;function X(e){return e}function L(e){throw e}function N(e,t,i,n){var s;try{e&&g(s=e.promise)?s.call(e).done(t).fail(i):e&&g(s=e.then)?s.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(F)||[],(function(e,i){t[i]=!0})),t}(e):S.extend({},e);var t,i,n,s,r=[],o=[],a=-1,c=function(){for(s=s||e.once,n=t=!0;o.length;a=-1)for(i=o.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=r.length,i=!1);e.memory||(i=!1),t=!1,s&&(r=i?[]:"")},l={add:function(){return r&&(i&&!t&&(a=r.length-1,o.push(i)),function t(i){S.each(i,(function(i,n){g(n)?e.unique&&l.has(n)||r.push(n):n&&n.length&&"string"!==k(n)&&t(n)}))}(arguments),i&&!t&&c()),this},remove:function(){return S.each(arguments,(function(e,t){for(var i;(i=S.inArray(t,r,i))>-1;)r.splice(i,1),i<=a&&a--})),this},has:function(e){return e?S.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=o=[],r=i="",this},disabled:function(){return!r},lock:function(){return s=o=[],i||t||(r=i=""),this},locked:function(){return!!s},fireWith:function(e,i){return s||(i=[e,(i=i||[]).slice?i.slice():i],o.push(i),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(i){S.each(t,(function(t,n){var s=g(e[n[4]])&&e[n[4]];r[n[1]]((function(){var e=s&&s.apply(this,arguments);e&&g(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,s?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,s){var r=0;function o(e,t,n,s){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(e<r)){if((i=n.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");g(l=i&&("object"==typeof i||"function"==typeof i)&&i.then)?s?l.call(i,o(r,t,X,s),o(r,t,L,s)):(r++,l.call(i,o(r,t,X,s),o(r,t,L,s),o(r,t,X,t.notifyWith))):(n!==X&&(a=void 0,c=[i]),(s||t.resolveWith)(a,c))}},u=s?l:function(){try{l()}catch(i){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(i,u.stackTrace),e+1>=r&&(n!==L&&(a=void 0,c=[i]),t.rejectWith(a,c))}};e?u():(S.Deferred.getStackHook&&(u.stackTrace=S.Deferred.getStackHook()),i.setTimeout(u))}}return S.Deferred((function(i){t[0][3].add(o(0,i,g(s)?s:X,i.notifyWith)),t[1][3].add(o(0,i,g(e)?e:X)),t[2][3].add(o(0,i,g(n)?n:L))})).promise()},promise:function(e){return null!=e?S.extend(e,s):s}},r={};return S.each(t,(function(e,i){var o=i[2],a=i[5];s[i[1]]=o.add,a&&o.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=o.fireWith})),s.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),s=a.call(arguments),r=S.Deferred(),o=function(e){return function(i){n[e]=this,s[e]=arguments.length>1?a.call(arguments):i,--t||r.resolveWith(n,s)}};if(t<=1&&(N(e,r.done(o(i)).resolve,r.reject,!t),"pending"===r.state()||g(s[i]&&s[i].then)))return r.then();for(;i--;)N(s[i],o(i),r.reject);return r.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&B.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){i.setTimeout((function(){throw e}))};var Y=S.Deferred();function V(){w.removeEventListener("DOMContentLoaded",V),i.removeEventListener("load",V),S.ready()}S.fn.ready=function(e){return Y.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||Y.resolveWith(w,[S]))}}),S.ready.then=Y.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?i.setTimeout(S.ready):(w.addEventListener("DOMContentLoaded",V),i.addEventListener("load",V));var U=function(e,t,i,n,s,r,o){var a=0,c=e.length,l=null==i;if("object"===k(i))for(a in s=!0,i)U(e,t,a,i[a],!0,r,o);else if(void 0!==n&&(s=!0,g(n)||(o=!0),l&&(o?(t.call(e,n),t=null):(l=t,t=function(e,t,i){return l.call(S(e),i)})),t))for(;a<c;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return s?e:l?t.call(e):c?t(e[0],i):r},H=/^-ms-/,$=/-([a-z])/g;function G(e,t){return t.toUpperCase()}function z(e){return e.replace(H,"ms-").replace($,G)}var q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=S.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,s=this.cache(e);if("string"==typeof t)s[z(t)]=i;else for(n in t)s[z(n)]=t[n];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][z(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(z):(t=z(t))in n?[t]:t.match(F)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||S.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Z=new K,J=new K,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(i)}catch(s){}J.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return J.hasData(e)||Z.hasData(e)},data:function(e,t,i){return J.access(e,t,i)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,i){return Z.access(e,t,i)},_removeData:function(e,t){Z.remove(e,t)}}),S.fn.extend({data:function(e,t){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(s=J.get(r),1===r.nodeType&&!Z.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=z(n.slice(5)),te(r,n,s[n]));Z.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each((function(){J.set(this,e)})):U(this,(function(t){var i;if(r&&void 0===t)return void 0!==(i=J.get(r,e))||void 0!==(i=te(r,e))?i:void 0;this.each((function(){J.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){J.remove(this,e)}))}}),S.extend({queue:function(e,t,i){var n;if(e)return n=Z.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=Z.access(e,t,S.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){var i=S.queue(e,t=t||"fx"),n=i.length,s=i.shift(),r=S._queueHooks(e,t);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete r.stop,s.call(e,(function(){S.dequeue(e,t)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Z.get(e,i)||Z.access(e,i,{empty:S.Callbacks("once memory").add((function(){Z.remove(e,[t+"queue",i])}))})}}),S.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?S.queue(this[0],e):void 0===t?this:this.each((function(){var i=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=S.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=Z.get(r[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],re=w.documentElement,oe=function(e){return S.contains(e.ownerDocument,e)},ae={composed:!0};re.getRootNode&&(oe=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===S.css(e,"display")};function le(e,t,i,n){var s,r,o=20,a=n?function(){return n.cur()}:function(){return S.css(e,t,"")},c=a(),l=i&&i[3]||(S.cssNumber[t]?"":"px"),u=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+c)&&ne.exec(S.css(e,t));if(u&&u[3]!==l){for(l=l||u[3],u=+(c/=2)||1;o--;)S.style(e,t,u+l),(1-r)*(1-(r=a()/c||.5))<=0&&(o=0),u/=r;S.style(e,t,(u*=2)+l),i=i||[]}return i&&(u=+u||+c||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=u,n.end=s)),s}var ue={};function de(e){var t,i=e.ownerDocument,n=e.nodeName,s=ue[n];return s||(t=i.body.appendChild(i.createElement(n)),s=S.css(t,"display"),t.parentNode.removeChild(t),"none"===s&&(s="block"),ue[n]=s,s)}function he(e,t){for(var i,n,s=[],r=0,o=e.length;r<o;r++)(n=e[r]).style&&(i=n.style.display,t?("none"===i&&(s[r]=Z.get(n,"display")||null,s[r]||(n.style.display="")),""===n.style.display&&ce(n)&&(s[r]=de(n))):"none"!==i&&(s[r]="none",Z.set(n,"display",i)));for(r=0;r<o;r++)null!=s[r]&&(e[r].style.display=s[r]);return e}S.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?S(this).show():S(this).hide()}))}});var pe,be,fe=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;pe=w.createDocumentFragment().appendChild(w.createElement("div")),(be=w.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),pe.appendChild(be),m.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",m.option=!!pe.lastChild;var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function we(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?S.merge([e],i):i}function ye(e,t){for(var i=0,n=e.length;i<n;i++)Z.set(e[i],"globalEval",!t||Z.get(t[i],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,m.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var Ce=/<|&#?\w+;/;function ke(e,t,i,n,s){for(var r,o,a,c,l,u,d=t.createDocumentFragment(),h=[],p=0,b=e.length;p<b;p++)if((r=e[p])||0===r)if("object"===k(r))S.merge(h,r.nodeType?[r]:r);else if(Ce.test(r)){for(o=o||d.appendChild(t.createElement("div")),a=(me.exec(r)||["",""])[1].toLowerCase(),o.innerHTML=(c=ve[a]||ve._default)[1]+S.htmlPrefilter(r)+c[2],u=c[0];u--;)o=o.lastChild;S.merge(h,o.childNodes),(o=d.firstChild).textContent=""}else h.push(t.createTextNode(r));for(d.textContent="",p=0;r=h[p++];)if(n&&S.inArray(r,n)>-1)s&&s.push(r);else if(l=oe(r),o=we(d.appendChild(r),"script"),l&&ye(o),i)for(u=0;r=o[u++];)ge.test(r.type||"")&&i.push(r);return d}var Se=/^key/,xe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Oe=/^([^.]*)(?:\.(.+)|)/;function De(){return!0}function Ie(){return!1}function je(e,t){return e===function(){try{return w.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,i,n,s,r){var o,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)Te(e,a,i,n,t[a],r);return e}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=Ie;else if(!s)return e;return 1===r&&(o=s,(s=function(e){return S().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=S.guid++)),e.each((function(){S.event.add(this,t,s,n,i)}))}function Ee(e,t,i){i?(Z.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,s,r=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),Z.set(this,t,r),n=i(this,t),this[t](),r!==(s=Z.get(this,t))||n?Z.set(this,t,!1):s={},r!==s)return e.stopImmediatePropagation(),e.preventDefault(),s.value}else r.length&&(Z.set(this,t,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&S.event.add(e,t,De)}S.event={global:{},add:function(e,t,i,n,s){var r,o,a,c,l,u,d,h,p,b,f,m=Z.get(e);if(q(e))for(i.handler&&(i=(r=i).handler,s=r.selector),s&&S.find.matchesSelector(re,s),i.guid||(i.guid=S.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(F)||[""]).length;l--;)p=f=(a=Oe.exec(t[l])||[])[1],b=(a[2]||"").split(".").sort(),p&&(d=S.event.special[p]||{},d=S.event.special[p=(s?d.delegateType:d.bindType)||p]||{},u=S.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&S.expr.match.needsContext.test(s),namespace:b.join(".")},r),(h=c[p])||((h=c[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,n,b,o)||e.addEventListener&&e.addEventListener(p,o)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),s?h.splice(h.delegateCount++,0,u):h.push(u),S.event.global[p]=!0)},remove:function(e,t,i,n,s){var r,o,a,c,l,u,d,h,p,b,f,m=Z.hasData(e)&&Z.get(e);if(m&&(c=m.events)){for(l=(t=(t||"").match(F)||[""]).length;l--;)if(p=f=(a=Oe.exec(t[l])||[])[1],b=(a[2]||"").split(".").sort(),p){for(d=S.event.special[p]||{},h=c[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=h.length;r--;)u=h[r],!s&&f!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,b,m.handle)||S.removeEvent(e,p,m.handle),delete c[p])}else for(p in c)S.event.remove(e,p+t[l],i,n,!0);S.isEmptyObject(c)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,i,n,s,r,o,a=new Array(arguments.length),c=S.event.fix(e),l=(Z.get(this,"events")||Object.create(null))[c.type]||[],u=S.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=S.event.handlers.call(this,c,l),t=0;(s=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==r.namespace&&!c.rnamespace.test(r.namespace)||(c.handleObj=r,c.data=r.data,void 0!==(n=((S.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a))&&!1===(c.result=n)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var i,n,s,r,o,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(r=[],o={},i=0;i<c;i++)void 0===o[s=(n=t[i]).selector+" "]&&(o[s]=n.needsContext?S(s,this).index(l)>-1:S.find(s,this,null,[l]).length),o[s]&&r.push(n);r.length&&a.push({elem:l,handlers:r})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&T(t,"input")&&Ee(t,"click",De),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&T(t,"input")&&Ee(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&T(t,"input")&&Z.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?De:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=De,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=De,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=De,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Se.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&xe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Ee(this,e,je),!1},trigger:function(){return Ee(this,e),!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,r=e.handleObj;return s&&(s===n||S.contains(n,s))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}})),S.fn.extend({on:function(e,t,i,n){return Te(this,e,t,i,n)},one:function(e,t,i,n){return Te(this,e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Ie),this.each((function(){S.event.remove(this,e,i,t)}))}});var Ae=/<script|<style|<link/i,_e=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Re(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var i,n,s,r,o,a;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.get(e).events))for(s in Z.remove(t,"handle events"),a)for(i=0,n=a[s].length;i<n;i++)S.event.add(t,s,a[s][i]);J.hasData(e)&&(r=J.access(e),o=S.extend({},r),J.set(t,o))}}function Xe(e,t){var i=t.nodeName.toLowerCase();"input"===i&&fe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Le(e,t,i,n){t=c(t);var s,r,o,a,l,u,d=0,h=e.length,p=h-1,b=t[0],f=g(b);if(f||h>1&&"string"==typeof b&&!m.checkClone&&_e.test(b))return e.each((function(s){var r=e.eq(s);f&&(t[0]=b.call(this,s,r.html())),Le(r,t,i,n)}));if(h&&(r=(s=ke(t,e[0].ownerDocument,!1,e,n)).firstChild,1===s.childNodes.length&&(s=r),r||n)){for(a=(o=S.map(we(s,"script"),Pe)).length;d<h;d++)l=s,d!==p&&(l=S.clone(l,!0,!0),a&&S.merge(o,we(l,"script"))),i.call(e[d],l,d);if(a)for(u=o[o.length-1].ownerDocument,S.map(o,Me),d=0;d<a;d++)ge.test((l=o[d]).type||"")&&!Z.access(l,"globalEval")&&S.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):C(l.textContent.replace(We,""),l,u))}return e}function Ne(e,t,i){for(var n,s=t?S.filter(t,e):e,r=0;null!=(n=s[r]);r++)i||1!==n.nodeType||S.cleanData(we(n)),n.parentNode&&(i&&oe(n)&&ye(we(n,"script")),n.parentNode.removeChild(n));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,s,r,o,a=e.cloneNode(!0),c=oe(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(o=we(a),n=0,s=(r=we(e)).length;n<s;n++)Xe(r[n],o[n]);if(t)if(i)for(r=r||we(e),o=o||we(a),n=0,s=r.length;n<s;n++)Fe(r[n],o[n]);else Fe(e,a);return(o=we(a,"script")).length>0&&ye(o,!c&&we(e,"script")),a},cleanData:function(e){for(var t,i,n,s=S.event.special,r=0;void 0!==(i=e[r]);r++)if(q(i)){if(t=i[Z.expando]){if(t.events)for(n in t.events)s[n]?S.event.remove(i,n):S.removeEvent(i,n,t.handle);i[Z.expando]=void 0}i[J.expando]&&(i[J.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Ne(this,e,!0)},remove:function(e){return Ne(this,e)},text:function(e){return U(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Le(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)}))},prepend:function(){return Le(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(we(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return U(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ve[(me.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(we(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Le(this,arguments,(function(t){var i=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(we(this)),i&&i.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var i,n=[],s=S(e),r=s.length-1,o=0;o<=r;o++)i=o===r?this:this.clone(!0),S(s[o])[t](i),l.apply(n,i.get());return this.pushStack(n)}}));var Be=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),Ye=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Ve=function(e,t,i){var n,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];for(s in n=i.call(e),t)e.style[s]=r[s];return n},Ue=new RegExp(se.join("|"),"i");function He(e,t,i){var n,s,r,o,a=e.style;return(i=i||Ye(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||oe(e)||(o=S.style(e,t)),!m.pixelBoxStyles()&&Be.test(o)&&Ue.test(t)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(l).appendChild(u);var e=i.getComputedStyle(u);n="1%"!==e.top,c=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),s=36===t(e.width),u.style.position="absolute",r=12===t(u.offsetWidth/3),re.removeChild(l),u=null}}function t(e){return Math.round(parseFloat(e))}var n,s,r,o,a,c,l=w.createElement("div"),u=w.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,t,n,s;return null==a&&(e=w.createElement("table"),t=w.createElement("tr"),n=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),s=i.getComputedStyle(t),a=parseInt(s.height)>3,re.removeChild(e)),a}}))}();var Ge=["Webkit","Moz","ms"],ze=w.createElement("div").style,qe={};function Ke(e){return S.cssProps[e]||qe[e]||(e in ze?e:qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Ge.length;i--;)if((e=Ge[i]+t)in ze)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,Je=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"};function tt(e,t,i){var n=ne.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function it(e,t,i,n,s,r){var o="width"===t?1:0,a=0,c=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(c+=S.css(e,i+se[o],!0,s)),n?("content"===i&&(c-=S.css(e,"padding"+se[o],!0,s)),"margin"!==i&&(c-=S.css(e,"border"+se[o]+"Width",!0,s))):(c+=S.css(e,"padding"+se[o],!0,s),"padding"!==i?c+=S.css(e,"border"+se[o]+"Width",!0,s):a+=S.css(e,"border"+se[o]+"Width",!0,s));return!n&&r>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-c-a-.5))||0),c}function nt(e,t,i){var n=Ye(e),s=(!m.boxSizingReliable()||i)&&"border-box"===S.css(e,"boxSizing",!1,n),r=s,o=He(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Be.test(o)){if(!i)return o;o="auto"}return(!m.boxSizingReliable()&&s||!m.reliableTrDimensions()&&T(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(s="border-box"===S.css(e,"boxSizing",!1,n),(r=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+it(e,t,i||(s?"border":"content"),r,n,o)+"px"}function st(e,t,i,n,s){return new st.prototype.init(e,t,i,n,s)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=He(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,o,a=z(t),c=Je.test(t),l=e.style;if(c||(t=Ke(a)),o=S.cssHooks[t]||S.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(e,!1,n))?s:l[t];"string"==(r=typeof i)&&(s=ne.exec(i))&&s[1]&&(i=le(e,t,s),r="number"),null!=i&&i==i&&("number"!==r||c||(i+=s&&s[3]||(S.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(c?l.setProperty(t,i):l[t]=i))}},css:function(e,t,i,n){var s,r,o,a=z(t);return Je.test(t)||(t=Ke(a)),(o=S.cssHooks[t]||S.cssHooks[a])&&"get"in o&&(s=o.get(e,!0,i)),void 0===s&&(s=He(e,t,n)),"normal"===s&&t in et&&(s=et[t]),""===i||i?(r=parseFloat(s),!0===i||isFinite(r)?r||0:s):s}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,i,n){if(i)return!Ze.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,n):Ve(e,Qe,(function(){return nt(e,t,n)}))},set:function(e,i,n){var s,r=Ye(e),o=!m.scrollboxSize()&&"absolute"===r.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,r),c=n?it(e,t,n,a,r):0;return a&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-it(e,t,"border",!1,r)-.5)),c&&(s=ne.exec(i))&&"px"!==(s[3]||"px")&&(e.style[t]=i,i=S.css(e,t)),tt(0,i,c)}}})),S.cssHooks.marginLeft=$e(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];n<4;n++)s[e+se[n]+t]=r[n]||r[n-2]||r[0];return s}},"margin"!==e&&(S.cssHooks[e+t].set=tt)})),S.fn.extend({css:function(e,t){return U(this,(function(e,t,i){var n,s,r={},o=0;if(Array.isArray(t)){for(n=Ye(e),s=t.length;o<s;o++)r[t[o]]=S.css(e,t[o],!1,n);return r}return void 0!==i?S.style(e,t,i):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=st,(st.prototype={constructor:st,init:function(e,t,i,n,s,r){this.elem=e,this.prop=i,this.easing=s||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(S.cssNumber[i]?"":"px")},cur:function(){var e=st.propHooks[this.prop];return e&&e.get?e.get(this):st.propHooks._default.get(this)},run:function(e){var t,i=st.propHooks[this.prop];return this.pos=t=this.options.duration?S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):st.propHooks._default.set(this),this}}).init.prototype=st.prototype,(st.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=st.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=st.prototype.init,S.fx.step={};var rt,ot,at=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function lt(){ot&&(!1===w.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(lt):i.setTimeout(lt,S.fx.interval),S.fx.tick())}function ut(){return i.setTimeout((function(){rt=void 0})),rt=Date.now()}function dt(e,t){var i,n=0,s={height:e};for(t=t?1:0;n<4;n+=2-t)s["margin"+(i=se[n])]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function ht(e,t,i){for(var n,s=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),r=0,o=s.length;r<o;r++)if(n=s[r].call(i,t,e))return n}function pt(e,t,i){var n,s,r=0,o=pt.prefilters.length,a=S.Deferred().always((function(){delete c.elem})),c=function(){if(s)return!1;for(var t=rt||ut(),i=Math.max(0,l.startTime+l.duration-t),n=1-(i/l.duration||0),r=0,o=l.tweens.length;r<o;r++)l.tweens[r].run(n);return a.notifyWith(e,[l,n,i]),n<1&&o?i:(o||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},i),originalProperties:t,originalOptions:i,startTime:rt||ut(),duration:i.duration,tweens:[],createTween:function(t,i){var n=S.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var i=0,n=t?l.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)l.tweens[i].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(function(e,t){var i,n,s,r,o;for(i in e)if(s=t[n=z(i)],r=e[i],Array.isArray(r)&&(s=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(o=S.cssHooks[n])&&"expand"in o)for(i in r=o.expand(r),delete e[n],r)i in e||(e[i]=r[i],t[i]=s);else t[n]=s}(u,l.opts.specialEasing);r<o;r++)if(n=pt.prefilters[r].call(l,e,u,l.opts))return g(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(u,ht,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(pt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return le(i.elem,e,ne.exec(t),i),i}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(F);for(var i,n=0,s=e.length;n<s;n++)(pt.tweeners[i=e[n]]=pt.tweeners[i]||[]).unshift(t)},prefilters:[function(e,t,i){var n,s,r,o,a,c,l,u,d="width"in t||"height"in t,h=this,p={},b=e.style,f=e.nodeType&&ce(e),m=Z.get(e,"fxshow");for(n in i.queue||(null==(o=S._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,S.queue(e,"fx").length||o.empty.fire()}))}))),t)if(at.test(s=t[n])){if(delete t[n],r=r||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;f=!0}p[n]=m&&m[n]||S.style(e,n)}if((c=!S.isEmptyObject(t))||!S.isEmptyObject(p))for(n in d&&1===e.nodeType&&(i.overflow=[b.overflow,b.overflowX,b.overflowY],null==(l=m&&m.display)&&(l=Z.get(e,"display")),"none"===(u=S.css(e,"display"))&&(l?u=l:(he([e],!0),l=e.style.display||l,u=S.css(e,"display"),he([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===S.css(e,"float")&&(c||(h.done((function(){b.display=l})),null==l&&(l="none"===(u=b.display)?"":u)),b.display="inline-block")),i.overflow&&(b.overflow="hidden",h.always((function(){b.overflow=i.overflow[0],b.overflowX=i.overflow[1],b.overflowY=i.overflow[2]}))),c=!1,p)c||(m?"hidden"in m&&(f=m.hidden):m=Z.access(e,"fxshow",{display:l}),r&&(m.hidden=!f),f&&he([e],!0),h.done((function(){for(n in f||he([e]),Z.remove(e,"fxshow"),p)S.style(e,n,p[n])}))),c=ht(f?m[n]:0,n,h),n in m||(m[n]=c.start,f&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),S.speed=function(e,t,i){var n=e&&"object"==typeof e?S.extend({},e):{complete:i||!i&&t||g(e)&&e,duration:e,easing:i&&t||t&&!g(t)&&t};return S.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in S.fx.speeds?S.fx.speeds[n.duration]:S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){g(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=S.isEmptyObject(e),r=S.speed(t,i,n),o=function(){var t=pt(this,S.extend({},e),r);(s||Z.get(this,"finish"))&&t.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,s=null!=e&&e+"queueHooks",r=S.timers,o=Z.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&ct.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=e&&r[s].queue!==e||(r[s].anim.stop(i),t=!1,r.splice(s,1));!t&&i||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=Z.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],r=S.timers,o=n?n.length:0;for(i.finish=!0,S.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var i=S.fn[t];S.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(dt(t,!0),e,n,s)}})),S.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),S.timers=[],S.fx.tick=function(){var e,t=0,i=S.timers;for(rt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||S.fx.stop(),rt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ot||(ot=!0,lt())},S.fx.stop=function(){ot=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,this.queue(t=t||"fx",(function(t,n){var s=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(s)}}))},function(){var e=w.createElement("input"),t=w.createElement("select").appendChild(w.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=w.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var bt,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return U(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?S.prop(e,t,i):(1===r&&S.isXMLDoc(e)||(s=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?bt:void 0)),void 0!==i?null===i?void S.removeAttr(e,t):s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):s&&"get"in s&&null!==(n=s.get(e,t))?n:null==(n=S.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&T(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,s=t&&t.match(F);if(s&&1===e.nodeType)for(;i=s[n++];)e.removeAttribute(i)}}),bt={set:function(e,t,i){return!1===t?S.removeAttr(e,i):e.setAttribute(i,i),i}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=ft[t]||S.find.attr;ft[t]=function(e,t,n){var s,r,o=t.toLowerCase();return n||(r=ft[o],ft[o]=s,s=null!=i(e,t,n)?o:null,ft[o]=r),s}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(F)||[]).join(" ")}function wt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(F)||[]}S.fn.extend({prop:function(e,t){return U(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&S.isXMLDoc(e)||(s=S.propHooks[t=S.propFix[t]||t]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:e[t]=i:s&&"get"in s&&null!==(n=s.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(e){return null},set:function(e){}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,i,n,s,r,o,a,c=0;if(g(e))return this.each((function(t){S(this).addClass(e.call(this,t,wt(this)))}));if((t=yt(e)).length)for(;i=this[c++];)if(s=wt(i),n=1===i.nodeType&&" "+vt(s)+" "){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s!==(a=vt(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,s,r,o,a,c=0;if(g(e))return this.each((function(t){S(this).removeClass(e.call(this,t,wt(this)))}));if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;i=this[c++];)if(s=wt(i),n=1===i.nodeType&&" "+vt(s)+" "){for(o=0;r=t[o++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");s!==(a=vt(n))&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):g(e)?this.each((function(i){S(this).toggleClass(e.call(this,i,wt(this),t),t)})):this.each((function(){var t,s,r,o;if(n)for(s=0,r=S(this),o=yt(e);t=o[s++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||((t=wt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+vt(wt(i))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;S.fn.extend({val:function(e){var t,i,n,s=this[0];return arguments.length?(n=g(e),this.each((function(i){var s;1===this.nodeType&&(null==(s=n?e.call(this,i,S(this).val()):e)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=S.map(s,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))}))):s?(t=S.valHooks[s.type]||S.valHooks[s.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(Ct,""):null==i?"":i:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,i,n,s=e.options,r=e.selectedIndex,o="select-one"===e.type,a=o?null:[],c=o?r+1:s.length;for(n=r<0?c:o?r:0;n<c;n++)if(((i=s[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!T(i.parentNode,"optgroup"))){if(t=S(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,s=e.options,r=S.makeArray(t),o=s.length;o--;)((n=s[o]).selected=S.inArray(S.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},m.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in i;var kt=/^(?:focusinfocus|focusoutblur)$/,St=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,s){var r,o,a,c,l,u,d,h,b=[n||w],f=p.call(e,"type")?e.type:e,m=p.call(e,"namespace")?e.namespace.split("."):[];if(o=h=a=n=n||w,3!==n.nodeType&&8!==n.nodeType&&!kt.test(f+S.event.triggered)&&(f.indexOf(".")>-1&&(m=f.split("."),f=m.shift(),m.sort()),l=f.indexOf(":")<0&&"on"+f,(e=e[S.expando]?e:new S.Event(f,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),d=S.event.special[f]||{},s||!d.trigger||!1!==d.trigger.apply(n,t))){if(!s&&!d.noBubble&&!v(n)){for(kt.test((c=d.delegateType||f)+f)||(o=o.parentNode);o;o=o.parentNode)b.push(o),a=o;a===(n.ownerDocument||w)&&b.push(a.defaultView||a.parentWindow||i)}for(r=0;(o=b[r++])&&!e.isPropagationStopped();)h=o,e.type=r>1?c:d.bindType||f,(u=(Z.get(o,"events")||Object.create(null))[e.type]&&Z.get(o,"handle"))&&u.apply(o,t),(u=l&&o[l])&&u.apply&&q(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=f,s||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(b.pop(),t)||!q(n)||l&&g(n[f])&&!v(n)&&((a=n[l])&&(n[l]=null),S.event.triggered=f,e.isPropagationStopped()&&h.addEventListener(f,St),n[f](),e.isPropagationStopped()&&h.removeEventListener(f,St),S.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(e,t,i){var n=S.extend(new S.Event,i,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return S.event.trigger(e,t,i,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,s=Z.access(n,t);s||n.addEventListener(e,i,!0),Z.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,s=Z.access(n,t)-1;s?Z.access(n,t,s):(n.removeEventListener(e,i,!0),Z.remove(n,t))}}}));var xt=i.location,Ot={guid:Date.now()},Dt=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(n){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var It=/\[\]$/,jt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function At(e,t,i,n){var s;if(Array.isArray(t))S.each(t,(function(t,s){i||It.test(e)?n(e,s):At(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,i,n)}));else if(i||"object"!==k(t))n(e,t);else for(s in t)At(e+"["+s+"]",t[s],i,n)}S.param=function(e,t){var i,n=[],s=function(e,t){var i=g(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){s(this.name,this.value)}));else for(i in e)At(i,e[i],t,s);return n.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Et.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!fe.test(e))})).map((function(e,t){var i=S(this).val();return null==i?null:Array.isArray(i)?S.map(i,(function(e){return{name:t.name,value:e.replace(jt,"\r\n")}})):{name:t.name,value:i.replace(jt,"\r\n")}})).get()}});var _t=/%20/g,Wt=/#.*$/,Rt=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Ft=/^\/\//,Xt={},Lt={},Nt="*/".concat("*"),Bt=w.createElement("a");function Yt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,r=t.toLowerCase().match(F)||[];if(g(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Vt(e,t,i,n){var s={},r=e===Lt;function o(a){var c;return s[a]=!0,S.each(e[a]||[],(function(e,a){var l=a(t,i,n);return"string"!=typeof l||r||s[l]?r?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),c}return o(t.dataTypes[0])||!s["*"]&&o("*")}function Ut(e,t){var i,n,s=S.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((s[i]?e:n||(n={}))[i]=t[i]);return n&&S.extend(!0,e,n),e}Bt.href=xt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,S.ajaxSettings),t):Ut(S.ajaxSettings,e)},ajaxPrefilter:Yt(Xt),ajaxTransport:Yt(Lt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var n,s,r,o,a,c,l,u,d,h,p=S.ajaxSetup({},t=t||{}),b=p.context||p,f=p.context&&(b.nodeType||b.jquery)?S(b):S.event,m=S.Deferred(),g=S.Callbacks("once memory"),v=p.statusCode||{},y={},C={},k="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=Pt.exec(r);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?r:null},setRequestHeader:function(e,t){return null==l&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==l&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)x.always(e[x.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||k;return n&&n.abort(t),O(0,t),this}};if(m.promise(x),p.url=((e||p.url||xt.href)+"").replace(Ft,xt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){c=w.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Bt.protocol+"//"+Bt.host!=c.protocol+"//"+c.host}catch(D){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Vt(Xt,p,t,x),l)return x;for(d in(u=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Mt.test(p.type),s=p.url.replace(Wt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(_t,"+")):(h=p.url.slice(s.length),p.data&&(p.processData||"string"==typeof p.data)&&(s+=(Dt.test(s)?"&":"?")+p.data,delete p.data),!1===p.cache&&(s=s.replace(Rt,"$1"),h=(Dt.test(s)?"&":"?")+"_="+Ot.guid+++h),p.url=s+h),p.ifModified&&(S.lastModified[s]&&x.setRequestHeader("If-Modified-Since",S.lastModified[s]),S.etag[s]&&x.setRequestHeader("If-None-Match",S.etag[s])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Nt+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(b,x,p)||l))return x.abort();if(k="abort",g.add(p.complete),x.done(p.success),x.fail(p.error),n=Vt(Lt,p,t,x)){if(x.readyState=1,u&&f.trigger("ajaxSend",[x,p]),l)return x;p.async&&p.timeout>0&&(a=i.setTimeout((function(){x.abort("timeout")}),p.timeout));try{l=!1,n.send(y,O)}catch(D){if(l)throw D;O(-1,D)}}else O(-1,"No Transport");function O(e,t,o,c){var d,h,w,y,C,k=t;l||(l=!0,a&&i.clearTimeout(a),n=void 0,r=c||"",x.readyState=e>0?4:0,d=e>=200&&e<300||304===e,o&&(y=function(e,t,i){for(var n,s,r,o,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){c.unshift(s);break}if(c[0]in i)r=c[0];else{for(s in i){if(!c[0]||e.converters[s+" "+c[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==c[0]&&c.unshift(r),i[r]}(p,x,o)),!d&&S.inArray("script",p.dataTypes)>-1&&(p.converters["text script"]=function(){}),y=function(e,t,i,n){var s,r,o,a,c,l={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=r,r=u.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(!(o=l[c+" "+r]||l["* "+r]))for(s in l)if((a=s.split(" "))[1]===r&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[s]:!0!==l[s]&&(r=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(D){return{state:"parsererror",error:o?D:"No conversion from "+c+" to "+r}}}return{state:"success",data:t}}(p,y,x,d),d?(p.ifModified&&((C=x.getResponseHeader("Last-Modified"))&&(S.lastModified[s]=C),(C=x.getResponseHeader("etag"))&&(S.etag[s]=C)),204===e||"HEAD"===p.type?k="nocontent":304===e?k="notmodified":(k=y.state,h=y.data,d=!(w=y.error))):(w=k,!e&&k||(k="error",e<0&&(e=0))),x.status=e,x.statusText=(t||k)+"",d?m.resolveWith(b,[h,k,x]):m.rejectWith(b,[x,k,w]),x.statusCode(v),v=void 0,u&&f.trigger(d?"ajaxSuccess":"ajaxError",[x,p,d?h:w]),g.fireWith(b,[x,k]),u&&(f.trigger("ajaxComplete",[x,p]),--S.active||S.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,i,n,s){return g(i)&&(s=s||n,n=i,i=void 0),S.ajax(S.extend({url:e,type:t,dataType:s,data:i,success:n},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,i){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,i)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(i){S(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},$t=S.ajaxSettings.xhr();m.cors=!!$t&&"withCredentials"in $t,m.ajax=$t=!!$t,S.ajaxTransport((function(e){var t,n;if(m.cors||$t&&!e.crossDomain)return{send:function(s,r){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(o,s[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ht[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(c){if(t)throw c}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,s){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&s("error"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Gt,zt=[],qt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+Ot.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var s,r,o,a=!1!==e.jsonp&&(qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(qt,"$1"+s):!1!==e.jsonp&&(e.url+=(Dt.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||S.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=i[s],i[s]=function(){o=arguments},n.always((function(){void 0===r?S(i).removeProp(s):i[s]=r,e[s]&&(e.jsonpCallback=t.jsonpCallback,zt.push(s)),o&&g(r)&&r(o[0]),o=r=void 0})),"script"})),m.createHTMLDocument=((Gt=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Gt.childNodes.length),S.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((n=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(n)):t=w),r=!i&&[],(s=E.exec(e))?[t.createElement(s[1])]:(s=ke([e],t,r),r&&r.length&&S(r).remove(),S.merge([],s.childNodes)));var n,s,r},S.fn.load=function(e,t,i){var n,s,r,o=this,a=e.indexOf(" ");return a>-1&&(n=vt(e.slice(a)),e=e.slice(0,a)),g(t)?(i=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&S.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done((function(e){r=arguments,o.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)})).always(i&&function(e,t){o.each((function(){i.apply(this,r||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,i){var n,s,r,o,a,c,l=S.css(e,"position"),u=S(e),d={};"static"===l&&(e.style.position="relative"),a=u.offset(),r=S.css(e,"top"),c=S.css(e,"left"),("absolute"===l||"fixed"===l)&&(r+c).indexOf("auto")>-1?(o=(n=u.position()).top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(c)||0),g(t)&&(t=t.call(e,i,S.extend({},a))),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+s),"using"in t?t.using.call(e,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),u.css(d))}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?{top:(t=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:t.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],s={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((s=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),s.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-s.top-S.css(n,"marginTop",!0),left:t.left-s.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||re}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;S.fn[e]=function(n){return U(this,(function(e,n,s){var r;if(v(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===s)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:s,i?s:r.pageYOffset):e[n]=s}),e,n,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=$e(m.pixelPosition,(function(e,i){if(i)return i=He(e,t),Be.test(i)?S(e).position()[t]+"px":i}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){S.fn[n]=function(s,r){var o=arguments.length&&(i||"boolean"!=typeof s),a=i||(!0===s||!0===r?"margin":"border");return U(this,(function(t,i,s){var r;return v(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===s?S.css(t,i,a):S.style(t,i,s,a)}),t,o?s:void 0,o)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var Kt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var i,n,s;if("string"==typeof t&&(i=e[t],t=e,e=i),g(e))return n=a.call(arguments,2),(s=function(){return e.apply(t||this,n.concat(a.call(arguments)))}).guid=e.guid=e.guid||S.guid++,s},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=T,S.isFunction=g,S.isWindow=v,S.camelCase=z,S.type=k,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Kt,"")},void 0===(n=(function(){return S}).apply(t,[]))||(e.exports=n);var Zt=i.jQuery,Jt=i.$;return S.noConflict=function(e){return i.$===S&&(i.$=Jt),e&&i.jQuery===S&&(i.jQuery=Zt),S},void 0===s&&(i.jQuery=i.$=S),S}))},EcM4:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{selectAllGlobally(e){this.isSelectedAllGlobally=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})()},FRqX:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("AmrI");class s{constructor(e){this._id=e&&e.id||null,this._workspaceId=e&&e.workspaceId||null,this._users=e&&e.users||[],this._less=e&&e.less,this._hours=e&&e.hours||8,this._dateRange=e&&e.dateRange||"week",this._days=e&&e.days||[],this._receivers=e&&e.receivers||[n.a.USERS]}get id(){return this._id}set id(e){this._id=e}get workspaceId(){return this._workspaceId}set workspaceId(e){this._workspaceId=e}get users(){return this._users}set users(e){this._users=e}get less(){return this._less}set less(e){this._less=e}get hours(){return this._hours}set hours(e){this._hours=e}get dateRange(){return this._dateRange}set dateRange(e){this._dateRange=e}get days(){return this._days}set days(e){this._days=e}get receivers(){return this._receivers}set receivers(e){this._receivers=e}}},FfKB:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("Kj3r"),s=i("1G5W"),r=i("fXoL"),o=i("XNiG"),a=i("1Tmk"),c=i("ofXK"),l=i("lvCY");let u=(()=>{class e{constructor(e){this.workspaceService=e,this.inProgress=!1,this.changed=new r.n,this.billable$=new o.a,this.unsubscribe$=new o.a}ngOnInit(){this.subscribeToBillable();const e=this.workspaceService.getLocalDefaultWorkspace();this.currency=this.getCurrency((e&&e.hourlyRate&&e.hourlyRate.currency||"USD").toUpperCase())}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}getCurrency(e){return l.A.indexOf(e)>-1?Object(c.L)(e,"narrow"):Object(c.L)("USD","narrow")}selectDollar(){this.disableEdit||this.inProgress||(this.billable=!this.billable,this.billable$.next(this.billable))}subscribeToBillable(){this.billable$.pipe(Object(n.a)(300),Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.changed.emit(this.billable)})}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(a.a))},e.\u0275cmp=r.Lb({type:e,selectors:[["billable-icon"],["","billable-icon",""]],inputs:{disableEdit:"disableEdit",billable:"billable",inProgress:["billableInProgress","inProgress"]},outputs:{changed:"changed"},decls:4,vars:4,consts:[["tabindex","0",1,"pointer","cl-non-selectable",3,"click","keyup.space","keyup.enter"],["icon",""],[1,"currency"]],template:function(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",0,1),r.jc("click",(function(){r.Oc(e);const i=r.Lc(1);return t.selectDollar(),i.blur()}))("keyup.space",(function(){return t.selectDollar()}))("keyup.enter",(function(){return t.selectDollar()})),r.Xb(2,"span",2),r.Yc(3),r.Wb(),r.Wb()}2&e&&(r.Db("title",t.billable?"Billable":"Non-billable"),r.Cb(2),r.Hb("billableOn",t.billable),r.Cb(1),r.Zc(t.currency))},encapsulation:2,changeDetection:0}),e})()},FiyT:function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();t.SubjectSubscription=function(e){function t(t,i){var n=e.call(this)||this;return n.subject=t,n.subscriber=i,n.closed=!1,n}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}},t}(i("zB/H").Subscription)},Fnfa:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("jy+1"),s=i("fXoL");let r=(()=>{class e{transform(e){const t=e.sort(Object(n.c)(e=>e.toLowerCase(),!1));return"".concat(t.map(e=>e).join(", "))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"displayNames",type:e,pure:!0}),e})()},FsCY:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("ofXK");function r(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",2),n.jc("click",(function(){return n.Oc(e),n.nc().dismissed.emit()})),n.Xb(1,"span"),n.Yc(2,"\xd7"),n.Wb(),n.Wb()}}const o=["*"];let a=(()=>{class e{constructor(){this.dismiss=!1,this.dismissed=new n.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["info"],["","info",""]],inputs:{dismiss:"dismiss"},outputs:{dismissed:"dismissed"},ngContentSelectors:o,decls:3,vars:1,consts:[[1,"cl-alert","cl-alert-info","cl-mb-0","cl-alert-dismissible"],["class","cl-close",3,"click",4,"ngIf"],[1,"cl-close",3,"click"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0),n.uc(1),n.Wc(2,r,3,0,"a",1),n.Wb()),2&e&&(n.Cb(2),n.wc("ngIf",t.dismiss))},directives:[s.u],encapsulation:2,changeDetection:0}),e})()},G7Sd:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("lGQG"),s=i("fXoL"),r=i("ofXK"),o=i("tyNb");function a(e,t){1&e&&(s.Xb(0,"a",12),s.Yc(1,"Features"),s.Wb())}const c=function(){return["/signup"]};function l(e,t){1&e&&(s.Xb(0,"a",13),s.Yc(1,"Sign up"),s.Wb()),2&e&&s.wc("routerLink",s.Ac(1,c))}const u=function(){return["/login"]};function d(e,t){1&e&&(s.Xb(0,"a",14),s.Yc(1,"Log In"),s.Wb()),2&e&&s.wc("routerLink",s.Ac(1,u))}const h=function(){return["/tracker"]};function p(e,t){1&e&&(s.Xb(0,"a",14),s.Yc(1,"Go to tracker"),s.Wb()),2&e&&s.wc("routerLink",s.Ac(1,h))}function b(e,t){if(1&e&&(s.Xb(0,"div",5),s.Xb(1,"div"),s.Xb(2,"a",6),s.Sb(3,"img",7),s.Wb(),s.Wc(4,a,2,0,"a",8),s.Wb(),s.Xb(5,"div",9),s.Wc(6,l,2,2,"a",10),s.Wc(7,d,2,2,"a",11),s.Wc(8,p,2,2,"a",11),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Cb(4),s.wc("ngIf",!e.isLoggedIn),s.Cb(2),s.wc("ngIf",!e.isLoggedIn),s.Cb(1),s.wc("ngIf",!e.isLoggedIn),s.Cb(1),s.wc("ngIf",e.isLoggedIn)}}const f=["*"];let m=(()=>{class e{constructor(e){this.authService=e}ngOnInit(){this.isLoggedIn=this.authService.isLoggedIn()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(n.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["empty-shared-report"]],inputs:{imagePath:"imagePath",title:"title",hideHeader:"hideHeader"},ngContentSelectors:f,decls:7,vars:3,consts:[["class","cl-d-flex cl-align-items-center cl-justify-content-between cl-bg-info-light cl-p-3",4,"ngIf"],[1,"cl-page-wrapper"],[1,"cl-mt-5","cl-text-center"],[3,"src"],[1,"cl-mt-3"],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-between","cl-bg-info-light","cl-p-3"],["href","https://clockify.me/feature-list"],["src","assets/images/logo.svg"],["class","cl-ml-3 cl-text-dark",4,"ngIf"],[1,"cl-d-flex","cl-justify-content-between","cl-align-items-center"],["class","cl-mr-3 cl-text-dark",3,"routerLink",4,"ngIf"],["class","cl-btn cl-btn-primary",3,"routerLink",4,"ngIf"],[1,"cl-ml-3","cl-text-dark"],[1,"cl-mr-3","cl-text-dark",3,"routerLink"],[1,"cl-btn","cl-btn-primary",3,"routerLink"]],template:function(e,t){1&e&&(s.vc(),s.Wc(0,b,9,4,"div",0),s.Xb(1,"div",1),s.Xb(2,"div",2),s.Sb(3,"img",3),s.Xb(4,"h2",4),s.Yc(5),s.Wb(),s.uc(6),s.Wb(),s.Wb()),2&e&&(s.wc("ngIf",!t.hideHeader),s.Cb(3),s.wc("src",t.imagePath,s.Qc),s.Cb(2),s.Zc(t.title))},directives:[r.u,o.f],encapsulation:2}),e})()},GAki:function(e,t,i){"use strict";i.d(t,"a",(function(){return Te}));var n=i("pLZG"),s=i("1G5W"),r=i("Kj3r"),o=i("/uUt"),a=i("IzEk"),c=i("fXoL"),l=i("XNiG"),u=(i("tnjF"),i("npmQ")),d=i("lGQG"),h=i("VTb6"),p=i("UMzN"),b=i("1Tmk"),f=(i("O3o7"),i("i6c7")),m=i("zDGq"),g=i("huA5"),v=i("V3bs"),w=i("9Gc3"),y=i("27el"),C=i("y+xF"),k=i("xoOP"),S=i("lvCY"),x=i("1kSV"),O=i("3Pt+"),D=i("ofXK"),I=i("gcYM");let j=(()=>{class e{constructor(e){this.elementRef=e,this.throttleMs=200,this.throttlePx=150,this.scrollTriggerDistance=500,this.scrollPositionDisable=!1,this.onGroupScroll=new c.n,this.onChildScroll=new c.n,this.debouncer$=new l.a,this.unsubscribe$=new l.a}keyup(e){this.debouncer$.next(e)}ngOnInit(){if(this.scrollPositionDisable)return;let e=this.elementRef.nativeElement.scrollTop,t=this.elementRef.nativeElement.scrollTop;this.debouncer$.pipe(Object(I.a)(this.throttleMs),Object(n.a)(()=>{const t=this.elementRef.nativeElement.scrollTop,i=t>e;return e=t,i}),Object(n.a)(()=>{const e=this.elementRef.nativeElement.scrollTop;return Math.abs(e-t)>this.throttlePx&&(t=e,!0)}),Object(s.a)(this.unsubscribe$)).subscribe(e=>{const{bottom:t,top:i}=this.elementRef.nativeElement.getBoundingClientRect();this.scrollParentAttribute&&this.onScrollEnd(t,i,this.scrollParentAttribute,!0),this.scrollChildAttribute&&this.onScrollEnd(t,i,this.scrollChildAttribute,!1)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onScrollEnd(e,t,i,n){(Array.from(this.elementRef.nativeElement.querySelectorAll(`[${i}]`))||[]).forEach((i,s)=>{const r=i.getBoundingClientRect().bottom;if(r<e+this.scrollTriggerDistance&&!(r<t))if(n)this.onGroupScroll.emit(s);else{const e=i.getAttribute("childscrollindexes").split("_");this.onChildScroll.emit({parentIndex:Number(e[0]),childIndex:Number(e[1])})}})}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(c.l))},e.\u0275dir=c.Mb({type:e,selectors:[["scrollPosition"],["","scrollPosition",""]],hostBindings:function(e,t){1&e&&c.jc("scroll",(function(e){return t.keyup(e)}))},inputs:{scrollParentAttribute:"scrollParentAttribute",scrollChildAttribute:"scrollChildAttribute",throttleMs:"throttleMs",throttlePx:"throttlePx",scrollTriggerDistance:"scrollTriggerDistance",scrollPositionDisable:"scrollPositionDisable"},outputs:{onGroupScroll:"onGroupScroll",onChildScroll:"onChildScroll"},exportAs:["scrollPosition"]}),e})();var T=i("dlKe");function E(e,t){1&e&&c.Sb(0,"img",2)}function A(e,t){1&e&&c.Sb(0,"img",3)}let _=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Lb({type:e,selectors:[["select-arrow"]],inputs:{isOpen:"isOpen"},decls:3,vars:2,consts:[["src","assets/images/ui-icons/chevron-down.svg","doNotCloseDropdown","",4,"ngIf","ngIfElse"],["arrowUp",""],["src","assets/images/ui-icons/chevron-down.svg","doNotCloseDropdown",""],["src","assets/images/ui-icons/select-arrow-up.svg","doNotCloseDropdown",""]],template:function(e,t){if(1&e&&(c.Wc(0,E,1,0,"img",0),c.Wc(1,A,1,0,"ng-template",null,1,c.Xc)),2&e){const e=c.Lc(2);c.wc("ngIf",!t.isOpen)("ngIfElse",e)}},directives:[D.u],encapsulation:2,changeDetection:0}),e})(),W=(()=>{class e{constructor(){this.close=new c.n,this.onSubmit=new c.n,this.inputValue=""}save(){this.inputValue=this.inputValue.trim(),this.inputValue&&this.onSubmit.emit(this.inputValue)}closeModal(){this.close.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Lb({type:e,selectors:[["create-modal"]],inputs:{title:"title",inProgress:"inProgress"},outputs:{close:"close",onSubmit:"onSubmit"},decls:15,vars:3,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-col-lg-custom-auto"],[1,"cl-form-group"],["ngbAutofocus","",1,"cl-form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button",1,"cl-btn","cl-btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Yc(2),c.Wb(),c.Xb(3,"button",2),c.jc("click",(function(){return t.closeModal()})),c.Xb(4,"span",3),c.Sb(5,"img",4),c.Wb(),c.Wb(),c.Wb(),c.Xb(6,"div",5),c.Xb(7,"div",6),c.Xb(8,"div",7),c.Xb(9,"input",8),c.jc("ngModelChange",(function(e){return t.inputValue=e}))("keyup.enter",(function(){return t.save()})),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(10,"div",9),c.Xb(11,"a",10),c.jc("click",(function(){return t.closeModal()})),c.Yc(12,"Cancel"),c.Wb(),c.Xb(13,"button",11),c.jc("click",(function(){return t.save()})),c.Yc(14,"Save"),c.Wb(),c.Wb()),2&e&&(c.Cb(2),c.Zc(t.title),c.Cb(7),c.wc("ngModel",t.inputValue),c.Cb(4),c.wc("disabled",t.inProgress))},directives:[O.c,O.s,O.v],encapsulation:2}),e})();i("j4ir");var R=i("okBH");function P(e,t){if(1&e&&(c.Xb(0,"span",19),c.Yc(1),c.Wb()),2&e){const e=c.nc().$implicit;c.Cb(1),c.ad(" - ",null==e||null==e.client?null:e.client.name," ")}}function M(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",20),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleTasks(t)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleTasks(t)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleTasks(t)})),c.Xb(1,"span",21),c.Yc(2),c.Wb(),c.Sb(3,"select-arrow",22),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Cb(2),c.ad("",e.taskCount||e.tasks.length," Tasks"),c.Cb(1),c.wc("isOpen",e.isSelected)}}function F(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",23),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit,i=c.nc(),n=c.Lc(12);return i.selectedProject=t,i.openModal(n)})),c.Yc(1," Create task "),c.Wb()}}function X(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",24),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleProjectFavorite(t)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleProjectFavorite(t)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleProjectFavorite(t)})),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Hb("cl-active",e.favorite)}}function L(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",27),c.Xb(2,"a",28),c.jc("click",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc().selectProjectAndTask(n,i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc().selectProjectAndTask(n,i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc().selectProjectAndTask(n,i)})),c.Yc(3),c.Wb(),c.Wb(),c.Ub()}if(2&e){const e=t.$implicit;c.Cb(3),c.ad(" ",e.name," ")}}function N(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",29),c.Xb(2,"a",30,31),c.jc("click",(function(){c.Oc(e);const t=c.nc(2).$implicit,i=c.nc(),n=c.Lc(12);return i.selectedProject=t,i.openModal(n)}))("keyup.enter",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(),s=c.Lc(12);return n.selectedProject=i,n.openModal(s),t.blur()}))("keyup.space",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(),s=c.Lc(12);return n.selectedProject=i,n.openModal(s),t.blur()})),c.Sb(4,"img",32),c.Xb(5,"span",33),c.Yc(6," Create new task "),c.Wb(),c.Wb(),c.Wb(),c.Ub()}}function B(e,t){if(1&e&&(c.Xb(0,"div",25),c.Wc(1,L,4,1,"ng-container",7),c.oc(2,"sortBy"),c.Wc(3,N,7,0,"ng-container",26),c.Wb()),2&e){const e=c.nc(),t=e.index,i=e.$implicit,n=c.nc();c.Db("childscrollindexes",t),c.Cb(1),c.wc("ngForOf",c.qc(2,3,i.tasks,n.sortByTaskNameMapper)),c.Cb(2),c.wc("ngIf",(null==i.tasks?null:i.tasks.length)&&(n.hasCreateTaskPermission||i.isUserManagerForProject))}}function Y(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",9),c.Xb(2,"div",10),c.Xb(3,"button",11),c.jc("click",(function(){c.Oc(e);const i=t.$implicit;return c.nc().pickProject(i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit;return c.nc().pickProject(i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit;return c.nc().pickProject(i)})),c.Sb(4,"i",12),c.Yc(5),c.Wc(6,P,2,1,"span",13),c.Wb(),c.Xb(7,"div",14),c.Wc(8,M,4,2,"a",15),c.Wc(9,F,2,0,"a",16),c.Wc(10,X,1,2,"a",17),c.Wb(),c.Wb(),c.Wb(),c.Wc(11,B,4,6,"div",18),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc();c.Cb(1),c.Hb("cl-open",e.isSelected),c.Cb(1),c.Db("title",i.workspace.forceTasks&&0===e.tasks.length?"Task is required and there is no tasks on this project.":null),c.Cb(1),c.Vc("color",e.color),c.wc("disabled",i.workspace.forceTasks&&0===e.tasks.length),c.Cb(1),c.Vc("background-color",e.color),c.Cb(1),c.ad(" ",e.name," "),c.Cb(1),c.wc("ngIf",i.isFavorite&&(null==e.client?null:e.client.name)),c.Cb(2),c.wc("ngIf",e.taskCount||e.tasks.length),c.Cb(1),c.wc("ngIf",!(null!=e.tasks&&e.tasks.length)&&!e.taskCount&&(i.hasCreateTaskPermission||e.isUserManagerForProject)),c.Cb(1),c.wc("ngIf",i.isFavoriteFeatureEnabled),c.Cb(1),c.wc("ngIf",e.isSelected)}}function V(e,t){if(1&e){const e=c.Yb();c.Xb(0,"create-modal",34),c.jc("close",(function(){return t.$implicit.close()}))("onSubmit",(function(i){c.Oc(e);const n=t.$implicit,s=c.nc();return n.close(),s.confirmCreateTask(s.selectedProject,i)})),c.Wb()}2&e&&c.wc("title","Create task")}let U=(()=>{class e{constructor(e,t,i,n){this.projectService=e,this.cd=t,this.modalService=i,this.authService=n,this.close=new c.n,this.projectAndTaskSelected=new c.n,this.onCreateTask=new c.n,this.onFavoriteChange=new c.n,this.searchDebouncer$=new l.a,this.search="",this.tasksInProgress=new Map,this.unsubscribe$=new l.a,this.sortByProjectNameMapper=e=>e.name,this.sortByTaskNameMapper=e=>e.name}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngOnInit(){this.resetProjectList(),this.authService.permissionData$.pipe(Object(n.a)(e=>null!==e),Object(s.a)(this.unsubscribe$)).subscribe(e=>this.permissionData=e),this.searchDebouncer$.asObservable().pipe(Object(r.a)(500),Object(o.a)(),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.resetProjectList(),this.getProjects()}),this.getProjects()}onScroll(){this.getProjects(!0)}getProjects(e=!1){this.gotAllProjects||this.requestInProgress||(this.requestInProgress=!0,e&&(this.projectPage=this.projectPage+1),this.projectService.getProjectsAndTasks(this.search,this.projectPage,this.client.id||C.b,this.allForbiddenTaskIds,this.isFavorite,this.workspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.gotAllProjects=e.length<S.j||this.isFavorite,e.forEach(e=>{var t;e.isSelected=!!this.search&&!!e.tasks.length,e.updateProjectManagerStatus(this.permissionData),(null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),e=y.a.filterDontCollapsedProjects(e,this.forbiddenProjectMap),this.projects.push(...e),this.triggerDetectionPipe=!this.triggerDetectionPipe,this.requestInProgress=!1,this.cd.detectChanges()},()=>this.requestInProgress=!1))}onTaskScroll({parentIndex:e}){const t=this.projects[e];t?this.loadMoreTasks(t):console.error("Project is missing!!! Index: "+e)}loadMoreTasks(e){var t;if(!e.isSelected)return;if(Object(k.u)(e.taskCount)&&e.taskCount<1)return;if(Object(k.u)(e.taskCount)&&e.tasks.length>=e.taskCount)return;if(e.hasLoadedAllTasks)return;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const i=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=i,this.projectService.getTasks(this.workspace.id,e.id,this.search,i,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.hasLoadedAllTasks=t.length<S.j,e.tasks=[...e.tasks,...t],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges()},()=>this.tasksInProgress.set(e.id,!1))}closeModal(){this.close.emit()}onSearchChange(e){this.searchDebouncer$.next(e)}pickProject(e){const t=this.allForbiddenProjectIds.includes(e.id),i=e.taskCount;if(this.workspace.forceTasks||t){if(!i)return;e.isSelected=!e.isSelected,1===i&&(e.tasks[0]?this.selectProjectAndTask(e,e.tasks[0]):this.fetchTaskAndSelect(e)),i>1&&!e.tasks.length&&this.loadMoreTasks(e)}else this.selectProjectAndTask(e,null)}fetchTaskAndSelect(e){var t;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const i=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=i,this.projectService.getTasks(this.workspace.id,e.id,this.search,i,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.hasLoadedAllTasks=t.length<S.j,e.tasks=[...e.tasks,...t],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges(),e.tasks.length&&this.selectProjectAndTask(e,e.tasks[0])},()=>this.tasksInProgress.set(e.id,!1))}toggleTasks(e){e.isSelected=!e.isSelected,this.loadMoreTasks(e)}selectProjectAndTask(e,t){this.projectAndTaskSelected.emit({project:e,task:t})}toggleProjectFavorite(e){e.favorite=!e.favorite,e.favorite?this.projectService.makeProjectFavorite(e.id,this.workspace.id):this.projectService.removeProjectAsFavorite(e.id,this.workspace.id),this.onFavoriteChange.emit({clientId:e.client.id,projectId:e.id,isFavorite:e.favorite})}resetProjectList(){this.projects=[],this.projectPage=1,this.gotAllProjects=!1,this.requestInProgress=!1,this.triggerDetectionPipe=!this.triggerDetectionPipe}openModal(e){this.modalService.open(e,{centered:!0})}confirmCreateTask(e,t){this.onCreateTask.emit({project:e,name:t})}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(h.a),c.Rb(c.h),c.Rb(x.q),c.Rb(d.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["project-client-modal"]],inputs:{forbiddenProjectMap:"forbiddenProjectMap",allForbiddenProjectIds:"allForbiddenProjectIds",client:"client",workspace:"workspace",filterPlaceholder:"filterPlaceholder",isFavoriteFeatureEnabled:"isFavoriteFeatureEnabled",hasCreateTaskPermission:"hasCreateTaskPermission",projectGroupingLabel:"projectGroupingLabel",isFavorite:"isFavorite",allForbiddenTaskIds:"allForbiddenTaskIds"},outputs:{close:"close",projectAndTaskSelected:"projectAndTaskSelected",onCreateTask:"onCreateTask",onFavoriteChange:"onFavoriteChange"},decls:13,vars:12,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button","tabindex","1",1,"cl-close",3,"click","keyup.enter","keyup.space"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-sub-header"],["type","text","autocomplete","off","ngbAutofocus","","tabindex","1",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange"],["scrollPosition","","infiniteScroll","",1,"cl-modal-body","cl-p-0","cl-pb-1","cl-overflow-auto","cl-modal-scroll",3,"scrollChildAttribute","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","onChildScroll","scrolled"],[4,"ngFor","ngForOf"],["createModal",""],[1,"cl-dropdown-item","cl-white-space-normal"],[1,"cl-item-between"],["tabindex","1",1,"cl-project-name","cl-project-name-colored","cl-btn-disabled-light",3,"disabled","click","keyup.enter","keyup.space"],[1,"cl-entry__project__dot"],["style","color: gray",4,"ngIf"],[1,"cl-d-flex","cl-align-items-center","cl-col-auto","cl-align-self-start","cl-p-0"],["tabindex","1","class","cl-text-gray-6 cl-d-flex cl-pr-1",3,"click","keyup.enter","keyup.space",4,"ngIf"],["class","cl-color-blue",3,"click",4,"ngIf"],["class","cl-dropdown-star","tabindex","1",3,"cl-active","click","keyup.enter","keyup.space",4,"ngIf"],["class","collapse","childScroll","","style","display: block",4,"ngIf"],[2,"color","gray"],["tabindex","1",1,"cl-text-gray-6","cl-d-flex","cl-pr-1",3,"click","keyup.enter","keyup.space"],[1,"cl-dropdown-item-expand"],[3,"isOpen"],[1,"cl-color-blue",3,"click"],["tabindex","1",1,"cl-dropdown-star",3,"click","keyup.enter","keyup.space"],["childScroll","",1,"collapse",2,"display","block"],[4,"ngIf"],[1,"cl-collapse-content","cl-collapse-content-tags"],["tabindex","1",1,"cl-dropdown-item","cl-cut-text",3,"click","keyup.enter","keyup.space"],[1,"cl-collapse-content","cl-collapse-content-tasks","cl-collapse-content-tags"],["tabindex","0",1,"cl-dropdown-item","cl-border-top","cl-border-light","cl-b-0",3,"click","keyup.enter","keyup.space"],["createTaskLink",""],["src","assets/images/ui-icons/plus-blue.svg"],[1,"cl-ml-2","cl-text-primary"],[3,"title","close","onSubmit"]],template:function(e,t){1&e&&(c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Yc(2),c.Wb(),c.Xb(3,"button",2),c.jc("click",(function(){return t.closeModal()}))("keyup.enter",(function(){return t.closeModal()}))("keyup.space",(function(){return t.closeModal()})),c.Xb(4,"span"),c.Sb(5,"img",3),c.Wb(),c.Wb(),c.Wb(),c.Xb(6,"div",4),c.Xb(7,"input",5),c.jc("ngModelChange",(function(e){return t.search=e}))("ngModelChange",(function(){return t.onSearchChange(t.search)})),c.Wb(),c.Wb(),c.Xb(8,"div",6),c.jc("onChildScroll",(function(e){return t.onTaskScroll(e)}))("scrolled",(function(){return t.onScroll()})),c.Wc(9,Y,12,14,"ng-container",7),c.oc(10,"sortBy"),c.Wb(),c.Wc(11,V,1,1,"ng-template",null,8,c.Xc)),2&e&&(c.Cb(2),c.Zc(t.client.name||(t.isFavorite?"Favorites":"No "+t.projectGroupingLabel)),c.Cb(5),c.wc("placeholder",t.filterPlaceholder)("ngModel",t.search),c.Cb(1),c.wc("scrollChildAttribute","childScroll")("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),c.Cb(1),c.wc("ngForOf",c.rc(10,8,t.projects,t.sortByProjectNameMapper,t.triggerDetectionPipe)))},directives:[O.c,O.s,O.v,j,T.a,D.t,D.u,_,W],pipes:[R.a],encapsulation:2,changeDetection:0}),e})();var H=i("mXn0");const $=["searchInput"],G=["scrollArea"];function z(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",19),c.jc("click",(function(){return c.Oc(e),c.nc().resetSearch()})),c.Sb(1,"img",20),c.Wb()}}function q(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",21),c.jc("keyup.ArrowRight",(function(){return c.Oc(e),c.nc().isWorkspacesExpanded=!0}))("keyup.ArrowLeft",(function(){return c.Oc(e),c.nc().isWorkspacesExpanded=!1}))("click",(function(){c.Oc(e);const t=c.nc();return t.isWorkspacesExpanded=!t.isWorkspacesExpanded}))("keyup.enter",(function(){c.Oc(e);const t=c.nc();return t.isWorkspacesExpanded=!t.isWorkspacesExpanded}))("keyup.space",(function(){c.Oc(e);const t=c.nc();return t.isWorkspacesExpanded=!t.isWorkspacesExpanded})),c.Xb(1,"div",22),c.Xb(2,"div",23),c.Yc(3,"Workspace"),c.Wb(),c.Xb(4,"div"),c.Xb(5,"div",24),c.Xb(6,"a",25),c.Xb(7,"span",26),c.Yc(8),c.Wb(),c.Sb(9,"select-arrow",27),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&e){const e=c.nc();c.Hb("cl-open",e.isWorkspacesExpanded)("cl-remove-border-bottom",!(e.isCollapsed&&null!=e.projectsByClient&&e.projectsByClient.length||e.selectedProject)),c.Cb(6),c.wc("title",e.defaultWorkspace.name),c.Cb(2),c.ad(" ",e.defaultWorkspace.name," "),c.Cb(1),c.wc("isOpen",e.isWorkspacesExpanded)}}function K(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",38),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).setDefaultWorkspace(t)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).setDefaultWorkspace(t)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).setDefaultWorkspace(t)})),c.Xb(1,"div",39),c.Yc(2),c.Wb(),c.Wb()}if(2&e){const e=c.nc().$implicit;c.wc("title",e.name),c.Cb(2),c.ad(" ",e.name," ")}}function Z(e,t){if(1&e&&(c.Vb(0),c.Wc(1,K,3,2,"a",37),c.Ub()),2&e){const e=t.$implicit,i=c.nc(2);c.Cb(1),c.wc("ngIf",e.id!==i.defaultWorkspace.id)}}function J(e,t){if(1&e&&(c.Xb(0,"div",28),c.Xb(1,"div",29),c.Xb(2,"div",30),c.Xb(3,"div",31),c.Xb(4,"span",32),c.Yc(5),c.Wb(),c.Xb(6,"span",33),c.Sb(7,"img",34),c.Xb(8,"span",35),c.Yc(9," Active "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wc(10,Z,2,1,"ng-container",36),c.Wb(),c.Wb()),2&e){const e=c.nc();c.Cb(4),c.wc("title",e.defaultWorkspace.name),c.Cb(1),c.Zc(e.defaultWorkspace.name),c.Cb(5),c.wc("ngForOf",e.workspaces)}}function Q(e,t){1&e&&c.Tb(0)}function ee(e,t){if(1&e&&(c.Vb(0),c.Wc(1,Q,1,0,"ng-container",42),c.Ub()),2&e){const e=c.nc(2),t=c.Lc(10),i=c.Lc(12);c.Cb(1),c.wc("ngIf",e.canCreate)("ngIfThen",t)("ngIfElse",i)}}function te(e,t){if(1&e&&(c.Xb(0,"div",40),c.Xb(1,"div",41),c.Xb(2,"div"),c.Yc(3),c.Wb(),c.Wc(4,ee,2,3,"ng-container",14),c.Wb(),c.Wb()),2&e){const e=c.nc();c.Cb(3),c.Zc(e.title),c.Cb(1),c.wc("ngIf",e.hasPermissionToCreateProject)}}function ie(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div"),c.Xb(1,"div",43),c.Yc(2,"Press Ctrl+Enter to quickly "),c.Xb(3,"a",44),c.jc("click",(function(){return c.Oc(e),c.nc(2).createNewProject()})),c.Yc(4),c.Wb(),c.Wb(),c.Wb()}if(2&e){const e=c.nc(2);c.Cb(4),c.ad("create '",e.search,"' project.")}}function ne(e,t){if(1&e&&(c.Vb(0),c.Yc(1),c.Ub()),2&e){const e=c.nc(4);c.Cb(1),c.bd(" create '",e.taskName,"' task on '",e.projectName,"' project. ")}}function se(e,t){if(1&e&&(c.Vb(0),c.Yc(1),c.Ub()),2&e){const e=c.nc(4);c.Cb(1),c.ad(" create '",e.projectName,"' project. ")}}function re(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",43),c.Yc(1," Press Ctrl+Enter to quickly "),c.Xb(2,"a",44),c.jc("click",(function(){return c.Oc(e),c.nc(3).createNewProject()})),c.Wc(3,ne,2,2,"ng-container",14),c.Wc(4,se,2,1,"ng-container",14),c.Wb(),c.Wb()}if(2&e){const e=c.nc(3);c.Cb(3),c.wc("ngIf",e.taskName),c.Cb(1),c.wc("ngIf",!e.taskName)}}function oe(e,t){1&e&&(c.Xb(0,"div",43),c.Yc(1," Type task@project to create one. "),c.Wb())}function ae(e,t){if(1&e&&c.Wc(0,oe,2,0,"div",47),2&e){const e=c.nc(3);c.wc("ngIf",e.hasPermissionToCreateProject&&!e.projectName)}}function ce(e,t){if(1&e&&(c.Vb(0),c.Wc(1,re,5,2,"div",45),c.Wc(2,ae,1,1,"ng-template",null,46,c.Xc),c.Ub()),2&e){const e=c.Lc(3),t=c.nc(2);c.Cb(1),c.wc("ngIf",t.projectName)("ngIfElse",e)}}function le(e,t){if(1&e&&(c.Wc(0,ie,5,1,"div",14),c.Wc(1,ce,4,2,"ng-container",14)),2&e){const e=c.nc();c.wc("ngIf",!e.projectTaskFilterEnabled),c.Cb(1),c.wc("ngIf",e.projectTaskFilterEnabled)}}function ue(e,t){1&e&&(c.Xb(0,"div",43),c.Yc(1," To filter by project, add @ prefix (eg. @myproject) "),c.Wb())}function de(e,t){if(1&e&&c.Wc(0,ue,2,0,"div",47),2&e){const e=c.nc();c.wc("ngIf",e.projectTaskFilterEnabled&&e.search&&!(null!=e.projectsByClient&&e.projectsByClient.length)&&!e.projectName)}}function he(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",50),c.jc("click",(function(){return c.Oc(e),c.nc(2).selectProjectAndTask(null,null)}))("keyup.enter",(function(){return c.Oc(e),c.nc(2).selectProjectAndTask(null,null)}))("keyup.space",(function(){return c.Oc(e),c.nc(2).selectProjectAndTask(null,null)})),c.Xb(1,"div",51),c.Xb(2,"a",52),c.Yc(3," No project "),c.Wb(),c.Wb(),c.Wb()}2&e&&(c.Cb(2),c.Vc("color","#666666"))}function pe(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",59),c.Xb(1,"a",60),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!t.isSelected)}))("keyup.ArrowRight",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!0)}))("keyup.ArrowLeft",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!1)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!t.isSelected)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!t.isSelected)})),c.Xb(2,"span",61),c.Yc(3),c.Wb(),c.Sb(4,"select-arrow",27),c.Wb(),c.Xb(5,"a",62),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit,i=c.nc(2),n=c.Lc(21);return i.selectedClientGroup=t,i.openModal(n,"lg")})),c.Sb(6,"img",63),c.Wb(),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Cb(3),c.ad("",e.projectsCount," Projects"),c.Cb(1),c.wc("isOpen",e.isSelected)}}function be(e,t){if(1&e&&(c.Xb(0,"span"),c.Sb(1,"span",72),c.Xb(2,"span",73),c.Yc(3),c.Wb(),c.Wb()),2&e){const e=c.nc().$implicit;c.Cb(3),c.ad(" ",e.client.name," ")}}function fe(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",74),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(4).toggleTasks(t)})),c.Xb(1,"span",61),c.Yc(2),c.Wb(),c.Sb(3,"select-arrow",27),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Cb(2),c.ad(" ",e.taskCount||e.tasks.length," Tasks "),c.Cb(1),c.wc("isOpen",e.isSelected)}}function me(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",75),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit,i=c.nc(4),n=c.Lc(19);return i.projectForCreateTask=t,i.openModal(n)})),c.Yc(1," Create task "),c.Wb()}}function ge(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",76),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(4).changeFavoriteStatus(t)})),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Hb("cl-active",e.favorite)}}function ve(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",78),c.Xb(2,"a",79),c.jc("click",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc(4).selectProjectAndTask(n,i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc(4).selectProjectAndTask(n,i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc(4).selectProjectAndTask(n,i)})),c.Xb(3,"div",80),c.Yc(4),c.Wb(),c.Wb(),c.Wb(),c.Ub()}if(2&e){const e=t.$implicit;c.Cb(2),c.wc("title",e.name),c.Cb(2),c.ad(" ",e.name," ")}}function we(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",78),c.Xb(2,"a",81,82),c.jc("click",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(4),s=c.Lc(19);return n.projectForCreateTask=i,n.openModal(s),t.blur()}))("keyup.enter",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(4),s=c.Lc(19);return n.projectForCreateTask=i,n.openModal(s),t.blur()}))("keyup.space",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(4),s=c.Lc(19);return n.projectForCreateTask=i,n.openModal(s),t.blur()})),c.Sb(4,"img",83),c.Xb(5,"span",84),c.Yc(6," Create new task "),c.Wb(),c.Wb(),c.Wb(),c.Ub()}}function ye(e,t){if(1&e&&(c.Xb(0,"div",77),c.Wc(1,ve,5,2,"ng-container",36),c.oc(2,"sortBy"),c.Wc(3,we,7,0,"ng-container",14),c.Wb()),2&e){const e=c.nc(),t=e.index,i=e.$implicit,n=c.nc(2).index,s=c.nc(2);c.Db("childscrollindexes",n+"_"+t),c.Cb(1),c.wc("ngForOf",c.qc(2,3,i.tasks,s.sortByTaskNameMapper)),c.Cb(2),c.wc("ngIf",s.isAdminOrOwner||!s.onlyAdminsCreateTask||i.isUserManagerForProject)}}function Ce(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",65),c.Xb(2,"div",31),c.Xb(3,"button",66),c.jc("click",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).pickProject(i)}))("keyup.ArrowRight",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).toggleTasks(i)}))("keyup.ArrowLeft",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).toggleTasks(i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).pickProject(i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).pickProject(i)})),c.Sb(4,"i",67),c.Yc(5),c.Wc(6,be,4,1,"span",14),c.Wb(),c.Xb(7,"div",59),c.Wc(8,fe,4,2,"a",68),c.Wc(9,me,2,0,"a",69),c.Wc(10,ge,1,2,"a",70),c.Wb(),c.Wb(),c.Wb(),c.Wc(11,ye,4,6,"div",71),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc(2).$implicit,n=c.nc(2);c.Cb(1),c.Hb("cl-open",e.isSelected&&!n.isCollapsed),c.Cb(1),c.Db("title",!n.forceTask||e.tasks.length||e.taskCount?null:"Can't select a project until it has at least one task."),c.Cb(1),c.Vc("color",e.color),c.wc("disabled",n.forceTask&&!e.tasks.length&&!e.taskCount)("title",e.name),c.Cb(1),c.Vc("background-color",e.color),c.Cb(1),c.ad("",e.name," "),c.Cb(1),c.wc("ngIf",i.isFavorite&&e.client.name),c.Cb(2),c.wc("ngIf",e.taskCount||e.tasks.length),c.Cb(1),c.wc("ngIf",!(null!=e.tasks&&e.tasks.length)&&!e.taskCount&&(n.isAdminOrOwner||!n.onlyAdminsCreateTask||e.isUserManagerForProject)),c.Cb(1),c.wc("ngIf",n.favoriteProjectsEnabled),c.Cb(1),c.wc("ngIf",e.isSelected&&e.tasks)}}function ke(e,t){if(1&e&&(c.Xb(0,"div",64),c.Wc(1,Ce,12,15,"ng-container",36),c.Wb()),2&e){const e=c.nc().$implicit,t=c.nc(2);c.Hb("cl-collapse-content",t.isCollapsed),c.Cb(1),c.wc("ngForOf",e.projects)}}function Se(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",53),c.Xb(2,"div",54),c.Xb(3,"div",31),c.Xb(4,"div",55),c.jc("click",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!i.isSelected)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!i.isSelected)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!i.isSelected)}))("keyup.ArrowRight",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!0)}))("keyup.ArrowLeft",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!1)})),c.Yc(5),c.Wb(),c.Wc(6,pe,7,2,"div",56),c.Wb(),c.Wb(),c.Xb(7,"div",57),c.Wc(8,ke,2,3,"div",58),c.Wb(),c.Wb(),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc(2);c.Cb(1),c.Hb("cl-remove-border-bottom",i.isCollapsed),c.Cb(1),c.Hb("pointerevent",!i.isCollapsed),c.Cb(2),c.wc("title",null==e.client?null:e.client.name),c.Cb(1),c.ad(" ",e.client.name||(e.isFavorite?"Favorites":"No "+i.projectGroupingLabel)," "),c.Cb(1),c.wc("ngIf",i.isCollapsed&&e.projectsCount),c.Cb(1),c.Hb("cl-collapse",i.isCollapsed),c.Cb(1),c.wc("ngIf",e.isSelected)}}function xe(e,t){if(1&e&&(c.Xb(0,"section",48),c.Wc(1,he,4,2,"div",49),c.Wc(2,Se,9,10,"ng-container",36),c.Wb()),2&e){const e=c.nc();c.Cb(1),c.wc("ngIf",e.selectedProject&&!e.forceProject&&!e.search),c.Cb(1),c.wc("ngForOf",e.projectsByClient)}}function Oe(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Sb(1,"div",85),c.Xb(2,"a",86,87),c.jc("click",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(),n=c.Lc(23);return i.openModal(n),t.blur()}))("keyup.enter",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(),n=c.Lc(23);return i.openModal(n),t.blur()}))("keyup.space",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(),n=c.Lc(23);return i.openModal(n),t.blur()})),c.Sb(4,"img",83),c.Xb(5,"span",84),c.Yc(6),c.Wb(),c.Wb(),c.Ub()}if(2&e){const e=c.nc();c.Cb(6),c.ad(" Create new project ",e.projectTaskFilterEnabled&&e.canCreate&&e.taskName?" and task":""," ")}}function De(e,t){if(1&e){const e=c.Yb();c.Xb(0,"create-modal",88),c.jc("close",(function(){return t.$implicit.close()}))("onSubmit",(function(i){c.Oc(e);const n=t.$implicit,s=c.nc();return s.createTask(s.projectForCreateTask,i),n.close()})),c.Wb()}if(2&e){const e=c.nc();c.wc("title","Create task")("inProgress",e.creatingInProgress)}}function Ie(e,t){if(1&e){const e=c.Yb();c.Xb(0,"project-client-modal",89),c.jc("onFavoriteChange",(function(t){return c.Oc(e),c.nc().onFavoriteChange(t)}))("close",(function(){return t.$implicit.close("Save click")}))("onCreateTask",(function(i){c.Oc(e);const n=t.$implicit;return c.nc().createTask(i.project,i.name),n.close()}))("projectAndTaskSelected",(function(i){c.Oc(e);const n=t.$implicit,s=c.nc();return n.close(i),s.selectProjectAndTask(i.project,i.task)})),c.Wb()}if(2&e){const e=c.nc();c.wc("hasCreateTaskPermission",e.isAdminOrOwner||!e.onlyAdminsCreateTask)("forbiddenProjectMap",e.forbiddenProjectMap)("allForbiddenProjectIds",e.allForbiddenProjectIds)("allForbiddenTaskIds",e.allForbiddenTaskIds)("client",e.selectedClientGroup.client)("isFavorite",e.selectedClientGroup.isFavorite)("workspace",e.defaultWorkspace)("filterPlaceholder",e.filterPlaceholder)("projectGroupingLabel",e.projectGroupingLabel)("isFavoriteFeatureEnabled",e.favoriteProjectsEnabled)}}function je(e,t){if(1&e){const e=c.Yb();c.Xb(0,"new-project",90),c.jc("onProjectAndTaskDataCreated",(function(i){c.Oc(e);const n=t.$implicit;return c.nc().setCreatedProjectData(i),n.close()}))("close",(function(){return t.$implicit.close()})),c.Wb()}if(2&e){const e=c.nc();c.wc("isAdminOrOwner",e.isAdminOrOwner)("name",e.projectName)("taskName",e.taskName)("workspace",e.defaultWorkspace)}}let Te=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.authService=e,this.projectService=t,this.cd=i,this.workspaceService=n,this.taskService=s,this.modalService=r,this.keyboardService=o,this.subdomainService=a,this.selectedProjectAndTask=new c.n,this.dropdownClosed=new c.n,this.search="",this.clientPage=1,this.allClientsAreLoaded=!1,this.pipeChangeDetection=!1,this.isWorkspacesExpanded=!1,this.disableCloseProjectPicker=!1,this.projectsByClient=[],this.tasksInProgress=new Map,this.searchTerm$=new l.a,this.unsubscribe$=new l.a,this.allForbiddenTaskIds=[],this.allForbiddenProjectIds=[],this.forbiddenProjectMap={},this.favoritesInProgress=new Map,this.sortByTaskNameMapper=e=>e.name}ngOnInit(){this.setTimesheetForbiddenData(),this.authService.permissionData$.pipe(Object(n.a)(e=>null!==e),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.isAdminOrOwner=e.isAdminOrOwner,this.permissionData=e}),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.loggedInUser=this.authService.getUser(),this.isCollapsed=null!=this.loggedInUser.settings.projectListCollapse,this.defaultWorkspace=this.workspaceService.getLocalDefaultWorkspace(),this.setWorkspaceSettings(this.defaultWorkspace),this.setWorkspacesList(),this.keyboardService.keyboardCtrlEnter$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.createNewProject()),this.searchTerm$.pipe(Object(r.a)(500),Object(o.a)(),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.resetProjectList(),this.getClients()}),this.getClients(),this.cd.markForCheck()}ngAfterViewInit(){var e,t;null===(t=null===(e=this.searchInput)||void 0===e?void 0:e.nativeElement)||void 0===t||t.focus()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete(),this.dropdownClosed.emit(!0)}get hasPermissionToCreateProject(){return!this.defaultWorkspace.onlyAdminsCreateProject||this.isAdminOrOwner}get title(){var e;if(null===(e=this.projectsByClient)||void 0===e?void 0:e.length)return"";const t=!this.projectTaskFilterEnabled||this.search&&this.search.indexOf("@")>-1?"projects":"tasks";return this.search?"No matching "+t:this.selectedProject?"":`No ${t} yet`}get projectName(){var e;return this.projectTaskFilterEnabled?null===(e=this.search.split("@")[1])||void 0===e?void 0:e.trim():this.search.trim()}get taskName(){return this.projectTaskFilterEnabled?this.search.split("@")[0].trim():""}onSearchChange(e){this.searchTerm$.next(e)}resetSearch(){this.search="",this.onSearchChange(this.search)}checkCanCreate(){var e;this.canCreate=!!this.search&&!(null===(e=this.projectsByClient)||void 0===e?void 0:e.length)}pushNewClients(e,t){(e||[]).forEach(e=>{e.projects.forEach(e=>e.updateProjectManagerStatus(this.permissionData))}),e.forEach(e=>{var i;if(!e.projectsCount&&!(null===(i=e.projects)||void 0===i?void 0:i.length))return;const n=this.projectsByClient.find(t=>t.client.name===e.client.name&&t.isFavorite===e.isFavorite);if(n){const i=n.projects.map(e=>e.id);e.projects.forEach(e=>{i.includes(e.id)||n.projects.push(e)}),t&&(n.isSelected=e.isSelected)}else e.isFavorite?this.projectsByClient.unshift(e):this.projectsByClient.push(e)}),this.checkCanCreate()}resetProjectList(){this.clientPage=1,this.allClientsAreLoaded=!1,this.projectsByClient=[],this.tasksInProgress.clear()}getClients(){if(!this.allClientsAreLoaded){if(this.isCollapsed)return this.getCollapsedClient(),void(this.favoriteProjectsEnabled&&1===this.clientPage&&this.getExpandedClient("ONLY_FAVORITES"));this.favoriteProjectsEnabled&&1===this.clientPage&&this.getExpandedClient("ONLY_FAVORITES"),this.getExpandedClient("ALL")}}getCollapsedClient(){this.projectService.getProjectsGroupedByClient(this.search,this.clientPage,this.defaultWorkspace.id,this.allForbiddenProjectIds,this.allForbiddenTaskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.allClientsAreLoaded=e.length<S.j,(e=e.map(e=>{const t=!!e.projects.length;return e.isSelected=t,e.areAllProjectsLoaded=t&&e.projects.length<S.j,e.currentPage=t?1:0,e})).forEach(e=>e.projects.forEach(e=>e.isSelected=!!this.search&&!!e.tasks.length)),this.pushNewClients(e),this.pipeChangeDetection=!this.pipeChangeDetection,this.cd.detectChanges()})}getExpandedClient(e){if(this.clientPage>1&&"ONLY_FAVORITES"===e)return;const t=this.projectTaskFilterEnabled&&"@"===this.search.trim()?"":this.search;this.projectService.getProjectsAndTasks(t,this.clientPage,null,this.allForbiddenTaskIds,"ONLY_FAVORITES"===e,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(i=>{!this.projectsByClient.length&&this.scrollArea&&(this.scrollArea.nativeElement.scrollTop=0);const n=i.length<S.j;if(i.forEach(e=>{var i;e.isSelected=!!t&&!!e.tasks.length,(null===(i=this.forbiddenProjectMap[e.id])||void 0===i?void 0:i.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),i=y.a.filterDontCollapsedProjects(i,this.forbiddenProjectMap),"ONLY_FAVORITES"===e){const e=this.loggedInUser.settings.projectListCollapse,n=this.loggedInUser.settings.collapseAllProjectLists,s=!!t||!this.isCollapsed||i.length<=e&&!n;i=i.map(e=>(e.isSelected=s&&e.tasks.length&&this.projectTaskFilterEnabled,e));const r=new y.a({client:new p.a,projects:i,projectsCount:i.length,isFavorite:!0,isSelected:s,areAllProjectsLoaded:!0,currentPage:1});i.length&&this.pushNewClients([r],!0)}else{const e=y.a.groupProjectsToClientGroups(i);this.pushNewClients(e),this.allClientsAreLoaded=n}this.pipeChangeDetection=!this.pipeChangeDetection,this.cd.detectChanges()})}onClientGroupScroll(e){this.loadMoreProjects(this.projectsByClient[e])}onTaskScroll({parentIndex:e,childIndex:t}){const i=this.projectsByClient[e].projects[t];i?this.loadMoreTasks(i):console.error(`onTaskScroll() - roject is missing!!! Indexes: ${e}_${t}`)}loadMoreProjects(e){if(!e.isSelected)return;if(!this.isCollapsed&&!e.isFavorite)return;if(e.areAllProjectsLoaded)return;if(e.inProgress)return;e.inProgress=!0;const t=e.client.id||C.b;e.currentPage=e.currentPage+1,this.projectService.getProjectsAndTasks(this.search,e.currentPage,t,this.allForbiddenTaskIds,e.isFavorite,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.areAllProjectsLoaded=t.length<S.j||e.isFavorite,t.forEach(e=>{var t;e.updateProjectManagerStatus(this.permissionData),(null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),t=y.a.filterDontCollapsedProjects(t,this.forbiddenProjectMap),e.projects.push(...t),e.inProgress=!1,this.cd.detectChanges()},()=>e.inProgress=!1)}pickProject(e,t){if(!e)return;const i=this.allForbiddenProjectIds.includes(e.id),n=e.taskCount;if(this.forceTask||i){if(!n)return;e.isSelected=!e.isSelected,1===n&&(e.tasks[0]||t?this.selectProjectAndTask(e,e.tasks[0]||t):this.fetchTaskAndSelect(e)),n>1&&!e.tasks.length&&this.loadMoreTasks(e)}else this.selectProjectAndTask(e,t)}fetchProjectsAndSelect(e){this.projectService.getProjectsAndTasks(this.search,1,e.client.id,this.allForbiddenTaskIds,e.isFavorite,this.defaultWorkspace.id).pipe(Object(a.a)(1),Object(s.a)(this.unsubscribe$)).subscribe(e=>{e.forEach(e=>{var t;(null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),this.pickProject(e[0],1===e[0].taskCount?e[0].tasks[0]:null)})}fetchTaskAndSelect(e){var t;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const i=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=i,this.projectService.getTasks(this.defaultWorkspace.id,e.id,this.search,i,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.hasLoadedAllTasks=t.length<S.j,e.tasks=[...e.tasks,...t],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges(),e.tasks.length&&this.selectProjectAndTask(e,e.tasks[0])},()=>this.tasksInProgress.set(e.id,!1))}toggleTasks(e){e.isSelected=!e.isSelected,this.loadMoreTasks(e)}loadMoreTasks(e){var t;if(!e.isSelected)return;if(Object(k.u)(e.taskCount)&&e.taskCount<1)return;if(Object(k.u)(e.taskCount)&&e.tasks.length>=e.taskCount)return;if(e.hasLoadedAllTasks)return;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const i=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=i,this.projectService.getTasks(this.defaultWorkspace.id,e.id,this.search,i,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.hasLoadedAllTasks=t.length<S.j,e.tasks=[...e.tasks,...t],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges()},()=>this.tasksInProgress.set(e.id,!1))}changeFavoriteStatus(e){this.favoritesInProgress.get(e.id)||(this.favoritesInProgress.set(e.id,!0),this.onFavoriteChange({clientId:e.client.id,projectId:e.id,isFavorite:!e.favorite}),e.favorite?this.projectService.makeProjectFavorite(e.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoritesInProgress.set(e.id,!1),()=>this.favoritesInProgress.set(e.id,!1)):this.projectService.removeProjectAsFavorite(e.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoritesInProgress.set(e.id,!1),()=>this.favoritesInProgress.set(e.id,!1)))}onFavoriteChange({clientId:e,projectId:t,isFavorite:i}){const n=this.projectsByClient.find(e=>e.isFavorite);if(n){const e=n.projects.find(e=>e.id===t);e&&(e.favorite=i)}const s=this.projectsByClient.filter(e=>!e.isFavorite).find(t=>t.client.id===e),r=null==s?void 0:s.projects.find(e=>e.id===t);r&&(r.favorite=i)}onResizeChange(e){if(!e)try{const e=this.scrollArea.nativeElement;e.scrollTop+e.getBoundingClientRect().height>e.scrollHeight-60&&this.onMainScroll()}catch(t){}}toggleProjectsGroup(e,t){e.isSelected=t,e.isSelected&&!e.projects.length&&this.loadMoreProjects(e)}onMainScroll(){this.allClientsAreLoaded||(++this.clientPage,this.getClients())}selectFirstProject(){const e=this.projectsByClient.filter(e=>!e.isFavorite);if(1!==e.length)return;const t=e[0];(1===t.projects.length||Object(k.u)(t.projectsCount)&&1===t.projectsCount)&&(t.projects&&t.projects[0]?this.pickProject(t.projects[0],1===t.projects[0].taskCount?t.projects[0].tasks[0]:null):this.fetchProjectsAndSelect(t))}selectProjectAndTask(e,t){var i,n;if(e&&!t&&this.forceTask)return;const s=(null===(i=this.selectedProject)||void 0===i?void 0:i.id)||null,r=(null===(n=this.selectedTask)||void 0===n?void 0:n.id)||null;((null==e?void 0:e.id)||null)===s&&((null==t?void 0:t.id)||null)===r||(this.selectedProjectAndTask.emit({task:t||null,project:e||null,workspace:this.defaultWorkspace}),this.disableDropdownKeyDirective.forceClose())}setTimesheetForbiddenData(){var e;let t;if(null===(e=this.timesheetRows)||void 0===e?void 0:e.length){const e=this.timesheetRows.filter(e=>!e.isApproved);t=u.a.getSelectedProjectsData(e)}else{const e=new u.a(this.selectedProject,this.selectedTask,null,null);t=u.a.getSelectedProjectsData([e])}this.forbiddenProjectMap=t.forbiddenProjectMap,this.allForbiddenProjectIds=t.allForbiddenProjectIds,this.allForbiddenTaskIds=t.allForbiddenTaskIds}setWorkspaceSettings(e){this.filterPlaceholder=this.loggedInUser.settings.projectPickerSpecialFilter?"Find task @project or "+e.projectGroupingLabel:"Find project or "+e.projectGroupingLabel,this.projectTaskFilterEnabled=this.loggedInUser.settings.projectPickerSpecialFilter,this.forceTask=e.forceTasks,this.forceProject=e.forceProjects,this.favoriteProjectsEnabled=e.projectFavorites,this.projectGroupingLabel=e.projectGroupingLabel,this.onlyAdminsCreateTask=e.onlyAdminsCreateTask,this.cd.detectChanges()}setWorkspacesList(){!this.hideWorkspaces&&!this.subdomainService.isSubdomainNotSelfhosted()&&this.workspaceService.workspaces$.pipe(Object(n.a)(e=>null!=e),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.workspaces=e,this.cd.detectChanges()})}setDefaultWorkspace(e){this.defaultWorkspace=e,this.setWorkspaceSettings(e),this.resetProjectList(),this.getClients(),this.isWorkspacesExpanded=!1,this.authService.isUserAdminOnWorkspace(e.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.isAdminOrOwner=e,this.cd.detectChanges()})}onModalOpen(){this.arrowNavigation.removeListener(),this.disableCloseProjectPicker=!0}onModalClosed(){this.arrowNavigation.addListener(),setTimeout(()=>{this.disableCloseProjectPicker=!1;try{this.cd.markForCheck()}catch(e){}})}openModal(e,t="md"){this.onModalOpen(),this.modalService.open(e,{centered:!0,size:t}).result.then(()=>this.onModalClosed(),()=>this.onModalClosed())}setCreatedProjectData({project:e,task:t}){if(!e)return void console.error("setCreatedProjectData() - missing project");if(t||!this.forceTask)return void this.selectProjectAndTask(e,t);const i=this.projectsByClient.find(t=>t.client.id==e.clientId&&t.isFavorite===!!e.favorite);i?(t&&e.tasks.push(t),e.taskCount=t?1:0,i.projects.push(e),i.updatePojectsCountBy(1)):(this.resetProjectList(),this.getClients())}createNewProject(){if(!this.canCreate||!this.hasPermissionToCreateProject)return;if(!this.projectName)return;const e=this.taskName;this.projectService.create(this.projectName,this.defaultWorkspace.isProjectPublicByDefault,"",this.defaultWorkspace.defaultBillableProjects,"#F44336",this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e?this.createTask(t,e):this.forceTask?this.resetSearch():this.selectProjectAndTask(t,null)})}createTask(e,t){this.creatingInProgress=!0,this.taskService.createTask(t,e.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{this.creatingInProgress=!1,this.selectProjectAndTask(e,t)},()=>this.creatingInProgress=!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(d.a),c.Rb(h.a),c.Rb(c.h),c.Rb(b.a),c.Rb(f.a),c.Rb(x.q),c.Rb(m.a),c.Rb(g.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["project-picker"]],viewQuery:function(e,t){var i;1&e&&(c.ed(w.a,!0),c.ed($,!0),c.ed(v.a,!0),c.ed(G,!0)),2&e&&(c.Kc(i=c.kc())&&(t.disableDropdownKeyDirective=i.first),c.Kc(i=c.kc())&&(t.searchInput=i.first),c.Kc(i=c.kc())&&(t.arrowNavigation=i.first),c.Kc(i=c.kc())&&(t.scrollArea=i.first))},inputs:{timesheetRows:"timesheetRows",hideWorkspaces:"hideWorkspaces",selectedProject:"selectedProject",selectedTask:"selectedTask"},outputs:{selectedProjectAndTask:"selectedProjectAndTask",dropdownClosed:"dropdownClosed"},decls:24,vars:14,consts:[["arrowNavigation","",1,"cl-relative",2,"display","block"],[1,"cl-dropdown-menu-header",3,"disableCloseDropdownKey"],[1,"cl-input-group"],["type","text","tabindex","0","autocomplete","off",1,"cl-form-control","cl-input-has-clear","cl-pr-4",3,"placeholder","ngModel","ngModelChange","keyup.enter"],["searchInput",""],["class","cl-clear-input","doNotCloseDropdown","",3,"click",4,"ngIf"],["class","cl-dropdown-item cl-border-bottom pointer",3,"cl-open","cl-remove-border-bottom","keyup.ArrowRight","keyup.ArrowLeft","click","keyup.enter","keyup.space",4,"ngIf"],["class","cl-collapse","style","display: block",4,"ngIf"],["class","cl-dropdown-menu-sub-header","style","position: relative; bottom: -1px;",4,"ngIf"],["canCreateTemplate",""],["taskSuggestionTemplate",""],["tabindex","0","scrollPosition","","infiniteScroll","",1,"cl-scroll-area","cl-dropdown-item-checkbox","cl-no-focus-tabindex",3,"scrollParentAttribute","scrollChildAttribute","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","onChildScroll","onGroupScroll","scrolled"],["scrollArea",""],["class","cl-dropdown-section-wrapper",4,"ngIf"],[4,"ngIf"],["dropdownClose","","tabindex","0"],["createTaskModal",""],["clientModal",""],["modalNewProject",""],["doNotCloseDropdown","",1,"cl-clear-input",3,"click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""],[1,"cl-dropdown-item","cl-border-bottom","pointer",3,"keyup.ArrowRight","keyup.ArrowLeft","click","keyup.enter","keyup.space"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0","cl-cut-text"],[1,"cl-cut-text-wrapper"],["tabindex","-1",1,"cl-text-gray-6","cl-d-flex",3,"title"],[1,"cl-dropdown-item-expand","cl-cut-text"],[3,"isOpen"],[1,"cl-collapse",2,"display","block"],[1,"cl-collapse-content"],[1,"cl-dropdown-item"],[1,"cl-item-between","cl-cut-text-wrapper"],[1,"cl-cut-text",3,"title"],[1,"cl-dropdown-item-workspace-right"],["src","assets/images/ui-icons/checkmark-green.svg"],[1,"cl-dropdown-active-workspace-label","cl-d-none","cl-d-lg-inline-block"],[4,"ngFor","ngForOf"],["doNotCloseDropdown","","tabindex","-1","class","cl-dropdown-item cl-cut-text-wrapper",3,"title","click","keyup.enter","keyup.space",4,"ngIf"],["doNotCloseDropdown","","tabindex","-1",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"title","click","keyup.enter","keyup.space"],["doNotCloseDropdown","",1,"cl-cut-text"],[1,"cl-dropdown-menu-sub-header",2,"position","relative","bottom","-1px"],[1,"cl-dropdown-item-padding","cl-mw-100"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"cl-h6","cl-mb-0"],[3,"click"],["class","cl-h6 cl-mb-0",4,"ngIf","ngIfElse"],["createSuggestionTemplate",""],["class","cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-dropdown-section-wrapper"],["class","cl-dropdown-item pointer","clickCloseDropdown","",3,"click","keyup.enter","keyup.space",4,"ngIf"],["clickCloseDropdown","",1,"cl-dropdown-item","pointer",3,"click","keyup.enter","keyup.space"],["clickCloseDropdown","",1,"cl-item-between"],["clickCloseDropdown","","tabindex","-1",1,"cl-border-light","cl-text-dark"],["parentScroll","",1,"cl-dropdown-section","cl-pt-0"],[1,"cl-dropdown-item","cl-project-picker-sticky"],[1,"cl-dropdown-header","cl-h5","cl-p-0","cl-cut-text","pointer",3,"title","click","keyup.space","keyup.enter","keyup.ArrowRight","keyup.ArrowLeft"],["class","cl-d-flex cl-align-items-center",4,"ngIf"],[2,"display","block"],["class","cl-bg-transparent",3,"cl-collapse-content",4,"ngIf"],[1,"cl-d-flex","cl-align-items-center"],["tabindex","-1",1,"cl-text-gray-6","cl-d-flex",3,"click","keyup.ArrowRight","keyup.ArrowLeft","keyup.space","keyup.enter"],[1,"cl-dropdown-item-expand"],[1,"cl-client-icon-modal",3,"click"],["src","assets/images/ui-icons/maximise.svg"],[1,"cl-bg-transparent"],[1,"cl-dropdown-item","cl-bg-transparent"],["tabindex","-1",1,"cl-project-name","cl-project-name-colored","cl-cut-text","cl-btn-disabled-light","cl-py-1","cl-px-2","cl-my-n1","cl-mx-n2","cl-btn-block","cl-text-left","cl-btn-project-picker",3,"disabled","title","click","keyup.ArrowRight","keyup.ArrowLeft","keyup.enter","keyup.space"],[1,"cl-entry__project__dot"],["class","cl-text-gray-6 cl-d-flex cl-pr-1",3,"click",4,"ngIf"],["class","cl-pl-3",3,"click",4,"ngIf"],["class","cl-dropdown-star","doNotCloseDropdown","",3,"cl-active","click",4,"ngIf"],["class","cl-collapse","childScroll","","style","display: block",4,"ngIf"],[1,"cl-h-line-divider"],[1,"cl-listing-client"],[1,"cl-text-gray-6","cl-d-flex","cl-pr-1",3,"click"],[1,"cl-pl-3",3,"click"],["doNotCloseDropdown","",1,"cl-dropdown-star",3,"click"],["childScroll","",1,"cl-collapse",2,"display","block"],[1,"cl-collapse-content","cl-collapse-content-tasks","cl-collapse-content-tags"],["tabindex","-1","clickCloseDropdown","",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"title","click","keyup.enter","keyup.space"],["clickCloseDropdown","",1,"cl-cut-text"],["tabindex","0",1,"cl-dropdown-item","cl-border-top","cl-border-light","cl-b-0",3,"click","keyup.enter","keyup.space"],["createTaskLink",""],["src","assets/images/ui-icons/plus-blue.svg"],[1,"cl-ml-2","cl-text-primary"],[2,"height","41px"],["tabindex","0",1,"cl-dropdown-item","cl-border-top","cl-border-light","cl-b-0","cl-absolute",3,"click","keyup.enter","keyup.space"],["createBtn",""],[3,"title","inProgress","close","onSubmit"],[3,"hasCreateTaskPermission","forbiddenProjectMap","allForbiddenProjectIds","allForbiddenTaskIds","client","isFavorite","workspace","filterPlaceholder","projectGroupingLabel","isFavoriteFeatureEnabled","onFavoriteChange","close","onCreateTask","projectAndTaskSelected"],[3,"isAdminOrOwner","name","taskName","workspace","onProjectAndTaskDataCreated","close"]],template:function(e,t){1&e&&(c.Xb(0,"section",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"input",3,4),c.jc("ngModelChange",(function(e){return t.search=e}))("ngModelChange",(function(e){return t.onSearchChange(e)}))("keyup.enter",(function(){return t.selectFirstProject()})),c.Wb(),c.Wc(5,z,2,0,"a",5),c.Wb(),c.Wb(),c.Wc(6,q,10,7,"div",6),c.Wc(7,J,11,3,"div",7),c.Wc(8,te,5,2,"div",8),c.Wc(9,le,2,2,"ng-template",null,9,c.Xc),c.Wc(11,de,1,1,"ng-template",null,10,c.Xc),c.Xb(13,"section",11,12),c.jc("onChildScroll",(function(e){return t.onTaskScroll(e)}))("onGroupScroll",(function(e){return t.onClientGroupScroll(e)}))("scrolled",(function(){return t.onMainScroll()})),c.Wc(15,xe,3,2,"section",13),c.Wb(),c.Wc(16,Oe,7,1,"ng-container",14),c.Sb(17,"span",15),c.Wb(),c.Wc(18,De,1,2,"ng-template",null,16,c.Xc),c.Wc(20,Ie,1,10,"ng-template",null,17,c.Xc),c.Wc(22,je,1,4,"ng-template",null,18,c.Xc)),2&e&&(c.Cb(1),c.wc("disableCloseDropdownKey",t.disableCloseProjectPicker),c.Cb(2),c.xc("placeholder",t.filterPlaceholder),c.wc("ngModel",t.search),c.Cb(2),c.wc("ngIf",t.search),c.Cb(1),c.wc("ngIf",!t.hideWorkspaces&&(null==t.workspaces?null:t.workspaces.length)&&!t.canCreate),c.Cb(1),c.wc("ngIf",t.isWorkspacesExpanded),c.Cb(1),c.wc("ngIf",t.title),c.Cb(5),c.wc("scrollParentAttribute","parentScroll")("scrollChildAttribute","childScroll")("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("scrollWindow",!1),c.Cb(2),c.wc("ngIf",!t.title),c.Cb(1),c.wc("ngIf",!t.defaultWorkspace.onlyAdminsCreateProject||t.isAdminOrOwner))},directives:[v.a,w.a,O.c,O.s,O.v,D.u,j,T.a,_,D.t,W,U,H.a],pipes:[R.a],encapsulation:2,changeDetection:0}),e})()},GJLE:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ofXK"),s=i("3Pt+"),r=i("iTUp"),o=i("hT48"),a=i("dlKe"),c=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.a,a.b]]}),e})()},Gajk:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("iTUp"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a]]}),e})()},GidR:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("yK97"),s=i("IgG/"),r=i("O3o7"),o=i("Tj/N"),a=i("tnjF"),c=i("Hf8F"),l=i("VYrk"),u=i("dMTz");class d{constructor(e){this._invoiceId=e&&e.invoiceId,this._invoiceNumber=e&&e.invoiceNumber,this._manuallyInvoiced=e&&e.manuallyInvoiced}get invoiceId(){return this._invoiceId}set invoiceId(e){this._invoiceId=e}get invoiceNumber(){return this._invoiceNumber}set invoiceNumber(e){this._invoiceNumber=e}get manuallyInvoiced(){return this._manuallyInvoiced}set manuallyInvoiced(e){this._manuallyInvoiced=e}}class h{constructor(e,t){this._user=new o.a({id:(e=e||{}).userId,name:e.userName,email:e.userEmail}),this._tags=e.tags?e.tags.map(e=>new s.a(e)):null,this._id=e._id||e.id,this._description=e.description||"",this._billable=e.billable,this._approvalRequestId=e.approvalRequestId,this._invoicingInfo=new d(e.invoicingInfo),e.projectId&&(this._project=new r.a({id:e.projectId,name:e.projectName,color:e.projectColor,billable:e.projectBillable,clientName:e.clientName})),e.taskId&&(this._task=new a.a({id:e.taskId,name:e.taskName})),this._bulkEdit=e.bulkEdit,this._isLocked=e.isLocked,this._timeInterval=new n.a(e.timeInterval);const i=e.customFields||e.customFieldValues;this._customFieldValues=i?i.map(e=>new l.a(e)):[],this._amount=e.amount||0,this._hourlyRate=e.hourlyRate||e.earnedRate||0,this._costRate=e.costRate||0,t&&(t===u.a.EARNED?this._hourlyRate=e.rate||0:t===u.a.COST&&(this._costRate=e.rate||0))}get id(){return this._id}set id(e){this._id=e}get description(){return this._description}set description(e){this._description=e}get billable(){return this._billable}set billable(e){this._billable=e}get bulkEdit(){return this._bulkEdit}set bulkEdit(e){this._bulkEdit=e}get user(){return this._user}set user(e){this._user=e}get task(){return this._task}set task(e){this._task=e}get project(){return this._project}set project(e){this._project=e}get tags(){return this._tags}set tags(e){this._tags=e}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked=e}get approvalRequestId(){return this._approvalRequestId}set approvalRequestId(e){this._approvalRequestId=e}get invoicingInfo(){return this._invoicingInfo}set invoicingInfo(e){this._invoicingInfo=e}get hasInvoice(){return!!this.invoicingInfo.invoiceId||this.invoicingInfo.manuallyInvoiced}get invoiceTooltip(){return this._invoicingInfo.manuallyInvoiced?"Manually marked as invoiced":this._invoicingInfo.invoiceNumber}get amount(){return this._amount}set amount(e){this._amount=e}get hourlyRate(){return this._hourlyRate}set hourlyRate(e){this._hourlyRate=e||0}get costRate(){return this._costRate}set costRate(e){this._costRate=e||0}get timeInterval(){return this._timeInterval}set timeInterval(e){this._timeInterval=e}get customFieldValues(){return this._customFieldValues}set customFieldValues(e){this._customFieldValues=e}updateHourlyRateAndEarned({hourlyRate:e,costRate:t,type:i}){this.hourlyRate=e,this.costRate=t,this.refreshEarned(i)}refreshEarned(e){const t=new c.a(this.timeInterval.duration);if(e===u.a.EARNED){if(!this.billable)return void(this.amount=0);this.amount=this.hourlyRate*t.getHours()}else if(e===u.a.COST)this.amount=this.costRate*t.getHours();else if(e===u.a.PROFIT){const e=this.hourlyRate*t.getHours(),i=this.costRate*t.getHours();this.amount=e-i}}static clone(e){if(!e)return null;const t={id:e.id,description:e.description,billable:e.billable,isLocked:e.isLocked,userId:e.user&&e.user.id,userName:e.user&&e.user.name,userEmail:e.user&&e.user.email,projectId:e.project&&e.project.id,projectName:e.project&&e.project.name,projectColor:e.project&&e.project.color,projectBillable:e.project&&e.project.billable,clientName:e.project&&e.project.clientName,taskId:e.task&&e.task.id,taskName:e.task&&e.task.name,timeInterval:new n.a(e.timeInterval),tags:e.tags,amount:e.amount,hourlyRate:e.hourlyRate,customFieldValues:e.customFieldValues,approvalRequestId:e.approvalRequestId};return new h(t)}static fromTimeEntryAndReportEntry(e,t){let i,s,r;e.projectId&&t.project&&(i=t.project,s=t.project.clientName),e.taskId&&t.task&&(r=t.task);const o={id:e.id,description:e.description,billable:e.billable,isLocked:e.isLocked,userId:e.userId,userName:e.userName,projectId:i&&i.id,projectName:i&&i.name,projectColor:i&&i.color,clientName:s,taskId:r&&r.id,taskName:r&&r.name,timeInterval:new n.a(e.timeInterval),tags:t.tags?t.tags.filter(t=>e.tagIds&&e.tagIds.indexOf(t.id)>-1):null,hourlyRate:e.hourlyRate,costRate:e.costRate,customFieldValues:e.customFieldValues,approvalRequestId:t.approvalRequestId,invoicingInfo:t.invoicingInfo};return new h(o)}}},GsAO:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s,r,o,a){const c=[];return e.includes("col1")&&c.push(t),e.includes("col2")&&c.push(i),e.includes("col3")&&c.push(n),e.includes("col4")&&c.push(s),e.includes("col5")&&c.push(r),e.includes("col6")&&c.push(o),e.includes("col7")&&c.push(a),c}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"taskColumnDecider",type:e,pure:!0}),e})()},HApq:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("1G5W"),s=i("XNiG"),r=i("2Vo4");class o{constructor(e){this._id=e&&e.id,this._specialFeaturesActivated=e&&e.specialFeaturesActivated,this._createWorkspaceForbidden=e&&e.createWorkspaceForbidden}get id(){return this._id}set id(e){this._id=e}get specialFeaturesActivated(){return this._specialFeaturesActivated}set specialFeaturesActivated(e){this._specialFeaturesActivated=e}get createWorkspaceForbidden(){return this._createWorkspaceForbidden}set createWorkspaceForbidden(e){this._createWorkspaceForbidden=e}}var a=i("lGQG"),c=i("1Tmk"),l=i("fXoL"),u=i("tk/3");let d=(()=>{class e{constructor(e,t,i){this.http=e,this.workspaceService=t,this.authService=i,this.systemSettings=new s.a,this.customLinkSettings=new s.a,this.customEmailsSettings=new s.a,this.systemSettings$=new r.a(null),this.unsubscribe$=new s.a,this.authService.onLogout$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.systemSettings$.next(null)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}getSystemSettings(){const e=localStorage.getItem("systemSettings");if(e){const t=JSON.parse(e);this.systemSettings.next(t);const i=new o(t);this.authService._specialFeaturesActivated=i.specialFeaturesActivated,this.systemSettings$.next(i)}else this.http.get("/system-settings/").subscribe(e=>{localStorage.setItem("systemSettings",JSON.stringify(e)),this.systemSettings.next(e);const t=new o(e);this.systemSettings$.next(t),this.authService._specialFeaturesActivated=t.specialFeaturesActivated},e=>{})}getCustomLinksSettings(){this.http.get("/system-settings/custom-links").subscribe(e=>{this.customLinkSettings.next(e)},e=>{})}getCustomEmailsSettings(){this.http.get("/system-settings/custom-emails").subscribe(e=>{this.customEmailsSettings.next(e)},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(l.fc(u.b),l.fc(c.a),l.fc(a.a))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},IP1A:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("BO2n"),r=i("f0Wu");i("Tj/N");let o=(()=>{class e{constructor(){this.updateSince=!0,this.maxDate=r().startOf("day"),this.rateType=s.a,this.hasHistoricRateFeature=!1,this.onClose=new n.n,this.saveRate=new n.n}ngOnInit(){this.setText(this.type)}close(){this.onClose.emit()}togglePopover(e){this.hasHistoricRateFeature||(e.isOpen()?e.close():e.open())}setText(e){switch(e){case s.a.WORKSPACE:this.text="We'll apply this rate to all entries that don't have any project or team rate.";break;case s.a.WORKSPACE_MEMBER:this.text="We'll apply this rate to all entries made by "+this.user.name+", except on projects that have their own rate.";break;case s.a.PROJECT:this.text="We'll apply this rate to all entries on this project, unless some member has a more specific rate for this project.";break;case s.a.TASK:this.text="We'll apply this rate to all entries on this task, unless some member has a more specific rate for this project.";break;default:this.text="We'll apply this rate to all entries made by "+this.user.name+" on this project."}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,inputs:{hasHistoricRateFeature:"hasHistoricRateFeature",type:"type",user:"user"},outputs:{onClose:"onClose",saveRate:"saveRate"}}),e})()},IQK1:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Hf8F"),s=i("XNiG");class r{constructor(e,t){this.onChange$=new s.a,this.entriesCount=(e=e||{}).entriesCount||0,this.totalTime=new n.a(1e3*e.totalTime).asString(),this.totalBillableTime=new n.a(1e3*e.totalBillableTime).asString(),this.updatetotalAmountOnCurrentPage(t),this.totalAmountOnOtherPages=(e.totalAmount||0)-(this.totalAmountOnCurrentPage||0)}updatetotalAmountOnCurrentPage(e){this.totalAmountOnCurrentPage=0,e&&e.length&&(e.forEach(e=>{this.totalAmountOnCurrentPage+=e.amount}),this.onChange$.next())}get totalAmount(){return this.totalAmountOnCurrentPage+this.totalAmountOnOtherPages}timeIntervalChanged(e){this.totalTime=this.calculateNewDuration(e,this.totalTime),e.isBillable&&(this.totalBillableTime=this.calculateNewDuration(e,this.totalBillableTime),this.onChange$.next())}changeBillableTime(e){const t=new n.a(this.totalBillableTime);e.isBillable?t.add(e.duration):t.subtract(e.duration),this.totalBillableTime=t.asString(),this.onChange$.next()}calculateNewDuration(e,t){const i=new n.a(t);return e.addTime?i.add(e.duration):i.subtract(e.duration),i.asString()}editDuration(e,t,i){this.timeIntervalChanged({duration:e,isBillable:t,addTime:i})}entryDurationChanged(e,t,i){const s=new n.a(e.duration),r=new n.a(t.duration).asMiliseconds()-s.asMiliseconds(),o=r>0,a=new n.a(Math.abs(r)).asString();this.timeIntervalChanged({duration:a,isBillable:i,addTime:o})}}},Ig2A:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.TOTAL="TOTAL",e.SUBGROUP="SUBGROUP",e.RTL="RTL",e}({})},JBiw:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("y+xF"),s=i("XNiG"),r=i("hkzH"),o=i("xoOP");class a{constructor(e){this.onChange=new s.a,this._maps=e}get maps(){return this._maps}set maps(e){this._maps=e}pushMap(e){this.addNewMap(e,!0)}unshiftMap(e){this.addNewMap(e,!1)}addNewMap(e,t){if(!e)return;const{index:i,map:n}=this.getMapAndIndex(e.key);if(i>-1)return n.value=e.value,void this.onChange.next("valueChanged");t?this.maps.push(e):this.maps.unshift(e),this.onChange.next("added")}pushToMap(e,t,i){if(!t||!t.length)return;const s=this.findSelectableMap(e);s?s.push(t):this.maps.push(new n.a(e,t,i)),this.onChange.next("set")}removeWithoutMapIfNeed(e){e===r.d.CONTAINS_ONLY&&this.removeMap(n.b)}removeMap(e){const t=this.getIndexOfKey(e);t<0||(this.maps.splice(t,1),this.onChange.next("removed"))}clearAllMaps(){this.maps=[],this.onChange.next("clearAllMaps")}countSelectablesOf(e){const t=this.findSelectableMap(e);return t?t.value.length:0}count(){let e=0;return this.maps.forEach(t=>{e+=t.value.length}),e}isWithoutSelected(){const e=this.findSelectableMap(n.b);if(!e)return!1;const t=e.findSelectable(n.b);return!(!t||!t.selected)}getSelectedEntities(e){const t=this.findSelectableMap(e);return t?t.value.filter(e=>e.selected).map(e=>e.entity):[]}getAllSelectedEntities(){let e=[];return this.maps.forEach(t=>{const i=t.value.filter(e=>e.selected).map(e=>e.entity);e=[...e,...i]}),e}findSelectableMap(e){const t=this.maps.length;for(let i=0;i<t;i++){const t=this.maps[i];if(t.key===e)return t}return null}setSelected(e){this.maps.forEach(t=>t.setSelectedAll(e))}resetAll(e=!0){let t;e&&(t=this.findSelectableMap(n.b)),this.maps=[],t&&e&&this.maps.unshift(t),this.onChange.next("resetAll")}resetMap(e){const t=this.findSelectableMap(e);t&&t.reset(),this.onChange.next("resetMap")}getSelectedData(e,t=!1){const i={total:0,selected:0};return this.maps.forEach(s=>{if(t&&s.key===n.b)return;let r=s.value;e&&(r=r.filter(t=>Object(o.z)(t.entity.name,e))),i.total+=r.length,i.selected+=r.filter(e=>e.selected).length}),i}getMapOfKey(e){return this.getMapAndIndex(e).map}getIndexOfKey(e){return this.getMapAndIndex(e).index}getMapAndIndex(e){const t=this.maps.length,i={index:-1,map:null};for(let n=0;n<t;n++){const t=this.maps[n];if(t.key===e)return i.index=n,i.map=t,i}return i}updateDisabledForSelectedLimit(e){if(!e)return;const{selected:t}=this.getSelectedData();this.maps.forEach(t>=e?e=>{e.value.forEach(e=>{e.selected||(e.isDisabled=!0)})}:e=>{e.value.forEach(e=>{e.isDisabled=!1})})}getLabelOf(e){return"label"}}},JO38:function(e,t,i){"use strict";i.d(t,"a",(function(){return W}));var n=i("fXoL"),s=i("fANO"),r=i("VYrk"),o=i("lGQG"),a=i("avDW"),c=i("NHP+"),l=i("1kSV"),u=i("ofXK"),d=i("3Pt+"),h=i("2rWG"),p=i("sbmM"),b=i("qUN8"),f=i("nAmH");function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",5),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().customField.value=t}))("focus",(function(){return n.Oc(e),n.nc().setDefaultValue()}))("change",(function(){n.Oc(e);const t=n.nc();return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb()}if(2&e){const e=n.nc();n.wc("type",e.customFieldType[e.customField.customField.type].label.toLowerCase())("placeholder",e.customField.customField.placeholder)("title",e.customField.customField.description||"")("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit)("ngModel",e.customField.value)}}function g(e,t){1&e&&n.Sb(0,"div",14)}function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",9),n.Wc(1,g,1,0,"div",10),n.Xb(2,"a",11),n.jc("focus",(function(){return n.Oc(e),n.nc(2).setDefaultValue()})),n.Yc(3),n.Wb(),n.Xb(4,"a",12),n.jc("click",(function(){n.Oc(e);const t=n.nc(2),i=n.Lc(5);return t.openEditLinkModal(t.customField,i)})),n.Sb(5,"img",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(1),n.xc("href",e.customField.value,n.Qc),n.wc("title",e.customField.customField.description||""),n.Cb(1),n.Zc(e.customField.customField.placeholder||e.customField.customField.name)}}function w(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",15),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).customField.value=t}))("focus",(function(){return n.Oc(e),n.nc(2).setDefaultValue()}))("change",(function(){n.Oc(e);const t=n.nc(2);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder",e.customField.customField.placeholder)("title",e.customField.customField.description||"")("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit)("ngModel",e.customField.value)}}function y(e,t){if(1&e&&(n.Xb(0,"div",6),n.Wc(1,v,6,4,"div",7),n.Wc(2,w,1,4,"input",8),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.editLink),n.Cb(1),n.wc("ngIf",!e.editLink)}}function C(e,t){1&e&&n.Sb(0,"div",14)}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"label",19),n.jc("click",(function(){return n.Oc(e),n.nc(2).setDefaultValue()})),n.Wc(1,C,1,0,"div",10),n.Xb(2,"span",20),n.Yc(3),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.wc("title",e.customField.customField.description||"")("for","switch"+e.customField.customField.id+e.timeEntryId+e.randomId),n.Cb(1),n.wc("ngIf",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(2),n.Zc(e.customField.customField.placeholder)}}function S(e,t){1&e&&n.Sb(0,"div",14)}function x(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div"),n.Xb(1,"input",21),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).customField.value=t}))("change",(function(){n.Oc(e);const t=n.nc(2);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb(),n.Xb(2,"label",22),n.Wc(3,S,1,0,"div",10),n.Xb(4,"span",20),n.Yc(5),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit)("ngModel",e.customField.value)("title",e.customField.customField.description||"")("id","switch"+e.customField.customField.id+e.timeEntryId+e.randomId)("name","switch"+e.customField.customFieldId+e.timeEntryId+e.randomId),n.Cb(1),n.wc("title",e.customField.customField.description||"")("for","switch"+e.customField.customField.id+e.timeEntryId+e.randomId),n.Cb(1),n.wc("ngIf",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(2),n.Zc(e.customField.customField.placeholder)}}function O(e,t){if(1&e&&(n.Xb(0,"div",16),n.Wc(1,k,4,4,"label",17),n.Wc(2,x,6,9,"div",18),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",null===e.customField.value),n.Cb(1),n.wc("ngIf",null!==e.customField.value)}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",31),n.Xb(1,"div",32),n.Xb(2,"input",33),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(4).customField.value=t}))("change",(function(){n.Oc(e);const t=n.nc(4);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb(),n.Xb(3,"label",34),n.Xb(4,"div",20),n.Yc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(4);n.Cb(2),n.wc("id","option1"+i+s.customField.customField.name+s.timeEntryId)("name","option1"+i+s.customField.customField.name+s.timeEntryId)("value",e)("ngModel",s.customField.value),n.Cb(1),n.wc("for","option1"+i+s.customField.customField.name+s.timeEntryId),n.Cb(2),n.Zc(e)}}function I(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"div",30),n.Yc(3),n.Wb(),n.Wb(),n.Xb(4,"div",31),n.Xb(5,"div",32),n.Xb(6,"input",33),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(3).customField.value=t}))("change",(function(){n.Oc(e);const t=n.nc(3);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb(),n.Xb(7,"label",34),n.Xb(8,"div",20),n.Yc(9,"None"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wc(10,D,6,6,"div",35),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(3),n.Zc(e.customField.customField.placeholder),n.Cb(3),n.wc("id","option0"+e.customField.customField.name+e.timeEntryId)("name","option0"+e.customField.customField.name+e.timeEntryId)("value",null)("ngModel",e.customField.value),n.Cb(1),n.wc("for","option0"+e.customField.customField.name+e.timeEntryId),n.Cb(3),n.wc("ngForOf",e.customField.customField.allowedValues)}}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",31),n.Xb(1,"div",36),n.Xb(2,"input",37),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i})),n.Wb(),n.Xb(3,"label",34),n.Xb(4,"div",20),n.Yc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(4);n.Cb(2),n.wc("id","option2"+i+s.customField.customField.name+s.timeEntryId)("name","option2"+i+s.customField.customField.name+s.timeEntryId)("ngModel",e.selected),n.Cb(1),n.wc("for","option2"+i+s.customField.customField.name+s.timeEntryId),n.Cb(2),n.Zc(e.title)}}function T(e,t){if(1&e&&(n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"div",30),n.Yc(3),n.Wb(),n.Wb(),n.Wc(4,j,6,5,"div",35),n.Wb()),2&e){const e=n.nc(3);n.Cb(3),n.Zc(e.customField.customField.placeholder),n.Cb(1),n.wc("ngForOf",e.customField.customField.allowedValuesFull)}}function E(e,t){if(1&e&&(n.Xb(0,"div",26),n.Wc(1,I,11,7,"div",27),n.Wc(2,T,5,2,"div",27),n.Wb()),2&e){const e=n.nc(2);n.Db("alwaysUp",!!e.fromEdit||null),n.Cb(1),n.wc("ngIf",e.customField.customField.type===e.customFieldType.DROPDOWN_SINGLE.value),n.Cb(1),n.wc("ngIf",e.customField.customField.type===e.customFieldType.DROPDOWN_MULTIPLE.value)}}function A(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",23),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.dropdownClosed(t.customField.customFieldId)})),n.Xb(1,"button",24),n.jc("focus",(function(){return n.Oc(e),n.nc().setDefaultValue()})),n.Yc(2),n.Wb(),n.Wc(3,E,3,3,"div",25),n.Wb()}if(2&e){const e=n.nc();n.wc("title",e.customField.customField.description||""),n.Cb(1),n.wc("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(1),n.ad(" ",null!=e.customField.value&&e.customField.value.length?e.getSelected():e.customField.customField.placeholder," ")}}function _(e,t){if(1&e){const e=n.Yb();n.Xb(0,"rename-modal",38),n.jc("editedValue",(function(i){n.Oc(e);const s=t.$implicit;return n.nc().saveLinkValue(i),s.close()}))("isOpen",(function(){return t.$implicit.close()})),n.Wb()}if(2&e){const e=n.nc();n.wc("title","Edit link")("label",e.currentEditCustomFieldValue.customField.placeholder||e.currentEditCustomFieldValue.customField.name)("inputValue",e.currentEditCustomFieldValue.value)}}let W=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.trackerService=t,this.modalService=i,this.cd=r,this.fromEdit=!1,this.valueChanged=new n.n,this.manyChanged=new n.n,this.customFieldType=s.a,this.unsubscribe$=new c.a,this.randomId=Math.floor(6*Math.random()+1)}set customField(e){this._customField=e,this.createAllowedValuesForCheckList(),this.editLink=this.isEditLink()}get customField(){return this._customField}ngOnInit(){this.isAdmin=this.authService.isAdminOrOwner()}update(e,t){this.disabled||(this.customField.customField.type===s.b.NUMBER&&(t=t&&""!=t?Number(t):null,this.customField.value=t),this.timeEntryId&&this.timeEntryId.includes("PARENT")?this.manyChanged.emit(t):(this.timeEntryId?this.trackerService.editCustomField(this.timeEntryId,new r.a({customFieldId:e,value:t})).subscribe():this.createAllowedValuesForCheckList(),this.valueChanged.emit(t)))}dropdownClosed(e){if(this.customField.customField.type!==s.b.DROPDOWN_MULTIPLE)return;const t=this.customField.value;this.customField.value=this.customField.customField.allowedValuesFull.filter(e=>e.selected).map(e=>e.title),JSON.stringify(this.customField.value)!==JSON.stringify(t)&&this.update(e,this.customField.value)}createAllowedValuesForCheckList(){this.customField.customField.allowedValuesFull=this.customField.customField.type==s.b.DROPDOWN_MULTIPLE||this.customField.customField.type==s.b.DROPDOWN_SINGLE?this.customField.customField.allowedValues.map(e=>({title:e,selected:this.customField.value&&this.customField.value.indexOf(e)>-1})):[]}openEditLinkModal(e,t){this.currentEditCustomFieldValue=e,this.modalService.open(t,{centered:!0})}saveLinkValue(e){this.timeEntryId?this.update(this.currentEditCustomFieldValue.customFieldId,e):(this.customField.value=e,this.valueChanged.emit(e)),this.currentEditCustomFieldValue.value=e}isEditLink(){return"link"===this.customFieldType[this.customField.customField.type].fieldType&&this.customField.value&&""!==this.customField.value}getSelected(){if(this.customField.customField.type===s.b.DROPDOWN_MULTIPLE&&"object"==typeof this.customField.value){let e="";return this.customField.value.map((t,i)=>{e+=i===this.customField.value.length-1?t:t+", "}),e}return this.customField.value}setDefaultValue(){if(!this.disabled&&!this.customField.value)if(this.customField.customField.type!==s.b.CHECKBOX)this.customField.defaultValue&&this.updateToDefaultValue(null);else{const e=this.customField.defaultValue||!1;if(this.updateToDefaultValue(e),this.customField.value=e,this.timeEntryId&&this.timeEntryId.includes("PARENT"))return;this.valueChanged.emit(e)}}updateToDefaultValue(e){this.timeEntryId&&(this.timeEntryId.includes("PARENT")?this.manyChanged.emit(e):this.trackerService.editCustomField(this.timeEntryId,new r.a({customFieldId:this.customField.customFieldId,value:e})).subscribe(e=>{this.customField.value=e.value,this.editLink=!!e.value,this.createAllowedValuesForCheckList(),this.cd.detectChanges()}))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.a),n.Rb(a.a),n.Rb(l.q),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["custom-field-value"]],inputs:{customField:"customField",timeEntryId:"timeEntryId",fromEdit:"fromEdit",disabled:"disabled"},outputs:{valueChanged:"valueChanged",manyChanged:"manyChanged"},decls:6,vars:4,consts:[["class","cl-form-control cl-form-control-sm cl-cut-text",3,"type","placeholder","title","disabled","ngModel","ngModelChange","focus","change",4,"ngIf"],["class","cl-cut-text-wrapper",4,"ngIf"],["class","cl-custom-control cl-custom-switch",4,"ngIf"],["class","cl-dropdown","dropdownKey","",3,"title","onClose",4,"ngIf"],["changeLink",""],[1,"cl-form-control","cl-form-control-sm","cl-cut-text",3,"type","placeholder","title","disabled","ngModel","ngModelChange","focus","change"],[1,"cl-cut-text-wrapper"],["class","cl-d-flex cl-align-items-center",4,"ngIf"],["type","text","class","cl-form-control cl-form-control-sm cl-cut-text",3,"placeholder","title","disabled","ngModel","ngModelChange","focus","change",4,"ngIf"],[1,"cl-d-flex","cl-align-items-center"],["class","cl-blocker",4,"ngIf"],["target","_blank",1,"cl-cut-text","cl-small","cl-color-blue",3,"href","title","focus"],["data-toggle","modal",1,"cl-ml-2",3,"click"],["src","assets/images/ui-icons/edit.svg"],[1,"cl-blocker"],["type","text",1,"cl-form-control","cl-form-control-sm","cl-cut-text",3,"placeholder","title","disabled","ngModel","ngModelChange","focus","change"],[1,"cl-custom-control","cl-custom-switch"],["class","cl-custom-control-label-fake cl-d-flex cl-cut-text-wrapper",3,"title","for","click",4,"ngIf"],[4,"ngIf"],[1,"cl-custom-control-label-fake","cl-d-flex","cl-cut-text-wrapper",3,"title","for","click"],[1,"cl-cut-text"],["type","checkbox",1,"cl-custom-control-input",3,"disabled","ngModel","title","id","name","ngModelChange","change"],[1,"cl-custom-control-label","cl-d-flex","cl-cut-text-wrapper",3,"title","for"],["dropdownKey","",1,"cl-dropdown",3,"title","onClose"],["dropdownKeyButton","","type","button",1,"cl-btn","cl-btn-sm","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text","cl-pr-3","cl-cf-dropdown",3,"disabled","focus"],["class","cl-dropdown-menu cl-mw-100 cl-prevent-close","openUpAtBottom","",4,"dropdownKeyContent"],["openUpAtBottom","",1,"cl-dropdown-menu","cl-mw-100","cl-prevent-close"],["class","cl-scroll-area",4,"ngIf"],[1,"cl-scroll-area"],[1,"cl-dropdown-menu-sub-header","cl-cut-text-wrapper"],[1,"cl-dropdown-item-padding","cl-cut-text"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-radio"],["type","radio",1,"cl-custom-control-input",3,"id","name","value","ngModel","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"id","name","ngModel","ngModelChange"],[3,"title","label","inputValue","editedValue","isOpen"]],template:function(e,t){1&e&&(n.Wc(0,m,1,5,"input",0),n.Wc(1,y,3,2,"div",1),n.Wc(2,O,3,2,"div",2),n.Wc(3,A,4,3,"div",3),n.Wc(4,_,1,3,"ng-template",null,4,n.Xc)),2&e&&(n.wc("ngIf","input"===t.customFieldType[t.customField.customField.type].fieldType),n.Cb(1),n.wc("ngIf","link"===t.customFieldType[t.customField.customField.type].fieldType),n.Cb(1),n.wc("ngIf","switch"===t.customFieldType[t.customField.customField.type].fieldType),n.Cb(1),n.wc("ngIf","dropdown"===t.customFieldType[t.customField.customField.type].fieldType))},directives:[u.u,d.c,d.s,d.v,d.a,h.a,p.a,b.a,d.A,u.t,f.a],encapsulation:2,changeDetection:0}),e})()},"Jmk/":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("lJxs"),s=i("vkgz"),r=i("XNiG"),o=i("UMzN"),a=i("Ymxs"),c=i("1Tmk"),l=i("tk/3"),u=i("LfE4"),d=i("nLyk"),h=i("rsZi"),p=i("lvCY"),b=i("PS6/"),f=i("fXoL");let m=(()=>{class e{constructor(e,t,i){this.http=e,this.workspaceService=t,this.toaster=i,this.error=new r.a,this.clients=new r.a,this.client=new r.a,this.createdClient=new r.a}getAllClients(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new l.f).append("archived",e!==u.a.ALL?(e===u.a.ARCHIVED).toString():"");this.http.get(`/workspaces/${i}/clients`,{params:n}).subscribe(e=>{this.clients.next(e)},e=>{this.error.next(e)})}getAllClientsV1(e,t,i){const s=t||this.workspaceService.getDefaultWorkspaceId(),r=(new l.f).append("archived",e!==u.a.ALL?(e===u.a.ARCHIVED).toString():"").append("page",i.page).append("page-size",i.pageSize).append("name",i.name||"");return this.http.get(`/v1/workspaces/${s}/clients`,{params:r}).pipe(Object(n.a)(e=>e.map(e=>new o.a(e))))}getClientById(e){const t=this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${t}/clients/${e}`).pipe(Object(n.a)(e=>new o.a(e))).subscribe(e=>{this.client.next(e)},e=>{this.error.next(e)})}create(e,t,i){const s=i||this.workspaceService.getDefaultWorkspaceId(),a=e.trim(),c=JSON.stringify({name:a}),l=new r.a;return this.http.post(`/workspaces/${s}/clients`,c).pipe(Object(n.a)(e=>new o.a(e))).subscribe(e=>{this.createdClient.next(e),l.next(e),this.toaster.pop("success",`${Object(b.a)(t)} ${a} has been created.`)},e=>{this.error.next(e),l.error(e),this.toaster.pop("error",e.error&&e.error.message||`${Object(b.a)(t)} with name ${a} already exists.`)}),l}update(e,t,i){var r;const a={name:e.name.trim(),address:null===(r=e.address)||void 0===r?void 0:r.trim(),archived:e.archived},c=(new l.f).append("archive-projects",(!!t).toString());return this.http.put(`/workspaces/${e.workspaceId}/clients/${e.id}`,a,{params:c}).pipe(Object(n.a)(e=>new o.a(e)),Object(s.a)(e=>{this.toaster.success(Object(b.a)(i)+" has been updated.")},e=>{var t;this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||`${Object(b.a)(i)} with name ${name} already exists.`),this.error.next(e)}))}delete(e,t){return this.http.delete(`/workspaces/${e.workspaceId}/clients/${e.id}`).pipe(Object(n.a)(e=>new o.a(e)),Object(s.a)(i=>{this.toaster.pop("success",`${Object(b.a)(t)} with name ${e.name} has been deleted`)},e=>{var i;this.toaster.pop("error",(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message)||Object(b.a)(t)+" not deleted"),this.error.next(e)}))}getClient(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/clients/${e}`).pipe(Object(n.a)(e=>new o.a(e)),Object(s.a)(e=>null,e=>{var t;this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Get client failed")}))}getClientList(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("name",e.name||"").append("status",e.status).append("page",e.page||1).append("page-size",e.limit||p.j);return this.http.get(`/workspaces/${t}/clients/report-filters`,{params:i}).pipe(Object(n.a)(e=>e.map(e=>new o.a(e))))}getClientIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("name",e.name||"").append("status",e.status);return this.http.get(`workspaces/${t}/clients/report-filters/ids`,{params:i}).pipe(Object(n.a)(e=>e),Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get client IDs failed")))}getClients(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),s=(new l.f).append("name",e.name||"").append("sort-column",e.sortColumn||d.a.NAME).append("sort-order",e.sortOrder||h.a.ASCENDING).append("page",e.page||1).append("page-size",e.limit||p.j).append("archived",e.archived!==u.a.ALL?(e.archived===u.a.ARCHIVED).toString():"");return this.http.get(`/v1/workspaces/${i}/clients`,{params:s}).pipe(Object(n.a)(e=>e.map(e=>new o.a(e))))}createClient(e,t,i){const n=i||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/v1/workspaces/${n}/clients`,{name:e}).pipe(Object(s.a)(i=>{this.toaster.pop("success",t+" created",t+` ${e} has been created.`)},i=>{this.toaster.pop("error",i.error&&i.error.message||t+` with name ${e} already exists.`),this.error.next(i)}))}}return e.\u0275fac=function(t){return new(t||e)(f.fc(l.b),f.fc(c.a),f.fc(a.a))},e.\u0275prov=f.Nb({token:e,factory:e.\u0275fac}),e})()},KnX9:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),s=i("ofXK"),r=i("rg2B");function o(e,t){if(1&e&&(n.Xb(0,"div",4),n.Yc(1),n.oc(2,"roundIfWholeNumber"),n.Wb()),2&e){const e=n.nc();n.Hb("cl-text-center",e.centerText),n.Cb(1),n.ad("",n.pc(2,3,e.percentage),"%")}}function a(e,t){if(1&e&&(n.Xb(0,"span",4),n.Yc(1),n.oc(2,"roundIfWholeNumber"),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.ad("",n.pc(2,1,e.percentage),"%")}}let c=(()=>{class e{set percentage(e){this._percentage=e,this.isOverHundred=this.percentage>100}get percentage(){return this._percentage}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["percentage-progress-bar"]],inputs:{percentage:"percentage",showPercentageOutsideOfProgress:"showPercentageOutsideOfProgress",centerText:"centerText"},decls:4,vars:8,consts:[["class","cl-px-1",3,"cl-text-center",4,"ngIf"],[1,"cl-progress"],["role","progressbar",1,"cl-progress-bar"],["class","cl-px-1",4,"ngIf"],[1,"cl-px-1"]],template:function(e,t){1&e&&(n.Wc(0,o,3,5,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Wc(3,a,3,3,"span",3),n.Wb(),n.Wb()),2&e&&(n.wc("ngIf",t.showPercentageOutsideOfProgress),n.Cb(2),n.Vc("width",t.percentage+"%"),n.Hb("cl-progress-bar-success",!t.isOverHundred)("cl-bg-danger",t.isOverHundred),n.Cb(1),n.wc("ngIf",!t.showPercentageOutsideOfProgress))},directives:[s.u],pipes:[r.a],encapsulation:2}),e})()},LM6y:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},LNDd:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("9Trn"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a]]}),e})()},LPYB:function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return g}));var n=i("fXoL"),s=i("MO+k"),r=i("2Vo4"),o=i("LvDl");const a=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]];function c(e,t){return"rgba("+e.concat(t).join(",")+")"}function l(e,t){return Math.floor(Math.random()*(t-e+1))+e}function u(e){return{backgroundColor:e.map(e=>c(e,.6)),borderColor:e.map(()=>"#fff"),pointBackgroundColor:e.map(e=>c(e,1)),pointBorderColor:e.map(()=>"#fff"),pointHoverBackgroundColor:e.map(e=>c(e,1)),pointHoverBorderColor:e.map(e=>c(e,1))}}function d(){return[l(0,255),l(0,255),l(0,255)]}function h(e){return a[e]||d()}function p(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=a[i]||d();return t}let b=(()=>{class e{constructor(){this.pColorschemesOptions={},this.colorschemesOptions=new r.a({})}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const f=function(){var e={Default:0,Update:1,Refresh:2};return e[e.Default]="Default",e[e.Update]="Update",e[e.Refresh]="Refresh",e}();let m=(()=>{class e{constructor(e,t){this.element=e,this.themeService=t,this.options={},this.chartClick=new n.n,this.chartHover=new n.n,this.old={dataExists:!1,dataLength:0,datasetsExists:!1,datasetsLength:0,datasetsDataObjects:[],datasetsDataLengths:[],colorsExists:!1,colors:[],labelsExist:!1,labels:[],legendExists:!1,legend:{}},this.subs=[]}static registerPlugin(e){s.Chart.plugins.register(e)}static unregisterPlugin(e){s.Chart.plugins.unregister(e)}ngOnInit(){this.ctx=this.element.nativeElement.getContext("2d"),this.refresh(),this.subs.push(this.themeService.colorschemesOptions.subscribe(e=>this.themeChanged(e)))}themeChanged(e){this.refresh()}ngDoCheck(){if(!this.chart)return;let e=f.Default;const t=t=>{e=t>e?t:e};switch(!!this.data!==this.old.dataExists&&(this.propagateDataToDatasets(this.data),this.old.dataExists=!!this.data,t(f.Update)),this.data&&this.data.length!==this.old.dataLength&&(this.old.dataLength=this.data&&this.data.length||0,t(f.Update)),!!this.datasets!==this.old.datasetsExists&&(this.old.datasetsExists=!!this.datasets,t(f.Update)),this.datasets&&this.datasets.length!==this.old.datasetsLength&&(this.old.datasetsLength=this.datasets&&this.datasets.length||0,t(f.Update)),this.datasets&&this.datasets.filter((e,t)=>e.data!==this.old.datasetsDataObjects[t]).length&&(this.old.datasetsDataObjects=this.datasets.map(e=>e.data),t(f.Update)),this.datasets&&this.datasets.filter((e,t)=>e.data.length!==this.old.datasetsDataLengths[t]).length&&(this.old.datasetsDataLengths=this.datasets.map(e=>e.data.length),t(f.Update)),!!this.colors!==this.old.colorsExists&&(this.old.colorsExists=!!this.colors,this.updateColors(),t(f.Update)),this.colors&&this.colors.filter((e,t)=>!this.colorsEqual(e,this.old.colors[t])).length&&(this.old.colors=this.colors.map(e=>this.copyColor(e)),this.updateColors(),t(f.Update)),!!this.labels!==this.old.labelsExist&&(this.old.labelsExist=!!this.labels,t(f.Update)),this.labels&&this.labels.filter((e,t)=>!this.labelsEqual(e,this.old.labels[t])).length&&(this.old.labels=this.labels.map(e=>this.copyLabel(e)),t(f.Update)),!!this.options.legend!==this.old.legendExists&&(this.old.legendExists=!!this.options.legend,t(f.Refresh)),this.options.legend&&this.options.legend.position!==this.old.legend.position&&(this.old.legend.position=this.options.legend.position,t(f.Refresh)),e){case f.Default:break;case f.Update:this.update();break;case f.Refresh:this.refresh()}}copyLabel(e){return Array.isArray(e)?[...e]:e}labelsEqual(e,t){return Array.isArray(e)===Array.isArray(t)&&(Array.isArray(e)||e===t)&&(!Array.isArray(e)||e.length===t.length)&&(!Array.isArray(e)||0===e.filter((e,i)=>e!==t[i]).length)}copyColor(e){return{backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderColor:e.borderColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,pointBorderColor:e.pointBorderColor,pointBackgroundColor:e.pointBackgroundColor,pointBorderWidth:e.pointBorderWidth,pointRadius:e.pointRadius,pointHoverRadius:e.pointHoverRadius,pointHitRadius:e.pointHitRadius,pointHoverBackgroundColor:e.pointHoverBackgroundColor,pointHoverBorderColor:e.pointHoverBorderColor,pointHoverBorderWidth:e.pointHoverBorderWidth,pointStyle:e.pointStyle,hoverBackgroundColor:e.hoverBackgroundColor,hoverBorderColor:e.hoverBorderColor,hoverBorderWidth:e.hoverBorderWidth}}colorsEqual(e,t){return!e==!t&&(!e||e.backgroundColor===t.backgroundColor&&e.borderWidth===t.borderWidth&&e.borderColor===t.borderColor&&e.borderCapStyle===t.borderCapStyle&&e.borderDash===t.borderDash&&e.borderDashOffset===t.borderDashOffset&&e.borderJoinStyle===t.borderJoinStyle&&e.pointBorderColor===t.pointBorderColor&&e.pointBackgroundColor===t.pointBackgroundColor&&e.pointBorderWidth===t.pointBorderWidth&&e.pointRadius===t.pointRadius&&e.pointHoverRadius===t.pointHoverRadius&&e.pointHitRadius===t.pointHitRadius&&e.pointHoverBackgroundColor===t.pointHoverBackgroundColor&&e.pointHoverBorderColor===t.pointHoverBorderColor&&e.pointHoverBorderWidth===t.pointHoverBorderWidth&&e.pointStyle===t.pointStyle&&e.hoverBackgroundColor===t.hoverBackgroundColor&&e.hoverBorderColor===t.hoverBorderColor&&e.hoverBorderWidth===t.hoverBorderWidth)}updateColors(){this.datasets.forEach((e,t)=>{this.colors&&this.colors[t]?Object.assign(e,this.colors[t]):Object.assign(e,function(e,t,i){if("pie"===e||"doughnut"===e)return u(p(i));if("polarArea"===e)return{backgroundColor:(n=p(i)).map(e=>c(e,.6)),borderColor:n.map(e=>c(e,1)),hoverBackgroundColor:n.map(e=>c(e,.8)),hoverBorderColor:n.map(e=>c(e,1))};var n;if("line"===e||"radar"===e)return function(e){return{backgroundColor:c(e,.4),borderColor:c(e,1),pointBackgroundColor:c(e,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:c(e,.8)}}(h(t));if("bar"===e||"horizontalBar"===e)return function(e){return{backgroundColor:c(e,.6),borderColor:c(e,1),hoverBackgroundColor:c(e,.8),hoverBorderColor:c(e,1)}}(h(t));if("bubble"===e)return u(p(i));if("scatter"===e)return u(p(i));throw new Error("getColors - Unsupported chart type "+e)}(this.chartType,t,e.data.length),Object.assign({},e))})}ngOnChanges(e){let t=f.Default;const i=e=>{t=e>t?e:t};switch(e.hasOwnProperty("data")&&e.data.currentValue&&(this.propagateDataToDatasets(e.data.currentValue),i(f.Update)),e.hasOwnProperty("datasets")&&e.datasets.currentValue&&(this.propagateDatasetsToData(e.datasets.currentValue),i(f.Update)),e.hasOwnProperty("labels")&&(this.chart&&(this.chart.data.labels=e.labels.currentValue),i(f.Update)),e.hasOwnProperty("legend")&&(this.chart&&(this.chart.config.options.legend.display=e.legend.currentValue,this.chart.generateLegend()),i(f.Update)),e.hasOwnProperty("options")&&i(f.Refresh),t){case f.Update:this.update();break;case f.Refresh:case f.Default:this.refresh()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}update(e,t){if(this.chart)return this.chart.update(e,t)}hideDataset(e,t){this.chart.getDatasetMeta(e).hidden=t,this.chart.update()}isDatasetHidden(e){return this.chart.getDatasetMeta(e).hidden}toBase64Image(){return this.chart.toBase64Image()}getChartConfiguration(){const e=this.getDatasets(),t=Object.assign({},this.options);!1===this.legend&&(t.legend={display:!1}),t.hover=t.hover||{},t.hover.onHover||(t.hover.onHover=(e,t)=>{t&&!t.length||this.chartHover.emit({event:e,active:t})}),t.onClick||(t.onClick=(e,t)=>{this.chartClick.emit({event:e,active:t})});const i=this.smartMerge(t,this.themeService.getColorschemesOptions());return{type:this.chartType,data:{labels:this.labels||[],datasets:e},plugins:this.plugins,options:i}}getChartBuilder(e){const t=this.getChartConfiguration();return new s.Chart(e,t)}smartMerge(e,t,i=0){if(0===i&&(e=Object(o.cloneDeep)(e)),Object.keys(t).forEach(n=>{if(Array.isArray(t[n])){const s=e[n];s&&s.forEach(e=>{this.smartMerge(e,t[n][0],i+1)})}else"object"==typeof t[n]?(n in e||(e[n]={}),this.smartMerge(e[n],t[n],i+1)):e[n]=t[n]}),0===i)return e}isMultiLineLabel(e){return Array.isArray(e)}joinLabel(e){return e?this.isMultiLineLabel(e)?e.join(" "):e:null}propagateDatasetsToData(e){this.data=this.datasets.map(e=>e.data),this.chart&&(this.chart.data.datasets=e),this.updateColors()}propagateDataToDatasets(e){this.isMultiDataSet(e)?this.datasets&&e.length===this.datasets.length?this.datasets.forEach((t,i)=>{t.data=e[i]}):(this.datasets=e.map((e,t)=>({data:e,label:this.joinLabel(this.labels[t])||"Label "+t})),this.chart&&(this.chart.data.datasets=this.datasets)):this.datasets?(this.datasets[0].data=e,this.datasets.splice(1)):(this.datasets=[{data:e}],this.chart&&(this.chart.data.datasets=this.datasets)),this.updateColors()}isMultiDataSet(e){return Array.isArray(e[0])}getDatasets(){if(!this.datasets&&!this.data)throw new Error("ng-charts configuration error, data or datasets field are required to render chart "+this.chartType);return this.datasets?(this.propagateDatasetsToData(this.datasets),this.datasets):this.data?(this.propagateDataToDatasets(this.data),this.datasets):void 0}refresh(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.ctx&&(this.chart=this.getChartBuilder(this.ctx))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(b))},e.\u0275dir=n.Mb({type:e,selectors:[["canvas","baseChart",""]],inputs:{options:"options",data:"data",datasets:"datasets",labels:"labels",chartType:"chartType",colors:"colors",legend:"legend",plugins:"plugins"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[n.Ab]}),e})(),g=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[]]}),e})()},Lcbf:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._id=e&&e.id,this._projectId=e&&e.projectId}get id(){return this._id}set id(e){this._id=e}get projectId(){return this._projectId}set projectId(e){this._projectId=e}}},LvDl:function(e,t,i){(function(e){var n;(function(){var s="Expected a function",r="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",c="[object Array]",l="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",b="[object Map]",f="[object Number]",m="[object Object]",g="[object RegExp]",v="[object Set]",w="[object String]",y="[object Symbol]",C="[object WeakMap]",k="[object ArrayBuffer]",S="[object DataView]",x="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",I="[object Int16Array]",j="[object Int32Array]",T="[object Uint8Array]",E="[object Uint16Array]",A="[object Uint32Array]",_=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,P=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,F=RegExp(P.source),X=RegExp(M.source),L=/<%-([\s\S]+?)%>/g,N=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/[\\^$.*+?()[\]{}|]/g,$=RegExp(H.source),G=/^\s+|\s+$/g,z=/^\s+/,q=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Z=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ie=/\w*$/,ne=/^[-+]0x[0-9a-f]+$/i,se=/^0b[01]+$/i,re=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,ue=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",he="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="["+he+"]",be="["+de+"]",fe="\\d+",me="[a-z\\xdf-\\xf6\\xf8-\\xff]",ge="[^\\ud800-\\udfff"+he+fe+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ve="\\ud83c[\\udffb-\\udfff]",we="[^\\ud800-\\udfff]",ye="(?:\\ud83c[\\udde6-\\uddff]){2}",Ce="[\\ud800-\\udbff][\\udc00-\\udfff]",ke="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Se="(?:"+me+"|"+ge+")",xe="(?:"+ke+"|"+ge+")",Oe="(?:"+be+"|"+ve+")?",De="[\\ufe0e\\ufe0f]?"+Oe+"(?:\\u200d(?:"+[we,ye,Ce].join("|")+")[\\ufe0e\\ufe0f]?"+Oe+")*",Ie="(?:"+["[\\u2700-\\u27bf]",ye,Ce].join("|")+")"+De,je="(?:"+[we+be+"?",be,ye,Ce,"[\\ud800-\\udfff]"].join("|")+")",Te=RegExp("['\u2019]","g"),Ee=RegExp(be,"g"),Ae=RegExp(ve+"(?="+ve+")|"+je+De,"g"),_e=RegExp([ke+"?"+me+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[pe,ke,"$"].join("|")+")",xe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[pe,ke+Se,"$"].join("|")+")",ke+"?"+Se+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ke+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fe,Ie].join("|"),"g"),We=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,Fe={};Fe[x]=Fe[O]=Fe[D]=Fe[I]=Fe[j]=Fe[T]=Fe["[object Uint8ClampedArray]"]=Fe[E]=Fe[A]=!0,Fe[a]=Fe[c]=Fe[k]=Fe[l]=Fe[S]=Fe[u]=Fe[d]=Fe[h]=Fe[b]=Fe[f]=Fe[m]=Fe[g]=Fe[v]=Fe[w]=Fe[C]=!1;var Xe={};Xe[a]=Xe[c]=Xe[k]=Xe[S]=Xe[l]=Xe[u]=Xe[x]=Xe[O]=Xe[D]=Xe[I]=Xe[j]=Xe[b]=Xe[f]=Xe[m]=Xe[g]=Xe[v]=Xe[w]=Xe[y]=Xe[T]=Xe["[object Uint8ClampedArray]"]=Xe[E]=Xe[A]=!0,Xe[d]=Xe[h]=Xe[C]=!1;var Le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ne=parseFloat,Be=parseInt,Ye="object"==typeof global&&global&&global.Object===Object&&global,Ve="object"==typeof self&&self&&self.Object===Object&&self,Ue=Ye||Ve||Function("return this")(),He=t&&!t.nodeType&&t,$e=He&&"object"==typeof e&&e&&!e.nodeType&&e,Ge=$e&&$e.exports===He,ze=Ge&&Ye.process,qe=function(){try{return $e&&$e.require&&$e.require("util").types||ze&&ze.binding&&ze.binding("util")}catch(e){}}(),Ke=qe&&qe.isArrayBuffer,Ze=qe&&qe.isDate,Je=qe&&qe.isMap,Qe=qe&&qe.isRegExp,et=qe&&qe.isSet,tt=qe&&qe.isTypedArray;function it(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function nt(e,t,i,n){for(var s=-1,r=null==e?0:e.length;++s<r;){var o=e[s];t(n,o,i(o),e)}return n}function st(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function rt(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function ot(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function at(e,t){for(var i=-1,n=null==e?0:e.length,s=0,r=[];++i<n;){var o=e[i];t(o,i,e)&&(r[s++]=o)}return r}function ct(e,t){return!(null==e||!e.length)&&vt(e,t,0)>-1}function lt(e,t,i){for(var n=-1,s=null==e?0:e.length;++n<s;)if(i(t,e[n]))return!0;return!1}function ut(e,t){for(var i=-1,n=null==e?0:e.length,s=Array(n);++i<n;)s[i]=t(e[i],i,e);return s}function dt(e,t){for(var i=-1,n=t.length,s=e.length;++i<n;)e[s+i]=t[i];return e}function ht(e,t,i,n){var s=-1,r=null==e?0:e.length;for(n&&r&&(i=e[++s]);++s<r;)i=t(i,e[s],s,e);return i}function pt(e,t,i,n){var s=null==e?0:e.length;for(n&&s&&(i=e[--s]);s--;)i=t(i,e[s],s,e);return i}function bt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var ft=kt("length");function mt(e,t,i){var n;return i(e,(function(e,i,s){if(t(e,i,s))return n=i,!1})),n}function gt(e,t,i,n){for(var s=e.length,r=i+(n?1:-1);n?r--:++r<s;)if(t(e[r],r,e))return r;return-1}function vt(e,t,i){return t==t?function(e,t,i){for(var n=i-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}(e,t,i):gt(e,yt,i)}function wt(e,t,i,n){for(var s=i-1,r=e.length;++s<r;)if(n(e[s],t))return s;return-1}function yt(e){return e!=e}function Ct(e,t){var i=null==e?0:e.length;return i?Ot(e,t)/i:NaN}function kt(e){return function(t){return null==t?void 0:t[e]}}function St(e){return function(t){return null==e?void 0:e[t]}}function xt(e,t,i,n,s){return s(e,(function(e,s,r){i=n?(n=!1,e):t(i,e,s,r)})),i}function Ot(e,t){for(var i,n=-1,s=e.length;++n<s;){var r=t(e[n]);void 0!==r&&(i=void 0===i?r:i+r)}return i}function Dt(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function It(e){return function(t){return e(t)}}function jt(e,t){return ut(t,(function(t){return e[t]}))}function Tt(e,t){return e.has(t)}function Et(e,t){for(var i=-1,n=e.length;++i<n&&vt(t,e[i],0)>-1;);return i}function At(e,t){for(var i=e.length;i--&&vt(t,e[i],0)>-1;);return i}function _t(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}var Wt=St({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Rt=St({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Pt(e){return"\\"+Le[e]}function Mt(e){return We.test(e)}function Ft(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function Xt(e,t){return function(i){return e(t(i))}}function Lt(e,t){for(var i=-1,n=e.length,s=0,o=[];++i<n;){var a=e[i];a!==t&&a!==r||(e[i]=r,o[s++]=i)}return o}function Nt(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function Bt(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}function Yt(e){return Mt(e)?function(e){for(var t=Ae.lastIndex=0;Ae.test(e);)++t;return t}(e):ft(e)}function Vt(e){return Mt(e)?function(e){return e.match(Ae)||[]}(e):function(e){return e.split("")}(e)}var Ut=St({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ht=function e(t){var i,n=(t=null==t?Ue:Ht.defaults(Ue.Object(),t,Ht.pick(Ue,Pe))).Array,de=t.Date,he=t.Error,pe=t.Function,be=t.Math,fe=t.Object,me=t.RegExp,ge=t.String,ve=t.TypeError,we=n.prototype,ye=fe.prototype,Ce=t["__core-js_shared__"],ke=pe.prototype.toString,Se=ye.hasOwnProperty,xe=0,Oe=(i=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",De=ye.toString,Ie=ke.call(fe),je=Ue._,Ae=me("^"+ke.call(Se).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Ge?t.Buffer:void 0,Le=t.Symbol,Ye=t.Uint8Array,Ve=We?We.allocUnsafe:void 0,He=Xt(fe.getPrototypeOf,fe),$e=fe.create,ze=ye.propertyIsEnumerable,qe=we.splice,ft=Le?Le.isConcatSpreadable:void 0,St=Le?Le.iterator:void 0,$t=Le?Le.toStringTag:void 0,Gt=function(){try{var e=Zs(fe,"defineProperty");return e({},"",{}),e}catch(t){}}(),zt=t.clearTimeout!==Ue.clearTimeout&&t.clearTimeout,qt=de&&de.now!==Ue.Date.now&&de.now,Kt=t.setTimeout!==Ue.setTimeout&&t.setTimeout,Zt=be.ceil,Jt=be.floor,Qt=fe.getOwnPropertySymbols,ei=We?We.isBuffer:void 0,ti=t.isFinite,ii=we.join,ni=Xt(fe.keys,fe),si=be.max,ri=be.min,oi=de.now,ai=t.parseInt,ci=be.random,li=we.reverse,ui=Zs(t,"DataView"),di=Zs(t,"Map"),hi=Zs(t,"Promise"),pi=Zs(t,"Set"),bi=Zs(t,"WeakMap"),fi=Zs(fe,"create"),mi=bi&&new bi,gi={},vi=Dr(ui),wi=Dr(di),yi=Dr(hi),Ci=Dr(pi),ki=Dr(bi),Si=Le?Le.prototype:void 0,xi=Si?Si.valueOf:void 0,Oi=Si?Si.toString:void 0;function Di(e){if(Uo(e)&&!Wo(e)&&!(e instanceof Ei)){if(e instanceof Ti)return e;if(Se.call(e,"__wrapped__"))return Ir(e)}return new Ti(e)}var Ii=function(){function e(){}return function(t){if(!Vo(t))return{};if($e)return $e(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function ji(){}function Ti(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ei(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ai(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function _i(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Wi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ri(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Wi;++t<i;)this.add(e[t])}function Pi(e){var t=this.__data__=new _i(e);this.size=t.size}function Mi(e,t){var i=Wo(e),n=!i&&_o(e),s=!i&&!n&&Fo(e),r=!i&&!n&&!s&&Jo(e),o=i||n||s||r,a=o?Dt(e.length,ge):[],c=a.length;for(var l in e)!t&&!Se.call(e,l)||o&&("length"==l||s&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||sr(l,c))||a.push(l);return a}function Fi(e){var t=e.length;return t?e[Rn(0,t-1)]:void 0}function Xi(e,t){return Cr(fs(e),Gi(t,0,e.length))}function Li(e){return Cr(fs(e))}function Ni(e,t,i){(void 0!==i&&!To(e[t],i)||void 0===i&&!(t in e))&&Hi(e,t,i)}function Bi(e,t,i){var n=e[t];Se.call(e,t)&&To(n,i)&&(void 0!==i||t in e)||Hi(e,t,i)}function Yi(e,t){for(var i=e.length;i--;)if(To(e[i][0],t))return i;return-1}function Vi(e,t,i,n){return Ji(e,(function(e,s,r){t(n,e,i(e),r)})),n}function Ui(e,t){return e&&ms(t,ya(t),e)}function Hi(e,t,i){"__proto__"==t&&Gt?Gt(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function $i(e,t){for(var i=-1,s=t.length,r=n(s),o=null==e;++i<s;)r[i]=o?void 0:fa(e,t[i]);return r}function Gi(e,t,i){return e==e&&(void 0!==i&&(e=e<=i?e:i),void 0!==t&&(e=e>=t?e:t)),e}function zi(e,t,i,n,s,r){var o,c=1&t,d=2&t,C=4&t;if(i&&(o=s?i(e,n,s,r):i(e)),void 0!==o)return o;if(!Vo(e))return e;var _=Wo(e);if(_){if(o=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&Se.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!c)return fs(e,o)}else{var W=er(e),R=W==h||W==p;if(Fo(e))return ls(e,c);if(W==m||W==a||R&&!s){if(o=d||R?{}:ir(e),!c)return d?function(e,t){return ms(e,Qs(e),t)}(e,function(e,t){return e&&ms(t,Ca(t),e)}(o,e)):function(e,t){return ms(e,Js(e),t)}(e,Ui(o,e))}else{if(!Xe[W])return s?e:{};o=function(e,t,i){var n=e.constructor;switch(t){case k:return us(e);case l:case u:return new n(+e);case S:return function(e,t){var i=t?us(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case x:case O:case D:case I:case j:case T:case"[object Uint8ClampedArray]":case E:case A:return ds(e,i);case b:return new n;case f:case w:return new n(e);case g:return function(e){var t=new e.constructor(e.source,ie.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return new n;case y:return xi?fe(xi.call(e)):{}}}(e,W,c)}}r||(r=new Pi);var P=r.get(e);if(P)return P;r.set(e,o),qo(e)?e.forEach((function(n){o.add(zi(n,t,i,n,e,r))})):Ho(e)&&e.forEach((function(n,s){o.set(s,zi(n,t,i,s,e,r))}));var M=_?void 0:(C?d?Us:Vs:d?Ca:ya)(e);return st(M||e,(function(n,s){M&&(n=e[s=n]),Bi(o,s,zi(n,t,i,s,e,r))})),o}function qi(e,t,i){var n=i.length;if(null==e)return!n;for(e=fe(e);n--;){var s=i[n],r=e[s];if(void 0===r&&!(s in e)||!(0,t[s])(r))return!1}return!0}function Ki(e,t,i){if("function"!=typeof e)throw new ve(s);return gr((function(){e.apply(void 0,i)}),t)}function Zi(e,t,i,n){var s=-1,r=ct,o=!0,a=e.length,c=[],l=t.length;if(!a)return c;i&&(t=ut(t,It(i))),n?(r=lt,o=!1):t.length>=200&&(r=Tt,o=!1,t=new Ri(t));e:for(;++s<a;){var u=e[s],d=null==i?u:i(u);if(u=n||0!==u?u:0,o&&d==d){for(var h=l;h--;)if(t[h]===d)continue e;c.push(u)}else r(t,d,n)||c.push(u)}return c}Di.templateSettings={escape:L,evaluate:N,interpolate:B,variable:"",imports:{_:Di}},(Di.prototype=ji.prototype).constructor=Di,(Ti.prototype=Ii(ji.prototype)).constructor=Ti,(Ei.prototype=Ii(ji.prototype)).constructor=Ei,Ai.prototype.clear=function(){this.__data__=fi?fi(null):{},this.size=0},Ai.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ai.prototype.get=function(e){var t=this.__data__;if(fi){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return Se.call(t,e)?t[e]:void 0},Ai.prototype.has=function(e){var t=this.__data__;return fi?void 0!==t[e]:Se.call(t,e)},Ai.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=fi&&void 0===t?"__lodash_hash_undefined__":t,this},_i.prototype.clear=function(){this.__data__=[],this.size=0},_i.prototype.delete=function(e){var t=this.__data__,i=Yi(t,e);return!(i<0||(i==t.length-1?t.pop():qe.call(t,i,1),--this.size,0))},_i.prototype.get=function(e){var t=this.__data__,i=Yi(t,e);return i<0?void 0:t[i][1]},_i.prototype.has=function(e){return Yi(this.__data__,e)>-1},_i.prototype.set=function(e,t){var i=this.__data__,n=Yi(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Wi.prototype.clear=function(){this.size=0,this.__data__={hash:new Ai,map:new(di||_i),string:new Ai}},Wi.prototype.delete=function(e){var t=qs(this,e).delete(e);return this.size-=t?1:0,t},Wi.prototype.get=function(e){return qs(this,e).get(e)},Wi.prototype.has=function(e){return qs(this,e).has(e)},Wi.prototype.set=function(e,t){var i=qs(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},Ri.prototype.add=Ri.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ri.prototype.has=function(e){return this.__data__.has(e)},Pi.prototype.clear=function(){this.__data__=new _i,this.size=0},Pi.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Pi.prototype.get=function(e){return this.__data__.get(e)},Pi.prototype.has=function(e){return this.__data__.has(e)},Pi.prototype.set=function(e,t){var i=this.__data__;if(i instanceof _i){var n=i.__data__;if(!di||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Wi(n)}return i.set(e,t),this.size=i.size,this};var Ji=ws(an),Qi=ws(cn,!0);function en(e,t){var i=!0;return Ji(e,(function(e,n,s){return i=!!t(e,n,s)})),i}function tn(e,t,i){for(var n=-1,s=e.length;++n<s;){var r=e[n],o=t(r);if(null!=o&&(void 0===a?o==o&&!Zo(o):i(o,a)))var a=o,c=r}return c}function nn(e,t){var i=[];return Ji(e,(function(e,n,s){t(e,n,s)&&i.push(e)})),i}function sn(e,t,i,n,s){var r=-1,o=e.length;for(i||(i=nr),s||(s=[]);++r<o;){var a=e[r];t>0&&i(a)?t>1?sn(a,t-1,i,n,s):dt(s,a):n||(s[s.length]=a)}return s}var rn=ys(),on=ys(!0);function an(e,t){return e&&rn(e,t,ya)}function cn(e,t){return e&&on(e,t,ya)}function ln(e,t){return at(t,(function(t){return No(e[t])}))}function un(e,t){for(var i=0,n=(t=rs(t,e)).length;null!=e&&i<n;)e=e[Or(t[i++])];return i&&i==n?e:void 0}function dn(e,t,i){var n=t(e);return Wo(e)?n:dt(n,i(e))}function hn(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$t&&$t in fe(e)?function(e){var t=Se.call(e,$t),i=e[$t];try{e[$t]=void 0;var n=!0}catch(r){}var s=De.call(e);return n&&(t?e[$t]=i:delete e[$t]),s}(e):function(e){return De.call(e)}(e)}function pn(e,t){return e>t}function bn(e,t){return null!=e&&Se.call(e,t)}function fn(e,t){return null!=e&&t in fe(e)}function mn(e,t,i){for(var s=i?lt:ct,r=e[0].length,o=e.length,a=o,c=n(o),l=1/0,u=[];a--;){var d=e[a];a&&t&&(d=ut(d,It(t))),l=ri(d.length,l),c[a]=!i&&(t||r>=120&&d.length>=120)?new Ri(a&&d):void 0}d=e[0];var h=-1,p=c[0];e:for(;++h<r&&u.length<l;){var b=d[h],f=t?t(b):b;if(b=i||0!==b?b:0,!(p?Tt(p,f):s(u,f,i))){for(a=o;--a;){var m=c[a];if(!(m?Tt(m,f):s(e[a],f,i)))continue e}p&&p.push(f),u.push(b)}}return u}function gn(e,t,i){var n=null==(e=pr(e,t=rs(t,e)))?e:e[Or(Xr(t))];return null==n?void 0:it(n,e,i)}function vn(e){return Uo(e)&&hn(e)==a}function wn(e,t,i,n,s){return e===t||(null==e||null==t||!Uo(e)&&!Uo(t)?e!=e&&t!=t:function(e,t,i,n,s,r){var o=Wo(e),h=Wo(t),p=o?c:er(e),C=h?c:er(t),x=(p=p==a?m:p)==m,O=(C=C==a?m:C)==m,D=p==C;if(D&&Fo(e)){if(!Fo(t))return!1;o=!0,x=!1}if(D&&!x)return r||(r=new Pi),o||Jo(e)?Bs(e,t,i,n,s,r):function(e,t,i,n,s,r,o){switch(i){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!r(new Ye(e),new Ye(t)));case l:case u:case f:return To(+e,+t);case d:return e.name==t.name&&e.message==t.message;case g:case w:return e==t+"";case b:var a=Ft;case v:if(a||(a=Nt),e.size!=t.size&&!(1&n))return!1;var c=o.get(e);if(c)return c==t;n|=2,o.set(e,t);var h=Bs(a(e),a(t),n,s,r,o);return o.delete(e),h;case y:if(xi)return xi.call(e)==xi.call(t)}return!1}(e,t,p,i,n,s,r);if(!(1&i)){var I=x&&Se.call(e,"__wrapped__"),j=O&&Se.call(t,"__wrapped__");if(I||j){var T=I?e.value():e,E=j?t.value():t;return r||(r=new Pi),s(T,E,i,n,r)}}return!!D&&(r||(r=new Pi),function(e,t,i,n,s,r){var o=1&i,a=Vs(e),c=a.length;if(c!=Vs(t).length&&!o)return!1;for(var l=c;l--;){var u=a[l];if(!(o?u in t:Se.call(t,u)))return!1}var d=r.get(e),h=r.get(t);if(d&&h)return d==t&&h==e;var p=!0;r.set(e,t),r.set(t,e);for(var b=o;++l<c;){var f=e[u=a[l]],m=t[u];if(n)var g=o?n(m,f,u,t,e,r):n(f,m,u,e,t,r);if(!(void 0===g?f===m||s(f,m,i,n,r):g)){p=!1;break}b||(b="constructor"==u)}if(p&&!b){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(p=!1)}return r.delete(e),r.delete(t),p}(e,t,i,n,s,r))}(e,t,i,n,wn,s))}function yn(e,t,i,n){var s=i.length,r=s,o=!n;if(null==e)return!r;for(e=fe(e);s--;){var a=i[s];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++s<r;){var c=(a=i[s])[0],l=e[c],u=a[1];if(o&&a[2]){if(void 0===l&&!(c in e))return!1}else{var d=new Pi;if(n)var h=n(l,u,c,e,t,d);if(!(void 0===h?wn(u,l,3,n,d):h))return!1}}return!0}function Cn(e){return!(!Vo(e)||(t=e,Oe&&Oe in t))&&(No(e)?Ae:re).test(Dr(e));var t}function kn(e){return"function"==typeof e?e:null==e?$a:"object"==typeof e?Wo(e)?In(e[0],e[1]):Dn(e):tc(e)}function Sn(e){if(!lr(e))return ni(e);var t=[];for(var i in fe(e))Se.call(e,i)&&"constructor"!=i&&t.push(i);return t}function xn(e,t){return e<t}function On(e,t){var i=-1,s=Po(e)?n(e.length):[];return Ji(e,(function(e,n,r){s[++i]=t(e,n,r)})),s}function Dn(e){var t=Ks(e);return 1==t.length&&t[0][2]?dr(t[0][0],t[0][1]):function(i){return i===e||yn(i,e,t)}}function In(e,t){return or(e)&&ur(t)?dr(Or(e),t):function(i){var n=fa(i,e);return void 0===n&&n===t?ma(i,e):wn(t,n,3)}}function jn(e,t,i,n,s){e!==t&&rn(t,(function(r,o){if(s||(s=new Pi),Vo(r))!function(e,t,i,n,s,r,o){var a=fr(e,i),c=fr(t,i),l=o.get(c);if(l)Ni(e,i,l);else{var u=r?r(a,c,i+"",e,t,o):void 0,d=void 0===u;if(d){var h=Wo(c),p=!h&&Fo(c),b=!h&&!p&&Jo(c);u=c,h||p||b?Wo(a)?u=a:Mo(a)?u=fs(a):p?(d=!1,u=ls(c,!0)):b?(d=!1,u=ds(c,!0)):u=[]:Go(c)||_o(c)?(u=a,_o(a)?u=oa(a):Vo(a)&&!No(a)||(u=ir(c))):d=!1}d&&(o.set(c,u),s(u,c,n,r,o),o.delete(c)),Ni(e,i,u)}}(e,t,o,i,jn,n,s);else{var a=n?n(fr(e,o),r,o+"",e,t,s):void 0;void 0===a&&(a=r),Ni(e,o,a)}}),Ca)}function Tn(e,t){var i=e.length;if(i)return sr(t+=t<0?i:0,i)?e[t]:void 0}function En(e,t,i){t=t.length?ut(t,(function(e){return Wo(e)?function(t){return un(t,1===e.length?e[0]:e)}:e})):[$a];var n=-1;return t=ut(t,It(zs())),function(e,t){var n=e.length;for(e.sort((function(e,t){return function(e,t,i){for(var n=-1,s=e.criteria,r=t.criteria,o=s.length,a=i.length;++n<o;){var c=hs(s[n],r[n]);if(c)return n>=a?c:c*("desc"==i[n]?-1:1)}return e.index-t.index}(e,t,i)}));n--;)e[n]=e[n].value;return e}(On(e,(function(e,i,s){return{criteria:ut(t,(function(t){return t(e)})),index:++n,value:e}})))}function An(e,t,i){for(var n=-1,s=t.length,r={};++n<s;){var o=t[n],a=un(e,o);i(a,o)&&Ln(r,rs(o,e),a)}return r}function _n(e,t,i,n){var s=n?wt:vt,r=-1,o=t.length,a=e;for(e===t&&(t=fs(t)),i&&(a=ut(e,It(i)));++r<o;)for(var c=0,l=t[r],u=i?i(l):l;(c=s(a,u,c,n))>-1;)a!==e&&qe.call(a,c,1),qe.call(e,c,1);return e}function Wn(e,t){for(var i=e?t.length:0,n=i-1;i--;){var s=t[i];if(i==n||s!==r){var r=s;sr(s)?qe.call(e,s,1):Zn(e,s)}}return e}function Rn(e,t){return e+Jt(ci()*(t-e+1))}function Pn(e,t){var i="";if(!e||t<1||t>9007199254740991)return i;do{t%2&&(i+=e),(t=Jt(t/2))&&(e+=e)}while(t);return i}function Mn(e,t){return vr(hr(e,t,$a),e+"")}function Fn(e){return Fi(Ta(e))}function Xn(e,t){var i=Ta(e);return Cr(i,Gi(t,0,i.length))}function Ln(e,t,i,n){if(!Vo(e))return e;for(var s=-1,r=(t=rs(t,e)).length,o=r-1,a=e;null!=a&&++s<r;){var c=Or(t[s]),l=i;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(s!=o){var u=a[c];void 0===(l=n?n(u,c,a):void 0)&&(l=Vo(u)?u:sr(t[s+1])?[]:{})}Bi(a,c,l),a=a[c]}return e}var Nn=mi?function(e,t){return mi.set(e,t),e}:$a,Bn=Gt?function(e,t){return Gt(e,"toString",{configurable:!0,enumerable:!1,value:Va(t),writable:!0})}:$a;function Yn(e){return Cr(Ta(e))}function Vn(e,t,i){var s=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var o=n(r);++s<r;)o[s]=e[s+t];return o}function Un(e,t){var i;return Ji(e,(function(e,n,s){return!(i=t(e,n,s))})),!!i}function Hn(e,t,i){var n=0,s=null==e?n:e.length;if("number"==typeof t&&t==t&&s<=2147483647){for(;n<s;){var r=n+s>>>1,o=e[r];null!==o&&!Zo(o)&&(i?o<=t:o<t)?n=r+1:s=r}return s}return $n(e,t,$a,i)}function $n(e,t,i,n){var s=0,r=null==e?0:e.length;if(0===r)return 0;for(var o=(t=i(t))!=t,a=null===t,c=Zo(t),l=void 0===t;s<r;){var u=Jt((s+r)/2),d=i(e[u]),h=void 0!==d,p=null===d,b=d==d,f=Zo(d);if(o)var m=n||b;else m=l?b&&(n||h):a?b&&h&&(n||!p):c?b&&h&&!p&&(n||!f):!p&&!f&&(n?d<=t:d<t);m?s=u+1:r=u}return ri(r,4294967294)}function Gn(e,t){for(var i=-1,n=e.length,s=0,r=[];++i<n;){var o=e[i],a=t?t(o):o;if(!i||!To(a,c)){var c=a;r[s++]=0===o?0:o}}return r}function zn(e){return"number"==typeof e?e:Zo(e)?NaN:+e}function qn(e){if("string"==typeof e)return e;if(Wo(e))return ut(e,qn)+"";if(Zo(e))return Oi?Oi.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Kn(e,t,i){var n=-1,s=ct,r=e.length,o=!0,a=[],c=a;if(i)o=!1,s=lt;else if(r>=200){var l=t?null:Ps(e);if(l)return Nt(l);o=!1,s=Tt,c=new Ri}else c=t?[]:a;e:for(;++n<r;){var u=e[n],d=t?t(u):u;if(u=i||0!==u?u:0,o&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),a.push(u)}else s(c,d,i)||(c!==a&&c.push(d),a.push(u))}return a}function Zn(e,t){return null==(e=pr(e,t=rs(t,e)))||delete e[Or(Xr(t))]}function Jn(e,t,i,n){return Ln(e,t,i(un(e,t)),n)}function Qn(e,t,i,n){for(var s=e.length,r=n?s:-1;(n?r--:++r<s)&&t(e[r],r,e););return i?Vn(e,n?0:r,n?r+1:s):Vn(e,n?r+1:0,n?s:r)}function es(e,t){var i=e;return i instanceof Ei&&(i=i.value()),ht(t,(function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))}),i)}function ts(e,t,i){var s=e.length;if(s<2)return s?Kn(e[0]):[];for(var r=-1,o=n(s);++r<s;)for(var a=e[r],c=-1;++c<s;)c!=r&&(o[r]=Zi(o[r]||a,e[c],t,i));return Kn(sn(o,1),t,i)}function is(e,t,i){for(var n=-1,s=e.length,r=t.length,o={};++n<s;)i(o,e[n],n<r?t[n]:void 0);return o}function ns(e){return Mo(e)?e:[]}function ss(e){return"function"==typeof e?e:$a}function rs(e,t){return Wo(e)?e:or(e,t)?[e]:xr(aa(e))}var os=Mn;function as(e,t,i){var n=e.length;return i=void 0===i?n:i,!t&&i>=n?e:Vn(e,t,i)}var cs=zt||function(e){return Ue.clearTimeout(e)};function ls(e,t){if(t)return e.slice();var i=e.length,n=Ve?Ve(i):new e.constructor(i);return e.copy(n),n}function us(e){var t=new e.constructor(e.byteLength);return new Ye(t).set(new Ye(e)),t}function ds(e,t){var i=t?us(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function hs(e,t){if(e!==t){var i=void 0!==e,n=null===e,s=e==e,r=Zo(e),o=void 0!==t,a=null===t,c=t==t,l=Zo(t);if(!a&&!l&&!r&&e>t||r&&o&&c&&!a&&!l||n&&o&&c||!i&&c||!s)return 1;if(!n&&!r&&!l&&e<t||l&&i&&s&&!n&&!r||a&&i&&s||!o&&s||!c)return-1}return 0}function ps(e,t,i,s){for(var r=-1,o=e.length,a=i.length,c=-1,l=t.length,u=si(o-a,0),d=n(l+u),h=!s;++c<l;)d[c]=t[c];for(;++r<a;)(h||r<o)&&(d[i[r]]=e[r]);for(;u--;)d[c++]=e[r++];return d}function bs(e,t,i,s){for(var r=-1,o=e.length,a=-1,c=i.length,l=-1,u=t.length,d=si(o-c,0),h=n(d+u),p=!s;++r<d;)h[r]=e[r];for(var b=r;++l<u;)h[b+l]=t[l];for(;++a<c;)(p||r<o)&&(h[b+i[a]]=e[r++]);return h}function fs(e,t){var i=-1,s=e.length;for(t||(t=n(s));++i<s;)t[i]=e[i];return t}function ms(e,t,i,n){var s=!i;i||(i={});for(var r=-1,o=t.length;++r<o;){var a=t[r],c=n?n(i[a],e[a],a,i,e):void 0;void 0===c&&(c=e[a]),s?Hi(i,a,c):Bi(i,a,c)}return i}function gs(e,t){return function(i,n){var s=Wo(i)?nt:Vi,r=t?t():{};return s(i,e,zs(n,2),r)}}function vs(e){return Mn((function(t,i){var n=-1,s=i.length,r=s>1?i[s-1]:void 0,o=s>2?i[2]:void 0;for(r=e.length>3&&"function"==typeof r?(s--,r):void 0,o&&rr(i[0],i[1],o)&&(r=s<3?void 0:r,s=1),t=fe(t);++n<s;){var a=i[n];a&&e(t,a,n,r)}return t}))}function ws(e,t){return function(i,n){if(null==i)return i;if(!Po(i))return e(i,n);for(var s=i.length,r=t?s:-1,o=fe(i);(t?r--:++r<s)&&!1!==n(o[r],r,o););return i}}function ys(e){return function(t,i,n){for(var s=-1,r=fe(t),o=n(t),a=o.length;a--;){var c=o[e?a:++s];if(!1===i(r[c],c,r))break}return t}}function Cs(e){return function(t){var i=Mt(t=aa(t))?Vt(t):void 0,n=i?i[0]:t.charAt(0),s=i?as(i,1).join(""):t.slice(1);return n[e]()+s}}function ks(e){return function(t){return ht(Na(_a(t).replace(Te,"")),e,"")}}function Ss(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Ii(e.prototype),n=e.apply(i,t);return Vo(n)?n:i}}function xs(e){return function(t,i,n){var s=fe(t);if(!Po(t)){var r=zs(i,3);t=ya(t),i=function(e){return r(s[e],e,s)}}var o=e(t,i,n);return o>-1?s[r?t[o]:o]:void 0}}function Os(e){return Ys((function(t){var i=t.length,n=i,r=Ti.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new ve(s);if(r&&!a&&"wrapper"==$s(o))var a=new Ti([],!0)}for(n=a?n:i;++n<i;){var c=$s(o=t[n]),l="wrapper"==c?Hs(o):void 0;a=l&&ar(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[$s(l[0])].apply(a,l[3]):1==o.length&&ar(o)?a[c]():a.thru(o)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&Wo(n))return a.plant(n).value();for(var s=0,r=i?t[s].apply(this,e):n;++s<i;)r=t[s].call(this,r);return r}}))}function Ds(e,t,i,s,r,o,a,c,l,u){var d=128&t,h=1&t,p=2&t,b=24&t,f=512&t,m=p?void 0:Ss(e);return function g(){for(var v=arguments.length,w=n(v),y=v;y--;)w[y]=arguments[y];if(b)var C=Gs(g),k=_t(w,C);if(s&&(w=ps(w,s,r,b)),o&&(w=bs(w,o,a,b)),v-=k,b&&v<u){var S=Lt(w,C);return Ws(e,t,Ds,g.placeholder,i,w,S,c,l,u-v)}var x=h?i:this,O=p?x[e]:e;return v=w.length,c?w=br(w,c):f&&v>1&&w.reverse(),d&&l<v&&(w.length=l),this&&this!==Ue&&this instanceof g&&(O=m||Ss(O)),O.apply(x,w)}}function Is(e,t){return function(i,n){return function(e,t,i,n){return an(e,(function(e,s,r){t(n,i(e),s,r)})),n}(i,e,t(n),{})}}function js(e,t){return function(i,n){var s;if(void 0===i&&void 0===n)return t;if(void 0!==i&&(s=i),void 0!==n){if(void 0===s)return n;"string"==typeof i||"string"==typeof n?(i=qn(i),n=qn(n)):(i=zn(i),n=zn(n)),s=e(i,n)}return s}}function Ts(e){return Ys((function(t){return t=ut(t,It(zs())),Mn((function(i){var n=this;return e(t,(function(e){return it(e,n,i)}))}))}))}function Es(e,t){var i=(t=void 0===t?" ":qn(t)).length;if(i<2)return i?Pn(t,e):t;var n=Pn(t,Zt(e/Yt(t)));return Mt(t)?as(Vt(n),0,e).join(""):n.slice(0,e)}function As(e){return function(t,i,s){return s&&"number"!=typeof s&&rr(t,i,s)&&(i=s=void 0),t=ia(t),void 0===i?(i=t,t=0):i=ia(i),function(e,t,i,s){for(var r=-1,o=si(Zt((t-e)/(i||1)),0),a=n(o);o--;)a[s?o:++r]=e,e+=i;return a}(t,i,s=void 0===s?t<i?1:-1:ia(s),e)}}function _s(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=ra(t),i=ra(i)),e(t,i)}}function Ws(e,t,i,n,s,r,o,a,c,l){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var d=[e,t,s,u?r:void 0,u?o:void 0,u?void 0:r,u?void 0:o,a,c,l],h=i.apply(void 0,d);return ar(e)&&mr(h,d),h.placeholder=n,wr(h,e,t)}function Rs(e){var t=be[e];return function(e,i){if(e=ra(e),(i=null==i?0:ri(na(i),292))&&ti(e)){var n=(aa(e)+"e").split("e");return+((n=(aa(t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return t(e)}}var Ps=pi&&1/Nt(new pi([,-0]))[1]==1/0?function(e){return new pi(e)}:Za;function Ms(e){return function(t){var i=er(t);return i==b?Ft(t):i==v?Bt(t):function(e,t){return ut(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Fs(e,t,i,o,a,c,l,u){var d=2&t;if(!d&&"function"!=typeof e)throw new ve(s);var h=o?o.length:0;if(h||(t&=-97,o=a=void 0),l=void 0===l?l:si(na(l),0),u=void 0===u?u:na(u),h-=a?a.length:0,64&t){var p=o,b=a;o=a=void 0}var f=d?void 0:Hs(e),m=[e,t,i,o,a,p,b,c,l,u];if(f&&function(e,t){var i=e[1],n=t[1],s=i|n;if(!(s<131||128==n&&8==i||128==n&&256==i&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i))return e;1&n&&(e[2]=t[2],s|=1&i?0:4);var o=t[3];if(o){var a=e[3];e[3]=a?ps(a,o,t[4]):o,e[4]=a?Lt(e[3],r):t[4]}(o=t[5])&&(e[5]=(a=e[5])?bs(a,o,t[6]):o,e[6]=a?Lt(e[5],r):t[6]),(o=t[7])&&(e[7]=o),128&n&&(e[8]=null==e[8]?t[8]:ri(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=s}(m,f),e=m[0],t=m[1],i=m[2],o=m[3],a=m[4],!(u=m[9]=void 0===m[9]?d?0:e.length:si(m[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,i){var s=Ss(e);return function r(){for(var o=arguments.length,a=n(o),c=o,l=Gs(r);c--;)a[c]=arguments[c];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Lt(a,l);if((o-=u.length)<i)return Ws(e,t,Ds,r.placeholder,void 0,a,u,void 0,void 0,i-o);var d=this&&this!==Ue&&this instanceof r?s:e;return it(d,this,a)}}(e,t,u):32!=t&&33!=t||a.length?Ds.apply(void 0,m):function(e,t,i,s){var r=1&t,o=Ss(e);return function t(){for(var a=-1,c=arguments.length,l=-1,u=s.length,d=n(u+c),h=this&&this!==Ue&&this instanceof t?o:e;++l<u;)d[l]=s[l];for(;c--;)d[l++]=arguments[++a];return it(h,r?i:this,d)}}(e,t,i,o);else var g=function(e,t,i){var n=1&t,s=Ss(e);return function t(){var r=this&&this!==Ue&&this instanceof t?s:e;return r.apply(n?i:this,arguments)}}(e,t,i);return wr((f?Nn:mr)(g,m),e,t)}function Xs(e,t,i,n){return void 0===e||To(e,ye[i])&&!Se.call(n,i)?t:e}function Ls(e,t,i,n,s,r){return Vo(e)&&Vo(t)&&(r.set(t,e),jn(e,t,void 0,Ls,r),r.delete(t)),e}function Ns(e){return Go(e)?void 0:e}function Bs(e,t,i,n,s,r){var o=1&i,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var l=r.get(e),u=r.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,p=2&i?new Ri:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var b=e[d],f=t[d];if(n)var m=o?n(f,b,d,t,e,r):n(b,f,d,e,t,r);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!bt(t,(function(e,t){if(!Tt(p,t)&&(b===e||s(b,e,i,n,r)))return p.push(t)}))){h=!1;break}}else if(b!==f&&!s(b,f,i,n,r)){h=!1;break}}return r.delete(e),r.delete(t),h}function Ys(e){return vr(hr(e,void 0,Wr),e+"")}function Vs(e){return dn(e,ya,Js)}function Us(e){return dn(e,Ca,Qs)}var Hs=mi?function(e){return mi.get(e)}:Za;function $s(e){for(var t=e.name+"",i=gi[t],n=Se.call(gi,t)?i.length:0;n--;){var s=i[n],r=s.func;if(null==r||r==e)return s.name}return t}function Gs(e){return(Se.call(Di,"placeholder")?Di:e).placeholder}function zs(){var e=Di.iteratee||Ga;return e=e===Ga?kn:e,arguments.length?e(arguments[0],arguments[1]):e}function qs(e,t){var i,n,s=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof t?"string":"hash"]:s.map}function Ks(e){for(var t=ya(e),i=t.length;i--;){var n=t[i],s=e[n];t[i]=[n,s,ur(s)]}return t}function Zs(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return Cn(i)?i:void 0}var Js=Qt?function(e){return null==e?[]:(e=fe(e),at(Qt(e),(function(t){return ze.call(e,t)})))}:sc,Qs=Qt?function(e){for(var t=[];e;)dt(t,Js(e)),e=He(e);return t}:sc,er=hn;function tr(e,t,i){for(var n=-1,s=(t=rs(t,e)).length,r=!1;++n<s;){var o=Or(t[n]);if(!(r=null!=e&&i(e,o)))break;e=e[o]}return r||++n!=s?r:!!(s=null==e?0:e.length)&&Yo(s)&&sr(o,s)&&(Wo(e)||_o(e))}function ir(e){return"function"!=typeof e.constructor||lr(e)?{}:Ii(He(e))}function nr(e){return Wo(e)||_o(e)||!!(ft&&e&&e[ft])}function sr(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&ae.test(e))&&e>-1&&e%1==0&&e<t}function rr(e,t,i){if(!Vo(i))return!1;var n=typeof t;return!!("number"==n?Po(i)&&sr(t,i.length):"string"==n&&t in i)&&To(i[t],e)}function or(e,t){if(Wo(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Zo(e))||V.test(e)||!Y.test(e)||null!=t&&e in fe(t)}function ar(e){var t=$s(e),i=Di[t];if("function"!=typeof i||!(t in Ei.prototype))return!1;if(e===i)return!0;var n=Hs(i);return!!n&&e===n[0]}(ui&&er(new ui(new ArrayBuffer(1)))!=S||di&&er(new di)!=b||hi&&"[object Promise]"!=er(hi.resolve())||pi&&er(new pi)!=v||bi&&er(new bi)!=C)&&(er=function(e){var t=hn(e),i=t==m?e.constructor:void 0,n=i?Dr(i):"";if(n)switch(n){case vi:return S;case wi:return b;case yi:return"[object Promise]";case Ci:return v;case ki:return C}return t});var cr=Ce?No:rc;function lr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ye)}function ur(e){return e==e&&!Vo(e)}function dr(e,t){return function(i){return null!=i&&i[e]===t&&(void 0!==t||e in fe(i))}}function hr(e,t,i){return t=si(void 0===t?e.length-1:t,0),function(){for(var s=arguments,r=-1,o=si(s.length-t,0),a=n(o);++r<o;)a[r]=s[t+r];r=-1;for(var c=n(t+1);++r<t;)c[r]=s[r];return c[t]=i(a),it(e,this,c)}}function pr(e,t){return t.length<2?e:un(e,Vn(t,0,-1))}function br(e,t){for(var i=e.length,n=ri(t.length,i),s=fs(e);n--;){var r=t[n];e[n]=sr(r,i)?s[r]:void 0}return e}function fr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var mr=yr(Nn),gr=Kt||function(e,t){return Ue.setTimeout(e,t)},vr=yr(Bn);function wr(e,t,i){var n=t+"";return vr(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return st(o,(function(i){var n="_."+i[0];t&i[1]&&!ct(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(Z);return t?t[1].split(J):[]}(n),i)))}function yr(e){var t=0,i=0;return function(){var n=oi(),s=16-(n-i);if(i=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Cr(e,t){var i=-1,n=e.length,s=n-1;for(t=void 0===t?n:t;++i<t;){var r=Rn(i,s),o=e[r];e[r]=e[i],e[i]=o}return e.length=t,e}var kr,Sr,xr=(kr=So((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(U,(function(e,i,n,s){t.push(n?s.replace(ee,"$1"):i||e)})),t}),(function(e){return 500===Sr.size&&Sr.clear(),e})),Sr=kr.cache,kr);function Or(e){if("string"==typeof e||Zo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Dr(e){if(null!=e){try{return ke.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ir(e){if(e instanceof Ei)return e.clone();var t=new Ti(e.__wrapped__,e.__chain__);return t.__actions__=fs(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var jr=Mn((function(e,t){return Mo(e)?Zi(e,sn(t,1,Mo,!0)):[]})),Tr=Mn((function(e,t){var i=Xr(t);return Mo(i)&&(i=void 0),Mo(e)?Zi(e,sn(t,1,Mo,!0),zs(i,2)):[]})),Er=Mn((function(e,t){var i=Xr(t);return Mo(i)&&(i=void 0),Mo(e)?Zi(e,sn(t,1,Mo,!0),void 0,i):[]}));function Ar(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var s=null==i?0:na(i);return s<0&&(s=si(n+s,0)),gt(e,zs(t,3),s)}function _r(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var s=n-1;return void 0!==i&&(s=na(i),s=i<0?si(n+s,0):ri(s,n-1)),gt(e,zs(t,3),s,!0)}function Wr(e){return null!=e&&e.length?sn(e,1):[]}function Rr(e){return e&&e.length?e[0]:void 0}var Pr=Mn((function(e){var t=ut(e,ns);return t.length&&t[0]===e[0]?mn(t):[]})),Mr=Mn((function(e){var t=Xr(e),i=ut(e,ns);return t===Xr(i)?t=void 0:i.pop(),i.length&&i[0]===e[0]?mn(i,zs(t,2)):[]})),Fr=Mn((function(e){var t=Xr(e),i=ut(e,ns);return(t="function"==typeof t?t:void 0)&&i.pop(),i.length&&i[0]===e[0]?mn(i,void 0,t):[]}));function Xr(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Lr=Mn(Nr);function Nr(e,t){return e&&e.length&&t&&t.length?_n(e,t):e}var Br=Ys((function(e,t){var i=null==e?0:e.length,n=$i(e,t);return Wn(e,ut(t,(function(e){return sr(e,i)?+e:e})).sort(hs)),n}));function Yr(e){return null==e?e:li.call(e)}var Vr=Mn((function(e){return Kn(sn(e,1,Mo,!0))})),Ur=Mn((function(e){var t=Xr(e);return Mo(t)&&(t=void 0),Kn(sn(e,1,Mo,!0),zs(t,2))})),Hr=Mn((function(e){var t=Xr(e);return t="function"==typeof t?t:void 0,Kn(sn(e,1,Mo,!0),void 0,t)}));function $r(e){if(!e||!e.length)return[];var t=0;return e=at(e,(function(e){if(Mo(e))return t=si(e.length,t),!0})),Dt(t,(function(t){return ut(e,kt(t))}))}function Gr(e,t){if(!e||!e.length)return[];var i=$r(e);return null==t?i:ut(i,(function(e){return it(t,void 0,e)}))}var zr=Mn((function(e,t){return Mo(e)?Zi(e,t):[]})),qr=Mn((function(e){return ts(at(e,Mo))})),Kr=Mn((function(e){var t=Xr(e);return Mo(t)&&(t=void 0),ts(at(e,Mo),zs(t,2))})),Zr=Mn((function(e){var t=Xr(e);return t="function"==typeof t?t:void 0,ts(at(e,Mo),void 0,t)})),Jr=Mn($r),Qr=Mn((function(e){var t=e.length,i=t>1?e[t-1]:void 0;return i="function"==typeof i?(e.pop(),i):void 0,Gr(e,i)}));function eo(e){var t=Di(e);return t.__chain__=!0,t}function to(e,t){return t(e)}var io=Ys((function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,s=function(t){return $i(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Ei&&sr(i)?((n=n.slice(i,+i+(t?1:0))).__actions__.push({func:to,args:[s],thisArg:void 0}),new Ti(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(s)})),no=gs((function(e,t,i){Se.call(e,i)?++e[i]:Hi(e,i,1)})),so=xs(Ar),ro=xs(_r);function oo(e,t){return(Wo(e)?st:Ji)(e,zs(t,3))}function ao(e,t){return(Wo(e)?rt:Qi)(e,zs(t,3))}var co=gs((function(e,t,i){Se.call(e,i)?e[i].push(t):Hi(e,i,[t])})),lo=Mn((function(e,t,i){var s=-1,r="function"==typeof t,o=Po(e)?n(e.length):[];return Ji(e,(function(e){o[++s]=r?it(t,e,i):gn(e,t,i)})),o})),uo=gs((function(e,t,i){Hi(e,i,t)}));function ho(e,t){return(Wo(e)?ut:On)(e,zs(t,3))}var po=gs((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]})),bo=Mn((function(e,t){if(null==e)return[];var i=t.length;return i>1&&rr(e,t[0],t[1])?t=[]:i>2&&rr(t[0],t[1],t[2])&&(t=[t[0]]),En(e,sn(t,1),[])})),fo=qt||function(){return Ue.Date.now()};function mo(e,t,i){return t=i?void 0:t,Fs(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function go(e,t){var i;if("function"!=typeof t)throw new ve(s);return e=na(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=void 0),i}}var vo=Mn((function(e,t,i){var n=1;if(i.length){var s=Lt(i,Gs(vo));n|=32}return Fs(e,n,t,i,s)})),wo=Mn((function(e,t,i){var n=3;if(i.length){var s=Lt(i,Gs(wo));n|=32}return Fs(t,n,e,i,s)}));function yo(e,t,i){var n,r,o,a,c,l,u=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new ve(s);function b(t){var i=n,s=r;return n=r=void 0,u=t,a=e.apply(s,i)}function f(e){return u=e,c=gr(g,t),d?b(e):a}function m(e){var i=e-l;return void 0===l||i>=t||i<0||h&&e-u>=o}function g(){var e=fo();if(m(e))return v(e);c=gr(g,function(e){var i=t-(e-l);return h?ri(i,o-(e-u)):i}(e))}function v(e){return c=void 0,p&&n?b(e):(n=r=void 0,a)}function w(){var e=fo(),i=m(e);if(n=arguments,r=this,l=e,i){if(void 0===c)return f(l);if(h)return cs(c),c=gr(g,t),b(l)}return void 0===c&&(c=gr(g,t)),a}return t=ra(t)||0,Vo(i)&&(d=!!i.leading,o=(h="maxWait"in i)?si(ra(i.maxWait)||0,t):o,p="trailing"in i?!!i.trailing:p),w.cancel=function(){void 0!==c&&cs(c),u=0,n=l=r=c=void 0},w.flush=function(){return void 0===c?a:v(fo())},w}var Co=Mn((function(e,t){return Ki(e,1,t)})),ko=Mn((function(e,t,i){return Ki(e,ra(t)||0,i)}));function So(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ve(s);var i=function(){var n=arguments,s=t?t.apply(this,n):n[0],r=i.cache;if(r.has(s))return r.get(s);var o=e.apply(this,n);return i.cache=r.set(s,o)||r,o};return i.cache=new(So.Cache||Wi),i}function xo(e){if("function"!=typeof e)throw new ve(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}So.Cache=Wi;var Oo=os((function(e,t){var i=(t=1==t.length&&Wo(t[0])?ut(t[0],It(zs())):ut(sn(t,1),It(zs()))).length;return Mn((function(n){for(var s=-1,r=ri(n.length,i);++s<r;)n[s]=t[s].call(this,n[s]);return it(e,this,n)}))})),Do=Mn((function(e,t){return Fs(e,32,void 0,t,Lt(t,Gs(Do)))})),Io=Mn((function(e,t){return Fs(e,64,void 0,t,Lt(t,Gs(Io)))})),jo=Ys((function(e,t){return Fs(e,256,void 0,void 0,void 0,t)}));function To(e,t){return e===t||e!=e&&t!=t}var Eo=_s(pn),Ao=_s((function(e,t){return e>=t})),_o=vn(function(){return arguments}())?vn:function(e){return Uo(e)&&Se.call(e,"callee")&&!ze.call(e,"callee")},Wo=n.isArray,Ro=Ke?It(Ke):function(e){return Uo(e)&&hn(e)==k};function Po(e){return null!=e&&Yo(e.length)&&!No(e)}function Mo(e){return Uo(e)&&Po(e)}var Fo=ei||rc,Xo=Ze?It(Ze):function(e){return Uo(e)&&hn(e)==u};function Lo(e){if(!Uo(e))return!1;var t=hn(e);return t==d||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Go(e)}function No(e){if(!Vo(e))return!1;var t=hn(e);return t==h||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Bo(e){return"number"==typeof e&&e==na(e)}function Yo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Vo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Uo(e){return null!=e&&"object"==typeof e}var Ho=Je?It(Je):function(e){return Uo(e)&&er(e)==b};function $o(e){return"number"==typeof e||Uo(e)&&hn(e)==f}function Go(e){if(!Uo(e)||hn(e)!=m)return!1;var t=He(e);if(null===t)return!0;var i=Se.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&ke.call(i)==Ie}var zo=Qe?It(Qe):function(e){return Uo(e)&&hn(e)==g},qo=et?It(et):function(e){return Uo(e)&&er(e)==v};function Ko(e){return"string"==typeof e||!Wo(e)&&Uo(e)&&hn(e)==w}function Zo(e){return"symbol"==typeof e||Uo(e)&&hn(e)==y}var Jo=tt?It(tt):function(e){return Uo(e)&&Yo(e.length)&&!!Fe[hn(e)]},Qo=_s(xn),ea=_s((function(e,t){return e<=t}));function ta(e){if(!e)return[];if(Po(e))return Ko(e)?Vt(e):fs(e);if(St&&e[St])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[St]());var t=er(e);return(t==b?Ft:t==v?Nt:Ta)(e)}function ia(e){return e?(e=ra(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function na(e){var t=ia(e),i=t%1;return t==t?i?t-i:t:0}function sa(e){return e?Gi(na(e),0,4294967295):0}function ra(e){if("number"==typeof e)return e;if(Zo(e))return NaN;if(Vo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Vo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(G,"");var i=se.test(e);return i||oe.test(e)?Be(e.slice(2),i?2:8):ne.test(e)?NaN:+e}function oa(e){return ms(e,Ca(e))}function aa(e){return null==e?"":qn(e)}var ca=vs((function(e,t){if(lr(t)||Po(t))ms(t,ya(t),e);else for(var i in t)Se.call(t,i)&&Bi(e,i,t[i])})),la=vs((function(e,t){ms(t,Ca(t),e)})),ua=vs((function(e,t,i,n){ms(t,Ca(t),e,n)})),da=vs((function(e,t,i,n){ms(t,ya(t),e,n)})),ha=Ys($i),pa=Mn((function(e,t){e=fe(e);var i=-1,n=t.length,s=n>2?t[2]:void 0;for(s&&rr(t[0],t[1],s)&&(n=1);++i<n;)for(var r=t[i],o=Ca(r),a=-1,c=o.length;++a<c;){var l=o[a],u=e[l];(void 0===u||To(u,ye[l])&&!Se.call(e,l))&&(e[l]=r[l])}return e})),ba=Mn((function(e){return e.push(void 0,Ls),it(Sa,void 0,e)}));function fa(e,t,i){var n=null==e?void 0:un(e,t);return void 0===n?i:n}function ma(e,t){return null!=e&&tr(e,t,fn)}var ga=Is((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=i}),Va($a)),va=Is((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),Se.call(e,t)?e[t].push(i):e[t]=[i]}),zs),wa=Mn(gn);function ya(e){return Po(e)?Mi(e):Sn(e)}function Ca(e){return Po(e)?Mi(e,!0):function(e){if(!Vo(e))return function(e){var t=[];if(null!=e)for(var i in fe(e))t.push(i);return t}(e);var t=lr(e),i=[];for(var n in e)("constructor"!=n||!t&&Se.call(e,n))&&i.push(n);return i}(e)}var ka=vs((function(e,t,i){jn(e,t,i)})),Sa=vs((function(e,t,i,n){jn(e,t,i,n)})),xa=Ys((function(e,t){var i={};if(null==e)return i;var n=!1;t=ut(t,(function(t){return t=rs(t,e),n||(n=t.length>1),t})),ms(e,Us(e),i),n&&(i=zi(i,7,Ns));for(var s=t.length;s--;)Zn(i,t[s]);return i})),Oa=Ys((function(e,t){return null==e?{}:function(e,t){return An(e,t,(function(t,i){return ma(e,i)}))}(e,t)}));function Da(e,t){if(null==e)return{};var i=ut(Us(e),(function(e){return[e]}));return t=zs(t),An(e,i,(function(e,i){return t(e,i[0])}))}var Ia=Ms(ya),ja=Ms(Ca);function Ta(e){return null==e?[]:jt(e,ya(e))}var Ea=ks((function(e,t,i){return t=t.toLowerCase(),e+(i?Aa(t):t)}));function Aa(e){return La(aa(e).toLowerCase())}function _a(e){return(e=aa(e))&&e.replace(ce,Wt).replace(Ee,"")}var Wa=ks((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),Ra=ks((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),Pa=Cs("toLowerCase"),Ma=ks((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()})),Fa=ks((function(e,t,i){return e+(i?" ":"")+La(t)})),Xa=ks((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),La=Cs("toUpperCase");function Na(e,t,i){return e=aa(e),void 0===(t=i?void 0:t)?function(e){return Re.test(e)}(e)?function(e){return e.match(_e)||[]}(e):function(e){return e.match(Q)||[]}(e):e.match(t)||[]}var Ba=Mn((function(e,t){try{return it(e,void 0,t)}catch(i){return Lo(i)?i:new he(i)}})),Ya=Ys((function(e,t){return st(t,(function(t){t=Or(t),Hi(e,t,vo(e[t],e))})),e}));function Va(e){return function(){return e}}var Ua=Os(),Ha=Os(!0);function $a(e){return e}function Ga(e){return kn("function"==typeof e?e:zi(e,1))}var za=Mn((function(e,t){return function(i){return gn(i,e,t)}})),qa=Mn((function(e,t){return function(i){return gn(e,i,t)}}));function Ka(e,t,i){var n=ya(t),s=ln(t,n);null!=i||Vo(t)&&(s.length||!n.length)||(i=t,t=e,e=this,s=ln(t,ya(t)));var r=!(Vo(i)&&"chain"in i&&!i.chain),o=No(e);return st(s,(function(i){var n=t[i];e[i]=n,o&&(e.prototype[i]=function(){var t=this.__chain__;if(r||t){var i=e(this.__wrapped__),s=i.__actions__=fs(this.__actions__);return s.push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,dt([this.value()],arguments))})})),e}function Za(){}var Ja=Ts(ut),Qa=Ts(ot),ec=Ts(bt);function tc(e){return or(e)?kt(Or(e)):function(e){return function(t){return un(t,e)}}(e)}var ic=As(),nc=As(!0);function sc(){return[]}function rc(){return!1}var oc,ac=js((function(e,t){return e+t}),0),cc=Rs("ceil"),lc=js((function(e,t){return e/t}),1),uc=Rs("floor"),dc=js((function(e,t){return e*t}),1),hc=Rs("round"),pc=js((function(e,t){return e-t}),0);return Di.after=function(e,t){if("function"!=typeof t)throw new ve(s);return e=na(e),function(){if(--e<1)return t.apply(this,arguments)}},Di.ary=mo,Di.assign=ca,Di.assignIn=la,Di.assignInWith=ua,Di.assignWith=da,Di.at=ha,Di.before=go,Di.bind=vo,Di.bindAll=Ya,Di.bindKey=wo,Di.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wo(e)?e:[e]},Di.chain=eo,Di.chunk=function(e,t,i){t=(i?rr(e,t,i):void 0===t)?1:si(na(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var r=0,o=0,a=n(Zt(s/t));r<s;)a[o++]=Vn(e,r,r+=t);return a},Di.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,s=[];++t<i;){var r=e[t];r&&(s[n++]=r)}return s},Di.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],s=e;s--;)t[s-1]=arguments[s];return dt(Wo(i)?fs(i):[i],sn(t,1))},Di.cond=function(e){var t=null==e?0:e.length,i=zs();return e=t?ut(e,(function(e){if("function"!=typeof e[1])throw new ve(s);return[i(e[0]),e[1]]})):[],Mn((function(i){for(var n=-1;++n<t;){var s=e[n];if(it(s[0],this,i))return it(s[1],this,i)}}))},Di.conforms=function(e){return function(e){var t=ya(e);return function(i){return qi(i,e,t)}}(zi(e,1))},Di.constant=Va,Di.countBy=no,Di.create=function(e,t){var i=Ii(e);return null==t?i:Ui(i,t)},Di.curry=function e(t,i,n){var s=Fs(t,8,void 0,void 0,void 0,void 0,void 0,i=n?void 0:i);return s.placeholder=e.placeholder,s},Di.curryRight=function e(t,i,n){var s=Fs(t,16,void 0,void 0,void 0,void 0,void 0,i=n?void 0:i);return s.placeholder=e.placeholder,s},Di.debounce=yo,Di.defaults=pa,Di.defaultsDeep=ba,Di.defer=Co,Di.delay=ko,Di.difference=jr,Di.differenceBy=Tr,Di.differenceWith=Er,Di.drop=function(e,t,i){var n=null==e?0:e.length;return n?Vn(e,(t=i||void 0===t?1:na(t))<0?0:t,n):[]},Di.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?Vn(e,0,(t=n-(t=i||void 0===t?1:na(t)))<0?0:t):[]},Di.dropRightWhile=function(e,t){return e&&e.length?Qn(e,zs(t,3),!0,!0):[]},Di.dropWhile=function(e,t){return e&&e.length?Qn(e,zs(t,3),!0):[]},Di.fill=function(e,t,i,n){var s=null==e?0:e.length;return s?(i&&"number"!=typeof i&&rr(e,t,i)&&(i=0,n=s),function(e,t,i,n){var s=e.length;for((i=na(i))<0&&(i=-i>s?0:s+i),(n=void 0===n||n>s?s:na(n))<0&&(n+=s),n=i>n?0:sa(n);i<n;)e[i++]=t;return e}(e,t,i,n)):[]},Di.filter=function(e,t){return(Wo(e)?at:nn)(e,zs(t,3))},Di.flatMap=function(e,t){return sn(ho(e,t),1)},Di.flatMapDeep=function(e,t){return sn(ho(e,t),1/0)},Di.flatMapDepth=function(e,t,i){return i=void 0===i?1:na(i),sn(ho(e,t),i)},Di.flatten=Wr,Di.flattenDeep=function(e){return null!=e&&e.length?sn(e,1/0):[]},Di.flattenDepth=function(e,t){return null!=e&&e.length?sn(e,t=void 0===t?1:na(t)):[]},Di.flip=function(e){return Fs(e,512)},Di.flow=Ua,Di.flowRight=Ha,Di.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var s=e[t];n[s[0]]=s[1]}return n},Di.functions=function(e){return null==e?[]:ln(e,ya(e))},Di.functionsIn=function(e){return null==e?[]:ln(e,Ca(e))},Di.groupBy=co,Di.initial=function(e){return null!=e&&e.length?Vn(e,0,-1):[]},Di.intersection=Pr,Di.intersectionBy=Mr,Di.intersectionWith=Fr,Di.invert=ga,Di.invertBy=va,Di.invokeMap=lo,Di.iteratee=Ga,Di.keyBy=uo,Di.keys=ya,Di.keysIn=Ca,Di.map=ho,Di.mapKeys=function(e,t){var i={};return t=zs(t,3),an(e,(function(e,n,s){Hi(i,t(e,n,s),e)})),i},Di.mapValues=function(e,t){var i={};return t=zs(t,3),an(e,(function(e,n,s){Hi(i,n,t(e,n,s))})),i},Di.matches=function(e){return Dn(zi(e,1))},Di.matchesProperty=function(e,t){return In(e,zi(t,1))},Di.memoize=So,Di.merge=ka,Di.mergeWith=Sa,Di.method=za,Di.methodOf=qa,Di.mixin=Ka,Di.negate=xo,Di.nthArg=function(e){return e=na(e),Mn((function(t){return Tn(t,e)}))},Di.omit=xa,Di.omitBy=function(e,t){return Da(e,xo(zs(t)))},Di.once=function(e){return go(2,e)},Di.orderBy=function(e,t,i,n){return null==e?[]:(Wo(t)||(t=null==t?[]:[t]),Wo(i=n?void 0:i)||(i=null==i?[]:[i]),En(e,t,i))},Di.over=Ja,Di.overArgs=Oo,Di.overEvery=Qa,Di.overSome=ec,Di.partial=Do,Di.partialRight=Io,Di.partition=po,Di.pick=Oa,Di.pickBy=Da,Di.property=tc,Di.propertyOf=function(e){return function(t){return null==e?void 0:un(e,t)}},Di.pull=Lr,Di.pullAll=Nr,Di.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?_n(e,t,zs(i,2)):e},Di.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?_n(e,t,void 0,i):e},Di.pullAt=Br,Di.range=ic,Di.rangeRight=nc,Di.rearg=jo,Di.reject=function(e,t){return(Wo(e)?at:nn)(e,xo(zs(t,3)))},Di.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,s=[],r=e.length;for(t=zs(t,3);++n<r;){var o=e[n];t(o,n,e)&&(i.push(o),s.push(n))}return Wn(e,s),i},Di.rest=function(e,t){if("function"!=typeof e)throw new ve(s);return Mn(e,t=void 0===t?t:na(t))},Di.reverse=Yr,Di.sampleSize=function(e,t,i){return t=(i?rr(e,t,i):void 0===t)?1:na(t),(Wo(e)?Xi:Xn)(e,t)},Di.set=function(e,t,i){return null==e?e:Ln(e,t,i)},Di.setWith=function(e,t,i,n){return n="function"==typeof n?n:void 0,null==e?e:Ln(e,t,i,n)},Di.shuffle=function(e){return(Wo(e)?Li:Yn)(e)},Di.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&rr(e,t,i)?(t=0,i=n):(t=null==t?0:na(t),i=void 0===i?n:na(i)),Vn(e,t,i)):[]},Di.sortBy=bo,Di.sortedUniq=function(e){return e&&e.length?Gn(e):[]},Di.sortedUniqBy=function(e,t){return e&&e.length?Gn(e,zs(t,2)):[]},Di.split=function(e,t,i){return i&&"number"!=typeof i&&rr(e,t,i)&&(t=i=void 0),(i=void 0===i?4294967295:i>>>0)?(e=aa(e))&&("string"==typeof t||null!=t&&!zo(t))&&!(t=qn(t))&&Mt(e)?as(Vt(e),0,i):e.split(t,i):[]},Di.spread=function(e,t){if("function"!=typeof e)throw new ve(s);return t=null==t?0:si(na(t),0),Mn((function(i){var n=i[t],s=as(i,0,t);return n&&dt(s,n),it(e,this,s)}))},Di.tail=function(e){var t=null==e?0:e.length;return t?Vn(e,1,t):[]},Di.take=function(e,t,i){return e&&e.length?Vn(e,0,(t=i||void 0===t?1:na(t))<0?0:t):[]},Di.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?Vn(e,(t=n-(t=i||void 0===t?1:na(t)))<0?0:t,n):[]},Di.takeRightWhile=function(e,t){return e&&e.length?Qn(e,zs(t,3),!1,!0):[]},Di.takeWhile=function(e,t){return e&&e.length?Qn(e,zs(t,3)):[]},Di.tap=function(e,t){return t(e),e},Di.throttle=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new ve(s);return Vo(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),yo(e,t,{leading:n,maxWait:t,trailing:r})},Di.thru=to,Di.toArray=ta,Di.toPairs=Ia,Di.toPairsIn=ja,Di.toPath=function(e){return Wo(e)?ut(e,Or):Zo(e)?[e]:fs(xr(aa(e)))},Di.toPlainObject=oa,Di.transform=function(e,t,i){var n=Wo(e),s=n||Fo(e)||Jo(e);if(t=zs(t,4),null==i){var r=e&&e.constructor;i=s?n?new r:[]:Vo(e)&&No(r)?Ii(He(e)):{}}return(s?st:an)(e,(function(e,n,s){return t(i,e,n,s)})),i},Di.unary=function(e){return mo(e,1)},Di.union=Vr,Di.unionBy=Ur,Di.unionWith=Hr,Di.uniq=function(e){return e&&e.length?Kn(e):[]},Di.uniqBy=function(e,t){return e&&e.length?Kn(e,zs(t,2)):[]},Di.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Kn(e,void 0,t):[]},Di.unset=function(e,t){return null==e||Zn(e,t)},Di.unzip=$r,Di.unzipWith=Gr,Di.update=function(e,t,i){return null==e?e:Jn(e,t,ss(i))},Di.updateWith=function(e,t,i,n){return n="function"==typeof n?n:void 0,null==e?e:Jn(e,t,ss(i),n)},Di.values=Ta,Di.valuesIn=function(e){return null==e?[]:jt(e,Ca(e))},Di.without=zr,Di.words=Na,Di.wrap=function(e,t){return Do(ss(t),e)},Di.xor=qr,Di.xorBy=Kr,Di.xorWith=Zr,Di.zip=Jr,Di.zipObject=function(e,t){return is(e||[],t||[],Bi)},Di.zipObjectDeep=function(e,t){return is(e||[],t||[],Ln)},Di.zipWith=Qr,Di.entries=Ia,Di.entriesIn=ja,Di.extend=la,Di.extendWith=ua,Ka(Di,Di),Di.add=ac,Di.attempt=Ba,Di.camelCase=Ea,Di.capitalize=Aa,Di.ceil=cc,Di.clamp=function(e,t,i){return void 0===i&&(i=t,t=void 0),void 0!==i&&(i=(i=ra(i))==i?i:0),void 0!==t&&(t=(t=ra(t))==t?t:0),Gi(ra(e),t,i)},Di.clone=function(e){return zi(e,4)},Di.cloneDeep=function(e){return zi(e,5)},Di.cloneDeepWith=function(e,t){return zi(e,5,t="function"==typeof t?t:void 0)},Di.cloneWith=function(e,t){return zi(e,4,t="function"==typeof t?t:void 0)},Di.conformsTo=function(e,t){return null==t||qi(e,t,ya(t))},Di.deburr=_a,Di.defaultTo=function(e,t){return null==e||e!=e?t:e},Di.divide=lc,Di.endsWith=function(e,t,i){e=aa(e),t=qn(t);var n=e.length,s=i=void 0===i?n:Gi(na(i),0,n);return(i-=t.length)>=0&&e.slice(i,s)==t},Di.eq=To,Di.escape=function(e){return(e=aa(e))&&X.test(e)?e.replace(M,Rt):e},Di.escapeRegExp=function(e){return(e=aa(e))&&$.test(e)?e.replace(H,"\\$&"):e},Di.every=function(e,t,i){var n=Wo(e)?ot:en;return i&&rr(e,t,i)&&(t=void 0),n(e,zs(t,3))},Di.find=so,Di.findIndex=Ar,Di.findKey=function(e,t){return mt(e,zs(t,3),an)},Di.findLast=ro,Di.findLastIndex=_r,Di.findLastKey=function(e,t){return mt(e,zs(t,3),cn)},Di.floor=uc,Di.forEach=oo,Di.forEachRight=ao,Di.forIn=function(e,t){return null==e?e:rn(e,zs(t,3),Ca)},Di.forInRight=function(e,t){return null==e?e:on(e,zs(t,3),Ca)},Di.forOwn=function(e,t){return e&&an(e,zs(t,3))},Di.forOwnRight=function(e,t){return e&&cn(e,zs(t,3))},Di.get=fa,Di.gt=Eo,Di.gte=Ao,Di.has=function(e,t){return null!=e&&tr(e,t,bn)},Di.hasIn=ma,Di.head=Rr,Di.identity=$a,Di.includes=function(e,t,i,n){e=Po(e)?e:Ta(e),i=i&&!n?na(i):0;var s=e.length;return i<0&&(i=si(s+i,0)),Ko(e)?i<=s&&e.indexOf(t,i)>-1:!!s&&vt(e,t,i)>-1},Di.indexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var s=null==i?0:na(i);return s<0&&(s=si(n+s,0)),vt(e,t,s)},Di.inRange=function(e,t,i){return t=ia(t),void 0===i?(i=t,t=0):i=ia(i),function(e,t,i){return e>=ri(t,i)&&e<si(t,i)}(e=ra(e),t,i)},Di.invoke=wa,Di.isArguments=_o,Di.isArray=Wo,Di.isArrayBuffer=Ro,Di.isArrayLike=Po,Di.isArrayLikeObject=Mo,Di.isBoolean=function(e){return!0===e||!1===e||Uo(e)&&hn(e)==l},Di.isBuffer=Fo,Di.isDate=Xo,Di.isElement=function(e){return Uo(e)&&1===e.nodeType&&!Go(e)},Di.isEmpty=function(e){if(null==e)return!0;if(Po(e)&&(Wo(e)||"string"==typeof e||"function"==typeof e.splice||Fo(e)||Jo(e)||_o(e)))return!e.length;var t=er(e);if(t==b||t==v)return!e.size;if(lr(e))return!Sn(e).length;for(var i in e)if(Se.call(e,i))return!1;return!0},Di.isEqual=function(e,t){return wn(e,t)},Di.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:void 0)?i(e,t):void 0;return void 0===n?wn(e,t,void 0,i):!!n},Di.isError=Lo,Di.isFinite=function(e){return"number"==typeof e&&ti(e)},Di.isFunction=No,Di.isInteger=Bo,Di.isLength=Yo,Di.isMap=Ho,Di.isMatch=function(e,t){return e===t||yn(e,t,Ks(t))},Di.isMatchWith=function(e,t,i){return i="function"==typeof i?i:void 0,yn(e,t,Ks(t),i)},Di.isNaN=function(e){return $o(e)&&e!=+e},Di.isNative=function(e){if(cr(e))throw new he("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Cn(e)},Di.isNil=function(e){return null==e},Di.isNull=function(e){return null===e},Di.isNumber=$o,Di.isObject=Vo,Di.isObjectLike=Uo,Di.isPlainObject=Go,Di.isRegExp=zo,Di.isSafeInteger=function(e){return Bo(e)&&e>=-9007199254740991&&e<=9007199254740991},Di.isSet=qo,Di.isString=Ko,Di.isSymbol=Zo,Di.isTypedArray=Jo,Di.isUndefined=function(e){return void 0===e},Di.isWeakMap=function(e){return Uo(e)&&er(e)==C},Di.isWeakSet=function(e){return Uo(e)&&"[object WeakSet]"==hn(e)},Di.join=function(e,t){return null==e?"":ii.call(e,t)},Di.kebabCase=Wa,Di.last=Xr,Di.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var s=n;return void 0!==i&&(s=(s=na(i))<0?si(n+s,0):ri(s,n-1)),t==t?function(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}(e,t,s):gt(e,yt,s,!0)},Di.lowerCase=Ra,Di.lowerFirst=Pa,Di.lt=Qo,Di.lte=ea,Di.max=function(e){return e&&e.length?tn(e,$a,pn):void 0},Di.maxBy=function(e,t){return e&&e.length?tn(e,zs(t,2),pn):void 0},Di.mean=function(e){return Ct(e,$a)},Di.meanBy=function(e,t){return Ct(e,zs(t,2))},Di.min=function(e){return e&&e.length?tn(e,$a,xn):void 0},Di.minBy=function(e,t){return e&&e.length?tn(e,zs(t,2),xn):void 0},Di.stubArray=sc,Di.stubFalse=rc,Di.stubObject=function(){return{}},Di.stubString=function(){return""},Di.stubTrue=function(){return!0},Di.multiply=dc,Di.nth=function(e,t){return e&&e.length?Tn(e,na(t)):void 0},Di.noConflict=function(){return Ue._===this&&(Ue._=je),this},Di.noop=Za,Di.now=fo,Di.pad=function(e,t,i){e=aa(e);var n=(t=na(t))?Yt(e):0;if(!t||n>=t)return e;var s=(t-n)/2;return Es(Jt(s),i)+e+Es(Zt(s),i)},Di.padEnd=function(e,t,i){e=aa(e);var n=(t=na(t))?Yt(e):0;return t&&n<t?e+Es(t-n,i):e},Di.padStart=function(e,t,i){e=aa(e);var n=(t=na(t))?Yt(e):0;return t&&n<t?Es(t-n,i)+e:e},Di.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),ai(aa(e).replace(z,""),t||0)},Di.random=function(e,t,i){if(i&&"boolean"!=typeof i&&rr(e,t,i)&&(t=i=void 0),void 0===i&&("boolean"==typeof t?(i=t,t=void 0):"boolean"==typeof e&&(i=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ia(e),void 0===t?(t=e,e=0):t=ia(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var s=ci();return ri(e+s*(t-e+Ne("1e-"+((s+"").length-1))),t)}return Rn(e,t)},Di.reduce=function(e,t,i){var n=Wo(e)?ht:xt,s=arguments.length<3;return n(e,zs(t,4),i,s,Ji)},Di.reduceRight=function(e,t,i){var n=Wo(e)?pt:xt,s=arguments.length<3;return n(e,zs(t,4),i,s,Qi)},Di.repeat=function(e,t,i){return t=(i?rr(e,t,i):void 0===t)?1:na(t),Pn(aa(e),t)},Di.replace=function(){var e=arguments,t=aa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Di.result=function(e,t,i){var n=-1,s=(t=rs(t,e)).length;for(s||(s=1,e=void 0);++n<s;){var r=null==e?void 0:e[Or(t[n])];void 0===r&&(n=s,r=i),e=No(r)?r.call(e):r}return e},Di.round=hc,Di.runInContext=e,Di.sample=function(e){return(Wo(e)?Fi:Fn)(e)},Di.size=function(e){if(null==e)return 0;if(Po(e))return Ko(e)?Yt(e):e.length;var t=er(e);return t==b||t==v?e.size:Sn(e).length},Di.snakeCase=Ma,Di.some=function(e,t,i){var n=Wo(e)?bt:Un;return i&&rr(e,t,i)&&(t=void 0),n(e,zs(t,3))},Di.sortedIndex=function(e,t){return Hn(e,t)},Di.sortedIndexBy=function(e,t,i){return $n(e,t,zs(i,2))},Di.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=Hn(e,t);if(n<i&&To(e[n],t))return n}return-1},Di.sortedLastIndex=function(e,t){return Hn(e,t,!0)},Di.sortedLastIndexBy=function(e,t,i){return $n(e,t,zs(i,2),!0)},Di.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var i=Hn(e,t,!0)-1;if(To(e[i],t))return i}return-1},Di.startCase=Fa,Di.startsWith=function(e,t,i){return e=aa(e),i=null==i?0:Gi(na(i),0,e.length),t=qn(t),e.slice(i,i+t.length)==t},Di.subtract=pc,Di.sum=function(e){return e&&e.length?Ot(e,$a):0},Di.sumBy=function(e,t){return e&&e.length?Ot(e,zs(t,2)):0},Di.template=function(e,t,i){var n=Di.templateSettings;i&&rr(e,t,i)&&(t=void 0),e=aa(e),t=ua({},t,n,Xs);var s,r,o=ua({},t.imports,n.imports,Xs),a=ya(o),c=jt(o,a),l=0,u=t.interpolate||le,d="__p += '",h=me((t.escape||le).source+"|"+u.source+"|"+(u===B?te:le).source+"|"+(t.evaluate||le).source+"|$","g"),p="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(h,(function(t,i,n,o,a,c){return n||(n=o),d+=e.slice(l,c).replace(ue,Pt),i&&(s=!0,d+="' +\n__e("+i+") +\n'"),a&&(r=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var b=Se.call(t,"variable")&&t.variable;b||(d="with (obj) {\n"+d+"\n}\n"),d=(r?d.replace(_,""):d).replace(W,"$1").replace(R,"$1;"),d="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var f=Ba((function(){return pe(a,p+"return "+d).apply(void 0,c)}));if(f.source=d,Lo(f))throw f;return f},Di.times=function(e,t){if((e=na(e))<1||e>9007199254740991)return[];var i=4294967295,n=ri(e,4294967295);e-=4294967295;for(var s=Dt(n,t=zs(t));++i<e;)t(i);return s},Di.toFinite=ia,Di.toInteger=na,Di.toLength=sa,Di.toLower=function(e){return aa(e).toLowerCase()},Di.toNumber=ra,Di.toSafeInteger=function(e){return e?Gi(na(e),-9007199254740991,9007199254740991):0===e?e:0},Di.toString=aa,Di.toUpper=function(e){return aa(e).toUpperCase()},Di.trim=function(e,t,i){if((e=aa(e))&&(i||void 0===t))return e.replace(G,"");if(!e||!(t=qn(t)))return e;var n=Vt(e),s=Vt(t);return as(n,Et(n,s),At(n,s)+1).join("")},Di.trimEnd=function(e,t,i){if((e=aa(e))&&(i||void 0===t))return e.replace(q,"");if(!e||!(t=qn(t)))return e;var n=Vt(e);return as(n,0,At(n,Vt(t))+1).join("")},Di.trimStart=function(e,t,i){if((e=aa(e))&&(i||void 0===t))return e.replace(z,"");if(!e||!(t=qn(t)))return e;var n=Vt(e);return as(n,Et(n,Vt(t))).join("")},Di.truncate=function(e,t){var i=30,n="...";if(Vo(t)){var s="separator"in t?t.separator:s;i="length"in t?na(t.length):i,n="omission"in t?qn(t.omission):n}var r=(e=aa(e)).length;if(Mt(e)){var o=Vt(e);r=o.length}if(i>=r)return e;var a=i-Yt(n);if(a<1)return n;var c=o?as(o,0,a).join(""):e.slice(0,a);if(void 0===s)return c+n;if(o&&(a+=c.length-a),zo(s)){if(e.slice(a).search(s)){var l,u=c;for(s.global||(s=me(s.source,aa(ie.exec(s))+"g")),s.lastIndex=0;l=s.exec(u);)var d=l.index;c=c.slice(0,void 0===d?a:d)}}else if(e.indexOf(qn(s),a)!=a){var h=c.lastIndexOf(s);h>-1&&(c=c.slice(0,h))}return c+n},Di.unescape=function(e){return(e=aa(e))&&F.test(e)?e.replace(P,Ut):e},Di.uniqueId=function(e){var t=++xe;return aa(e)+t},Di.upperCase=Xa,Di.upperFirst=La,Di.each=oo,Di.eachRight=ao,Di.first=Rr,Ka(Di,(oc={},an(Di,(function(e,t){Se.call(Di.prototype,t)||(oc[t]=e)})),oc),{chain:!1}),Di.VERSION="4.17.19",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Di[e].placeholder=Di})),st(["drop","take"],(function(e,t){Ei.prototype[e]=function(i){i=void 0===i?1:si(na(i),0);var n=this.__filtered__&&!t?new Ei(this):this.clone();return n.__filtered__?n.__takeCount__=ri(i,n.__takeCount__):n.__views__.push({size:ri(i,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},Ei.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;Ei.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:zs(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),st(["head","last"],(function(e,t){var i="take"+(t?"Right":"");Ei.prototype[e]=function(){return this[i](1).value()[0]}})),st(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");Ei.prototype[e]=function(){return this.__filtered__?new Ei(this):this[i](1)}})),Ei.prototype.compact=function(){return this.filter($a)},Ei.prototype.find=function(e){return this.filter(e).head()},Ei.prototype.findLast=function(e){return this.reverse().find(e)},Ei.prototype.invokeMap=Mn((function(e,t){return"function"==typeof e?new Ei(this):this.map((function(i){return gn(i,e,t)}))})),Ei.prototype.reject=function(e){return this.filter(xo(zs(e)))},Ei.prototype.slice=function(e,t){e=na(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Ei(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),void 0!==t&&(i=(t=na(t))<0?i.dropRight(-t):i.take(t-e)),i)},Ei.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ei.prototype.toArray=function(){return this.take(4294967295)},an(Ei.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=Di[n?"take"+("last"==t?"Right":""):t],r=n||/^find/.test(t);s&&(Di.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,a=t instanceof Ei,c=o[0],l=a||Wo(t),u=function(e){var t=s.apply(Di,dt([e],o));return n&&d?t[0]:t};l&&i&&"function"==typeof c&&1!=c.length&&(a=l=!1);var d=this.__chain__,h=!!this.__actions__.length,p=r&&!d,b=a&&!h;if(!r&&l){t=b?t:new Ei(this);var f=e.apply(t,o);return f.__actions__.push({func:to,args:[u],thisArg:void 0}),new Ti(f,d)}return p&&b?e.apply(this,o):(f=this.thru(u),p?n?f.value()[0]:f.value():f)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=we[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Di.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var s=this.value();return t.apply(Wo(s)?s:[],e)}return this[i]((function(i){return t.apply(Wo(i)?i:[],e)}))}})),an(Ei.prototype,(function(e,t){var i=Di[t];if(i){var n=i.name+"";Se.call(gi,n)||(gi[n]=[]),gi[n].push({name:t,func:i})}})),gi[Ds(void 0,2).name]=[{name:"wrapper",func:void 0}],Ei.prototype.clone=function(){var e=new Ei(this.__wrapped__);return e.__actions__=fs(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=fs(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=fs(this.__views__),e},Ei.prototype.reverse=function(){if(this.__filtered__){var e=new Ei(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ei.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=Wo(e),n=t<0,s=i?e.length:0,r=function(e,t,i){for(var n=-1,s=i.length;++n<s;){var r=i[n],o=r.size;switch(r.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=ri(t,e+o);break;case"takeRight":e=si(e,t-o)}}return{start:e,end:t}}(0,s,this.__views__),o=r.start,a=r.end,c=a-o,l=n?a:o-1,u=this.__iteratees__,d=u.length,h=0,p=ri(c,this.__takeCount__);if(!i||!n&&s==c&&p==c)return es(e,this.__actions__);var b=[];e:for(;c--&&h<p;){for(var f=-1,m=e[l+=t];++f<d;){var g=u[f],v=g.type,w=(0,g.iteratee)(m);if(2==v)m=w;else if(!w){if(1==v)continue e;break e}}b[h++]=m}return b},Di.prototype.at=io,Di.prototype.chain=function(){return eo(this)},Di.prototype.commit=function(){return new Ti(this.value(),this.__chain__)},Di.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Di.prototype.plant=function(e){for(var t,i=this;i instanceof ji;){var n=Ir(i);n.__index__=0,n.__values__=void 0,t?s.__wrapped__=n:t=n;var s=n;i=i.__wrapped__}return s.__wrapped__=e,t},Di.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ei){var t=e;return this.__actions__.length&&(t=new Ei(this)),(t=t.reverse()).__actions__.push({func:to,args:[Yr],thisArg:void 0}),new Ti(t,this.__chain__)}return this.thru(Yr)},Di.prototype.toJSON=Di.prototype.valueOf=Di.prototype.value=function(){return es(this.__wrapped__,this.__actions__)},Di.prototype.first=Di.prototype.head,St&&(Di.prototype[St]=function(){return this}),Di}();Ue._=Ht,void 0===(n=(function(){return Ht}).call(t,i,t,e))||(e.exports=n)}).call(this)}).call(this,i("YuTi")(e))},Lwft:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return e?e/100:e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"centsToDollars",type:e,pure:!0}),e})()},"MO+k":function(e,t,i){e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={rgb2hsl:i,rgb2hsv:n,rgb2hwb:s,rgb2cmyk:o,rgb2keyword:a,rgb2xyz:c,rgb2lab:l,rgb2lch:function(e){return w(l(e))},hsl2rgb:u,hsl2hsv:function(e){var t=e[1]/100,i=e[2]/100;return 0===i?[0,0,0]:[e[0],2*(t*=(i*=2)<=1?i:2-i)/(i+t)*100,(i+t)/2*100]},hsl2hwb:function(e){return s(u(e))},hsl2cmyk:function(e){return o(u(e))},hsl2keyword:function(e){return a(u(e))},hsv2rgb:d,hsv2hsl:function(e){var t,i,n=e[1]/100,s=e[2]/100;return t=n*s,[e[0],100*(t=(t/=(i=(2-n)*s)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(e){return s(d(e))},hsv2cmyk:function(e){return o(d(e))},hsv2keyword:function(e){return a(d(e))},hwb2rgb:h,hwb2hsl:function(e){return i(h(e))},hwb2hsv:function(e){return n(h(e))},hwb2cmyk:function(e){return o(h(e))},hwb2keyword:function(e){return a(h(e))},cmyk2rgb:p,cmyk2hsl:function(e){return i(p(e))},cmyk2hsv:function(e){return n(p(e))},cmyk2hwb:function(e){return s(p(e))},cmyk2keyword:function(e){return a(p(e))},keyword2rgb:k,keyword2hsl:function(e){return i(k(e))},keyword2hsv:function(e){return n(k(e))},keyword2hwb:function(e){return s(k(e))},keyword2cmyk:function(e){return o(k(e))},keyword2lab:function(e){return l(k(e))},keyword2xyz:function(e){return c(k(e))},xyz2rgb:f,xyz2lab:m,xyz2lch:function(e){return w(m(e))},lab2xyz:v,lab2rgb:y,lab2lch:w,lch2lab:C,lch2xyz:function(e){return v(C(e))},lch2rgb:function(e){return y(C(e))}};function i(e){var t,i,n=e[0]/255,s=e[1]/255,r=e[2]/255,o=Math.min(n,s,r),a=Math.max(n,s,r),c=a-o;return a==o?t=0:n==a?t=(s-r)/c:s==a?t=2+(r-n)/c:r==a&&(t=4+(n-s)/c),(t=Math.min(60*t,360))<0&&(t+=360),i=(o+a)/2,[t,100*(a==o?0:i<=.5?c/(a+o):c/(2-a-o)),100*i]}function n(e){var t,i,n=e[0],s=e[1],r=e[2],o=Math.min(n,s,r),a=Math.max(n,s,r),c=a-o;return i=0==a?0:c/a*1e3/10,a==o?t=0:n==a?t=(s-r)/c:s==a?t=2+(r-n)/c:r==a&&(t=4+(n-s)/c),(t=Math.min(60*t,360))<0&&(t+=360),[t,i,a/255*1e3/10]}function s(e){var t=e[0],n=e[1],s=e[2];return[i(e)[0],1/255*Math.min(t,Math.min(n,s))*100,100*(s=1-1/255*Math.max(t,Math.max(n,s)))]}function o(e){var t,i=e[0]/255,n=e[1]/255,s=e[2]/255;return[100*((1-i-(t=Math.min(1-i,1-n,1-s)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-s-t)/(1-t)||0),100*t]}function a(e){return x[JSON.stringify(e)]}function c(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*i+.0722*n),100*(.0193*t+.1192*i+.9505*n)]}function l(e){var t=c(e),i=t[0],n=t[1],s=t[2];return n/=100,s/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]}function u(e){var t,i,n,s,r,o=e[0]/360,a=e[1]/100,c=e[2]/100;if(0==a)return[r=255*c,r,r];t=2*c-(i=c<.5?c*(1+a):c+a-c*a),s=[0,0,0];for(var l=0;l<3;l++)(n=o+1/3*-(l-1))<0&&n++,n>1&&n--,s[l]=255*(r=6*n<1?t+6*(i-t)*n:2*n<1?i:3*n<2?t+(i-t)*(2/3-n)*6:t);return s}function d(e){var t=e[0]/60,i=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,r=t-Math.floor(t),o=255*n*(1-i),a=255*n*(1-i*r),c=255*n*(1-i*(1-r));switch(n*=255,s){case 0:return[n,c,o];case 1:return[a,n,o];case 2:return[o,n,c];case 3:return[o,a,n];case 4:return[c,o,n];case 5:return[n,o,a]}}function h(e){var t,i,n,s,o=e[0]/360,a=e[1]/100,c=e[2]/100,l=a+c;switch(l>1&&(a/=l,c/=l),n=6*o-(t=Math.floor(6*o)),0!=(1&t)&&(n=1-n),s=a+n*((i=1-c)-a),t){default:case 6:case 0:r=i,g=s,b=a;break;case 1:r=s,g=i,b=a;break;case 2:r=a,g=i,b=s;break;case 3:r=a,g=s,b=i;break;case 4:r=s,g=a,b=i;break;case 5:r=i,g=a,b=s}return[255*r,255*g,255*b]}function p(e){var t=e[1]/100,i=e[2]/100,n=e[3]/100;return[255*(1-Math.min(1,e[0]/100*(1-n)+n)),255*(1-Math.min(1,t*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n))]}function f(e){var t,i,n,s=e[0]/100,r=e[1]/100,o=e[2]/100;return i=-.9689*s+1.8758*r+.0415*o,n=.0557*s+-.204*r+1.057*o,t=(t=3.2406*s+-1.5372*r+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function m(e){var t=e[0],i=e[1],n=e[2];return i/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function v(e){var t,i,n,s,r=e[0],o=e[1],a=e[2];return r<=8?s=(i=100*r/903.3)/100*7.787+16/116:(i=100*Math.pow((r+16)/116,3),s=Math.pow(i/100,1/3)),[t=t/95.047<=.008856?t=95.047*(o/500+s-16/116)/7.787:95.047*Math.pow(o/500+s,3),i,n=n/108.883<=.008859?n=108.883*(s-a/200-16/116)/7.787:108.883*Math.pow(s-a/200,3)]}function w(e){var t,i=e[0],n=e[1],s=e[2];return(t=360*Math.atan2(s,n)/2/Math.PI)<0&&(t+=360),[i,Math.sqrt(n*n+s*s),t]}function y(e){return f(v(e))}function C(e){var t,i=e[1];return t=e[2]/360*2*Math.PI,[e[0],i*Math.cos(t),i*Math.sin(t)]}function k(e){return S[e]}var S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},x={};for(var O in S)x[JSON.stringify(S[O])]=O;var D=function(){return new A};for(var I in t){D[I+"Raw"]=function(e){return function(i){return"number"==typeof i&&(i=Array.prototype.slice.call(arguments)),t[e](i)}}(I);var j=/(\w+)2(\w+)/.exec(I),T=j[1],E=j[2];(D[T]=D[T]||{})[E]=D[I]=function(e){return function(i){"number"==typeof i&&(i=Array.prototype.slice.call(arguments));var n=t[e](i);if("string"==typeof n||void 0===n)return n;for(var s=0;s<n.length;s++)n[s]=Math.round(n[s]);return n}}(I)}var A=function(){this.convs={}};A.prototype.routeSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i))},A.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},A.prototype.getValues=function(e){var t=this.convs[e];if(!t){var i=this.space;t=D[i][e](this.convs[i]),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(e){A.prototype[e]=function(t){return this.routeSpace(e,arguments)}}));var _=D,W={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},R={getRgba:P,getHsla:M,getRgb:function(e){var t=P(e);return t&&t.slice(0,3)},getHsl:function(e){var t=M(e);return t&&t.slice(0,3)},getHwb:F,getAlpha:function(e){var t=P(e);return t||(t=M(e))||(t=F(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+Y(e[0])+Y(e[1])+Y(e[2])+(t>=0&&t<1?Y(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?X(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:X,percentString:function(e,t){return t<1||e[3]&&e[3]<1?L(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:L,hslString:function(e,t){return t<1||e[3]&&e[3]<1?N(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:N,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return V[e.slice(0,3)]}};function P(e){if(e){var t=[0,0,0],i=1,n=e.match(/^#([a-fA-F0-9]{3,4})$/i),s="";if(n){s=(n=n[1])[3];for(var r=0;r<t.length;r++)t[r]=parseInt(n[r]+n[r],16);s&&(i=Math.round(parseInt(s+s,16)/255*100)/100)}else if(n=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(s=n[2],n=n[1],r=0;r<t.length;r++)t[r]=parseInt(n.slice(2*r,2*r+2),16);s&&(i=Math.round(parseInt(s,16)/255*100)/100)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<t.length;r++)t[r]=parseInt(n[r+1]);i=parseFloat(n[4])}else if(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<t.length;r++)t[r]=Math.round(2.55*parseFloat(n[r+1]));i=parseFloat(n[4])}else if(n=e.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(t=W[n[1]]))return}for(r=0;r<t.length;r++)t[r]=B(t[r],0,255);return i=i||0==i?B(i,0,1):1,t[3]=i,t}}function M(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[B(parseInt(t[1]),0,360),B(parseFloat(t[2]),0,100),B(parseFloat(t[3]),0,100),B(isNaN(i)?1:i,0,1)]}}}function F(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[B(parseInt(t[1]),0,360),B(parseFloat(t[2]),0,100),B(parseFloat(t[3]),0,100),B(isNaN(i)?1:i,0,1)]}}}function X(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function L(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function N(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function B(e,t,i){return Math.min(Math.max(t,e),i)}function Y(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var V={};for(var U in W)V[W[U]]=U;var H=function(e){return e instanceof H?e:this instanceof H?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=R.getRgba(e))?this.setValues("rgb",t):(t=R.getHsla(e))?this.setValues("hsl",t):(t=R.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new H(e);var t};H.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return R.hexString(this.values.rgb)},rgbString:function(){return R.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return R.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return R.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return R.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return R.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return R.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return R.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var n=e[i]/255;t[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,i=(t[0]+e)%360;return t[0]=i<0?360+i:i,this.setValues("hsl",t),this},mix:function(e,t){var i=e,n=void 0===t?.5:t,s=2*n-1,r=this.alpha()-i.alpha(),o=((s*r==-1?s:(s+r)/(1+s*r))+1)/2,a=1-o;return this.rgb(o*this.red()+a*i.red(),o*this.green()+a*i.green(),o*this.blue()+a*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var e,t,i=new H,n=this.values,s=i.values;for(var r in n)n.hasOwnProperty(r)&&("[object Array]"===(t={}.toString.call(e=n[r]))?s[r]=e.slice(0):"[object Number]"===t?s[r]=e:console.error("unexpected color value:",e));return i}},H.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},H.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},H.prototype.getValues=function(e){for(var t=this.values,i={},n=0;n<e.length;n++)i[e.charAt(n)]=t[e][n];return 1!==t.alpha&&(i.a=t.alpha),i},H.prototype.setValues=function(e,t){var i,n,s=this.values,r=this.spaces,o=this.maxes,a=1;if(this.valid=!0,"alpha"===e)a=t;else if(t.length)s[e]=t.slice(0,e.length),a=t[e.length];else if(void 0!==t[e.charAt(0)]){for(i=0;i<e.length;i++)s[e][i]=t[e.charAt(i)];a=t.a}else if(void 0!==t[r[e][0]]){var c=r[e];for(i=0;i<e.length;i++)s[e][i]=t[c[i]];a=t.alpha}if(s.alpha=Math.max(0,Math.min(1,void 0===a?s.alpha:a)),"alpha"===e)return!1;for(i=0;i<e.length;i++)n=Math.max(0,Math.min(o[e][i],s[e][i])),s[e][i]=Math.round(n);for(var l in r)l!==e&&(s[l]=_[e][l](s[e]));return!0},H.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},H.prototype.setChannel=function(e,t,i){var n=this.values[e];return void 0===i?n[t]:(i===n[t]||(n[t]=i,this.setValues(e,n)),this)},"undefined"!=typeof window&&(window.Color=H);var $,G=H,z={noop:function(){},uid:($=0,function(){return $++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,i){return z.valueOrDefault(z.isArray(e)?e[t]:e,i)},callback:function(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)},each:function(e,t,i,n){var s,r,o;if(z.isArray(e))if(r=e.length,n)for(s=r-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<r;s++)t.call(i,e[s],s);else if(z.isObject(e))for(r=(o=Object.keys(e)).length,s=0;s<r;s++)t.call(i,e[o[s]],o[s])},arrayEquals:function(e,t){var i,n,s,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(r=t[i],(s=e[i])instanceof Array&&r instanceof Array){if(!z.arrayEquals(s,r))return!1}else if(s!==r)return!1;return!0},clone:function(e){if(z.isArray(e))return e.map(z.clone);if(z.isObject(e)){for(var t={},i=Object.keys(e),n=i.length,s=0;s<n;++s)t[i[s]]=z.clone(e[i[s]]);return t}return e},_merger:function(e,t,i,n){var s=t[e],r=i[e];z.isObject(s)&&z.isObject(r)?z.merge(s,r,n):t[e]=z.clone(r)},_mergerIf:function(e,t,i){var n=t[e],s=i[e];z.isObject(n)&&z.isObject(s)?z.mergeIf(n,s):t.hasOwnProperty(e)||(t[e]=z.clone(s))},merge:function(e,t,i){var n,s,r,o,a,c=z.isArray(t)?t:[t],l=c.length;if(!z.isObject(e))return e;for(n=(i=i||{}).merger||z._merger,s=0;s<l;++s)if(z.isObject(t=c[s]))for(a=0,o=(r=Object.keys(t)).length;a<o;++a)n(r[a],e,t,i);return e},mergeIf:function(e,t){return z.merge(e,t,{merger:z._mergerIf})},extend:function(e){for(var t=function(t,i){e[i]=t},i=1,n=arguments.length;i<n;++i)z.each(arguments[i],t);return e},inherits:function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=t.prototype,i.prototype=new n,i.extend=z.inherits,e&&z.extend(i.prototype,e),i.__super__=t.prototype,i}},q=z;z.callCallback=z.callback,z.indexOf=function(e,t,i){return Array.prototype.indexOf.call(e,t,i)},z.getValueOrDefault=z.valueOrDefault,z.getValueAtIndexOrDefault=z.valueAtIndexOrDefault;var K={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i))},easeOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:2==(e/=.5)?1:(i||(i=.45),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-K.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*K.easeInBounce(2*e):.5*K.easeOutBounce(2*e-1)+.5}},Z={effects:K};q.easingEffects=K;var J=Math.PI,Q=J/180,ee=2*J,te=J/2,ie=J/4,ne=2*J/3,se={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,i,n,s,r){if(r){var o=Math.min(r,s/2,n/2),a=t+o,c=i+o,l=t+n-o,u=i+s-o;e.moveTo(t,c),a<l&&c<u?(e.arc(a,c,o,-J,-te),e.arc(l,c,o,-te,0),e.arc(l,u,o,0,te),e.arc(a,u,o,te,J)):a<l?(e.moveTo(a,i),e.arc(l,c,o,-te,te),e.arc(a,c,o,te,J+te)):c<u?(e.arc(a,c,o,-J,0),e.arc(a,u,o,0,J)):e.arc(a,c,o,-J,J),e.closePath(),e.moveTo(t,i)}else e.rect(t,i,n,s)},drawPoint:function(e,t,i,n,s,r){var o,a,c,l,u,d=(r||0)*Q;if(!t||"object"!=typeof t||"[object HTMLImageElement]"!==(o=t.toString())&&"[object HTMLCanvasElement]"!==o){if(!(isNaN(i)||i<=0)){switch(e.beginPath(),t){default:e.arc(n,s,i,0,ee),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(d)*i,s-Math.cos(d)*i),d+=ne,e.lineTo(n+Math.sin(d)*i,s-Math.cos(d)*i),d+=ne,e.lineTo(n+Math.sin(d)*i,s-Math.cos(d)*i),e.closePath();break;case"rectRounded":l=i-(u=.516*i),a=Math.cos(d+ie)*l,c=Math.sin(d+ie)*l,e.arc(n-a,s-c,u,d-J,d-te),e.arc(n+c,s-a,u,d-te,d),e.arc(n+a,s+c,u,d,d+te),e.arc(n-c,s+a,u,d+te,d+J),e.closePath();break;case"rect":if(!r){l=Math.SQRT1_2*i,e.rect(n-l,s-l,2*l,2*l);break}d+=ie;case"rectRot":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+c,s-a),e.lineTo(n+a,s+c),e.lineTo(n-c,s+a),e.closePath();break;case"crossRot":d+=ie;case"cross":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c),e.moveTo(n+c,s-a),e.lineTo(n-c,s+a);break;case"star":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c),e.moveTo(n+c,s-a),e.lineTo(n-c,s+a),d+=ie,a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c),e.moveTo(n+c,s-a),e.lineTo(n-c,s+a);break;case"line":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(d)*i,s+Math.sin(d)*i)}e.fill(),e.stroke()}}else e.drawImage(t,n-t.width/2,s-t.height/2,t.width,t.height)},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,i,n){var s=i.steppedLine;if(s){if("middle"===s){var r=(t.x+i.x)/2;e.lineTo(r,n?i.y:t.y),e.lineTo(r,n?t.y:i.y)}else"after"===s&&!n||"after"!==s&&n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}else i.tension?e.bezierCurveTo(n?t.controlPointPreviousX:t.controlPointNextX,n?t.controlPointPreviousY:t.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):e.lineTo(i.x,i.y)}},re=se;q.clear=se.clear,q.drawRoundedRectangle=function(e){e.beginPath(),se.roundedRect.apply(se,arguments)};var oe={_set:function(e,t){return q.merge(this[e]||(this[e]={}),t)}};oe._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var ae=oe,ce=q.valueOrDefault,le={toLineHeight:function(e,t){var i=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,i,n,s;return q.isObject(e)?(t=+e.top||0,i=+e.right||0,n=+e.bottom||0,s=+e.left||0):t=i=n=s=+e||0,{top:t,right:i,bottom:n,left:s,height:t+n,width:s+i}},_parseFont:function(e){var t=ae.global,i=ce(e.fontSize,t.defaultFontSize),n={family:ce(e.fontFamily,t.defaultFontFamily),lineHeight:q.options.toLineHeight(ce(e.lineHeight,t.defaultLineHeight),i),size:i,style:ce(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return n.string=function(e){return!e||q.isNullOrUndef(e.size)||q.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n},resolve:function(e,t,i){var n,s,r;for(n=0,s=e.length;n<s;++n)if(void 0!==(r=e[n])&&(void 0!==t&&"function"==typeof r&&(r=r(t)),void 0!==i&&q.isArray(r)&&(r=r[i]),void 0!==r))return r}},ue=q,de=re,he=le;ue.easing=Z,ue.canvas=de,ue.options=he;var pe=function(e){ue.extend(this,e),this.initialize.apply(this,arguments)};ue.extend(pe.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=ue.clone(e._model)),e._start={},e},transition:function(e){var t=this,i=t._model,n=t._start,s=t._view;return i&&1!==e?(s||(s=t._view={}),n||(n=t._start={}),function(e,t,i,n){var s,r,o,a,c,l,u,d,h,p=Object.keys(i);for(s=0,r=p.length;s<r;++s)if(l=i[o=p[s]],t.hasOwnProperty(o)||(t[o]=l),(a=t[o])!==l&&"_"!==o[0]){if(e.hasOwnProperty(o)||(e[o]=a),(u=typeof l)==typeof(c=e[o]))if("string"===u){if((d=G(c)).valid&&(h=G(l)).valid){t[o]=h.mix(d,n).rgbString();continue}}else if(ue.isFinite(c)&&ue.isFinite(l)){t[o]=c+(l-c)*n;continue}t[o]=l}}(n,s,i,e),t):(t._view=i,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ue.isNumber(this._model.x)&&ue.isNumber(this._model.y)}}),pe.extend=ue.inherits;var be=pe,fe=be.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),me=fe;Object.defineProperty(fe.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(fe.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),ae._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ue.noop,onComplete:ue.noop}});var ge={animations:[],request:null,addAnimation:function(e,t,i,n){var s,r,o=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=i,n||(e.animating=!0),s=0,r=o.length;s<r;++s)if(o[s].chart===e)return void(o[s]=t);o.push(t),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ue.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=ue.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,i,n,s=this.animations,r=0;r<s.length;)t=(e=s[r]).chart,i=e.numSteps,n=Math.floor((Date.now()-e.startTime)/e.duration*i)+1,e.currentStep=Math.min(n,i),ue.callback(e.render,[t,e],t),ue.callback(e.onAnimationProgress,[e],t),e.currentStep>=i?(ue.callback(e.onAnimationComplete,[e],t),t.animating=!1,s.splice(r,1)):++r}},ve=ue.options.resolve,we=["push","pop","shift","splice","unshift"];function ye(e,t){var i=e._chartjs;if(i){var n=i.listeners,s=n.indexOf(t);-1!==s&&n.splice(s,1),n.length>0||(we.forEach((function(t){delete e[t]})),delete e._chartjs)}}var Ce=function(e,t){this.initialize(e,t)};ue.extend(Ce.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),i=e.getDataset();null!==t.xAxisID&&t.xAxisID in e.chart.scales||(t.xAxisID=i.xAxisID||e.chart.options.scales.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in e.chart.scales||(t.yAxisID=i.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&ye(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,i=this.getMeta(),n=this.getDataset().data||[],s=i.data;for(e=0,t=n.length;e<t;++e)s[e]=s[e]||this.createMetaData(e);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,i=this,n=i.getDataset(),s=n.data||(n.data=[]);i._data!==s&&(i._data&&ye(i._data,i),s&&Object.isExtensible(s)&&(t=i,(e=s)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),we.forEach((function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),s=n.apply(this,t);return ue.each(e._chartjs.listeners,(function(e){"function"==typeof e[i]&&e[i].apply(e,t)})),s}})})))),i._data=s),i.resyncElements()},update:ue.noop,transition:function(e){for(var t=this.getMeta(),i=t.data||[],n=i.length,s=0;s<n;++s)i[s].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],i=t.length,n=0;for(e.dataset&&e.dataset.draw();n<i;++n)t[n].draw()},removeHoverStyle:function(e){ue.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],i=e._index,n=e.custom||{},s=e._model,r=ue.getHoverColor;e.$previousStyle={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth},s.backgroundColor=ve([n.hoverBackgroundColor,t.hoverBackgroundColor,r(s.backgroundColor)],void 0,i),s.borderColor=ve([n.hoverBorderColor,t.hoverBorderColor,r(s.borderColor)],void 0,i),s.borderWidth=ve([n.hoverBorderWidth,t.hoverBorderWidth,s.borderWidth],void 0,i)},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,i=e.data.length,n=t.length;n<i?e.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(e,t){for(var i=0;i<t;++i)this.addElementAndReset(e+i)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Ce.extend=ue.inherits;var ke=Ce;ae._set("global",{elements:{arc:{backgroundColor:ae.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Se=be.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var i=this._view;if(i){for(var n=ue.getAngleFromPoint(i,{x:e,y:t}),s=n.angle,r=n.distance,o=i.startAngle,a=i.endAngle;a<o;)a+=2*Math.PI;for(;s>a;)s-=2*Math.PI;for(;s<o;)s+=2*Math.PI;return s>=o&&s<=a&&r>=i.innerRadius&&r<=i.outerRadius}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,i=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,i=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},draw:function(){var e,t=this._chart.ctx,i=this._view,n=i.startAngle,s=i.endAngle,r="inner"===i.borderAlign?.33:0;t.save(),t.beginPath(),t.arc(i.x,i.y,Math.max(i.outerRadius-r,0),n,s),t.arc(i.x,i.y,i.innerRadius,s,n,!0),t.closePath(),t.fillStyle=i.backgroundColor,t.fill(),i.borderWidth&&("inner"===i.borderAlign?(t.beginPath(),t.arc(i.x,i.y,i.outerRadius,n-(e=r/i.outerRadius),s+e),i.innerRadius>r?t.arc(i.x,i.y,i.innerRadius-r,s+(e=r/i.innerRadius),n-e,!0):t.arc(i.x,i.y,r,s+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip(),t.beginPath(),t.arc(i.x,i.y,i.outerRadius,n,s),t.arc(i.x,i.y,i.innerRadius,s,n,!0),t.closePath(),t.lineWidth=2*i.borderWidth,t.lineJoin="round"):(t.lineWidth=i.borderWidth,t.lineJoin="bevel"),t.strokeStyle=i.borderColor,t.stroke()),t.restore()}}),xe=ue.valueOrDefault,Oe=ae.global.defaultColor;ae._set("global",{elements:{line:{tension:.4,backgroundColor:Oe,borderWidth:3,borderColor:Oe,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var De=be.extend({draw:function(){var e,t,i,n,s=this._view,r=this._chart.ctx,o=s.spanGaps,a=this._children.slice(),c=ae.global,l=c.elements.line,u=-1;for(this._loop&&a.length&&a.push(a[0]),r.save(),r.lineCap=s.borderCapStyle||l.borderCapStyle,r.setLineDash&&r.setLineDash(s.borderDash||l.borderDash),r.lineDashOffset=xe(s.borderDashOffset,l.borderDashOffset),r.lineJoin=s.borderJoinStyle||l.borderJoinStyle,r.lineWidth=xe(s.borderWidth,l.borderWidth),r.strokeStyle=s.borderColor||c.defaultColor,r.beginPath(),u=-1,e=0;e<a.length;++e)t=a[e],i=ue.previousItem(a,e),n=t._view,0===e?n.skip||(r.moveTo(n.x,n.y),u=e):(i=-1===u?i:a[u],n.skip||(u!==e-1&&!o||-1===u?r.moveTo(n.x,n.y):ue.canvas.lineTo(r,i._view,t._view),u=e));r.stroke(),r.restore()}}),Ie=ue.valueOrDefault,je=ae.global.defaultColor;function Te(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}ae._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:je,borderColor:je,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Ee=be.extend({inRange:function(e,t){var i=this._view;return!!i&&Math.pow(e-i.x,2)+Math.pow(t-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:Te,inXRange:Te,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,i=this._chart.ctx,n=t.pointStyle,s=t.rotation,r=t.radius,o=t.x,a=t.y,c=ae.global,l=c.defaultColor;t.skip||(void 0===e||ue.canvas._isPointInArea(t,e))&&(i.strokeStyle=t.borderColor||l,i.lineWidth=Ie(t.borderWidth,c.elements.point.borderWidth),i.fillStyle=t.backgroundColor||l,ue.canvas.drawPoint(i,n,r,o,a,s))}}),Ae=ae.global.defaultColor;function _e(e){return e&&void 0!==e.width}function We(e){var t,i,n,s,r;return _e(e)?(t=e.x-(r=e.width/2),i=e.x+r,n=Math.min(e.y,e.base),s=Math.max(e.y,e.base)):(r=e.height/2,t=Math.min(e.x,e.base),i=Math.max(e.x,e.base),n=e.y-r,s=e.y+r),{left:t,top:n,right:i,bottom:s}}function Re(e,t,i){return e===t?i:e===i?t:e}function Pe(e,t,i){var n=null===t,s=null===i,r=!(!e||n&&s)&&We(e);return r&&(n||t>=r.left&&t<=r.right)&&(s||i>=r.top&&i<=r.bottom)}ae._set("global",{elements:{rectangle:{backgroundColor:Ae,borderColor:Ae,borderSkipped:"bottom",borderWidth:0}}});var Me=be.extend({draw:function(){var e=this._chart.ctx,t=this._view,i=function(e){var t=We(e),i=t.right-t.left,n=t.bottom-t.top,s=function(e,t,i){var n,s,r,o,a=e.borderWidth,c=function(e){var t=e.borderSkipped,i={};return t?(e.horizontal?e.base>e.x&&(t=Re(t,"left","right")):e.base<e.y&&(t=Re(t,"bottom","top")),i[t]=!0,i):i}(e);return ue.isObject(a)?(n=+a.top||0,s=+a.right||0,r=+a.bottom||0,o=+a.left||0):n=s=r=o=+a||0,{t:c.top||n<0?0:n>i?i:n,r:c.right||s<0?0:s>t?t:s,b:c.bottom||r<0?0:r>i?i:r,l:c.left||o<0?0:o>t?t:o}}(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b}}}(t),n=i.outer,s=i.inner;e.fillStyle=t.backgroundColor,e.fillRect(n.x,n.y,n.w,n.h),n.w===s.w&&n.h===s.h||(e.save(),e.beginPath(),e.rect(n.x,n.y,n.w,n.h),e.clip(),e.fillStyle=t.borderColor,e.rect(s.x,s.y,s.w,s.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Pe(this._view,e,t)},inLabelRange:function(e,t){var i=this._view;return _e(i)?Pe(i,e,null):Pe(i,null,t)},inXRange:function(e){return Pe(this._view,e,null)},inYRange:function(e){return Pe(this._view,null,e)},getCenterPoint:function(){var e,t,i=this._view;return _e(i)?(e=i.x,t=(i.y+i.base)/2):(e=(i.x+i.base)/2,t=i.y),{x:e,y:t}},getArea:function(){var e=this._view;return _e(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Fe={},Xe=De,Le=Ee,Ne=Me;Fe.Arc=Se,Fe.Line=Xe,Fe.Point=Le,Fe.Rectangle=Ne;var Be=ue.options.resolve;ae._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var Ye=ke.extend({dataElementType:Fe.Rectangle,initialize:function(){var e,t=this;ke.prototype.initialize.apply(t,arguments),(e=t.getMeta()).stack=t.getDataset().stack,e.bar=!0},update:function(e){var t,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,i=n.length;t<i;++t)this.updateElement(n[t],t,e)},updateElement:function(e,t,i){var n=this,s=n.getMeta(),r=n.getDataset(),o=n._resolveElementOptions(e,t);e._xScale=n.getScaleForId(s.xAxisID),e._yScale=n.getScaleForId(s.yAxisID),e._datasetIndex=n.index,e._index=t,e._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:r.label,label:n.chart.data.labels[t]},n._updateElementGeometry(e,t,i),e.pivot()},_updateElementGeometry:function(e,t,i){var n=this,s=e._model,r=n._getValueScale(),o=r.getBasePixel(),a=r.isHorizontal(),c=n._ruler||n.getRuler(),l=n.calculateBarValuePixels(n.index,t),u=n.calculateBarIndexPixels(n.index,t,c);s.horizontal=a,s.base=i?o:l.base,s.x=a?i?o:l.head:u.center,s.y=a?u.center:i?o:l.head,s.height=a?u.size:void 0,s.width=a?void 0:u.size},_getStacks:function(e){var t,i,n=this.chart,s=this._getIndexScale().options.stacked,r=void 0===e?n.data.datasets.length:e+1,o=[];for(t=0;t<r;++t)(i=n.getDatasetMeta(t)).bar&&n.isDatasetVisible(t)&&(!1===s||!0===s&&-1===o.indexOf(i.stack)||void 0===s&&(void 0===i.stack||-1===o.indexOf(i.stack)))&&o.push(i.stack);return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var i=this._getStacks(e),n=void 0!==t?i.indexOf(t):-1;return-1===n?i.length-1:n},getRuler:function(){var e,t,i=this._getIndexScale(),n=this.getStackCount(),s=this.index,r=i.isHorizontal(),o=r?i.left:i.top,a=o+(r?i.width:i.height),c=[];for(e=0,t=this.getMeta().data.length;e<t;++e)c.push(i.getPixelForValue(null,e,s));return{min:ue.isNullOrUndef(i.options.barThickness)?function(e,t){var i,n,s,r,o=e.isHorizontal()?e.width:e.height,a=e.getTicks();for(s=1,r=t.length;s<r;++s)o=Math.min(o,Math.abs(t[s]-t[s-1]));for(s=0,r=a.length;s<r;++s)n=e.getPixelForTick(s),o=s>0?Math.min(o,n-i):o,i=n;return o}(i,c):-1,pixels:c,start:o,end:a,stackCount:n,scale:i}},calculateBarValuePixels:function(e,t){var i,n,s,r,o,a,c=this.chart,l=this.getMeta(),u=this._getValueScale(),d=u.isHorizontal(),h=c.data.datasets,p=+u.getRightValue(h[e].data[t]),b=u.options.minBarLength,f=u.options.stacked,m=l.stack,g=0;if(f||void 0===f&&void 0!==m)for(i=0;i<e;++i)(n=c.getDatasetMeta(i)).bar&&n.stack===m&&n.controller._getValueScaleId()===u.id&&c.isDatasetVisible(i)&&(s=+u.getRightValue(h[i].data[t]),(p<0&&s<0||p>=0&&s>0)&&(g+=s));return r=u.getPixelForValue(g),a=(o=u.getPixelForValue(g+p))-r,void 0!==b&&Math.abs(a)<b&&(a=b,o=p>=0&&!d||p<0&&d?r-b:r+b),{size:a,base:r,head:o,center:o+a/2}},calculateBarIndexPixels:function(e,t,i){var n=i.scale.options,s="flex"===n.barThickness?function(e,t,i){var n,s=t.pixels,r=s[e],o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null,c=i.categoryPercentage;return null===o&&(o=r-(null===a?t.end-t.start:a-r)),null===a&&(a=r+r-o),n=r-(r-Math.min(o,a))/2*c,{chunk:Math.abs(a-o)/2*c/t.stackCount,ratio:i.barPercentage,start:n}}(t,i,n):function(e,t,i){var n,s,r=i.barThickness,o=t.stackCount,a=t.pixels[e];return ue.isNullOrUndef(r)?(n=t.min*i.categoryPercentage,s=i.barPercentage):(n=r*o,s=1),{chunk:n/o,ratio:s,start:a-n/2}}(t,i,n),r=this.getStackIndex(e,this.getMeta().stack),o=s.start+s.chunk*r+s.chunk/2,a=Math.min(ue.valueOrDefault(n.maxBarThickness,1/0),s.chunk*s.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}},draw:function(){var e=this.chart,t=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),s=i.length,r=0;for(ue.canvas.clipArea(e.ctx,e.chartArea);r<s;++r)isNaN(t.getRightValue(n.data[r]))||i[r].draw();ue.canvas.unclipArea(e.ctx)},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.rectangle,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(i=0,n=d.length;i<n;++i)l[s=d[i]]=Be([a[s],o[s],c[s]],u,t);return l}}),Ve=ue.valueOrDefault,Ue=ue.options.resolve;ae._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": ("+e.xLabel+", "+e.yLabel+", "+t.datasets[e.datasetIndex].data[e.index].r+")"}}}});var He=ke.extend({dataElementType:Fe.Point,update:function(e){var t=this,i=t.getMeta();ue.each(i.data,(function(i,n){t.updateElement(i,n,e)}))},updateElement:function(e,t,i){var n=this,s=n.getMeta(),r=e.custom||{},o=n.getScaleForId(s.xAxisID),a=n.getScaleForId(s.yAxisID),c=n._resolveElementOptions(e,t),l=n.getDataset().data[t],u=n.index,d=i?o.getPixelForDecimal(.5):o.getPixelForValue("object"==typeof l?l:NaN,t,u),h=i?a.getBasePixel():a.getPixelForValue(l,t,u);e._xScale=o,e._yScale=a,e._options=c,e._datasetIndex=u,e._index=t,e._model={backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,hitRadius:c.hitRadius,pointStyle:c.pointStyle,rotation:c.rotation,radius:i?0:c.radius,skip:r.skip||isNaN(d)||isNaN(h),x:d,y:h},e.pivot()},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ve(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Ve(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Ve(i.hoverBorderWidth,i.borderWidth),t.radius=i.radius+i.hoverRadius},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.point,l=o.data[t],u={},d={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,n=h.length;i<n;++i)u[s=h[i]]=Ue([a[s],o[s],c[s]],d,t);return u.radius=Ue([a.radius,l?l.r:void 0,o.radius,c.radius],d,t),u}}),$e=ue.options.resolve,Ge=ue.valueOrDefault;ae._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,n=i.datasets,s=i.labels;if(n.length)for(var r=0;r<n[0].data.length;++r)t.push('<li><span style="background-color:'+n[0].backgroundColor[r]+'"></span>'),s[r]&&t.push(s[r]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(i,n){var s=e.getDatasetMeta(0),r=t.datasets[0],o=s.data[n],a=o&&o.custom||{},c=e.options.elements.arc;return{text:i,fillStyle:$e([a.backgroundColor,r.backgroundColor,c.backgroundColor],void 0,n),strokeStyle:$e([a.borderColor,r.borderColor,c.borderColor],void 0,n),lineWidth:$e([a.borderWidth,r.borderWidth,c.borderWidth],void 0,n),hidden:isNaN(r.data[n])||s.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var i,n,s,r=t.index,o=this.chart;for(i=0,n=(o.data.datasets||[]).length;i<n;++i)(s=o.getDatasetMeta(i)).data[r]&&(s.data[r].hidden=!s.data[r].hidden);o.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var i=t.labels[e.index],n=": "+t.datasets[e.datasetIndex].data[e.index];return ue.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var ze=ke.extend({dataElementType:Fe.Arc,linkScales:ue.noop,getRingIndex:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&++t;return t},update:function(e){var t,i,n=this,s=n.chart,r=s.chartArea,o=s.options,a=r.right-r.left,c=r.bottom-r.top,l=Math.min(a,c),u={x:0,y:0},d=n.getMeta(),h=d.data,p=o.cutoutPercentage,b=o.circumference,f=n._getRingWeight(n.index);if(b<2*Math.PI){var m=o.rotation%(2*Math.PI),g=(m+=2*Math.PI*(m>=Math.PI?-1:m<-Math.PI?1:0))+b,v={x:Math.cos(m),y:Math.sin(m)},w={x:Math.cos(g),y:Math.sin(g)},y=m<=0&&g>=0||m<=2*Math.PI&&2*Math.PI<=g,C=m<=.5*Math.PI&&.5*Math.PI<=g||m<=2.5*Math.PI&&2.5*Math.PI<=g,k=m<=-Math.PI&&-Math.PI<=g||m<=Math.PI&&Math.PI<=g,S=m<=.5*-Math.PI&&.5*-Math.PI<=g||m<=1.5*Math.PI&&1.5*Math.PI<=g,x=p/100,O={x:k?-1:Math.min(v.x*(v.x<0?1:x),w.x*(w.x<0?1:x)),y:S?-1:Math.min(v.y*(v.y<0?1:x),w.y*(w.y<0?1:x))},D={x:y?1:Math.max(v.x*(v.x>0?1:x),w.x*(w.x>0?1:x)),y:C?1:Math.max(v.y*(v.y>0?1:x),w.y*(w.y>0?1:x))},I={width:.5*(D.x-O.x),height:.5*(D.y-O.y)};l=Math.min(a/I.width,c/I.height),u={x:-.5*(D.x+O.x),y:-.5*(D.y+O.y)}}for(t=0,i=h.length;t<i;++t)h[t]._options=n._resolveElementOptions(h[t],t);for(s.borderWidth=n.getMaxBorderWidth(),s.outerRadius=Math.max((l-s.borderWidth)/2,0),s.innerRadius=Math.max(p?s.outerRadius/100*p:0,0),s.radiusLength=(s.outerRadius-s.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),s.offsetX=u.x*s.outerRadius,s.offsetY=u.y*s.outerRadius,d.total=n.calculateTotal(),n.outerRadius=s.outerRadius-s.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-s.radiusLength*f,0),t=0,i=h.length;t<i;++t)n.updateElement(h[t],t,e)},updateElement:function(e,t,i){var n=this,s=n.chart,r=s.chartArea,o=s.options,a=o.animation,c=(r.left+r.right)/2,l=(r.top+r.bottom)/2,u=o.rotation,d=o.rotation,h=n.getDataset(),p=i&&a.animateRotate||e.hidden?0:n.calculateCircumference(h.data[t])*(o.circumference/(2*Math.PI)),b=e._options||{};ue.extend(e,{_datasetIndex:n.index,_index:t,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:c+s.offsetX,y:l+s.offsetY,startAngle:u,endAngle:d,circumference:p,outerRadius:i&&a.animateScale?0:n.outerRadius,innerRadius:i&&a.animateScale?0:n.innerRadius,label:ue.valueAtIndexOrDefault(h.label,t,s.data.labels[t])}});var f=e._model;i&&a.animateRotate||(f.startAngle=0===t?o.rotation:n.getMeta().data[t-1]._model.endAngle,f.endAngle=f.startAngle+f.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),i=this.getMeta(),n=0;return ue.each(i.data,(function(i,s){e=t.data[s],isNaN(e)||i.hidden||(n+=Math.abs(e))})),n},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,i,n,s,r,o,a,c,l=0,u=this.chart;if(!e)for(t=0,i=u.data.datasets.length;t<i;++t)if(u.isDatasetVisible(t)){e=(n=u.getDatasetMeta(t)).data,t!==this.index&&(r=n.controller);break}if(!e)return 0;for(t=0,i=e.length;t<i;++t)s=e[t],"inner"!==(o=r?r._resolveElementOptions(s,t):s._options).borderAlign&&(l=(c=o.hoverBorderWidth)>(l=(a=o.borderWidth)>l?a:l)?c:l);return l},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Ge(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Ge(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Ge(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=this.getDataset(),a=e.custom||{},c=r.options.elements.arc,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=d.length;i<n;++i)l[s=d[i]]=$e([a[s],o[s],c[s]],u,t);return l},_getRingWeightOffset:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t},_getRingWeight:function(e){return Math.max(Ge(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});ae._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var qe=Ye.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ke=ue.valueOrDefault,Ze=ue.options.resolve,Je=ue.canvas._isPointInArea;function Qe(e,t){return Ke(e.showLine,t.showLines)}ae._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var et=ke.extend({datasetElementType:Fe.Line,dataElementType:Fe.Point,update:function(e){var t,i,n=this,s=n.getMeta(),r=s.dataset,o=s.data||[],a=n.getScaleForId(s.yAxisID),c=n.getDataset(),l=Qe(c,n.chart.options);for(l&&(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),r._scale=a,r._datasetIndex=n.index,r._children=o,r._model=n._resolveLineOptions(r),r.pivot()),t=0,i=o.length;t<i;++t)n.updateElement(o[t],t,e);for(l&&0!==r._model.tension&&n.updateBezierControlPoints(),t=0,i=o.length;t<i;++t)o[t].pivot()},updateElement:function(e,t,i){var n,s,r=this,o=r.getMeta(),a=e.custom||{},c=r.getDataset(),l=r.index,u=c.data[t],d=r.getScaleForId(o.yAxisID),h=r.getScaleForId(o.xAxisID),p=o.dataset._model,b=r._resolvePointOptions(e,t);n=h.getPixelForValue("object"==typeof u?u:NaN,t,l),s=i?d.getBasePixel():r.calculatePointY(u,t,l),e._xScale=h,e._yScale=d,e._options=b,e._datasetIndex=l,e._index=t,e._model={x:n,y:s,skip:a.skip||isNaN(n)||isNaN(s),radius:b.radius,pointStyle:b.pointStyle,rotation:b.rotation,backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,tension:Ke(a.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:b.hitRadius}},_resolvePointOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.point,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},h=Object.keys(d);for(i=0,n=h.length;i<n;++i)l[s=h[i]]=Ze([a[s],o[d[s]],o[s],c[s]],u,t);return l},_resolveLineOptions:function(e){var t,i,n,s=this.chart,r=s.data.datasets[this.index],o=e.custom||{},a=s.options,c=a.elements.line,l={},u=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(t=0,i=u.length;t<i;++t)l[n=u[t]]=Ze([o[n],r[n],c[n]]);return l.spanGaps=Ke(r.spanGaps,a.spanGaps),l.tension=Ke(r.lineTension,c.tension),l.steppedLine=Ze([o.steppedLine,r.steppedLine,c.stepped]),l},calculatePointY:function(e,t,i){var n,s,r,o=this.chart,a=this.getMeta(),c=this.getScaleForId(a.yAxisID),l=0,u=0;if(c.options.stacked){for(n=0;n<i;n++)if(s=o.data.datasets[n],"line"===(r=o.getDatasetMeta(n)).type&&r.yAxisID===c.id&&o.isDatasetVisible(n)){var d=Number(c.getRightValue(s.data[t]));d<0?u+=d||0:l+=d||0}var h=Number(c.getRightValue(e));return c.getPixelForValue(h<0?u+h:l+h)}return c.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,i,n,s=this.chart,r=this.getMeta(),o=r.dataset._model,a=s.chartArea,c=r.data||[];function l(e,t,i){return Math.max(Math.min(e,i),t)}if(o.spanGaps&&(c=c.filter((function(e){return!e._model.skip}))),"monotone"===o.cubicInterpolationMode)ue.splineCurveMonotone(c);else for(e=0,t=c.length;e<t;++e)i=c[e]._model,n=ue.splineCurve(ue.previousItem(c,e)._model,i,ue.nextItem(c,e)._model,o.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(s.options.elements.line.capBezierPoints)for(e=0,t=c.length;e<t;++e)Je(i=c[e]._model,a)&&(e>0&&Je(c[e-1]._model,a)&&(i.controlPointPreviousX=l(i.controlPointPreviousX,a.left,a.right),i.controlPointPreviousY=l(i.controlPointPreviousY,a.top,a.bottom)),e<c.length-1&&Je(c[e+1]._model,a)&&(i.controlPointNextX=l(i.controlPointNextX,a.left,a.right),i.controlPointNextY=l(i.controlPointNextY,a.top,a.bottom)))},draw:function(){var e,t=this.chart,i=this.getMeta(),n=i.data||[],s=t.chartArea,r=n.length,o=0;for(Qe(this.getDataset(),t.options)&&(ue.canvas.clipArea(t.ctx,{left:s.left,right:s.right,top:s.top-(e=(i.dataset._model.borderWidth||0)/2),bottom:s.bottom+e}),i.dataset.draw(),ue.canvas.unclipArea(t.ctx));o<r;++o)n[o].draw(s)},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ke(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Ke(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Ke(i.hoverBorderWidth,i.borderWidth),t.radius=Ke(i.hoverRadius,i.radius)}}),tt=ue.options.resolve;ae._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,n=i.datasets,s=i.labels;if(n.length)for(var r=0;r<n[0].data.length;++r)t.push('<li><span style="background-color:'+n[0].backgroundColor[r]+'"></span>'),s[r]&&t.push(s[r]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(i,n){var s=e.getDatasetMeta(0),r=t.datasets[0],o=s.data[n].custom||{},a=e.options.elements.arc;return{text:i,fillStyle:tt([o.backgroundColor,r.backgroundColor,a.backgroundColor],void 0,n),strokeStyle:tt([o.borderColor,r.borderColor,a.borderColor],void 0,n),lineWidth:tt([o.borderWidth,r.borderWidth,a.borderWidth],void 0,n),hidden:isNaN(r.data[n])||s.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var i,n,s,r=t.index,o=this.chart;for(i=0,n=(o.data.datasets||[]).length;i<n;++i)(s=o.getDatasetMeta(i)).data[r].hidden=!s.data[r].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var it=ke.extend({dataElementType:Fe.Arc,linkScales:ue.noop,update:function(e){var t,i,n,s=this,r=s.getDataset(),o=s.getMeta(),a=s.chart.options.startAngle||0,c=s._starts=[],l=s._angles=[],u=o.data;for(s._updateRadius(),o.count=s.countVisibleElements(),t=0,i=r.data.length;t<i;t++)c[t]=a,n=s._computeAngle(t),l[t]=n,a+=n;for(t=0,i=u.length;t<i;++t)u[t]._options=s._resolveElementOptions(u[t],t),s.updateElement(u[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,i=t.chartArea,n=t.options,s=Math.min(i.right-i.left,i.bottom-i.top);t.outerRadius=Math.max(s/2,0),t.innerRadius=Math.max(n.cutoutPercentage?t.outerRadius/100*n.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,i){var n=this,s=n.chart,r=n.getDataset(),o=s.options,a=o.animation,c=s.scale,l=s.data.labels,u=c.xCenter,d=c.yCenter,h=o.startAngle,p=e.hidden?0:c.getDistanceFromCenterForValue(r.data[t]),b=n._starts[t],f=b+(e.hidden?0:n._angles[t]),m=a.animateScale?0:c.getDistanceFromCenterForValue(r.data[t]),g=e._options||{};ue.extend(e,{_datasetIndex:n.index,_index:t,_scale:c,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:u,y:d,innerRadius:0,outerRadius:i?m:p,startAngle:i&&a.animateRotate?h:b,endAngle:i&&a.animateRotate?h:f,label:ue.valueAtIndexOrDefault(l,t,l[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),i=0;return ue.each(t.data,(function(t,n){isNaN(e.data[n])||t.hidden||i++})),i},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor,s=ue.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=s(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=s(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=s(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=this.getDataset(),a=e.custom||{},c=r.options.elements.arc,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=d.length;i<n;++i)l[s=d[i]]=tt([a[s],o[s],c[s]],u,t);return l},_computeAngle:function(e){var t=this,i=this.getMeta().count,n=t.getDataset(),s=t.getMeta();return isNaN(n.data[e])||s.data[e].hidden?0:tt([t.chart.options.elements.arc.angle,2*Math.PI/i],{chart:t.chart,dataIndex:e,dataset:n,datasetIndex:t.index},e)}});ae._set("pie",ue.clone(ae.doughnut)),ae._set("pie",{cutoutPercentage:0});var nt=ze,st=ue.valueOrDefault,rt=ue.options.resolve;ae._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var ot=ke.extend({datasetElementType:Fe.Line,dataElementType:Fe.Point,linkScales:ue.noop,update:function(e){var t,i,n=this,s=n.getMeta(),r=s.dataset,o=s.data||[],a=n.chart.scale,c=n.getDataset();for(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),r._scale=a,r._datasetIndex=n.index,r._children=o,r._loop=!0,r._model=n._resolveLineOptions(r),r.pivot(),t=0,i=o.length;t<i;++t)n.updateElement(o[t],t,e);for(n.updateBezierControlPoints(),t=0,i=o.length;t<i;++t)o[t].pivot()},updateElement:function(e,t,i){var n=this,s=e.custom||{},r=n.getDataset(),o=n.chart.scale,a=o.getPointPositionForValue(t,r.data[t]),c=n._resolvePointOptions(e,t),l=n.getMeta().dataset._model,u=i?o.xCenter:a.x,d=i?o.yCenter:a.y;e._scale=o,e._options=c,e._datasetIndex=n.index,e._index=t,e._model={x:u,y:d,skip:s.skip||isNaN(u)||isNaN(d),radius:c.radius,pointStyle:c.pointStyle,rotation:c.rotation,backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,tension:st(s.tension,l?l.tension:0),hitRadius:c.hitRadius}},_resolvePointOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.point,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},h=Object.keys(d);for(i=0,n=h.length;i<n;++i)l[s=h[i]]=rt([a[s],o[d[s]],o[s],c[s]],u,t);return l},_resolveLineOptions:function(e){var t,i,n,s=this.chart,r=s.data.datasets[this.index],o=e.custom||{},a=s.options.elements.line,c={},l=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(t=0,i=l.length;t<i;++t)c[n=l[t]]=rt([o[n],r[n],a[n]]);return c.tension=st(r.lineTension,a.tension),c},updateBezierControlPoints:function(){var e,t,i,n,s=this.getMeta(),r=this.chart.chartArea,o=s.data||[];function a(e,t,i){return Math.max(Math.min(e,i),t)}for(e=0,t=o.length;e<t;++e)i=o[e]._model,n=ue.splineCurve(ue.previousItem(o,e,!0)._model,i,ue.nextItem(o,e,!0)._model,i.tension),i.controlPointPreviousX=a(n.previous.x,r.left,r.right),i.controlPointPreviousY=a(n.previous.y,r.top,r.bottom),i.controlPointNextX=a(n.next.x,r.left,r.right),i.controlPointNextY=a(n.next.y,r.top,r.bottom)},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=st(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=st(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=st(i.hoverBorderWidth,i.borderWidth),t.radius=st(i.hoverRadius,i.radius)}});ae._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}});var at={bar:Ye,bubble:He,doughnut:ze,horizontalBar:qe,line:et,polarArea:it,pie:nt,radar:ot,scatter:et};function ct(e,t){return e.native?{x:e.x,y:e.y}:ue.getRelativePosition(e,t)}function lt(e,t){var i,n,s,r,o;for(n=0,r=e.data.datasets.length;n<r;++n)if(e.isDatasetVisible(n))for(s=0,o=(i=e.getDatasetMeta(n)).data.length;s<o;++s){var a=i.data[s];a._view.skip||t(a)}}function ut(e,t){var i=[];return lt(e,(function(e){e.inRange(t.x,t.y)&&i.push(e)})),i}function dt(e,t,i,n){var s=Number.POSITIVE_INFINITY,r=[];return lt(e,(function(e){if(!i||e.inRange(t.x,t.y)){var o=e.getCenterPoint(),a=n(t,o);a<s?(r=[e],s=a):a===s&&r.push(e)}})),r}function ht(e){var t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){var s=t?Math.abs(e.x-n.x):0,r=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}function pt(e,t,i){var n=ct(t,e);i.axis=i.axis||"x";var s=ht(i.axis),r=i.intersect?ut(e,n):dt(e,n,!1,s),o=[];return r.length?(e.data.datasets.forEach((function(t,i){if(e.isDatasetVisible(i)){var n=e.getDatasetMeta(i).data[r[0]._index];n&&!n._view.skip&&o.push(n)}})),o):[]}var bt={modes:{single:function(e,t){var i=ct(t,e),n=[];return lt(e,(function(e){if(e.inRange(i.x,i.y))return n.push(e),n})),n.slice(0,1)},label:pt,index:pt,dataset:function(e,t,i){var n=ct(t,e);i.axis=i.axis||"xy";var s=ht(i.axis),r=i.intersect?ut(e,n):dt(e,n,!1,s);return r.length>0&&(r=e.getDatasetMeta(r[0]._datasetIndex).data),r},"x-axis":function(e,t){return pt(e,t,{intersect:!1})},point:function(e,t){return ut(e,ct(t,e))},nearest:function(e,t,i){var n=ct(t,e);i.axis=i.axis||"xy";var s=ht(i.axis);return dt(e,n,i.intersect,s)},x:function(e,t,i){var n=ct(t,e),s=[],r=!1;return lt(e,(function(e){e.inXRange(n.x)&&s.push(e),e.inRange(n.x,n.y)&&(r=!0)})),i.intersect&&!r&&(s=[]),s},y:function(e,t,i){var n=ct(t,e),s=[],r=!1;return lt(e,(function(e){e.inYRange(n.y)&&s.push(e),e.inRange(n.x,n.y)&&(r=!0)})),i.intersect&&!r&&(s=[]),s}}};function ft(e,t){return ue.where(e,(function(e){return e.position===t}))}function mt(e,t){e.forEach((function(e,t){return e._tmpIndex_=t,e})),e.sort((function(e,i){var n=t?i:e,s=t?e:i;return n.weight===s.weight?n._tmpIndex_-s._tmpIndex_:n.weight-s.weight})),e.forEach((function(e){delete e._tmpIndex_}))}function gt(e,t){ue.each(e,(function(e){t[e.position]+=e.isHorizontal()?e.height:e.width}))}ae._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var vt,wt={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure:function(e,t,i){for(var n,s=["fullWidth","position","weight"],r=s.length,o=0;o<r;++o)i.hasOwnProperty(n=s[o])&&(t[n]=i[n])},update:function(e,t,i){if(e){var n=ue.options.toPadding((e.options.layout||{}).padding),s=n.left,r=n.right,o=n.top,a=n.bottom,c=ft(e.boxes,"left"),l=ft(e.boxes,"right"),u=ft(e.boxes,"top"),d=ft(e.boxes,"bottom"),h=ft(e.boxes,"chartArea");mt(c,!0),mt(l,!1),mt(u,!0),mt(d,!1);var p,b=c.concat(l),f=u.concat(d),m=b.concat(f),g=t-s-r,v=i-o-a,w=(t-g/2)/b.length,y=g,C=v,k={top:o,left:s,bottom:a,right:r},S=[];ue.each(m,(function(e){var t,i=e.isHorizontal();i?(t=e.update(e.fullWidth?g:y,v/2),C-=t.height):(t=e.update(w,C),y-=t.width),S.push({horizontal:i,width:t.width,box:e})})),p=function(e){var t=0,i=0,n=0,s=0;return ue.each(e,(function(e){if(e.getPadding){var r=e.getPadding();t=Math.max(t,r.top),i=Math.max(i,r.left),n=Math.max(n,r.bottom),s=Math.max(s,r.right)}})),{top:t,left:i,bottom:n,right:s}}(m),ue.each(b,E),gt(b,k),ue.each(f,E),gt(f,k),ue.each(b,(function(e){var t=ue.findNextWhere(S,(function(t){return t.box===e}));t&&e.update(t.width,C,{left:0,right:0,top:k.top,bottom:k.bottom})})),gt(m,k={top:o,left:s,bottom:a,right:r});var x=Math.max(p.left-k.left,0);k.left+=x,k.right+=Math.max(p.right-k.right,0);var O=Math.max(p.top-k.top,0);k.top+=O,k.bottom+=Math.max(p.bottom-k.bottom,0);var D=i-k.top-k.bottom,I=t-k.left-k.right;I===y&&D===C||(ue.each(b,(function(e){e.height=D})),ue.each(f,(function(e){e.fullWidth||(e.width=I)})),C=D,y=I);var j=s+x,T=o+O;ue.each(c.concat(u),A),j+=y,T+=C,ue.each(l,A),ue.each(d,A),e.chartArea={left:k.left,top:k.top,right:k.left+y,bottom:k.top+C},ue.each(h,(function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(y,C)}))}function E(e){var t=ue.findNextWhere(S,(function(t){return t.box===e}));if(t)if(t.horizontal){var i={left:Math.max(k.left,p.left),right:Math.max(k.right,p.right),top:0,bottom:0};e.update(e.fullWidth?g:y,v/2,i)}else e.update(t.width,C)}function A(e){e.isHorizontal()?(e.left=e.fullWidth?s:k.left,e.right=e.fullWidth?t-r:k.left+y,e.top=T,e.bottom=T+e.height,T=e.bottom):(e.left=j,e.right=j+e.width,e.top=k.top,e.bottom=k.top+C,j=e.right)}}},yt=(vt=Object.freeze({default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&vt.default||vt,Ct=["animationstart","webkitAnimationStart"],kt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function St(e,t){var i=ue.getStyle(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var xt=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(i){}return e}()&&{passive:!0};function Ot(e,t,i){e.addEventListener(t,i,xt)}function Dt(e,t,i){e.removeEventListener(t,i,xt)}function It(e,t,i,n,s){return{type:e,chart:t,native:s||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function jt(e){var t=document.createElement("div");return t.className=e||"",t}var Tt={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){this._loaded||(this._loaded=!0,this.disableCSSInjection||function(e,t){var i=e._style||document.createElement("style");e._style||(e._style=i,t="/* Chart.js */\n"+t,i.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(i)),i.appendChild(document.createTextNode(t))}(this,yt))},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var i=e&&e.getContext&&e.getContext("2d");return this._ensureLoaded(),i&&i.canvas===e?(function(e,t){var i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e.$chartjs={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===s||""===s){var r=St(e,"width");void 0!==r&&(e.width=r)}if(null===n||""===n)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var o=St(e,"height");void 0!==r&&(e.height=o)}}(e,t),i):null},releaseContext:function(e){var t=e.canvas;if(t.$chartjs){var i=t.$chartjs.initial;["height","width"].forEach((function(e){var n=i[e];ue.isNullOrUndef(n)?t.removeAttribute(e):t.setAttribute(e,n)})),ue.each(i.style||{},(function(e,i){t.style[i]=e})),t.width=t.width,delete t.$chartjs}},addEventListener:function(e,t,i){var n=e.canvas;if("resize"!==t){var s=i.$chartjs||(i.$chartjs={});Ot(n,t,(s.proxies||(s.proxies={}))[e.id+"_"+t]=function(t){i(function(e,t){var i=kt[e.type]||e.type,n=ue.getRelativePosition(e,t);return It(i,t,n.x,n.y,e)}(t,e))})}else!function(e,t,i){var n,s,r,o,a=e.$chartjs||(e.$chartjs={}),c=a.resizer=function(e){var t=jt("chartjs-size-monitor"),i=jt("chartjs-size-monitor-expand"),n=jt("chartjs-size-monitor-shrink");i.appendChild(jt()),n.appendChild(jt()),t.appendChild(i),t.appendChild(n),t._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var s=function(){t._reset(),e()};return Ot(i,"scroll",s.bind(i,"expand")),Ot(n,"scroll",s.bind(n,"shrink")),t}((n=function(){if(a.resizer){var n=i.options.maintainAspectRatio&&e.parentNode,s=n?n.clientWidth:0;t(It("resize",i)),n&&n.clientWidth<s&&i.canvas&&t(It("resize",i))}},r=!1,o=[],function(){o=Array.prototype.slice.call(arguments),s=s||this,r||(r=!0,ue.requestAnimFrame.call(window,(function(){r=!1,n.apply(s,o)})))}));!function(e,t){var i=e.$chartjs||(e.$chartjs={}),n=i.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};ue.each(Ct,(function(t){Ot(e,t,n)})),i.reflow=!!e.offsetParent,e.classList.add("chartjs-render-monitor")}(e,(function(){if(a.resizer){var t=e.parentNode;t&&t!==c.parentNode&&t.insertBefore(c,t.firstChild),c._reset()}}))}(n,i,e)},removeEventListener:function(e,t,i){var n,s,r,o=e.canvas;if("resize"!==t){var a=((i.$chartjs||{}).proxies||{})[e.id+"_"+t];a&&Dt(o,t,a)}else r=(s=(n=o).$chartjs||{}).resizer,delete s.resizer,function(e){var t=e.$chartjs||{},i=t.renderProxy;i&&(ue.each(Ct,(function(t){Dt(e,t,i)})),delete t.renderProxy),e.classList.remove("chartjs-render-monitor")}(n),r&&r.parentNode&&r.parentNode.removeChild(r)}};ue.addEvent=Ot,ue.removeEvent=Dt;var Et=ue.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Tt._enabled?Tt:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}});ae._set("global",{plugins:{}});var At={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,i){var n,s,r,o,a,c=this.descriptors(e),l=c.length;for(n=0;n<l;++n)if("function"==typeof(a=(r=(s=c[n]).plugin)[t])&&((o=[e].concat(i||[])).push(s.options),!1===a.apply(r,o)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var i=[],n=[],s=e&&e.config||{},r=s.options&&s.options.plugins||{};return this._plugins.concat(s.plugins||[]).forEach((function(e){if(-1===i.indexOf(e)){var t=e.id,s=r[t];!1!==s&&(!0===s&&(s=ue.clone(ae.global.plugins[t])),i.push(e),n.push({plugin:e,options:s||{}}))}})),t.descriptors=n,t.id=this._cacheId,n},_invalidate:function(e){delete e.$plugins}},_t={constructors:{},defaults:{},registerScaleType:function(e,t,i){this.constructors[e]=t,this.defaults[e]=ue.clone(i)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?ue.merge({},[ae.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=ue.extend(this.defaults[e],t))},addScalesToLayout:function(e){ue.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,wt.addBox(e,t)}))}},Wt=ue.valueOrDefault;ae._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ue.noop,title:function(e,t){var i="",n=t.labels,s=n?n.length:0;if(e.length>0){var r=e[0];r.label?i=r.label:r.xLabel?i=r.xLabel:s>0&&r.index<s&&(i=n[r.index])}return i},afterTitle:ue.noop,beforeBody:ue.noop,beforeLabel:ue.noop,label:function(e,t){var i=t.datasets[e.datasetIndex].label||"";return i&&(i+=": "),ue.isNullOrUndef(e.value)?i+=e.yLabel:i+=e.value,i},labelColor:function(e,t){var i=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ue.noop,afterBody:ue.noop,beforeFooter:ue.noop,footer:ue.noop,afterFooter:ue.noop}}});var Rt={average:function(e){if(!e.length)return!1;var t,i,n=0,s=0,r=0;for(t=0,i=e.length;t<i;++t){var o=e[t];if(o&&o.hasValue()){var a=o.tooltipPosition();n+=a.x,s+=a.y,++r}}return{x:n/r,y:s/r}},nearest:function(e,t){var i,n,s,r=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){var c=e[i];if(c&&c.hasValue()){var l=c.getCenterPoint(),u=ue.distanceBetweenPoints(t,l);u<a&&(a=u,s=c)}}if(s){var d=s.tooltipPosition();r=d.x,o=d.y}return{x:r,y:o}}};function Pt(e,t){return t&&(ue.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Mt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ft(e){var t=ae.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Wt(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Wt(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Wt(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Wt(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Wt(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Wt(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Wt(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Wt(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Wt(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Xt(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Lt(e){return Pt([],Mt(e))}var Nt=be.extend({initialize:function(){this._model=Ft(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,i=t.callbacks,n=i.beforeTitle.apply(e,arguments),s=i.title.apply(e,arguments),r=i.afterTitle.apply(e,arguments),o=[];return o=Pt(o,Mt(n)),o=Pt(o,Mt(s)),Pt(o,Mt(r))},getBeforeBody:function(){return Lt(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var i=this,n=i._options.callbacks,s=[];return ue.each(e,(function(e){var r={before:[],lines:[],after:[]};Pt(r.before,Mt(n.beforeLabel.call(i,e,t))),Pt(r.lines,n.label.call(i,e,t)),Pt(r.after,Mt(n.afterLabel.call(i,e,t))),s.push(r)})),s},getAfterBody:function(){return Lt(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,i=t.beforeFooter.apply(e,arguments),n=t.footer.apply(e,arguments),s=t.afterFooter.apply(e,arguments),r=[];return r=Pt(r,Mt(i)),r=Pt(r,Mt(n)),Pt(r,Mt(s))},update:function(e){var t,i,n,s,r,o,a,c,l,u,d=this,h=d._options,p=d._model,b=d._model=Ft(h),f=d._active,m=d._data,g={xAlign:p.xAlign,yAlign:p.yAlign},v={x:p.x,y:p.y},w={width:p.width,height:p.height},y={x:p.caretX,y:p.caretY};if(f.length){b.opacity=1;var C=[],k=[];y=Rt[h.position].call(d,f,d._eventPosition);var S=[];for(t=0,i=f.length;t<i;++t)S.push((s=void 0,r=void 0,c=void 0,l=void 0,u=void 0,s=(n=f[t])._xScale,r=n._yScale||n._scale,o=n._index,l=(c=n._chart.getDatasetMeta(a=n._datasetIndex).controller)._getIndexScale(),u=c._getValueScale(),{xLabel:s?s.getLabelForIndex(o,a):"",yLabel:r?r.getLabelForIndex(o,a):"",label:l?""+l.getLabelForIndex(o,a):"",value:u?""+u.getLabelForIndex(o,a):"",index:o,datasetIndex:a,x:n._model.x,y:n._model.y}));h.filter&&(S=S.filter((function(e){return h.filter(e,m)}))),h.itemSort&&(S=S.sort((function(e,t){return h.itemSort(e,t,m)}))),ue.each(S,(function(e){C.push(h.callbacks.labelColor.call(d,e,d._chart)),k.push(h.callbacks.labelTextColor.call(d,e,d._chart))})),b.title=d.getTitle(S,m),b.beforeBody=d.getBeforeBody(S,m),b.body=d.getBody(S,m),b.afterBody=d.getAfterBody(S,m),b.footer=d.getFooter(S,m),b.x=y.x,b.y=y.y,b.caretPadding=h.caretPadding,b.labelColors=C,b.labelTextColors=k,b.dataPoints=S,w=function(e,t){var i=e._chart.ctx,n=2*t.yPadding,s=0,r=t.body,o=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0),a=t.title.length,c=t.footer.length,l=t.titleFontSize,u=t.bodyFontSize,d=t.footerFontSize;n+=a*l,n+=a?(a-1)*t.titleSpacing:0,n+=a?t.titleMarginBottom:0,n+=(o+=t.beforeBody.length+t.afterBody.length)*u,n+=o?(o-1)*t.bodySpacing:0,n+=c?t.footerMarginTop:0,n+=c*d,n+=c?(c-1)*t.footerSpacing:0;var h=0,p=function(e){s=Math.max(s,i.measureText(e).width+h)};return i.font=ue.fontString(l,t._titleFontStyle,t._titleFontFamily),ue.each(t.title,p),i.font=ue.fontString(u,t._bodyFontStyle,t._bodyFontFamily),ue.each(t.beforeBody.concat(t.afterBody),p),h=t.displayColors?u+2:0,ue.each(r,(function(e){ue.each(e.before,p),ue.each(e.lines,p),ue.each(e.after,p)})),h=0,i.font=ue.fontString(d,t._footerFontStyle,t._footerFontFamily),ue.each(t.footer,p),{width:s+=2*t.xPadding,height:n}}(this,b),v=function(e,t,i,n){var s=e.x,r=e.y,o=e.caretPadding,a=i.xAlign,c=i.yAlign,l=e.caretSize+o,u=e.cornerRadius+o;return"right"===a?s-=t.width:"center"===a&&((s-=t.width/2)+t.width>n.width&&(s=n.width-t.width),s<0&&(s=0)),"top"===c?r+=l:r-="bottom"===c?t.height+l:t.height/2,"center"===c?"left"===a?s+=l:"right"===a&&(s-=l):"left"===a?s-=u:"right"===a&&(s+=u),{x:s,y:r}}(b,w,g=function(e,t){var i,n,s,r,o,a=e._model,c=e._chart,l=e._chart.chartArea,u="center",d="center";a.y<t.height?d="top":a.y>c.height-t.height&&(d="bottom");var h=(l.left+l.right)/2,p=(l.top+l.bottom)/2;"center"===d?(i=function(e){return e<=h},n=function(e){return e>h}):(i=function(e){return e<=t.width/2},n=function(e){return e>=c.width-t.width/2}),s=function(e){return e+t.width+a.caretSize+a.caretPadding>c.width},r=function(e){return e-t.width-a.caretSize-a.caretPadding<0},o=function(e){return e<=p?"top":"bottom"},i(a.x)?(u="left",s(a.x)&&(u="center",d=o(a.y))):n(a.x)&&(u="right",r(a.x)&&(u="center",d=o(a.y)));var b=e._options;return{xAlign:b.xAlign?b.xAlign:u,yAlign:b.yAlign?b.yAlign:d}}(this,w),d._chart)}else b.opacity=0;return b.xAlign=g.xAlign,b.yAlign=g.yAlign,b.x=v.x,b.y=v.y,b.width=w.width,b.height=w.height,b.caretX=y.x,b.caretY=y.y,d._model=b,e&&h.custom&&h.custom.call(d,b),d},drawCaret:function(e,t){var i=this._chart.ctx,n=this.getCaretPosition(e,t,this._view);i.lineTo(n.x1,n.y1),i.lineTo(n.x2,n.y2),i.lineTo(n.x3,n.y3)},getCaretPosition:function(e,t,i){var n,s,r,o,a,c,l=i.caretSize,u=i.cornerRadius,d=i.xAlign,h=i.yAlign,p=e.x,b=e.y,f=t.width,m=t.height;if("center"===h)a=b+m/2,"left"===d?(s=(n=p)-l,r=n,o=a+l,c=a-l):(s=(n=p+f)+l,r=n,o=a-l,c=a+l);else if("left"===d?(n=(s=p+u+l)-l,r=s+l):"right"===d?(n=(s=p+f-u-l)-l,r=s+l):(n=(s=i.caretX)-l,r=s+l),"top"===h)a=(o=b)-l,c=o;else{a=(o=b+m)+l,c=o;var g=r;r=n,n=g}return{x1:n,x2:s,x3:r,y1:o,y2:a,y3:c}},drawTitle:function(e,t,i){var n=t.title;if(n.length){e.x=Xt(t,t._titleAlign),i.textAlign=t._titleAlign,i.textBaseline="top";var s,r,o=t.titleFontSize,a=t.titleSpacing;for(i.fillStyle=t.titleFontColor,i.font=ue.fontString(o,t._titleFontStyle,t._titleFontFamily),s=0,r=n.length;s<r;++s)i.fillText(n[s],e.x,e.y),e.y+=o+a,s+1===n.length&&(e.y+=t.titleMarginBottom-a)}},drawBody:function(e,t,i){var n,s=t.bodyFontSize,r=t.bodySpacing,o=t._bodyAlign,a=t.body,c=t.displayColors,l=t.labelColors,u=0,d=c?Xt(t,"left"):0;i.textAlign=o,i.textBaseline="top",i.font=ue.fontString(s,t._bodyFontStyle,t._bodyFontFamily),e.x=Xt(t,o);var h=function(t){i.fillText(t,e.x+u,e.y),e.y+=s+r};i.fillStyle=t.bodyFontColor,ue.each(t.beforeBody,h),u=c&&"right"!==o?"center"===o?s/2+1:s+2:0,ue.each(a,(function(r,o){i.fillStyle=n=t.labelTextColors[o],ue.each(r.before,h),ue.each(r.lines,(function(r){c&&(i.fillStyle=t.legendColorBackground,i.fillRect(d,e.y,s,s),i.lineWidth=1,i.strokeStyle=l[o].borderColor,i.strokeRect(d,e.y,s,s),i.fillStyle=l[o].backgroundColor,i.fillRect(d+1,e.y+1,s-2,s-2),i.fillStyle=n),h(r)})),ue.each(r.after,h)})),u=0,ue.each(t.afterBody,h),e.y-=r},drawFooter:function(e,t,i){var n=t.footer;n.length&&(e.x=Xt(t,t._footerAlign),e.y+=t.footerMarginTop,i.textAlign=t._footerAlign,i.textBaseline="top",i.fillStyle=t.footerFontColor,i.font=ue.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),ue.each(n,(function(n){i.fillText(n,e.x,e.y),e.y+=t.footerFontSize+t.footerSpacing})))},drawBackground:function(e,t,i,n){i.fillStyle=t.backgroundColor,i.strokeStyle=t.borderColor,i.lineWidth=t.borderWidth;var s=t.xAlign,r=t.yAlign,o=e.x,a=e.y,c=n.width,l=n.height,u=t.cornerRadius;i.beginPath(),i.moveTo(o+u,a),"top"===r&&this.drawCaret(e,n),i.lineTo(o+c-u,a),i.quadraticCurveTo(o+c,a,o+c,a+u),"center"===r&&"right"===s&&this.drawCaret(e,n),i.lineTo(o+c,a+l-u),i.quadraticCurveTo(o+c,a+l,o+c-u,a+l),"bottom"===r&&this.drawCaret(e,n),i.lineTo(o+u,a+l),i.quadraticCurveTo(o,a+l,o,a+l-u),"center"===r&&"left"===s&&this.drawCaret(e,n),i.lineTo(o,a+u),i.quadraticCurveTo(o,a,o+u,a),i.closePath(),i.fill(),t.borderWidth>0&&i.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var i={width:t.width,height:t.height},n={x:t.x,y:t.y},s=Math.abs(t.opacity<.001)?0:t.opacity;this._options.enabled&&(t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length)&&(e.save(),e.globalAlpha=s,this.drawBackground(n,t,e,i),n.y+=t.yPadding,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),e.restore())}},handleEvent:function(e){var t,i=this,n=i._options;return i._lastActive=i._lastActive||[],i._active="mouseout"===e.type?[]:i._chart.getElementsAtEventForMode(e,n.mode,n),(t=!ue.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:e.x,y:e.y},i.update(!0),i.pivot())),t}});Nt.positioners=Rt;var Bt=ue.valueOrDefault;function Yt(){return ue.merge({},[].slice.call(arguments),{merger:function(e,t,i,n){if("xAxes"===e||"yAxes"===e){var s,r,o,a=i[e].length;for(t[e]||(t[e]=[]),s=0;s<a;++s)r=Bt((o=i[e][s]).type,"xAxes"===e?"category":"linear"),s>=t[e].length&&t[e].push({}),ue.merge(t[e][s],!t[e][s].type||o.type&&o.type!==t[e][s].type?[_t.getScaleDefaults(r),o]:o)}else ue._merger(e,t,i,n)}})}function Vt(){return ue.merge({},[].slice.call(arguments),{merger:function(e,t,i,n){var s=t[e]||{},r=i[e];"scales"===e?t[e]=Yt(s,r):"scale"===e?t[e]=ue.merge(s,[_t.getScaleDefaults(r.type),r]):ue._merger(e,t,i,n)}})}function Ut(e){var t=e.options;ue.each(e.scales,(function(t){wt.removeBox(e,t)})),t=Vt(ae.global,ae[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Ht(e){return"top"===e||"bottom"===e}ae._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var $t=function(e,t){return this.construct(e,t),this};ue.extend($t.prototype,{construct:function(e,t){var i=this;t=function(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Vt(ae.global,ae[e.type],e.options||{}),e}(t);var n=Et.acquireContext(e,t),s=n&&n.canvas,r=s&&s.height,o=s&&s.width;i.id=ue.uid(),i.ctx=n,i.canvas=s,i.config=t,i.width=o,i.height=r,i.aspectRatio=r?o/r:null,i.options=t.options,i._bufferedRender=!1,i.chart=i,i.controller=i,$t.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(e){i.config.data=e}}),n&&s?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return At.notify(e,"beforeInit"),ue.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.initToolTip(),At.notify(e,"afterInit"),e},clear:function(){return ue.canvas.clear(this),this},stop:function(){return ge.cancelAnimation(this),this},resize:function(e){var t=this,i=t.options,n=t.canvas,s=i.maintainAspectRatio&&t.aspectRatio||null,r=Math.max(0,Math.floor(ue.getMaximumWidth(n))),o=Math.max(0,Math.floor(s?r/s:ue.getMaximumHeight(n)));if((t.width!==r||t.height!==o)&&(n.width=t.width=r,n.height=t.height=o,n.style.width=r+"px",n.style.height=o+"px",ue.retinaScale(t,i.devicePixelRatio),!e)){var a={width:r,height:o};At.notify(t,"resize",[a]),i.onResize&&i.onResize(t,a),t.stop(),t.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},i=e.scale;ue.each(t.xAxes,(function(e,t){e.id=e.id||"x-axis-"+t})),ue.each(t.yAxes,(function(e,t){e.id=e.id||"y-axis-"+t})),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,i=e.scales||{},n=[],s=Object.keys(i).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(n=n.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&n.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ue.each(n,(function(t){var n=t.options,r=n.id,o=Bt(n.type,t.dtype);Ht(n.position)!==Ht(t.dposition)&&(n.position=t.dposition),s[r]=!0;var a=null;if(r in i&&i[r].type===o)(a=i[r]).options=n,a.ctx=e.ctx,a.chart=e;else{var c=_t.getScaleConstructor(o);if(!c)return;a=new c({id:r,type:o,options:n,ctx:e.ctx,chart:e}),i[a.id]=a}a.mergeTicksOptions(),t.isDefault&&(e.scale=a)})),ue.each(s,(function(e,t){e||delete i[t]})),e.scales=i,_t.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e=this,t=[];return ue.each(e.data.datasets,(function(i,n){var s=e.getDatasetMeta(n),r=i.type||e.config.type;if(s.type&&s.type!==r&&(e.destroyDatasetMeta(n),s=e.getDatasetMeta(n)),s.type=r,s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{var o=at[s.type];if(void 0===o)throw new Error('"'+s.type+'" is not a chart type.');s.controller=new o(e,n),t.push(s.controller)}}),e),t},resetElements:function(){var e=this;ue.each(e.data.datasets,(function(t,i){e.getDatasetMeta(i).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),Ut(t),At._invalidate(t),!1!==At.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var i=t.buildOrUpdateControllers();ue.each(t.data.datasets,(function(e,i){t.getDatasetMeta(i).controller.buildOrUpdateElements()}),t),t.updateLayout(),t.options.animation&&t.options.animation.duration&&ue.each(i,(function(e){e.reset()})),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],At.notify(t,"afterUpdate"),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){!1!==At.notify(this,"beforeLayout")&&(wt.update(this,this.width,this.height),At.notify(this,"afterScaleUpdate"),At.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==At.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);At.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),i={meta:t,index:e};!1!==At.notify(this,"beforeDatasetUpdate",[i])&&(t.controller.update(),At.notify(this,"afterDatasetUpdate",[i]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var i=t.options.animation,n=Bt(e.duration,i&&i.duration),s=e.lazy;if(!1!==At.notify(t,"beforeRender")){var r=function(e){At.notify(t,"afterRender"),ue.callback(i&&i.onComplete,[e],t)};if(i&&n){var o=new me({numSteps:n/16.66,easing:e.easing||i.easing,render:function(e,t){var i=t.currentStep,n=i/t.numSteps;e.draw((0,ue.easing.effects[t.easing])(n),n,i)},onAnimationProgress:i.onProgress,onAnimationComplete:r});ge.addAnimation(t,o,n,s)}else t.draw(),r(new me({numSteps:0,chart:t}));return t}},draw:function(e){var t=this;t.clear(),ue.isNullOrUndef(e)&&(e=1),t.transition(e),t.width<=0||t.height<=0||!1!==At.notify(t,"beforeDraw",[e])&&(ue.each(t.boxes,(function(e){e.draw(t.chartArea)}),t),t.drawDatasets(e),t._drawTooltip(e),At.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=0,i=(this.data.datasets||[]).length;t<i;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(!1!==At.notify(t,"beforeDatasetsDraw",[e])){for(var i=(t.data.datasets||[]).length-1;i>=0;--i)t.isDatasetVisible(i)&&t.drawDataset(i,e);At.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var i=this.getDatasetMeta(e),n={meta:i,index:e,easingValue:t};!1!==At.notify(this,"beforeDatasetDraw",[n])&&(i.controller.draw(t),At.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,i={tooltip:t,easingValue:e};!1!==At.notify(this,"beforeTooltipDraw",[i])&&(t.draw(),At.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(e){return bt.modes.single(this,e)},getElementsAtEvent:function(e){return bt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return bt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,i){var n=bt.modes[t];return"function"==typeof n?n(this,e,i):[]},getDatasetAtEvent:function(e){return bt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var i=t._meta[this.id];return i||(i=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var e=0,t=0,i=this.data.datasets.length;t<i;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,i=this.data.datasets[e],n=i._meta&&i._meta[t];n&&(n.controller.destroy(),delete i._meta[t])},destroy:function(){var e,t,i=this,n=i.canvas;for(i.stop(),e=0,t=i.data.datasets.length;e<t;++e)i.destroyDatasetMeta(e);n&&(i.unbindEvents(),ue.canvas.clear(i),Et.releaseContext(i.ctx),i.canvas=null,i.ctx=null),At.notify(i,"destroy"),delete $t.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Nt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},i=function(){e.eventHandler.apply(e,arguments)};ue.each(e.options.events,(function(n){Et.addEventListener(e,n,i),t[n]=i})),e.options.responsive&&(i=function(){e.resize()},Et.addEventListener(e,"resize",i),t.resize=i)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,ue.each(t,(function(t,i){Et.removeEventListener(e,i,t)})))},updateHoverStyle:function(e,t,i){var n,s,r,o=i?"setHoverStyle":"removeHoverStyle";for(s=0,r=e.length;s<r;++s)(n=e[s])&&this.getDatasetMeta(n._datasetIndex).controller[o](n)},eventHandler:function(e){var t=this,i=t.tooltip;if(!1!==At.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var n=t.handleEvent(e);i&&(n=i._start?i.handleEvent(e):n|i.handleEvent(e)),At.notify(t,"afterEvent",[e]);var s=t._bufferedRequest;return s?t.render(s):n&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,i=this,n=i.options||{},s=n.hover;return i.lastActive=i.lastActive||[],i.active="mouseout"===e.type?[]:i.getElementsAtEventForMode(e,s.mode,s),ue.callback(n.onHover||n.hover.onHover,[e.native,i.active],i),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(i,e.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,s.mode,!1),i.active.length&&s.mode&&i.updateHoverStyle(i.active,s.mode,!0),t=!ue.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,t}}),$t.instances={};var Gt=$t;function zt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function qt(e){this.options=e||{}}$t.Controller=$t,$t.types={},ue.configMerge=Vt,ue.scaleMerge=Yt,ue.extend(qt.prototype,{formats:zt,parse:zt,format:zt,add:zt,diff:zt,startOf:zt,endOf:zt,_create:function(e){return e}}),qt.override=function(e){ue.extend(qt.prototype,e)};var Kt={_date:qt},Zt={formatters:{values:function(e){return ue.isArray(e)?e:""+e},linear:function(e,t,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));var s=ue.log10(Math.abs(n)),r="";if(0!==e)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var o=ue.log10(Math.abs(e));r=e.toExponential(Math.floor(o)-Math.floor(s))}else{var a=-1*Math.floor(s);a=Math.max(Math.min(a,20),0),r=e.toFixed(a)}else r="0";return r},logarithmic:function(e,t,i){var n=e/Math.pow(10,Math.floor(ue.log10(e)));return 0===e?"0":1===n||2===n||5===n||0===t||t===i.length-1?e.toExponential():""}}},Jt=ue.valueOrDefault,Qt=ue.valueAtIndexOrDefault;function ei(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(e[t].label);return n}function ti(e,t,i){return ue.isArray(t)?ue.longestText(e,i,t):e.measureText(t).width}ae._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Zt.formatters.values,minor:{},major:{}}});var ii=be.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;for(var t in!1===e.minor&&(e.minor={display:!1}),!1===e.major&&(e.major={display:!1}),e)"major"!==t&&"minor"!==t&&(void 0===e.minor[t]&&(e.minor[t]=e[t]),void 0===e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){ue.callback(this.options.beforeUpdate,[this])},update:function(e,t,i){var n,s,r,o,a,c,l=this;for(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=ue.extend({left:0,right:0,top:0,bottom:0},i),l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),a=l.buildTicks()||[],a=l.afterBuildTicks(a)||a,l.beforeTickToLabelConversion(),r=l.convertTicksToLabels(a)||l.ticks,l.afterTickToLabelConversion(),l.ticks=r,n=0,s=r.length;n<s;++n)o=r[n],(c=a[n])?c.label=o:a.push(c={label:o,major:!1});return l._ticks=a,l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l.afterUpdate(),l.minSize},afterUpdate:function(){ue.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ue.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){ue.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ue.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ue.noop,afterDataLimits:function(){ue.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ue.callback(this.options.beforeBuildTicks,[this])},buildTicks:ue.noop,afterBuildTicks:function(e){var t=this;return ue.isArray(e)&&e.length?ue.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=ue.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){ue.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){ue.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ue.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,i=e.options.ticks,n=ei(e._ticks),s=ue.options._parseFont(i);t.font=s.string;var r=i.minRotation||0;if(n.length&&e.options.display&&e.isHorizontal())for(var o,a=ue.longestText(t,s.string,n,e.longestTextCache),c=a,l=e.getPixelForTick(1)-e.getPixelForTick(0)-6;c>l&&r<i.maxRotation;){var u=ue.toRadians(r);if(o=Math.cos(u),Math.sin(u)*a>e.maxHeight){r--;break}r++,c=o*a}e.labelRotation=r},afterCalculateTickRotation:function(){ue.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ue.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},i=ei(e._ticks),n=e.options,s=n.ticks,r=n.scaleLabel,o=n.gridLines,a=e._isVisible(),c=n.position,l=e.isHorizontal(),u=ue.options._parseFont,d=u(s),h=n.gridLines.tickMarkLength;if(t.width=l?e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:a&&o.drawTicks?h:0,t.height=l?a&&o.drawTicks?h:0:e.maxHeight,r.display&&a){var p=u(r),b=ue.options.toPadding(r.padding),f=p.lineHeight+b.height;l?t.height+=f:t.width+=f}if(s.display&&a){var m=ue.longestText(e.ctx,d.string,i,e.longestTextCache),g=ue.numberOfLabelLines(i),v=.5*d.size,w=e.options.ticks.padding;if(e._maxLabelLines=g,e.longestLabelWidth=m,l){var y=ue.toRadians(e.labelRotation),C=Math.cos(y),k=Math.sin(y);t.height=Math.min(e.maxHeight,t.height+(k*m+d.lineHeight*g+v)+w),e.ctx.font=d.string;var S,x,O=ti(e.ctx,i[0],d.string),D=ti(e.ctx,i[i.length-1],d.string),I=e.getPixelForTick(0)-e.left,j=e.right-e.getPixelForTick(i.length-1);0!==e.labelRotation?(S="bottom"===c?C*O:C*v,x="bottom"===c?C*v:C*D):(S=O/2,x=D/2),e.paddingLeft=Math.max(S-I,0)+3,e.paddingRight=Math.max(x-j,0)+3}else s.mirror?m=0:m+=w+v,t.width=Math.min(e.maxWidth,t.width+m),e.paddingTop=d.size/2,e.paddingBottom=d.size/2}e.handleMargins(),e.width=t.width,e.height=t.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){ue.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(ue.isNullOrUndef(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:ue.noop,getPixelForValue:ue.noop,getValueForPixel:ue.noop,getPixelForTick:function(e){var t=this,i=t.options.offset;if(t.isHorizontal()){var n=(t.width-(t.paddingLeft+t.paddingRight))/Math.max(t._ticks.length-(i?0:1),1),s=n*e+t.paddingLeft;return i&&(s+=n/2),t.left+s+(t.isFullWidth()?t.margins.left:0)}return t.top+e*((t.height-(t.paddingTop+t.paddingBottom))/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;return t.isHorizontal()?t.left+((t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft)+(t.isFullWidth()?t.margins.left:0):t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,i,n=this,s=n.isHorizontal(),r=e.length,o=!1,a=n.options.ticks.minor.maxTicksLimit,c=n._tickSize()*(r-1),l=s?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.PaddingBottom),u=[];for(c>l&&(o=1+Math.floor(c/l)),r>a&&(o=Math.max(o,1+Math.floor(r/a))),t=0;t<r;t++)i=e[t],o>1&&t%o>0&&delete i.label,u.push(i);return u},_tickSize:function(){var e=this,t=e.isHorizontal(),i=e.options.ticks.minor,n=ue.toRadians(e.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=i.autoSkipPadding||0,a=e.longestLabelWidth+o||0,c=ue.options._parseFont(i),l=e._maxLabelLines*c.lineHeight+o||0;return t?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r},_isVisible:function(){var e,t,i,n=this.chart,s=this.options.display;if("auto"!==s)return!!s;for(e=0,t=n.data.datasets.length;e<t;++e)if(n.isDatasetVisible(e)&&((i=n.getDatasetMeta(e)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},draw:function(e){var t=this,i=t.options;if(t._isVisible()){var n,s,r,o=t.chart,a=t.ctx,c=ae.global.defaultFontColor,l=i.ticks.minor,u=i.ticks.major||l,d=i.gridLines,h=i.scaleLabel,p=i.position,b=0!==t.labelRotation,f=l.mirror,m=t.isHorizontal(),g=ue.options._parseFont,v=l.display&&l.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),w=Jt(l.fontColor,c),y=g(l),C=y.lineHeight,k=Jt(u.fontColor,c),S=g(u),x=l.padding,O=l.labelOffset,D=d.drawTicks?d.tickMarkLength:0,I=Jt(h.fontColor,c),j=g(h),T=ue.options.toPadding(h.padding),E=ue.toRadians(t.labelRotation),A=[],_=d.drawBorder?Qt(d.lineWidth,0,0):0,W=ue._alignPixel;if("top"===p?(n=W(o,t.bottom,_),s=t.bottom-D,r=n-_/2):"bottom"===p?(n=W(o,t.top,_),s=n+_/2,r=t.top+D):"left"===p?(n=W(o,t.right,_),s=t.right-D,r=n-_/2):(n=W(o,t.left,_),s=n+_/2,r=t.left+D),ue.each(v,(function(n,a){if(!ue.isNullOrUndef(n.label)){var c,l,u,h,g,v,w,y,k,S,I,j,T,R,P,M,F=n.label;a===t.zeroLineIndex&&i.offset===d.offsetGridLines?(c=d.zeroLineWidth,l=d.zeroLineColor,u=d.zeroLineBorderDash||[],h=d.zeroLineBorderDashOffset||0):(c=Qt(d.lineWidth,a),l=Qt(d.color,a),u=d.borderDash||[],h=d.borderDashOffset||0);var X=ue.isArray(F)?F.length:1,L=function(e,t,i){var n=e.getPixelForTick(t);return i&&(1===e.getTicks().length?n-=e.isHorizontal()?Math.max(n-e.left,e.right-n):Math.max(n-e.top,e.bottom-n):n-=0===t?(e.getPixelForTick(1)-n)/2:(n-e.getPixelForTick(t-1))/2),n}(t,a,d.offsetGridLines);if(m){var N=D+x;L<t.left-1e-7&&(l="rgba(0,0,0,0)"),g=w=k=I=W(o,L,c),v=s,y=r,T=t.getPixelForTick(a)+O,"top"===p?(S=W(o,e.top,_)+_/2,j=e.bottom,P=((b?1:.5)-X)*C,M=b?"left":"center",R=t.bottom-N):(S=e.top,j=W(o,e.bottom,_)-_/2,P=(b?0:.5)*C,M=b?"right":"center",R=t.top+N)}else{var B=(f?0:D)+x;L<t.top-1e-7&&(l="rgba(0,0,0,0)"),g=s,w=r,v=y=S=j=W(o,L,c),R=t.getPixelForTick(a)+O,P=(1-X)*C/2,"left"===p?(k=W(o,e.left,_)+_/2,I=e.right,M=f?"left":"right",T=t.right-B):(k=e.left,I=W(o,e.right,_)-_/2,M=f?"right":"left",T=t.left+B)}A.push({tx1:g,ty1:v,tx2:w,ty2:y,x1:k,y1:S,x2:I,y2:j,labelX:T,labelY:R,glWidth:c,glColor:l,glBorderDash:u,glBorderDashOffset:h,rotation:-1*E,label:F,major:n.major,textOffset:P,textAlign:M})}})),ue.each(A,(function(e){var t=e.glWidth,i=e.glColor;if(d.display&&t&&i&&(a.save(),a.lineWidth=t,a.strokeStyle=i,a.setLineDash&&(a.setLineDash(e.glBorderDash),a.lineDashOffset=e.glBorderDashOffset),a.beginPath(),d.drawTicks&&(a.moveTo(e.tx1,e.ty1),a.lineTo(e.tx2,e.ty2)),d.drawOnChartArea&&(a.moveTo(e.x1,e.y1),a.lineTo(e.x2,e.y2)),a.stroke(),a.restore()),l.display){a.save(),a.translate(e.labelX,e.labelY),a.rotate(e.rotation),a.font=e.major?S.string:y.string,a.fillStyle=e.major?k:w,a.textBaseline="middle",a.textAlign=e.textAlign;var n=e.label,s=e.textOffset;if(ue.isArray(n))for(var r=0;r<n.length;++r)a.fillText(""+n[r],0,s),s+=C;else a.fillText(n,0,s);a.restore()}})),h.display){var R,P,M=0,F=j.lineHeight/2;if(m)R=t.left+(t.right-t.left)/2,P="bottom"===p?t.bottom-F-T.bottom:t.top+F+T.top;else{var X="left"===p;R=X?t.left+F+T.top:t.right-F-T.top,P=t.top+(t.bottom-t.top)/2,M=X?-.5*Math.PI:.5*Math.PI}a.save(),a.translate(R,P),a.rotate(M),a.textAlign="center",a.textBaseline="middle",a.fillStyle=I,a.font=j.string,a.fillText(h.labelString,0,0),a.restore()}if(_){var L,N,B,Y,V=_,U=Qt(d.lineWidth,v.length-1,0);m?(L=W(o,t.left,V)-V/2,N=W(o,t.right,U)+U/2,B=Y=n):(B=W(o,t.top,V)-V/2,Y=W(o,t.bottom,U)+U/2,L=N=n),a.lineWidth=_,a.strokeStyle=Qt(d.color,0),a.beginPath(),a.moveTo(L,B),a.lineTo(N,Y),a.stroke()}}}}),ni=ii.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e,t=this,i=t.getLabels();t.minIndex=0,t.maxIndex=i.length-1,void 0!==t.options.ticks.min&&(e=i.indexOf(t.options.ticks.min),t.minIndex=-1!==e?e:t.minIndex),void 0!==t.options.ticks.max&&(e=i.indexOf(t.options.ticks.max),t.maxIndex=-1!==e?e:t.maxIndex),t.min=i[t.minIndex],t.max=i[t.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var i=this,n=i.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===i.id?i.getRightValue(n.data.datasets[t].data[e]):i.ticks[e-i.minIndex]},getPixelForValue:function(e,t){var i,n=this,s=n.options.offset,r=Math.max(n.maxIndex+1-n.minIndex-(s?0:1),1);if(null!=e&&(i=n.isHorizontal()?e.x:e.y),void 0!==i||void 0!==e&&isNaN(t)){var o=n.getLabels().indexOf(e=i||e);t=-1!==o?o:t}if(n.isHorizontal()){var a=n.width/r,c=a*(t-n.minIndex);return s&&(c+=a/2),n.left+c}var l=n.height/r,u=l*(t-n.minIndex);return s&&(u+=l/2),n.top+u},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t=this,i=t.options.offset,n=Math.max(t._ticks.length-(i?0:1),1),s=t.isHorizontal(),r=(s?t.width:t.height)/n;return e-=s?t.left:t.top,i&&(e-=r/2),(e<=0?0:Math.round(e/r))+t.minIndex},getBasePixel:function(){return this.bottom}});ni._defaults={position:"bottom"};var si=ue.isNullOrUndef,ri=ii.extend({getRightValue:function(e){return"string"==typeof e?+e:ii.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var i=ue.sign(e.min),n=ue.sign(e.max);i<0&&n<0?e.max=0:i>0&&n>0&&(e.min=0)}var s=void 0!==t.min||void 0!==t.suggestedMin,r=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(e.min=null===e.min?t.suggestedMin:Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(e.max=null===e.max?t.suggestedMax:Math.max(e.max,t.suggestedMax)),s!==r&&e.min>=e.max&&(s?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,i=t.stepSize,n=t.maxTicksLimit;return i?e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(e=this._computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ue.noop,buildTicks:function(){var e=this,t=e.options.ticks,i=e.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:t.min,max:t.max,precision:t.precision,stepSize:ue.valueOrDefault(t.fixedStepSize,t.stepSize)},s=e.ticks=function(e,t){var i,n,s,r,o=[],a=e.stepSize,c=a||1,l=e.maxTicks-1,u=e.min,d=e.max,h=e.precision,p=t.min,b=t.max,f=ue.niceNum((b-p)/l/c)*c;if(f<1e-14&&si(u)&&si(d))return[p,b];(r=Math.ceil(b/f)-Math.floor(p/f))>l&&(f=ue.niceNum(r*f/l/c)*c),a||si(h)?i=Math.pow(10,ue._decimalPlaces(f)):(i=Math.pow(10,h),f=Math.ceil(f*i)/i),n=Math.floor(p/f)*f,s=Math.ceil(b/f)*f,a&&(!si(u)&&ue.almostWhole(u/f,f/1e3)&&(n=u),!si(d)&&ue.almostWhole(d/f,f/1e3)&&(s=d)),r=ue.almostEquals(r=(s-n)/f,Math.round(r),f/1e3)?Math.round(r):Math.ceil(r),n=Math.round(n*i)/i,s=Math.round(s*i)/i,o.push(si(u)?n:u);for(var m=1;m<r;++m)o.push(Math.round((n+m*f)*i)/i);return o.push(si(d)?s:d),o}(n,e);e.handleDirectionalChanges(),e.max=ue.max(s),e.min=ue.min(s),t.reverse?(s.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),ii.prototype.convertTicksToLabels.call(e)}}),oi={position:"left",ticks:{callback:Zt.formatters.linear}},ai=ri.extend({determineDataLimits:function(){var e=this,t=e.options,i=e.chart,n=i.data.datasets,s=e.isHorizontal();function r(t){return s?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null;var o=t.stacked;if(void 0===o&&ue.each(n,(function(e,t){if(!o){var n=i.getDatasetMeta(t);i.isDatasetVisible(t)&&r(n)&&void 0!==n.stack&&(o=!0)}})),t.stacked||o){var a={};ue.each(n,(function(n,s){var o=i.getDatasetMeta(s),c=[o.type,void 0===t.stacked&&void 0===o.stack?s:"",o.stack].join(".");void 0===a[c]&&(a[c]={positiveValues:[],negativeValues:[]});var l=a[c].positiveValues,u=a[c].negativeValues;i.isDatasetVisible(s)&&r(o)&&ue.each(n.data,(function(i,n){var s=+e.getRightValue(i);isNaN(s)||o.data[n].hidden||(l[n]=l[n]||0,u[n]=u[n]||0,t.relativePoints?l[n]=100:s<0?u[n]+=s:l[n]+=s)}))})),ue.each(a,(function(t){var i=t.positiveValues.concat(t.negativeValues),n=ue.min(i),s=ue.max(i);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?s:Math.max(e.max,s)}))}else ue.each(n,(function(t,n){var s=i.getDatasetMeta(n);i.isDatasetVisible(n)&&r(s)&&ue.each(t.data,(function(t,i){var n=+e.getRightValue(t);isNaN(n)||s.data[i].hidden||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n))}))}));e.min=isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=isFinite(e.max)&&!isNaN(e.max)?e.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=ue.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this,i=t.start,n=+t.getRightValue(e),s=t.end-i;return t.isHorizontal()?t.left+t.width/s*(n-i):t.bottom-t.height/s*(n-i)},getValueForPixel:function(e){var t=this,i=t.isHorizontal();return t.start+(i?e-t.left:t.bottom-e)/(i?t.width:t.height)*(t.end-t.start)},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});ai._defaults=oi;var ci=ue.valueOrDefault,li={position:"left",ticks:{callback:Zt.formatters.logarithmic}};function ui(e,t){return ue.isFinite(e)&&e>=0?e:t}var di=ii.extend({determineDataLimits:function(){var e=this,t=e.options,i=e.chart,n=i.data.datasets,s=e.isHorizontal();function r(t){return s?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null,e.minNotZero=null;var o=t.stacked;if(void 0===o&&ue.each(n,(function(e,t){if(!o){var n=i.getDatasetMeta(t);i.isDatasetVisible(t)&&r(n)&&void 0!==n.stack&&(o=!0)}})),t.stacked||o){var a={};ue.each(n,(function(n,s){var o=i.getDatasetMeta(s),c=[o.type,void 0===t.stacked&&void 0===o.stack?s:"",o.stack].join(".");i.isDatasetVisible(s)&&r(o)&&(void 0===a[c]&&(a[c]=[]),ue.each(n.data,(function(t,i){var n=a[c],s=+e.getRightValue(t);isNaN(s)||o.data[i].hidden||s<0||(n[i]=n[i]||0,n[i]+=s)})))})),ue.each(a,(function(t){if(t.length>0){var i=ue.min(t),n=ue.max(t);e.min=null===e.min?i:Math.min(e.min,i),e.max=null===e.max?n:Math.max(e.max,n)}}))}else ue.each(n,(function(t,n){var s=i.getDatasetMeta(n);i.isDatasetVisible(n)&&r(s)&&ue.each(t.data,(function(t,i){var n=+e.getRightValue(t);isNaN(n)||s.data[i].hidden||n<0||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n),0!==n&&(null===e.minNotZero||n<e.minNotZero)&&(e.minNotZero=n))}))}));this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=ui(t.min,e.min),e.max=ui(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(ue.log10(e.min))-1),e.max=Math.pow(10,Math.floor(ue.log10(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(ue.log10(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(ue.log10(e.min))+1):10),null===e.minNotZero&&(e.minNotZero=e.min>0?e.min:e.max<1?Math.pow(10,Math.floor(ue.log10(e.max))):1)},buildTicks:function(){var e=this,t=e.options.ticks,i=!e.isHorizontal(),n={min:ui(t.min),max:ui(t.max)},s=e.ticks=function(e,t){var i,n,s=[],r=ci(e.min,Math.pow(10,Math.floor(ue.log10(t.min)))),o=Math.floor(ue.log10(t.max)),a=Math.ceil(t.max/Math.pow(10,o));0===r?(i=Math.floor(ue.log10(t.minNotZero)),n=Math.floor(t.minNotZero/Math.pow(10,i)),s.push(r),r=n*Math.pow(10,i)):(i=Math.floor(ue.log10(r)),n=Math.floor(r/Math.pow(10,i)));var c=i<0?Math.pow(10,Math.abs(i)):1;do{s.push(r),10==++n&&(n=1,c=++i>=0?1:c),r=Math.round(n*Math.pow(10,i)*c)/c}while(i<o||i===o&&n<a);var l=ci(e.max,r);return s.push(l),s}(n,e);e.max=ue.max(s),e.min=ue.min(s),t.reverse?(i=!i,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),i&&s.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),ii.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},_getFirstTickValue:function(e){var t=Math.floor(ue.log10(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},getPixelForValue:function(e){var t,i,n,s,r,o=this,a=o.options.ticks,c=a.reverse,l=ue.log10,u=o._getFirstTickValue(o.minNotZero),d=0;return e=+o.getRightValue(e),c?(n=o.end,s=o.start,r=-1):(n=o.start,s=o.end,r=1),o.isHorizontal()?(t=o.width,i=c?o.right:o.left):(t=o.height,r*=-1,i=c?o.top:o.bottom),e!==n&&(0===n&&(t-=d=ci(a.fontSize,ae.global.defaultFontSize),n=u),0!==e&&(d+=t/(l(s)-l(n))*(l(e)-l(n))),i+=r*d),i},getValueForPixel:function(e){var t,i,n,s,r=this,o=r.options.ticks,a=o.reverse,c=ue.log10,l=r._getFirstTickValue(r.minNotZero);if(a?(i=r.end,n=r.start):(i=r.start,n=r.end),r.isHorizontal()?(t=r.width,s=a?r.right-e:e-r.left):(t=r.height,s=a?e-r.top:r.bottom-e),s!==i){if(0===i){var u=ci(o.fontSize,ae.global.defaultFontSize);s-=u,t-=u,i=l}s*=c(n)-c(i),s/=t,s=Math.pow(10,c(i)+s)}return s}});di._defaults=li;var hi=ue.valueOrDefault,pi=ue.valueAtIndexOrDefault,bi=ue.options.resolve,fi={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Zt.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function mi(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function gi(e){var t=e.ticks;return t.display&&e.display?hi(t.fontSize,ae.global.defaultFontSize)+2*t.backdropPaddingY:0}function vi(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function wi(e){return 0===e||180===e?"center":e<180?"left":"right"}function yi(e,t,i,n){var s,r,o=i.y+n/2;if(ue.isArray(t))for(s=0,r=t.length;s<r;++s)e.fillText(t[s],i.x,o),o+=n;else e.fillText(t,i.x,o)}function Ci(e,t,i){90===e||270===e?i.y-=t.h/2:(e>270||e<90)&&(i.y-=t.h)}function ki(e){return ue.isNumber(e)?e:0}var Si=ri.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=gi(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;ue.each(t.data.datasets,(function(s,r){if(t.isDatasetVisible(r)){var o=t.getDatasetMeta(r);ue.each(s.data,(function(t,s){var r=+e.getRightValue(t);isNaN(r)||o.data[s].hidden||(i=Math.min(r,i),n=Math.max(r,n))}))}})),e.min=i===Number.POSITIVE_INFINITY?0:i,e.max=n===Number.NEGATIVE_INFINITY?0:n,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/gi(this.options))},convertTicksToLabels:function(){var e=this;ri.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,i,n,s=ue.options._parseFont(e.options.pointLabels),r={l:0,r:e.width,t:0,b:e.height-e.paddingTop},o={};e.ctx.font=s.string,e._pointLabelSizes=[];var a,c,l,u=mi(e);for(t=0;t<u;t++){n=e.getPointPosition(t,e.drawingArea+5),a=e.ctx,c=s.lineHeight,i=ue.isArray(l=e.pointLabels[t]||"")?{w:ue.longestText(a,a.font,l),h:l.length*c}:{w:a.measureText(l).width,h:c},e._pointLabelSizes[t]=i;var d=e.getIndexAngle(t),h=ue.toDegrees(d)%360,p=vi(h,n.x,i.w,0,180),b=vi(h,n.y,i.h,90,270);p.start<r.l&&(r.l=p.start,o.l=d),p.end>r.r&&(r.r=p.end,o.r=d),b.start<r.t&&(r.t=b.start,o.t=d),b.end>r.b&&(r.b=b.end,o.b=d)}e.setReductions(e.drawingArea,r,o)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,i){var n=this,s=t.l/Math.sin(i.l),r=Math.max(t.r-n.width,0)/Math.sin(i.r),o=-t.t/Math.cos(i.t),a=-Math.max(t.b-(n.height-n.paddingTop),0)/Math.cos(i.b);s=ki(s),r=ki(r),o=ki(o),a=ki(a),n.drawingArea=Math.min(Math.floor(e-(s+r)/2),Math.floor(e-(o+a)/2)),n.setCenterPoint(s,r,o,a)},setCenterPoint:function(e,t,i,n){var s=this,r=i+s.drawingArea,o=s.height-s.paddingTop-n-s.drawingArea;s.xCenter=Math.floor((e+s.drawingArea+(s.width-t-s.drawingArea))/2+s.left),s.yCenter=Math.floor((r+o)/2+s.top+s.paddingTop)},getIndexAngle:function(e){return e*(2*Math.PI/mi(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var i=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*i:(e-t.min)*i},getPointPosition:function(e,t){var i=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this.min,t=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0)},draw:function(){var e=this,t=e.options,i=t.gridLines,n=t.ticks;if(t.display){var s=e.ctx,r=this.getIndexAngle(0),o=ue.options._parseFont(n);(t.angleLines.display||t.pointLabels.display)&&function(e){var t=e.ctx,i=e.options,n=i.angleLines,s=i.gridLines,r=i.pointLabels,o=hi(n.lineWidth,s.lineWidth),a=hi(n.color,s.color),c=gi(i);t.save(),t.lineWidth=o,t.strokeStyle=a,t.setLineDash&&(t.setLineDash(bi([n.borderDash,s.borderDash,[]])),t.lineDashOffset=bi([n.borderDashOffset,s.borderDashOffset,0]));var l=e.getDistanceFromCenterForValue(i.ticks.reverse?e.min:e.max),u=ue.options._parseFont(r);t.font=u.string,t.textBaseline="middle";for(var d=mi(e)-1;d>=0;d--){if(n.display&&o&&a){var h=e.getPointPosition(d,l);t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(h.x,h.y),t.stroke()}if(r.display){var p=e.getPointPosition(d,l+(0===d?c/2:0)+5),b=pi(r.fontColor,d,ae.global.defaultFontColor);t.fillStyle=b;var f=e.getIndexAngle(d),m=ue.toDegrees(f);t.textAlign=wi(m),Ci(m,e._pointLabelSizes[d],p),yi(t,e.pointLabels[d]||"",p,u.lineHeight)}}t.restore()}(e),ue.each(e.ticks,(function(t,a){if(a>0||n.reverse){var c=e.getDistanceFromCenterForValue(e.ticksAsNumbers[a]);if(i.display&&0!==a&&function(e,t,i,n){var s,r=e.ctx,o=t.circular,a=mi(e),c=pi(t.color,n-1),l=pi(t.lineWidth,n-1);if((o||a)&&c&&l){if(r.save(),r.strokeStyle=c,r.lineWidth=l,r.setLineDash&&(r.setLineDash(t.borderDash||[]),r.lineDashOffset=t.borderDashOffset||0),r.beginPath(),o)r.arc(e.xCenter,e.yCenter,i,0,2*Math.PI);else{s=e.getPointPosition(0,i),r.moveTo(s.x,s.y);for(var u=1;u<a;u++)s=e.getPointPosition(u,i),r.lineTo(s.x,s.y)}r.closePath(),r.stroke(),r.restore()}}(e,i,c,a),n.display){var l=hi(n.fontColor,ae.global.defaultFontColor);if(s.font=o.string,s.save(),s.translate(e.xCenter,e.yCenter),s.rotate(r),n.showLabelBackdrop){var u=s.measureText(t).width;s.fillStyle=n.backdropColor,s.fillRect(-u/2-n.backdropPaddingX,-c-o.size/2-n.backdropPaddingY,u+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)}s.textAlign="center",s.textBaseline="middle",s.fillStyle=l,s.fillText(t,0,-c),s.restore()}}}))}}});Si._defaults=fi;var xi=ue.valueOrDefault,Oi=Number.MIN_SAFE_INTEGER||-9007199254740991,Di=Number.MAX_SAFE_INTEGER||9007199254740991,Ii={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},ji=Object.keys(Ii);function Ti(e,t){return e-t}function Ei(e){var t,i,n,s={},r=[];for(t=0,i=e.length;t<i;++t)s[n=e[t]]||(s[n]=!0,r.push(n));return r}function Ai(e,t,i,n){var s=function(e,t,i){for(var n,s,r,o=0,a=e.length-1;o>=0&&o<=a;){if(r=e[n=o+a>>1],!(s=e[n-1]||null))return{lo:null,hi:r};if(r[t]<i)o=n+1;else{if(!(s[t]>i))return{lo:s,hi:r};a=n-1}}return{lo:r,hi:null}}(e,t,i),r=s.lo?s.hi?s.lo:e[e.length-2]:e[0],o=s.lo?s.hi?s.hi:e[e.length-1]:e[1],a=o[t]-r[t];return r[n]+(o[n]-r[n])*(a?(i-r[t])/a:0)}function _i(e,t){var i=e._adapter,n=e.options.time,s=n.parser,r=s||n.format,o=t;return"function"==typeof s&&(o=s(o)),ue.isFinite(o)||(o="string"==typeof r?i.parse(o,r):i.parse(o)),null!==o?+o:(s||"function"!=typeof r||(o=r(t),ue.isFinite(o)||(o=i.parse(o))),o)}function Wi(e,t){if(ue.isNullOrUndef(t))return null;var i=e.options.time,n=_i(e,e.getRightValue(t));return null===n||i.round&&(n=+e._adapter.startOf(n,i.round)),n}function Ri(e){for(var t=ji.indexOf(e)+1,i=ji.length;t<i;++t)if(Ii[ji[t]].common)return ji[t]}var Pi=ii.extend({initialize:function(){this.mergeTicksOptions(),ii.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,i=t.time||(t.time={}),n=e._adapter=new Kt._date(t.adapters.date);return i.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),ue.mergeIf(i.displayFormats,n.formats()),ii.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),ii.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,i,n,s,r,o=this,a=o.chart,c=o._adapter,l=o.options.time,u=l.unit||"day",d=Di,h=Oi,p=[],b=[],f=[],m=a.data.labels||[];for(e=0,i=m.length;e<i;++e)f.push(Wi(o,m[e]));for(e=0,i=(a.data.datasets||[]).length;e<i;++e)if(a.isDatasetVisible(e))if(ue.isObject((s=a.data.datasets[e].data)[0]))for(b[e]=[],t=0,n=s.length;t<n;++t)r=Wi(o,s[t]),p.push(r),b[e][t]=r;else{for(t=0,n=f.length;t<n;++t)p.push(f[t]);b[e]=f.slice(0)}else b[e]=[];f.length&&(f=Ei(f).sort(Ti),d=Math.min(d,f[0]),h=Math.max(h,f[f.length-1])),p.length&&(p=Ei(p).sort(Ti),d=Math.min(d,p[0]),h=Math.max(h,p[p.length-1])),d=Wi(o,l.min)||d,h=Wi(o,l.max)||h,d=d===Di?+c.startOf(Date.now(),u):d,h=h===Oi?+c.endOf(Date.now(),u)+1:h,o.min=Math.min(d,h),o.max=Math.max(d+1,h),o._horizontal=o.isHorizontal(),o._table=[],o._timestamps={data:p,datasets:b,labels:f}},buildTicks:function(){var e,t,i,n=this,s=n.min,r=n.max,o=n.options,a=o.time,c=[],l=[];switch(o.ticks.source){case"data":c=n._timestamps.data;break;case"labels":c=n._timestamps.labels;break;case"auto":default:c=function(e,t,i,n){var s,r=e._adapter,o=e.options,a=o.time,c=a.unit||function(e,t,i,n){var s,r,o=ji.length;for(s=ji.indexOf(e);s<o-1;++s)if((r=Ii[ji[s]]).common&&Math.ceil((i-t)/((r.steps?r.steps[r.steps.length-1]:Di)*r.size))<=n)return ji[s];return ji[o-1]}(a.minUnit,t,i,n),l=Ri(c),u=xi(a.stepSize,a.unitStepSize),d="week"===c&&a.isoWeekday,h=o.ticks.major.enabled,p=Ii[c],b=t,f=i,m=[];for(u||(u=function(e,t,i,n){var s,r,o,a=t-e,c=Ii[i],l=c.size,u=c.steps;if(!u)return Math.ceil(a/(n*l));for(s=0,r=u.length;s<r&&(o=u[s],!(Math.ceil(a/(l*o))<=n));++s);return o}(t,i,c,n)),d&&(b=+r.startOf(b,"isoWeek",d),f=+r.startOf(f,"isoWeek",d)),b=+r.startOf(b,d?"day":c),(f=+r.startOf(f,d?"day":c))<i&&(f=+r.add(f,1,c)),s=b,h&&l&&!d&&!a.round&&(s=+r.startOf(s,l),s=+r.add(s,~~((b-s)/(p.size*u))*u,c));s<f;s=+r.add(s,u,c))m.push(+s);return m.push(+s),m}(n,s,r,n.getLabelCapacity(s))}for("ticks"===o.bounds&&c.length&&(s=c[0],r=c[c.length-1]),s=Wi(n,a.min)||s,r=Wi(n,a.max)||r,e=0,t=c.length;e<t;++e)(i=c[e])>=s&&i<=r&&l.push(i);return n.min=s,n.max=r,n._unit=a.unit||function(e,t,i,n,s){var r,o;for(r=ji.length-1;r>=ji.indexOf(i);r--)if(Ii[o=ji[r]].common&&e._adapter.diff(s,n,o)>=t.length)return o;return ji[i?ji.indexOf(i):0]}(n,l,a.minUnit,n.min,n.max),n._majorUnit=Ri(n._unit),n._table=function(e,t,i,n){if("linear"===n||!e.length)return[{time:t,pos:0},{time:i,pos:1}];var s,r,o,a,c,l=[],u=[t];for(s=0,r=e.length;s<r;++s)(a=e[s])>t&&a<i&&u.push(a);for(u.push(i),s=0,r=u.length;s<r;++s)c=u[s+1],a=u[s],void 0!==(o=u[s-1])&&void 0!==c&&Math.round((c+o)/2)===a||l.push({time:a,pos:s/(r-1)});return l}(n._timestamps.data,s,r,o.distribution),n._offsets=function(e,t,i,n,s){var r,o,a=0,c=0;return s.offset&&t.length&&(s.time.min||(r=Ai(e,"time",t[0],"pos"),a=1===t.length?1-r:(Ai(e,"time",t[1],"pos")-r)/2),s.time.max||(o=Ai(e,"time",t[t.length-1],"pos"),c=1===t.length?o:(o-Ai(e,"time",t[t.length-2],"pos"))/2)),{start:a,end:c}}(n._table,l,0,0,o),o.ticks.reverse&&l.reverse(),function(e,t,i){var n,s,r,o,a=[];for(n=0,s=t.length;n<s;++n)r=t[n],o=!!i&&r===+e._adapter.startOf(r,i),a.push({value:r,major:o});return a}(n,l,n._majorUnit)},getLabelForIndex:function(e,t){var i=this,n=i._adapter,s=i.chart.data,r=i.options.time,o=s.labels&&e<s.labels.length?s.labels[e]:"",a=s.datasets[t].data[e];return ue.isObject(a)&&(o=i.getRightValue(a)),r.tooltipFormat?n.format(_i(i,o),r.tooltipFormat):"string"==typeof o?o:n.format(_i(i,o),r.displayFormats.datetime)},tickFormatFunction:function(e,t,i,n){var s=this._adapter,r=this.options,o=r.time.displayFormats,a=o[this._unit],c=this._majorUnit,l=o[c],u=+s.startOf(e,c),d=r.ticks.major,h=d.enabled&&c&&l&&e===u,p=s.format(e,n||(h?l:a)),b=h?d:r.ticks.minor,f=xi(b.callback,b.userCallback);return f?f(p,t,i):p},convertTicksToLabels:function(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(this.tickFormatFunction(e[t].value,t,e));return n},getPixelForOffset:function(e){var t=this,i=t.options.ticks.reverse,n=t._horizontal?t.width:t.height,s=t._horizontal?i?t.right:t.left:i?t.bottom:t.top,r=Ai(t._table,"time",e,"pos"),o=n*(t._offsets.start+r)/(t._offsets.start+1+t._offsets.end);return i?s-o:s+o},getPixelForValue:function(e,t,i){var n=null;if(void 0!==t&&void 0!==i&&(n=this._timestamps.datasets[i][t]),null===n&&(n=Wi(this,e)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,i=t._horizontal?t.width:t.height,n=Ai(t._table,"pos",(i?(e-(t._horizontal?t.left:t.top))/i:0)*(t._offsets.start+1+t._offsets.start)-t._offsets.end,"time");return t._adapter._create(n)},getLabelWidth:function(e){var t=this.options.ticks,i=this.ctx.measureText(e).width,n=ue.toRadians(t.maxRotation),s=Math.cos(n),r=Math.sin(n);return i*s+xi(t.fontSize,ae.global.defaultFontSize)*r},getLabelCapacity:function(e){var t=this,i=t.tickFormatFunction(e,0,[],t.options.time.displayFormats.millisecond),n=t.getLabelWidth(i),s=t.isHorizontal()?t.width:t.height,r=Math.floor(s/n);return r>0?r:1}});Pi._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var Mi={category:ni,linear:ai,logarithmic:di,radialLinear:Si,time:Pi},Fi={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Kt._date.override("function"==typeof e?{_id:"moment",formats:function(){return Fi},parse:function(t,i){return"string"==typeof t&&"string"==typeof i?t=e(t,i):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,i){return e(t).format(i)},add:function(t,i,n){return e(t).add(i,n).valueOf()},diff:function(t,i,n){return e.duration(e(t).diff(e(i))).as(n)},startOf:function(t,i,n){return t=e(t),"isoWeek"===i?t.isoWeekday(n).valueOf():t.startOf(i).valueOf()},endOf:function(t,i){return e(t).endOf(i).valueOf()},_create:function(t){return e(t)}}:{}),ae._set("global",{plugins:{filler:{propagate:!0}}});var Xi={dataset:function(e){var t=e.fill,i=e.chart,n=i.getDatasetMeta(t),s=n&&i.isDatasetVisible(t)&&n.dataset._children||[],r=s.length||0;return r?function(e,t){return t<r&&s[t]._view||null}:null},boundary:function(e){var t=e.boundary,i=t?t.x:null,n=t?t.y:null;return function(e){return{x:null===i?e.x:i,y:null===n?e.y:n}}}};function Li(e,t,i){var n,s=e._model||{},r=s.fill;if(void 0===r&&(r=!!s.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(n=parseFloat(r,10),isFinite(n)&&Math.floor(n)===n)return"-"!==r[0]&&"+"!==r[0]||(n=t+n),!(n===t||n<0||n>=i)&&n;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function Ni(e){var t,i=e.el._model||{},n=e.el._scale||{},s=e.fill,r=null;if(isFinite(s))return null;if("start"===s?r=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===s?r=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?r=i.scaleZero:n.getBasePosition?r=n.getBasePosition():n.getBasePixel&&(r=n.getBasePixel()),null!=r){if(void 0!==r.x&&void 0!==r.y)return r;if(ue.isFinite(r))return{x:(t=n.isHorizontal())?r:null,y:t?null:r}}return null}function Bi(e,t,i){var n,s=e[t].fill,r=[t];if(!i)return s;for(;!1!==s&&-1===r.indexOf(s);){if(!isFinite(s))return s;if(!(n=e[s]))return!1;if(n.visible)return s;r.push(s),s=n.fill}return!1}function Yi(e){var t=e.fill,i="dataset";return!1===t?null:(isFinite(t)||(i="boundary"),Xi[i](e))}function Vi(e){return e&&!e.skip}function Ui(e,t,i,n,s){var r;if(n&&s){for(e.moveTo(t[0].x,t[0].y),r=1;r<n;++r)ue.canvas.lineTo(e,t[r-1],t[r]);for(e.lineTo(i[s-1].x,i[s-1].y),r=s-1;r>0;--r)ue.canvas.lineTo(e,i[r],i[r-1],!0)}}var Hi={id:"filler",afterDatasetsUpdate:function(e,t){var i,n,s,r,o=(e.data.datasets||[]).length,a=t.propagate,c=[];for(n=0;n<o;++n)r=null,(s=(i=e.getDatasetMeta(n)).dataset)&&s._model&&s instanceof Fe.Line&&(r={visible:e.isDatasetVisible(n),fill:Li(s,n,o),chart:e,el:s}),i.$filler=r,c.push(r);for(n=0;n<o;++n)(r=c[n])&&(r.fill=Bi(c,n,a),r.boundary=Ni(r),r.mapper=Yi(r))},beforeDatasetDraw:function(e,t){var i=t.meta.$filler;if(i){var n=e.ctx,s=i.el,r=s._view,o=s._children||[],a=i.mapper,c=r.backgroundColor||ae.global.defaultColor;a&&c&&o.length&&(ue.canvas.clipArea(n,e.chartArea),function(e,t,i,n,s,r){var o,a,c,l,u,d,h,p=t.length,b=n.spanGaps,f=[],m=[],g=0,v=0;for(e.beginPath(),o=0,a=p+!!r;o<a;++o)u=i(l=t[c=o%p]._view,c,n),d=Vi(l),h=Vi(u),d&&h?(g=f.push(l),v=m.push(u)):g&&v&&(b?(d&&f.push(l),h&&m.push(u)):(Ui(e,f,m,g,v),g=v=0,f=[],m=[]));Ui(e,f,m,g,v),e.closePath(),e.fillStyle=s,e.fill()}(n,o,a,r,c,s._loop),ue.canvas.unclipArea(n))}}},$i=ue.noop,Gi=ue.valueOrDefault;function zi(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}ae._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var i=t.datasetIndex,n=this.chart,s=n.getDatasetMeta(i);s.hidden=null===s.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return ue.isArray(t.datasets)?t.datasets.map((function(t,i){return{text:t.label,fillStyle:ue.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(i),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:i}}),this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var i=0;i<e.data.datasets.length;i++)t.push('<li><span style="background-color:'+e.data.datasets[i].backgroundColor+'"></span>'),e.data.datasets[i].label&&t.push(e.data.datasets[i].label),t.push("</li>");return t.push("</ul>"),t.join("")}});var qi=be.extend({initialize:function(e){ue.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:$i,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:$i,beforeSetDimensions:$i,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:$i,beforeBuildLabels:$i,buildLabels:function(){var e=this,t=e.options.labels||{},i=ue.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(i=i.filter((function(i){return t.filter(i,e.chart.data)}))),e.options.reverse&&i.reverse(),e.legendItems=i},afterBuildLabels:$i,beforeFit:$i,fit:function(){var e=this,t=e.options,i=t.labels,n=t.display,s=e.ctx,r=ue.options._parseFont(i),o=r.size,a=e.legendHitBoxes=[],c=e.minSize,l=e.isHorizontal();if(l?(c.width=e.maxWidth,c.height=n?10:0):(c.width=n?10:0,c.height=e.maxHeight),n)if(s.font=r.string,l){var u=e.lineWidths=[0],d=0;s.textAlign="left",s.textBaseline="top",ue.each(e.legendItems,(function(e,t){var n=zi(i,o)+o/2+s.measureText(e.text).width;(0===t||u[u.length-1]+n+i.padding>c.width)&&(d+=o+i.padding,u[u.length-(t>0?0:1)]=i.padding),a[t]={left:0,top:0,width:n,height:o},u[u.length-1]+=n+i.padding})),c.height+=d}else{var h=i.padding,p=e.columnWidths=[],b=i.padding,f=0,m=0,g=o+h;ue.each(e.legendItems,(function(e,t){var n=zi(i,o)+o/2+s.measureText(e.text).width;t>0&&m+g>c.height-h&&(b+=f+i.padding,p.push(f),f=0,m=0),f=Math.max(f,n),m+=g,a[t]={left:0,top:0,width:n,height:o}})),b+=f,p.push(f),c.width+=b}e.width=c.width,e.height=c.height},afterFit:$i,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,i=t.labels,n=ae.global,s=n.defaultColor,r=n.elements.line,o=e.width,a=e.lineWidths;if(t.display){var c,l=e.ctx,u=Gi(i.fontColor,n.defaultFontColor),d=ue.options._parseFont(i),h=d.size;l.textAlign="left",l.textBaseline="middle",l.lineWidth=.5,l.strokeStyle=u,l.fillStyle=u,l.font=d.string;var p=zi(i,h),b=e.legendHitBoxes,f=e.isHorizontal();c=f?{x:e.left+(o-a[0])/2+i.padding,y:e.top+i.padding,line:0}:{x:e.left+i.padding,y:e.top+i.padding,line:0};var m=h+i.padding;ue.each(e.legendItems,(function(n,u){var d=l.measureText(n.text).width,g=p+h/2+d,v=c.x,w=c.y;f?u>0&&v+g+i.padding>e.left+e.minSize.width&&(w=c.y+=m,c.line++,v=c.x=e.left+(o-a[c.line])/2+i.padding):u>0&&w+m>e.top+e.minSize.height&&(v=c.x=v+e.columnWidths[c.line]+i.padding,w=c.y=e.top+i.padding,c.line++),function(e,i,n){if(!(isNaN(p)||p<=0)){l.save();var o=Gi(n.lineWidth,r.borderWidth);if(l.fillStyle=Gi(n.fillStyle,s),l.lineCap=Gi(n.lineCap,r.borderCapStyle),l.lineDashOffset=Gi(n.lineDashOffset,r.borderDashOffset),l.lineJoin=Gi(n.lineJoin,r.borderJoinStyle),l.lineWidth=o,l.strokeStyle=Gi(n.strokeStyle,s),l.setLineDash&&l.setLineDash(Gi(n.lineDash,r.borderDash)),t.labels&&t.labels.usePointStyle){var a=p*Math.SQRT2/2;ue.canvas.drawPoint(l,n.pointStyle,a,e+p/2,i+h/2)}else 0!==o&&l.strokeRect(e,i,p,h),l.fillRect(e,i,p,h);l.restore()}}(v,w,n),b[u].left=v,b[u].top=w,function(e,t,i,n){var s=h/2,r=p+s+e,o=t+s;l.fillText(i.text,r,o),i.hidden&&(l.beginPath(),l.lineWidth=2,l.moveTo(r,o),l.lineTo(r+n,o),l.stroke())}(v,w,n,d),f?c.x+=g+i.padding:c.y+=m}))}},_getLegendItemAt:function(e,t){var i,n,s,r=this;if(e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom)for(s=r.legendHitBoxes,i=0;i<s.length;++i)if(e>=(n=s[i]).left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height)return r.legendItems[i];return null},handleEvent:function(e){var t,i=this,n=i.options,s="mouseup"===e.type?"click":e.type;if("mousemove"===s){if(!n.onHover&&!n.onLeave)return}else{if("click"!==s)return;if(!n.onClick)return}t=i._getLegendItemAt(e.x,e.y),"click"===s?t&&n.onClick&&n.onClick.call(i,e.native,t):(n.onLeave&&t!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,e.native,i._hoveredItem),i._hoveredItem=t),n.onHover&&t&&n.onHover.call(i,e.native,t))}});function Ki(e,t){var i=new qi({ctx:e.ctx,options:t,chart:e});wt.configure(e,i,t),wt.addBox(e,i),e.legend=i}var Zi={id:"legend",_element:qi,beforeInit:function(e){var t=e.options.legend;t&&Ki(e,t)},beforeUpdate:function(e){var t=e.options.legend,i=e.legend;t?(ue.mergeIf(t,ae.global.legend),i?(wt.configure(e,i,t),i.options=t):Ki(e,t)):i&&(wt.removeBox(e,i),delete e.legend)},afterEvent:function(e,t){var i=e.legend;i&&i.handleEvent(t)}},Ji=ue.noop;ae._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Qi=be.extend({initialize:function(e){ue.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:Ji,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Ji,beforeSetDimensions:Ji,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Ji,beforeBuildLabels:Ji,buildLabels:Ji,afterBuildLabels:Ji,beforeFit:Ji,fit:function(){var e=this,t=e.options,i=t.display,n=e.minSize,s=ue.isArray(t.text)?t.text.length:1,r=ue.options._parseFont(t),o=i?s*r.lineHeight+2*t.padding:0;e.isHorizontal()?(n.width=e.maxWidth,n.height=o):(n.width=o,n.height=e.maxHeight),e.width=n.width,e.height=n.height},afterFit:Ji,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,i=e.options;if(i.display){var n,s,r,o=ue.options._parseFont(i),a=o.lineHeight,c=a/2+i.padding,l=0,u=e.top,d=e.left,h=e.bottom,p=e.right;t.fillStyle=ue.valueOrDefault(i.fontColor,ae.global.defaultFontColor),t.font=o.string,e.isHorizontal()?(s=d+(p-d)/2,r=u+c,n=p-d):(s="left"===i.position?d+c:p-c,r=u+(h-u)/2,n=h-u,l=Math.PI*("left"===i.position?-.5:.5)),t.save(),t.translate(s,r),t.rotate(l),t.textAlign="center",t.textBaseline="middle";var b=i.text;if(ue.isArray(b))for(var f=0,m=0;m<b.length;++m)t.fillText(b[m],0,f,n),f+=a;else t.fillText(b,0,0,n);t.restore()}}});function en(e,t){var i=new Qi({ctx:e.ctx,options:t,chart:e});wt.configure(e,i,t),wt.addBox(e,i),e.titleBlock=i}var tn={},nn=Hi,sn=Zi,rn={id:"title",_element:Qi,beforeInit:function(e){var t=e.options.title;t&&en(e,t)},beforeUpdate:function(e){var t=e.options.title,i=e.titleBlock;t?(ue.mergeIf(t,ae.global.title),i?(wt.configure(e,i,t),i.options=t):en(e,t)):i&&(wt.removeBox(e,i),delete e.titleBlock)}};for(var on in tn.filler=nn,tn.legend=sn,tn.title=rn,Gt.helpers=ue,function(){function e(e,t,i){var n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}function t(e){return null!=e&&"none"!==e}function i(i,n,s){var r=document.defaultView,o=ue._getParentNode(i),a=r.getComputedStyle(i)[n],c=r.getComputedStyle(o)[n],l=t(a),u=t(c),d=Number.POSITIVE_INFINITY;return l||u?Math.min(l?e(a,i,s):d,u?e(c,o,s):d):"none"}ue.where=function(e,t){if(ue.isArray(e)&&Array.prototype.filter)return e.filter(t);var i=[];return ue.each(e,(function(e){t(e)&&i.push(e)})),i},ue.findIndex=Array.prototype.findIndex?function(e,t,i){return e.findIndex(t,i)}:function(e,t,i){i=void 0===i?e:i;for(var n=0,s=e.length;n<s;++n)if(t.call(i,e[n],n,e))return n;return-1},ue.findNextWhere=function(e,t,i){ue.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<e.length;n++){var s=e[n];if(t(s))return s}},ue.findPreviousWhere=function(e,t,i){ue.isNullOrUndef(i)&&(i=e.length);for(var n=i-1;n>=0;n--){var s=e[n];if(t(s))return s}},ue.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ue.almostEquals=function(e,t,i){return Math.abs(e-t)<i},ue.almostWhole=function(e,t){var i=Math.round(e);return i-t<e&&i+t>e},ue.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},ue.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},ue.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},ue.log10=Math.log10?function(e){return Math.log10(e)}:function(e){var t=Math.log(e)*Math.LOG10E,i=Math.round(t);return e===Math.pow(10,i)?i:t},ue.toRadians=function(e){return e*(Math.PI/180)},ue.toDegrees=function(e){return e*(180/Math.PI)},ue._decimalPlaces=function(e){if(ue.isFinite(e)){for(var t=1,i=0;Math.round(e*t)/t!==e;)t*=10,i++;return i}},ue.getAngleFromPoint=function(e,t){var i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*Math.PI&&(r+=2*Math.PI),{angle:r,distance:s}},ue.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},ue.aliasPixel=function(e){return e%2==0?0:.5},ue._alignPixel=function(e,t,i){var n=e.currentDevicePixelRatio,s=i/2;return Math.round((t-s)*n)/n+s},ue.splineCurve=function(e,t,i,n){var s=e.skip?t:e,r=t,o=i.skip?t:i,a=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),c=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),l=a/(a+c),u=c/(a+c),d=n*(l=isNaN(l)?0:l),h=n*(u=isNaN(u)?0:u);return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}},ue.EPSILON=Number.EPSILON||1e-14,ue.splineCurveMonotone=function(e){var t,i,n,s,r,o,a,c,l,u=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),d=u.length;for(t=0;t<d;++t)if(!(n=u[t]).model.skip){if(i=t>0?u[t-1]:null,(s=t<d-1?u[t+1]:null)&&!s.model.skip){var h=s.model.x-n.model.x;n.deltaK=0!==h?(s.model.y-n.model.y)/h:0}n.mK=!i||i.model.skip?n.deltaK:!s||s.model.skip?i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?0:(i.deltaK+n.deltaK)/2}for(t=0;t<d-1;++t)s=u[t+1],(n=u[t]).model.skip||s.model.skip||(ue.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=s.mK=0:(r=n.mK/n.deltaK,o=s.mK/n.deltaK,(c=Math.pow(r,2)+Math.pow(o,2))<=9||(a=3/Math.sqrt(c),n.mK=r*a*n.deltaK,s.mK=o*a*n.deltaK)));for(t=0;t<d;++t)(n=u[t]).model.skip||(s=t<d-1?u[t+1]:null,(i=t>0?u[t-1]:null)&&!i.model.skip&&(n.model.controlPointPreviousX=n.model.x-(l=(n.model.x-i.model.x)/3),n.model.controlPointPreviousY=n.model.y-l*n.mK),s&&!s.model.skip&&(n.model.controlPointNextX=n.model.x+(l=(s.model.x-n.model.x)/3),n.model.controlPointNextY=n.model.y+l*n.mK))},ue.nextItem=function(e,t,i){return i?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},ue.previousItem=function(e,t,i){return i?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},ue.niceNum=function(e,t){var i=Math.floor(ue.log10(e)),n=e/Math.pow(10,i);return(t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},ue.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},ue.getRelativePosition=function(e,t){var i,n,s=e.originalEvent||e,r=e.target||e.srcElement,o=r.getBoundingClientRect(),a=s.touches;a&&a.length>0?(i=a[0].clientX,n=a[0].clientY):(i=s.clientX,n=s.clientY);var c=parseFloat(ue.getStyle(r,"padding-left")),l=parseFloat(ue.getStyle(r,"padding-top")),u=parseFloat(ue.getStyle(r,"padding-right")),d=parseFloat(ue.getStyle(r,"padding-bottom")),h=o.bottom-o.top-l-d;return{x:i=Math.round((i-o.left-c)/(o.right-o.left-c-u)*r.width/t.currentDevicePixelRatio),y:n=Math.round((n-o.top-l)/h*r.height/t.currentDevicePixelRatio)}},ue.getConstraintWidth=function(e){return i(e,"max-width","clientWidth")},ue.getConstraintHeight=function(e){return i(e,"max-height","clientHeight")},ue._calculatePadding=function(e,t,i){return(t=ue.getStyle(e,t)).indexOf("%")>-1?i*parseInt(t,10)/100:parseInt(t,10)},ue._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},ue.getMaximumWidth=function(e){var t=ue._getParentNode(e);if(!t)return e.clientWidth;var i=t.clientWidth,n=i-ue._calculatePadding(t,"padding-left",i)-ue._calculatePadding(t,"padding-right",i),s=ue.getConstraintWidth(e);return isNaN(s)?n:Math.min(n,s)},ue.getMaximumHeight=function(e){var t=ue._getParentNode(e);if(!t)return e.clientHeight;var i=t.clientHeight,n=i-ue._calculatePadding(t,"padding-top",i)-ue._calculatePadding(t,"padding-bottom",i),s=ue.getConstraintHeight(e);return isNaN(s)?n:Math.min(n,s)},ue.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},ue.retinaScale=function(e,t){var i=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=e.canvas,s=e.height,r=e.width;n.height=s*i,n.width=r*i,e.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=s+"px",n.style.width=r+"px")}},ue.fontString=function(e,t,i){return t+" "+e+"px "+i},ue.longestText=function(e,t,i,n){var s=(n=n||{}).data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},r=n.garbageCollect=[],n.font=t),e.font=t;var o=0;ue.each(i,(function(t){null!=t&&!0!==ue.isArray(t)?o=ue.measureText(e,s,r,o,t):ue.isArray(t)&&ue.each(t,(function(t){null==t||ue.isArray(t)||(o=ue.measureText(e,s,r,o,t))}))}));var a=r.length/2;if(a>i.length){for(var c=0;c<a;c++)delete s[r[c]];r.splice(0,a)}return o},ue.measureText=function(e,t,i,n,s){var r=t[s];return r||(r=t[s]=e.measureText(s).width,i.push(s)),r>n&&(n=r),n},ue.numberOfLabelLines=function(e){var t=1;return ue.each(e,(function(e){ue.isArray(e)&&e.length>t&&(t=e.length)})),t},ue.color=G?function(e){return e instanceof CanvasGradient&&(e=ae.global.defaultColor),G(e)}:function(e){return console.error("Color.js not found!"),e},ue.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:ue.color(e).saturate(.5).darken(.1).rgbString()}}(),Gt._adapters=Kt,Gt.Animation=me,Gt.animationService=ge,Gt.controllers=at,Gt.DatasetController=ke,Gt.defaults=ae,Gt.Element=be,Gt.elements=Fe,Gt.Interaction=bt,Gt.layouts=wt,Gt.platform=Et,Gt.plugins=At,Gt.Scale=ii,Gt.scaleService=_t,Gt.Ticks=Zt,Gt.Tooltip=Nt,Gt.helpers.each(Mi,(function(e,t){Gt.scaleService.registerScaleType(t,e,e._defaults)})),tn)tn.hasOwnProperty(on)&&Gt.plugins.register(tn[on]);Gt.platform.initialize();var an=Gt;return"undefined"!=typeof window&&(window.Chart=Gt),Gt.Chart=Gt,Gt.Legend=tn.legend._element,Gt.Title=tn.title._element,Gt.pluginService=Gt.plugins,Gt.PluginBase=Gt.Element.extend({}),Gt.canvasHelpers=Gt.helpers.canvas,Gt.layoutService=Gt.layouts,Gt.LinearScaleBase=ri,Gt.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(e){Gt[e]=function(t,i){return new Gt(t,Gt.helpers.merge(i||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}})),an}(function(){try{return i("wd/R")}catch(e){}}())},MPSC:function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("pLZG"),s=i("1G5W"),r=i("fXoL"),o=i("xoOP"),a=i("lBcp"),c=i("XNiG"),l=i("1Tmk"),u=i("lGQG"),d=i("zDGq"),h=i("LfE4"),p=i("V3bs"),b=i("3Pt+"),f=i("ofXK"),m=i("okBH");const g=["searchEl"];function v(e,t){if(1&e){const e=r.Yb();r.Xb(0,"a",9),r.jc("click",(function(){return r.Oc(e),r.nc().searchInput=""})),r.Sb(1,"img",10),r.Wb()}}function w(e,t){1&e&&(r.Vb(0),r.Xb(1,"div",15),r.Yc(2,"No tags yet"),r.Wb(),r.Xb(3,"div",16),r.Yc(4,"Start typing to create one."),r.Wb(),r.Ub())}function y(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",15),r.Yc(1),r.Wb(),r.Xb(2,"div",16),r.Yc(3,"Press Ctrl+Enter to quickly "),r.Xb(4,"a",17),r.jc("click",(function(){return r.Oc(e),r.nc(2).createNewTag()})),r.Yc(5),r.Wb(),r.Wb()}if(2&e){const e=r.nc(2);r.Cb(1),r.Zc(0===e.allTags.length?"No tags yet":"No matching tag"),r.Cb(4),r.ad("create '",e.searchInput,"' tag.")}}function C(e,t){if(1&e&&(r.Vb(0),r.Xb(1,"div",11),r.Xb(2,"div",12),r.Xb(3,"div",13),r.Wc(4,w,5,0,"ng-container",6),r.Wc(5,y,6,2,"ng-template",null,14,r.Xc),r.Wb(),r.Wb(),r.Wb(),r.Ub()),2&e){const e=r.Lc(6),t=r.nc();r.Cb(4),r.wc("ngIf",0===t.allTags.length&&!t.searchInput)("ngIfElse",e)}}function k(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",21),r.Xb(1,"div",22),r.Xb(2,"input",23),r.jc("keyup.enter",(function(){const e=t.$implicit;return e.selected=!e.selected}))("ngModelChange",(function(i){return r.Oc(e),t.$implicit.selected=i}))("ngModelChange",(function(){return r.Oc(e),r.nc(2).isModelChanged=!0})),r.Wb(),r.Xb(3,"label",24),r.Xb(4,"div",25),r.Yc(5),r.Wb(),r.Wb(),r.Wb(),r.Wb()}if(2&e){const e=t.$implicit;r.Cb(2),r.yc("id","checkbox_",e.id,""),r.wc("ngModel",e.selected),r.Cb(1),r.yc("for","checkbox_",e.id,""),r.Cb(2),r.Zc(e.name)}}function S(e,t){if(1&e&&(r.Xb(0,"div",11),r.Xb(1,"div",18),r.Xb(2,"div",19),r.Wc(3,k,6,4,"div",20),r.oc(4,"sortBy"),r.Wb(),r.Wb(),r.Wb()),2&e){const e=r.nc();r.Cb(3),r.wc("ngForOf",r.qc(4,2,e.filteredTags,e.sortByNameMapper))("ngForTrackBy",e.trackByFn)}}let x=(()=>{class e{constructor(e,t,i,n,s){this.tagService=e,this.workspaceService=t,this.authService=i,this.keyboardService=n,this.cd=s,this.close=new r.n,this.placeholder="Add/Find tags",this.selectedAll=!1,this.unsubscribe$=new c.a,this.mappedTags=[],this.initSelectedIds=[],this.sortByNameMapper=e=>e.name}set entryTags(e){this._entryTags=e,this.initTags()}get entryTags(){return this._entryTags}set entryTagIds(e){this._entryTagIds=e,this.initTags()}get entryTagIds(){return this._entryTagIds}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.isAdmin=this.authService.isAdminOrOwner(),this.subscribeToAllTags(),this.setSelectedIds(),this.ctrlEnter()}subscribeToAllTags(){this.tagService.tagsBehavior$.pipe(Object(n.a)(e=>null!==e),Object(s.a)(this.unsubscribe$)).subscribe(e=>{e&&(this.allTags=e,this.initTags())}),this.hasAllTags()||this.tagService.getAllTags(h.a.ACTIVE)}hasAllTags(){if(!this.allTags)return!1;const e=this.allTags.map(e=>e.id);return this.initSelectedIds.every(t=>e.indexOf(t)>-1)}ngAfterViewInit(){this.setFocusToInput()}setFocusToInput(){this.searchEl&&this.searchEl.nativeElement.focus()}ctrlEnter(){this.keyboardService.keyboardCtrlEnter$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.allTags&&this.filteredTags&&0===this.filteredTags.length&&(this.isAdmin||!this.workspace.onlyAdminsCreateTag)&&this.createNewTag()})}createNewTag(){if(!this.searchInput)return;const e=this.searchInput.trim();this.tagService.create(e).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.mappedTags.push({id:e.id,name:e.name,selected:!0}),this.isModelChanged=!0,this.searchInput="",this.allTags.push(e),this.cd.detectChanges()})}get filteredTags(){return Object(o.i)(this.mappedTags,this.searchInput,"name")}initTags(){if(!this.allTags)return;this.setSelectedIds();const e=[];this.allTags.forEach(t=>{e.push({id:t.id,name:t.name,selected:this.initSelectedIds.indexOf(t.id)>-1})}),this.mappedTags=e,this.cd.detectChanges()}setSelectedIds(){this.entryTags?this.initSelectedIds=this.entryTags.map(e=>e.id):this.entryTagIds&&(this.initSelectedIds=this.entryTagIds.slice(0))}closeDropdown(){if(!this.isModelChanged)return;const e=this.mappedTags.filter(e=>e.selected).map(e=>e.id);if(!this.allTags||Object(o.c)(this.initSelectedIds,e))return;const t=this.allTags.filter(t=>e.indexOf(t.id)>-1);this.close.emit(Object(o.e)(t))}ngOnDestroy(){this.closeDropdown(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}trackByFn(e,t){return t.id}get numberOfSelected(){return this.mappedTags.filter(e=>e.selected).length||0}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(a.a),r.Rb(l.a),r.Rb(u.a),r.Rb(d.a),r.Rb(r.h))},e.\u0275cmp=r.Lb({type:e,selectors:[["tag-dropdown"]],viewQuery:function(e,t){var i;1&e&&r.ed(g,!0),2&e&&r.Kc(i=r.kc())&&(t.searchEl=i.first)},inputs:{entryTags:"entryTags",entryTagIds:"entryTagIds",placeholder:"placeholder"},outputs:{close:"close"},decls:10,vars:5,consts:[["arrowNavigation",""],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],["type","text","tabindex","0","autocomplete","off","autofocus","",1,"cl-form-control","cl-input-has-clear",3,"ngModel","ngModelChange"],["searchEl",""],["class","cl-clear-input","doNotCloseDropdown","",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["tagList",""],["dropdownClose","","tabindex","0"],["doNotCloseDropdown","",1,"cl-clear-input",3,"click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""],[1,"cl-scroll-area"],[1,"cl-dropdown-menu-sub-header"],[1,"cl-dropdown-item-padding",2,"overflow","hidden"],["noMatching",""],[1,""],[1,"cl-h6","cl-mb-0"],[1,"cl-color-blue",3,"click"],[1,"cl-dropdown-section-wrapper"],["tabindex","0",1,"cl-dropdown-section","cl-no-focus-tabindex"],["class","cl-dropdown-item cl-dropdown-item-checkbox",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","tabindex","-1",1,"cl-custom-control-input",3,"ngModel","id","keyup.enter","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"]],template:function(e,t){if(1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div",2),r.Xb(3,"input",3,4),r.jc("ngModelChange",(function(e){return t.searchInput=e})),r.Wb(),r.Wc(5,v,2,0,"a",5),r.Wb(),r.Wb(),r.Wc(6,C,7,2,"ng-container",6),r.Wc(7,S,5,5,"ng-template",null,7,r.Xc),r.Sb(9,"span",8),r.Wb()),2&e){const e=r.Lc(8);r.Cb(3),r.wc("ngModel",t.searchInput),r.Db("placeholder",t.placeholder),r.Cb(2),r.wc("ngIf",t.searchInput),r.Cb(1),r.wc("ngIf",t.allTags&&0===(null==t.filteredTags?null:t.filteredTags.length)&&(t.isAdmin||!t.workspace.onlyAdminsCreateTag))("ngIfElse",e)}},directives:[p.a,b.c,b.s,b.v,f.u,f.t,b.a],pipes:[m.a],styles:[""],changeDetection:0}),e})()},MXpx:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return e&&e.length>0&&e.some(e=>!!e.description||e.tags&&!!e.tags.length||e.customFieldValues&&!!e.customFieldValues.length)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"checkIfEditedEntries",type:e,pure:!0}),e})()},MtJD:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("ofXK"),s=i("3Pt+"),r=i("iTUp"),o=i("dlKe"),a=i("hT48"),c=i("LNDd"),l=i("1kSV"),u=i("9Trn"),d=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.b,a.a,c.a,l.ab,u.a]]}),e})()},Mxlh:function(e,t,i){"use strict";t.ObjectUnsubscribedError=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},N2Ql:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t){return Number(e/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" "+t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"localizeEarningWithCurrency",type:e,pure:!0}),e})()},NDhe:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("LPYB"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.b]]}),e})()},"NHP+":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("XNiG"),s=i("quSY");class r extends n.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),s.a.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},NTZZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("rnVd");class s{constructor(e,t){this._dateRangeStart=e&&e.dateRangeStart,this._dateRangeEnd=e&&e.dateRangeEnd,this._dateRangeType=e&&e.dateRangeType?n.a[e&&e.dateRangeType]:n.a[t],this._zoomLevel=e&&e.zoomLevel,this._auditFilter=e&&e.detailedFilter&&e.detailedFilter.auditFilter,this._rounding=e&&e.rounding,this._amountOptions=e&&e.amountShown,this._rtl=e&&e.rtl,this._sortOrder=e&&e.sortOrder,this._sortColumn=e&&(e.detailedFilter&&e.detailedFilter.sortColumn||e.summaryFilter&&e.summaryFilter.sortColumn),this._page=e&&e.detailedFilter&&e.detailedFilter.page,this._pageSize=e&&e.detailedFilter&&e.detailedFilter.pageSize,this._billable=e&&e.billable,this._groups=e&&e.summaryFilter&&e.summaryFilter.groups,this._weeklyGroup=e&&e.weeklyFilter&&e.weeklyFilter.group,this._weeklySubgroup=e&&e.weeklyFilter&&e.weeklyFilter.subgroup,this._timeZone=e&&e.timeZone,this._timeFormat=e&&e.timeFormat,this._dateFormat=e&&e.dateFormat,this._weekStart=e&&e.weekStart||"MONDAY",this._showEstimate=e&&e.showEstimate}get dateRangeStart(){return this._dateRangeStart}set dateRangeStart(e){this._dateRangeStart=e}get showEstimate(){return this._showEstimate}set showEstimate(e){this._showEstimate=e}get dateRangeEnd(){return this._dateRangeEnd}set dateRangeEnd(e){this._dateRangeEnd=e}get dateRangeType(){return this._dateRangeType}set dateRangeType(e){this._dateRangeType=e}get zoomLevel(){return this._zoomLevel}set zoomLevel(e){this._zoomLevel=e}get auditFilter(){return this._auditFilter}set auditFilter(e){this._auditFilter=e}get rounding(){return this._rounding}set rounding(e){this._rounding=e}get amountOptions(){return this._amountOptions}set amountOptions(e){this._amountOptions=e}get rtl(){return this._rtl}set rtl(e){this._rtl=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get sortColumn(){return this._sortColumn}set sortColumn(e){this._sortColumn=e}get page(){return this._page}set page(e){this._page=e}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=e}get billable(){return this._billable}get groups(){return this._groups}get weeklyGroup(){return this._weeklyGroup}get weeklySubgroup(){return this._weeklySubgroup}get timeZone(){return this._timeZone}set timeZone(e){this._timeZone=e}get timeFormat(){return this._timeFormat}set timeFormat(e){this._timeFormat=e}get dateFormat(){return this._dateFormat}set dateFormat(e){this._dateFormat=e}get weekStart(){return this._weekStart}set weekStart(e){this._weekStart=e}}class r{constructor(e){this._id=e&&e.id,this._name=e&&e.name,this._email=e&&e.email,this._timeZone=e&&e.timeZone,this._dateFormat=e&&e.dateFormat,this._timeFormat=e&&e.timeFormat,this._weekStart=e&&e.weekStart?e.weekStart:"MONDAY"}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get email(){return this._email}set email(e){this._email=e}get timeZone(){return this._timeZone}set timeZone(e){this._timeZone=e}get dateFormat(){return this._dateFormat}set dateFormat(e){this._dateFormat=e}get timeFormat(){return this._timeFormat}set timeFormat(e){this._timeFormat=e}get weekStart(){return this._weekStart}set weekStart(e){this._weekStart=e}}var o=i("kwab"),a=i("Y9C3");class c{constructor(e){this._id=e&&e.id,this._name=e&&e.name||e.reportName,this._isPublic=e&&e.isPublic,this._visibleToUsers=e&&e.visibleToUsers,this._visibleToUserGroups=e&&e.visibleToUserGroups,this._fixedDate=e&&e.fixedDate,this._scheduledReport=e&&e.scheduledReport?new a.a(e.scheduledReport):null,this._type=e&&e.type,this._userId=e&&e.userId,this._workspaceId=e&&e.workspaceId,this._filters=new s(e&&e.filter,e&&e.dateRangeType),this._user=new r(e&&e.user),this._workspace=e&&new o.a(e.workspace),this._subscriptionPlan=e&&e.subscriptionPlan,this._isAdminOrOwner=e&&e.isAdminOrOwner,this._link=this.getLink(e&&e.id)}getLink(e){return`${window.location.protocol}//${window.location.host}/shared/${e}`}get id(){return this._id}set id(e){this._id=e}get link(){return this._link}set link(e){this._link=e}get name(){return this._name}set name(e){this._name=e}get isPublic(){return this._isPublic}set isPublic(e){this._isPublic=e}get visibleToUsers(){return this._visibleToUsers}set visibleToUsers(e){this._visibleToUsers=e}get visibleToUserGroups(){return this._visibleToUserGroups}set visibleToUserGroups(e){this._visibleToUserGroups=e}get fixedDate(){return this._fixedDate}set fixedDate(e){this._fixedDate=e}get scheduledReport(){return this._scheduledReport}set scheduledReport(e){this._scheduledReport=e}get type(){return this._type}set type(e){this._type=e}get userId(){return this._userId}set userId(e){this._userId=e}get workspaceId(){return this._workspaceId}set workspaceId(e){this._workspaceId=e}get filters(){return this._filters}set filters(e){this._filters=e}get user(){return this._user}set user(e){this._user=e}get workspace(){return this._workspace}set workspace(e){this._workspace=e}get subscriptionPlan(){return this._subscriptionPlan}set subscriptionPlan(e){this._subscriptionPlan=e}get isAdminOrOwner(){return this._isAdminOrOwner}set isAdminOrOwner(e){this._isAdminOrOwner=e}}},Nqck:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ofXK"),s=i("3Pt+"),r=i("R9Cn"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C]]}),e})();var c=i("9Trn");let l=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.b,a,c.a]]}),e})()},Nu56:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("fXoL"),s=i("ofXK"),r=i("okBH");function o(e,t){if(1&e&&(n.Xb(0,"span"),n.Yc(1),n.Wb()),2&e){const e=t.$implicit,i=t.last;n.Cb(1),n.bd(" ",e.name," ",i?"":", "," ")}}function a(e,t){if(1&e&&(n.Xb(0,"span",2),n.Wc(1,o,2,2,"span",3),n.oc(2,"sortBy"),n.Wb()),2&e){const e=n.nc();n.Db("title",e.attributeTitle),n.Cb(1),n.wc("ngForOf",n.qc(2,3,e.tags,e.sortByNameMapper))("ngForTrackBy",e.trackByFn)}}function c(e,t){1&e&&(n.Xb(0,"div",5),n.Xb(1,"a",6),n.Yc(2,"Add tags"),n.Wb(),n.Wb())}function l(e,t){if(1&e&&n.Wc(0,c,3,0,"div",4),2&e){const e=n.nc();n.wc("ngIf",!e.hideAddingTags)}}let u=(()=>{class e{constructor(){this.sortByNameMapper=e=>e.name}set tags(e){this._tags=e,this.attributeTitle="",e&&e.forEach(e=>{this.attributeTitle+=e.name+"\n"})}get tags(){return this._tags}ngOnInit(){}trackByFn(e,t){return t.id}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["tag-names-text-only"]],inputs:{tags:"tags",hideAddingTags:"hideAddingTags"},decls:3,vars:2,consts:[["class","cl-badge cl-badge-tag cl-cut-text",4,"ngIf","ngIfElse"],["tagIcon",""],[1,"cl-badge","cl-badge-tag","cl-cut-text"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cl-dropdown-toggle cl-no-arrow",4,"ngIf"],[1,"cl-dropdown-toggle","cl-no-arrow"],[1,"cl-btn","cl-btn-sm","cl-btn-outline-light"]],template:function(e,t){if(1&e&&(n.Wc(0,a,3,6,"span",0),n.Wc(1,l,1,1,"ng-template",null,1,n.Xc)),2&e){const e=n.Lc(2);n.wc("ngIf",(null==t.tags?null:t.tags.length)>0)("ngIfElse",e)}},directives:[s.u,s.t],pipes:[r.a],encapsulation:2,changeDetection:0}),e})()},Oieg:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._name=e.name,this._id=e.id,this._workspaceId=e.workspaceId,this._userIds=e.userIds}static findGroupOfUser(e,t){return e.filter(e=>-1!==e.userIds.indexOf(t))}static clone(e){if(!e)return new n;const t={};return t.name=e.name,t.id=e.id,t.workspaceId=e.workspaceId,t.userIds=[...e.userIds],t.isNew=e.isNew,t.userNames=e.userNames,new n(t)}get name(){return this._name}set name(e){this._name=e}get id(){return this._id}set id(e){this._id=e}get workspaceId(){return this._workspaceId}set workspaceId(e){this._workspaceId=e}get userIds(){return this._userIds}set userIds(e){this._userIds=e}get isNew(){return this._isNew}set new(e){this._isNew=e}get userNames(){return this._userNames}set userNames(e){this._userNames=e}}},"Q+u6":function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("1G5W"),s=i("fXoL"),r=i("Jmk/"),o=i("NHP+"),a=i("zDGq"),c=i("LfE4"),l=i("ofXK"),u=i("okBH");const d=["searchField"];function h(e,t){if(1&e){const e=s.Yb();s.Xb(0,"a",9),s.jc("click",(function(){s.Oc(e);const t=s.nc(),i=s.Lc(4);return i.value="",t.filterQuery(i),i.focus()})),s.Sb(1,"img",10),s.Wb()}}function p(e,t){if(1&e){const e=s.Yb();s.Xb(0,"li",11),s.jc("click",(function(){return s.Oc(e),s.nc().noClientChoosen()})),s.Yc(1),s.Wb()}if(2&e){const e=s.nc();s.Cb(1),s.ad("Without ",e.projectGroupingLabel,"")}}function b(e,t){if(1&e){const e=s.Yb();s.Vb(0),s.Xb(1,"li",12),s.jc("click",(function(){s.Oc(e);const i=t.$implicit;return s.nc().chooseItem(i)})),s.Yc(2),s.Wb(),s.Ub()}if(2&e){const e=t.$implicit;s.Cb(1),s.Db("title",e.name),s.Cb(1),s.Zc(e.name)}}function f(e,t){if(1&e&&(s.Xb(0,"div"),s.Yc(1),s.Wb()),2&e){const e=s.nc(2);s.Cb(1),s.ad("No matching ",e.projectGroupingLabel,"")}}function m(e,t){if(1&e&&(s.Xb(0,"div"),s.Yc(1),s.Wb()),2&e){const e=s.nc(2);s.Cb(1),s.ad("No ",e.projectGroupingLabel,"s yet")}}function g(e,t){1&e&&(s.Xb(0,"div",18),s.Yc(1,"Start typing to create one."),s.Wb())}function v(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",18),s.Yc(1," Press Ctrl+Enter to quickly "),s.Xb(2,"a",19),s.jc("click",(function(){s.Oc(e);const t=s.nc(2);return t.createNewClient(t.inputValue)})),s.Yc(3),s.Wb(),s.Wb()}if(2&e){const e=s.nc(2);s.Cb(3),s.bd(" create '",e.inputValue,"' ",e.projectGroupingLabel,". ")}}function w(e,t){if(1&e&&(s.Xb(0,"div",13),s.Xb(1,"div",14),s.Wc(2,f,2,1,"div",15),s.Wc(3,m,2,1,"ng-template",null,16,s.Xc),s.Wc(5,g,2,0,"div",17),s.Wc(6,v,4,2,"div",17),s.Wb(),s.Wb()),2&e){const e=s.Lc(4),t=s.nc();s.Cb(2),s.wc("ngIf",null==t.clientsList?null:t.clientsList.length)("ngIfElse",e),s.Cb(3),s.wc("ngIf",!t.inputValue),s.Cb(1),s.wc("ngIf",t.inputValue&&t.inputValue.trim().length)}}let y=(()=>{class e{constructor(e,t,i){this.clientService=e,this.keyboardService=t,this.cd=i,this.isSelectClientOpen=new s.n,this.unsubscribe$=new o.a,this.choosenItem=new s.n,this.withoutClient=new s.n,this.sortByNameMapper=e=>e.name}ngOnInit(){this.clientsList=[],this.clientService.clients.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientsList=e,this.filteredClients=this.clientsList,this.cd.detectChanges()}),this.getAllClients(),this.clientService.client.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientsList.push(e),this.filteredClients.push(e),this.showChooseItem(e),this.chooseItem(e)}),this.clientService.createdClient.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientsList.push(e),this.filteredClients.push(e),this.chooseItem(e)}),this.keyboardService.keyboardCtrlEnter$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.filteredClients&&0===this.filteredClients.length&&this.createNewClient(this.inputValue)}),this.searchField&&this.searchField.nativeElement.focus()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}isSelectClientMenuOpen(){this.isSelectClientOpen.emit(!1)}getAllClients(){this.clientService.getAllClients(c.a.ACTIVE,this.workspaceId)}filterQuery(e){this.inputValue=e.value,this.filteredClients=this.clientsList.filter(e=>-1!==e.name.toLowerCase().indexOf(this.inputValue.toLowerCase()))}chooseItem(e){for(const t of this.filteredClients)t.name===e.name&&(this.showChooseItem(e),this.selectItem=e,this.isSelectClientMenuOpen())}showChooseItem(e){this.choosenItem.emit(e)}createNewClient(e){(e=e&&e.trim())&&(this.clientService.create(e,this.projectGroupingLabel,this.workspaceId),this.isSelectClientMenuOpen())}noClientChoosen(){this.withoutClient.emit("Select "+this.projectGroupingLabel),this.isSelectClientMenuOpen()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(r.a),s.Rb(a.a),s.Rb(s.h))},e.\u0275cmp=s.Lb({type:e,selectors:[["select-client-dropdown"]],viewQuery:function(e,t){var i;1&e&&s.Uc(d,!0),2&e&&s.Kc(i=s.kc())&&(t.searchField=i.first)},inputs:{projectGroupingLabel:"projectGroupingLabel",workspaceId:"workspaceId",selectedId:"selectedId"},outputs:{isSelectClientOpen:"isSelectClientOpen",choosenItem:"choosenItem",withoutClient:"withoutClient"},decls:12,vars:8,consts:[[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],["type","text","tabindex","0","autocomplete","off","autofocus","",1,"cl-form-control","cl-input-has-clear",3,"placeholder","input"],["searchField",""],["class","cl-clear-input","doNotCloseDropdown","",3,"click",4,"ngIf"],[1,"cl-dropdown-menu","cl-scroll-area","cl-mt-0","cl-pt-0"],["class","cl-dropdown-item pointer",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cl-dropdown-menu-sub-header",4,"ngIf"],["doNotCloseDropdown","",1,"cl-clear-input",3,"click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""],[1,"cl-dropdown-item","pointer",3,"click"],["clickCloseDropdown","",1,"cl-dropdown-item","pointer",3,"click"],[1,"cl-dropdown-menu-sub-header"],[1,"cl-dropdown-item-padding"],[4,"ngIf","ngIfElse"],["noClients",""],["class","cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-h6","cl-mb-0"],[1,"cl-color-blue",3,"click"]],template:function(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div"),s.Xb(1,"div",0),s.Xb(2,"div",1),s.Xb(3,"input",2,3),s.jc("input",(function(){s.Oc(e);const i=s.Lc(4);return t.filterQuery(i)})),s.Wb(),s.Wc(5,h,2,0,"a",4),s.Wb(),s.Wb(),s.Xb(6,"div"),s.Xb(7,"ul",5),s.Wc(8,p,2,1,"li",6),s.Wc(9,b,3,2,"ng-container",7),s.oc(10,"sortBy"),s.Wb(),s.Wc(11,w,7,4,"div",8),s.Wb(),s.Wb()}if(2&e){const e=s.Lc(4);s.Cb(3),s.yc("placeholder","Add/Find ",t.projectGroupingLabel,""),s.Cb(2),s.wc("ngIf",e.value),s.Cb(3),s.wc("ngIf",!t.inputValue&&t.selectedId),s.Cb(1),s.wc("ngForOf",s.qc(10,5,t.filteredClients,t.sortByNameMapper)),s.Cb(2),s.wc("ngIf",t.filteredClients&&0===t.filteredClients.length)}},directives:[l.u,l.t],pipes:[u.a],encapsulation:2}),e})()},Q1FS:function(e,t,i){"use strict";var n=i("yx2s"),s=i("Xwq/"),r=i("zfKp"),o=i("9AGB"),a=i("n3uD");function c(e){if(e||(e=a.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var n=this.operator,r=s.toSubscriber(e,t,i);if(r.add(n?n.call(r,this.source):this.source||a.config.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),a.config.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),n.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=c(t))((function(t,n){var s;s=i.subscribe((function(t){try{e(t)}catch(i){n(i),s&&s.unsubscribe()}}),n,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[r.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:o.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=c(e))((function(e,i){var n;t.subscribe((function(e){return n=e}),(function(e){return i(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}()},QAEb:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("ofXK"),s=i("9Trn"),r=i("3Pt+"),o=i("dlKe"),a=i("9O0/"),c=i("qcnj"),l=i("iTUp"),u=i("cDkn"),d=i("brRw"),h=i("ksGH"),p=i("fXoL");let b=(()=>{class e{}return e.\u0275mod=p.Pb({type:e}),e.\u0275inj=p.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})(),f=(()=>{class e{}return e.\u0275mod=p.Pb({type:e}),e.\u0275inj=p.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,r.m,l.a,o.b,h.a,a.a,u.a,b]]}),e})();var m=i("1kSV");let g=(()=>{class e{}return e.\u0275mod=p.Pb({type:e}),e.\u0275inj=p.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a,h.a,m.ab,r.m,o.b,a.a,d.a,c.a,l.a,u.a,f,b]]}),e})()},QKuU:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("2Vo4"),s=i("/uUt"),r=i("fXoL");let o=(()=>{class e{constructor(e,t){this._elementRef=e,this.renderer=t,this.clickedSubject=new n.a(!1),this.clicked$=this.clickedSubject.asObservable().pipe(Object(s.a)()),this.documentClicked=e=>{this._elementRef.nativeElement.contains(e.target)||this.closeDropdown()}}clicked(e){if(this.show)e.hasAttribute("closeDropdown")&&this.closeDropdown();else{if(e.hasAttribute("doNotOpen"))return;this.show=!0,this.clickedSubject.next(this.show),this.listenerFn=this.renderer.listen(document,"click",this.documentClicked)}}ngOnDestroy(){this.removeListener()}closeDropdown(){this.show=!1,this.clickedSubject.next(this.show),this.removeListener()}removeListener(){this.listenerFn&&this.listenerFn()}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(r.l),r.Rb(r.F))},e.\u0275dir=r.Mb({type:e,selectors:[["","dropdown",""]],hostBindings:function(e,t){1&e&&r.jc("click",(function(e){return t.clicked(e.target)}))},exportAs:["dropdown"]}),e})()},QTph:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("Oieg"),s=i("tk/3"),r=i("lGQG"),o=i("1Tmk"),a=i("lJxs"),c=i("fXoL"),l=i("tyNb");let u=(()=>{class e{constructor(e,t,i,n){this.http=e,this.router=t,this.authService=i,this.workspaceService=n}getUserGroups(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),r=(new s.f).append("projectId",e.projectId||"").append("name",e.name||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"").append("page-size",e.limit||"");return this.http.get(`/workspaces/${i}/userGroups/full`,{params:r}).pipe(Object(a.a)(e=>(e.groups=e.groups.map(e=>new n.a(e)),e)))}}return e.\u0275fac=function(t){return new(t||e)(c.fc(s.b),c.fc(l.c),c.fc(r.a),c.fc(o.a))},e.\u0275prov=c.Nb({token:e,factory:e.\u0275fac}),e})()},Qd9e:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("ofXK"),s=i("3Pt+"),r=i("iTUp"),o=i("ksGH"),a=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.a]]}),e})()},QeEd:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("wd/R"),s=i("xoOP"),r=i("lvCY"),o=i("5Ra6"),a=i("ZHjv"),c=i("PW4C"),l=i("Rt6l"),u=i("hkzH"),d=i("8+Zx"),h=i("lGQG"),p=i("jtSf"),b=i("fXoL");let f=(()=>{class e{constructor(e,t,i){this.timezoneConverter=e,this.uiSettingsService=t,this.authService=i}getUrlParams(e,t,i){e=e||{};const n=this.uiSettingsService.getStandardFilters(t),o={};if(o.page=Object(s.u)(e.page)&&e.page>0?Number(e.page):1,Object(s.u)(e.pageSize)&&e.pageSize>0&&e.pageSize<=500)o.pageSize=Number(e.pageSize);else{const e=this.uiSettingsService.getSettings(c.b.DETAILED_PAGE_SIZE);o.pageSize=e||r.j}const a=new l.a(e.unit,e.compare,e.durationInput,e.audit),h=n.includes(u.e),p=h&&e.description||"",b=h&&e.withoutDescription;let f;try{f=JSON.parse(e.filterOptions||null)||{}}catch(k){f={}}f[u.h.TAGS]=f[u.h.TAGS]||Object(u.n)();const m={};let g;try{g=JSON.parse(e.filterValuesData||null)||{}}catch(k){g={}}const v=e.exclude?e.exclude.split(","):[];if(v.includes(u.h.USERS_AND_GROUP)||g[u.j]||g[u.f]){const e={exclude:v.includes(u.h.USERS_AND_GROUP),map:{[u.j]:g[u.j],[u.f]:g[u.f]},options:f[u.h.USERS_AND_GROUP]||Object(u.o)()};n.includes(u.h.USERS_AND_GROUP)&&(m[u.h.USERS_AND_GROUP]=new d.a(e));const t=v.indexOf(u.h.USERS_AND_GROUP);t>-1&&v.splice(t,1),delete g[u.j],delete g[u.f]}if(g[u.a]||g[u.b]||g[u.g]){const e={map:{[u.a]:g[u.a],[u.b]:g[u.b],[u.g]:g[u.g]}};n.includes(u.h.STATUSES)&&(m[u.h.STATUSES]=new d.a(e)),delete g[u.a],delete g[u.b],delete g[u.g]}for(const s in g){const e={exclude:v.includes(s),map:{[s]:g[s]},options:f[s]};n.includes(s)&&(m[s]=new d.a(e))}let w;v.forEach((e,t)=>{n.includes(e)&&!m[e]&&(m[e]=new d.a({exclude:!0}))});try{w=JSON.parse(e.customFieldParams)||[]}catch(k){w=[]}const y=this.uiSettingsService.getCustomFilters(t),C=[];return w.forEach(e=>{y.includes(e.id)&&C.push(e)}),{filterValuesData:m,description:p,withoutDescription:b,audit:a,pagination:o,customFieldParams:C}}getDateAndZoomLevel(e,t,i=!0){let r;const o=this.authService.getUser(),c=t||o.settings.weekStart;if(e&&e.start&&e.end){const t=n(e.start),i=n(e.end);r=t.isValid()&&i.isValid()&&t.isBefore(i)?{start:n(e.start),end:n(e.end)}:Object(a.c)(c,this.timezoneConverter)}else r=Object(a.c)(c,this.timezoneConverter);const l=Object(s.x)(r.start,r.end);!i&&l&&(r=Object(a.c)(c,this.timezoneConverter));const u=t||o.settings.weekStart||"MONDAY",d=Object(p.d)(r),{zoomLevel:h}=Object(p.b)(d,u);return{zoomLevel:h,dateRange:r}}}return e.\u0275fac=function(t){return new(t||e)(b.fc(o.a),b.fc(c.a),b.fc(h.a))},e.\u0275prov=b.Nb({token:e,factory:e.\u0275fac}),e})()},Qyj8:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("XNiG"),s=i("tk/3"),r=i("lGQG"),o=i("1Tmk"),a=i("lJxs"),c=i("Tj/N"),l=i("lvCY"),u=i("k2Yt"),d=i("FwEu"),h=i("fXoL"),p=i("tyNb");let b=(()=>{class e{constructor(e,t,i,s){this.http=e,this.router=t,this.authService=i,this.workspaceService=s,this.error=new n.a,this.users$=new n.a}getUsers(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new s.f).append("email",e.email||"").append("projectId",e.projectId||"").append("name",e.name||"").append("status","ALL"===e.status?"":e.status||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||l.j).append("memberships","NONE");return this.http.get(`/v1/workspaces/${i}/users/`,{params:n}).pipe(Object(a.a)(e=>e.map(e=>new c.a(e))))}getUsersByIds(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${i}/userIds/`,{userIds:e}).pipe(Object(a.a)(e=>e.map(e=>new c.a(e))))}getUsersAndUsersFromUserGroupsAssignedToProject(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new s.f).append("name",e.name||"").append("status",e.status||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||l.j);return this.http.get(`/users/workspaces/${i}/projects/${e.projectId}`,{params:n}).pipe(Object(a.a)(e=>e.map(e=>new c.a(e))))}getUsersWithCount(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new s.f).append("projectId",e.projectId||"").append("name",e.name||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||l.j).append("memberships","NONE");return this.http.get(`/users/workspaces/${i}/count`,{params:n}).pipe(Object(a.a)(e=>({users:e.users.map(e=>new c.a(e)),count:e.count})))}getActiveUsersInGroup(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.userGroupId,n=(new s.f).append("name",e.name||"").append("page",e.page||1).append("page-size",e.pageSize||e.limit);return this.http.get(`/users/workspaces/${t}/user-groups/${i}`,{params:n}).pipe(Object(a.a)(e=>e.map(e=>new u.a(e))))}getTeamMembers(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new s.f).append("name",e.name||"").append("page",e.page||"0").append("page-size",e.limit||l.j).append("status",d.a.ACTIVE).append("memberships","NONE");return this.http.get(`/v1/workspaces/${t}/users/`,{params:i}).pipe(Object(a.a)(e=>e.map(e=>new u.a(e))))}}return e.\u0275fac=function(t){return new(t||e)(h.fc(s.b),h.fc(p.c),h.fc(r.a),h.fc(o.a))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac}),e})()},R9Cn:function(e,t,i){"use strict";i.d(t,"a",(function(){return $})),i.d(t,"b",(function(){return G}));var n=i("fXoL"),s=i("ofXK");const r=["dialogPopup"],o=["hueSlider"],a=["alphaSlider"];function c(e,t){if(1&e&&n.Sb(0,"div"),2&e){const e=n.nc();n.Fb("arrow arrow-",e.cpUsePosition,""),n.Vc("top",e.arrowTop,"px")}}function l(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",26),n.jc("newValue",(function(t){return n.Oc(e),n.nc().onColorChange(t)}))("dragStart",(function(){return n.Oc(e),n.nc().onDragStart("saturation-lightness")}))("dragEnd",(function(){return n.Oc(e),n.nc().onDragEnd("saturation-lightness")})),n.Sb(1,"div",13),n.Wb()}if(2&e){const e=n.nc();n.Vc("background-color",e.hueSliderColor),n.wc("rgX",1)("rgY",1),n.Cb(1),n.Vc("top",null==e.slider?null:e.slider.v,"px")("left",null==e.slider?null:e.slider.s,"px")}}function u(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",27),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.onAddPresetColor(t,i.selectedColor)})),n.Yc(1),n.Wb()}if(2&e){const e=n.nc();n.Eb(e.cpAddColorButtonClass),n.wc("disabled",e.cpPresetColors&&e.cpPresetColors.length>=e.cpMaxPresetColorsLength),n.Cb(1),n.ad(" ",e.cpAddColorButtonText," ")}}function d(e,t){1&e&&n.Sb(0,"div",28)}function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.cmykText?null:e.cmykText.a)}}function p(e,t){1&e&&(n.Xb(0,"div"),n.Yc(1,"A"),n.Wb())}function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",29),n.Xb(1,"div",30),n.Xb(2,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onCyanInput(t)})),n.Wb(),n.Xb(3,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onMagentaInput(t)})),n.Wb(),n.Xb(4,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onYellowInput(t)})),n.Wb(),n.Xb(5,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onBlackInput(t)})),n.Wb(),n.Wc(6,h,1,2,"input",32),n.Wb(),n.Xb(7,"div",30),n.Xb(8,"div"),n.Yc(9,"C"),n.Wb(),n.Xb(10,"div"),n.Yc(11,"M"),n.Wb(),n.Xb(12,"div"),n.Yc(13,"Y"),n.Wb(),n.Xb(14,"div"),n.Yc(15,"K"),n.Wb(),n.Wc(16,p,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Vc("display",3!==e.format?"none":"block"),n.Cb(2),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.c),n.Cb(1),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.m),n.Cb(1),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.y),n.Cb(1),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.k),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel),n.Cb(10),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function m(e,t){1&e&&(n.Xb(0,"div"),n.Yc(1,"A"),n.Wb())}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",35),n.Xb(1,"div",30),n.Xb(2,"input",36),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onHueInput(t)})),n.Wb(),n.Xb(3,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onSaturationInput(t)})),n.Wb(),n.Xb(4,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onLightnessInput(t)})),n.Wb(),n.Wc(5,f,1,2,"input",32),n.Wb(),n.Xb(6,"div",30),n.Xb(7,"div"),n.Yc(8,"H"),n.Wb(),n.Xb(9,"div"),n.Yc(10,"S"),n.Wb(),n.Xb(11,"div"),n.Yc(12,"L"),n.Wb(),n.Wc(13,m,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Vc("display",2!==e.format?"none":"block"),n.Cb(2),n.wc("rg",360)("value",null==e.hslaText?null:e.hslaText.h),n.Cb(1),n.wc("rg",100)("value",null==e.hslaText?null:e.hslaText.s),n.Cb(1),n.wc("rg",100)("value",null==e.hslaText?null:e.hslaText.l),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel),n.Cb(8),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.rgbaText?null:e.rgbaText.a)}}function w(e,t){1&e&&(n.Xb(0,"div"),n.Yc(1,"A"),n.Wb())}function y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",37),n.Xb(1,"div",30),n.Xb(2,"input",38),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onRedInput(t)})),n.Wb(),n.Xb(3,"input",38),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onGreenInput(t)})),n.Wb(),n.Xb(4,"input",38),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onBlueInput(t)})),n.Wb(),n.Wc(5,v,1,2,"input",32),n.Wb(),n.Xb(6,"div",30),n.Xb(7,"div"),n.Yc(8,"R"),n.Wb(),n.Xb(9,"div"),n.Yc(10,"G"),n.Wb(),n.Xb(11,"div"),n.Yc(12,"B"),n.Wb(),n.Wc(13,w,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Vc("display",1!==e.format?"none":"block"),n.Cb(2),n.wc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.r),n.Cb(1),n.wc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.g),n.Cb(1),n.wc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.b),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel),n.Cb(8),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",e.hexAlpha)}}function k(e,t){1&e&&(n.Xb(0,"div"),n.Yc(1,"A"),n.Wb())}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",39),n.Xb(1,"div",30),n.Xb(2,"input",40),n.jc("blur",(function(){return n.Oc(e),n.nc().onHexInput(null)}))("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onHexInput(t)})),n.Wb(),n.Wc(3,C,1,2,"input",32),n.Wb(),n.Xb(4,"div",30),n.Xb(5,"div"),n.Yc(6,"Hex"),n.Wb(),n.Wc(7,k,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Vc("display",0!==e.format?"none":"block"),n.Hb("hex-alpha","forced"===e.cpAlphaChannel),n.Cb(2),n.wc("value",e.hexText),n.Cb(1),n.wc("ngIf","forced"===e.cpAlphaChannel),n.Cb(4),n.wc("ngIf","forced"===e.cpAlphaChannel)}}function x(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function O(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",41),n.Xb(1,"div",30),n.Xb(2,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onValueInput(t)})),n.Wb(),n.Wc(3,x,1,2,"input",32),n.Wb(),n.Xb(4,"div",30),n.Xb(5,"div"),n.Yc(6,"V"),n.Wb(),n.Xb(7,"div"),n.Yc(8,"A"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("rg",100)("value",null==e.hslaText?null:e.hslaText.l),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",42),n.Xb(1,"span",43),n.jc("click",(function(){return n.Oc(e),n.nc().onFormatToggle(-1)})),n.Wb(),n.Xb(2,"span",43),n.jc("click",(function(){return n.Oc(e),n.nc().onFormatToggle(1)})),n.Wb(),n.Wb()}}function I(e,t){if(1&e){const e=n.Yb();n.Xb(0,"span",50),n.jc("click",(function(t){n.Oc(e);const i=n.nc().$implicit;return n.nc(3).onRemovePresetColor(t,i)})),n.Wb()}if(2&e){const e=n.nc(4);n.Eb(e.cpRemoveColorButtonClass)}}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",48),n.jc("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc(3).setColorFromString(i)})),n.Wc(1,I,1,3,"span",49),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(3);n.Vc("background-color",e),n.Cb(1),n.wc("ngIf",i.cpAddColorButton)}}function T(e,t){if(1&e&&(n.Xb(0,"div"),n.Wc(1,j,2,3,"div",47),n.Wb()),2&e){const e=n.nc(2);n.Eb(e.cpPresetColorsClass),n.Cb(1),n.wc("ngForOf",e.cpPresetColors)}}function E(e,t){if(1&e&&(n.Xb(0,"div"),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Eb(e.cpPresetEmptyMessageClass),n.Cb(1),n.Zc(e.cpPresetEmptyMessage)}}function A(e,t){if(1&e&&(n.Xb(0,"div",44),n.Sb(1,"hr"),n.Xb(2,"div",45),n.Yc(3),n.Wb(),n.Wc(4,T,2,4,"div",46),n.Wc(5,E,2,4,"div",46),n.Wb()),2&e){const e=n.nc();n.Cb(3),n.Zc(e.cpPresetLabel),n.Cb(1),n.wc("ngIf",null==e.cpPresetColors?null:e.cpPresetColors.length),n.Cb(1),n.wc("ngIf",!(null!=e.cpPresetColors&&e.cpPresetColors.length)&&e.cpAddColorButton)}}function _(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",53),n.jc("click",(function(t){return n.Oc(e),n.nc(2).onCancelColor(t)})),n.Yc(1),n.Wb()}if(2&e){const e=n.nc(2);n.Eb(e.cpCancelButtonClass),n.Cb(1),n.Zc(e.cpCancelButtonText)}}function W(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",53),n.jc("click",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)})),n.Yc(1),n.Wb()}if(2&e){const e=n.nc(2);n.Eb(e.cpOKButtonClass),n.Cb(1),n.Zc(e.cpOKButtonText)}}function R(e,t){if(1&e&&(n.Xb(0,"div",51),n.Wc(1,_,2,4,"button",52),n.Wc(2,W,2,4,"button",52),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.cpCancelButton),n.Cb(1),n.wc("ngIf",e.cpOKButton)}}var P=function(e){return e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK",e}({});class M{constructor(e,t,i,n){this.r=e,this.g=t,this.b=i,this.a=n}}class F{constructor(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n}}class X{constructor(e,t,i,n){this.h=e,this.s=t,this.l=i,this.a=n}}class L{constructor(e,t,i,n,s=1){this.c=e,this.m=t,this.y=i,this.k=n,this.a=s}}let N=(()=>{let e=class{constructor(){this.newValue=new n.n}inputChange(e){const t=e.target.value;if(void 0===this.rg)this.newValue.emit(t);else{const e=parseFloat(t);this.newValue.emit({v:e,rg:this.rg})}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","text",""]],hostBindings:function(e,t){1&e&&n.jc("input",(function(e){return t.inputChange(e)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),e})(),B=(()=>{let e=class{constructor(e){this.elRef=e,this.dragEnd=new n.n,this.dragStart=new n.n,this.newValue=new n.n,this.listenerMove=e=>this.move(e),this.listenerStop=()=>this.stop()}mouseDown(e){this.start(e)}touchStart(e){this.start(e)}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){const t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}getY(e){const t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}setCursor(e){const t=this.elRef.nativeElement.offsetWidth,i=this.elRef.nativeElement.offsetHeight,n=Math.max(0,Math.min(this.getX(e),t)),s=Math.max(0,Math.min(this.getY(e),i));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:n/t,v:1-s/i,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:s/i,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:n/t,rgX:this.rgX})}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","slider",""]],hostBindings:function(e,t){1&e&&n.jc("mousedown",(function(e){return t.mouseDown(e)}))("touchstart",(function(e){return t.touchStart(e)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),e})();class Y{constructor(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n}}class V{constructor(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n}}let U=(()=>{let e=class{constructor(){this.active=null}setActive(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}hsva2hsla(e){const t=e.h,i=e.s,n=e.v,s=e.a;if(0===n)return new X(t,0,0,s);if(0===i&&1===n)return new X(t,1,1,s);{const e=n*(2-i)/2;return new X(t,n*i/(1-Math.abs(2*e-1)),e,s)}}hsla2hsva(e){const t=Math.min(e.h,1),i=Math.min(e.s,1),n=Math.min(e.l,1),s=Math.min(e.a,1);if(0===n)return new F(t,0,0,s);{const e=n+i*(1-Math.abs(2*n-1))/2;return new F(t,2*(e-n)/e,e,s)}}hsvaToRgba(e){let t,i,n;const s=e.h,r=e.s,o=e.v,a=e.a,c=Math.floor(6*s),l=6*s-c,u=o*(1-r),d=o*(1-l*r),h=o*(1-(1-l)*r);switch(c%6){case 0:t=o,i=h,n=u;break;case 1:t=d,i=o,n=u;break;case 2:t=u,i=o,n=h;break;case 3:t=u,i=d,n=o;break;case 4:t=h,i=u,n=o;break;case 5:t=o,i=u,n=d;break;default:t=0,i=0,n=0}return new M(t,i,n,a)}cmykToRgb(e){return new M((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}rgbaToCmyk(e){const t=1-Math.max(e.r,e.g,e.b);return 1===t?new L(0,0,0,1,e.a):new L((1-e.r-t)/(1-t),(1-e.g-t)/(1-t),(1-e.b-t)/(1-t),t,e.a)}rgbaToHsva(e){let t,i;const n=Math.min(e.r,1),s=Math.min(e.g,1),r=Math.min(e.b,1),o=Math.min(e.a,1),a=Math.max(n,s,r),c=Math.min(n,s,r),l=a,u=a-c;if(i=0===a?0:u/a,a===c)t=0;else{switch(a){case n:t=(s-r)/u+(s<r?6:0);break;case s:t=(r-n)/u+2;break;case r:t=(n-s)/u+4;break;default:t=0}t/=6}return new F(t,i,l,o)}rgbaToHex(e,t){let i="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(i+=(256|Math.round(255*e.a)).toString(16).substr(1)),i}normalizeCMYK(e){return new L(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new L(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}denormalizeRGBA(e){return new M(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}stringToHsva(e="",t=!1){let i=null;e=(e||"").toLowerCase();const n=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new M(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new X(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];n.push(t?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new M(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new M(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),n.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new M(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}});for(const s in n)if(n.hasOwnProperty(s)){const t=n[s],r=t.re.exec(e),o=r&&t.parse(r);if(o)return o instanceof M?i=this.rgbaToHsva(o):o instanceof X&&(i=this.hsla2hsva(o)),i}return i}outputFormat(e,t,i){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":const t=this.hsva2hsla(e),n=new X(Math.round(360*t.h),Math.round(100*t.s),Math.round(100*t.l),Math.round(100*t.a)/100);return e.a<1||"always"===i?"hsla("+n.h+","+n.s+"%,"+n.l+"%,"+n.a+")":"hsl("+n.h+","+n.s+"%,"+n.l+"%)";case"rgba":const s=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===i?"rgba("+s.r+","+s.g+","+s.b+","+Math.round(100*s.a)/100+")":"rgb("+s.r+","+s.g+","+s.b+")";default:const r="always"===i||"forced"===i;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),r)}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})(),H=(()=>{let e=class{constructor(e,t,i){this.elRef=e,this.cdRef=t,this.service=i,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[P.HEX,P.RGBA,P.HSLA,P.CMYK],this.useRootViewContainer=!1}handleEsc(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}handleEnter(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}ngOnInit(){this.slider=new Y(0,0,0,0),this.sliderDimMax=new V(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?P.CMYK:"rgba"===this.cpOutputFormat?P.RGBA:"hsla"===this.cpOutputFormat?P.HSLA:P.HEX,this.listenerMouseDown=e=>{this.onMouseDown(e)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new V(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(e,t=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e,t,i,n,s,r,o,a,c,l,u,d,h,p,b,f,m,g,v,w,y,C,k,S,x,O,D,I,j,T,E,A,_,W,R){this.setInitialColor(i),this.setColorMode(a),this.isIE10=10===function(){let e="";"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase());const t=e.indexOf("msie ");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=t,this.cpDisableInput=d,this.cpCmykEnabled=c,this.cpAlphaChannel=l,this.cpOutputFormat=u,this.cpDialogDisplay=r,this.cpIgnoredElements=h,this.cpSaveClickOutside=p,this.cpCloseClickOutside=b,this.useRootViewContainer=f,this.width=this.cpWidth=parseInt(n,10),this.height=this.cpHeight=parseInt(s,10),this.cpPosition=m,this.cpPositionOffset=parseInt(g,10),this.cpOKButton=O,this.cpOKButtonText=I,this.cpOKButtonClass=D,this.cpCancelButton=j,this.cpCancelButtonText=E,this.cpCancelButtonClass=T,this.fallbackColor=o||"#fff",this.setPresetConfig(w,y),this.cpPresetColorsClass=C,this.cpMaxPresetColorsLength=k,this.cpPresetEmptyMessage=S,this.cpPresetEmptyMessageClass=x,this.cpAddColorButton=A,this.cpAddColorButtonText=W,this.cpAddColorButtonClass=_,this.cpRemoveColorButtonClass=R,v||(this.dialogArrowOffset=0),"inline"===r&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===u&&"always"!==l&&"forced"!==l&&(this.cpAlphaChannel="disabled")}setColorMode(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}setInitialColor(e){this.initialColor=e}setPresetConfig(e,t){this.cpPresetLabel=e,this.cpPresetColors=t}setColorFromString(e,t=!0,i=!0){let n;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(n=this.service.stringToHsva(e,!0),n||this.hsva||(n=this.service.stringToHsva(e,!1))):n=this.service.stringToHsva(e,!1),n||this.hsva||(n=this.service.stringToHsva(this.fallbackColor,!1)),n&&(this.hsva=n,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(t,i))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}onMouseDown(e){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter(t=>t===e.target).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}onAcceptColor(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(e){this.hsva=null,e.stopPropagation(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker()),this.directiveInstance.colorCanceled()}onFormatToggle(e){const t=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),i=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[i]}onColorChange(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);let t=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(t=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const i=t.test(e);i&&(e.length<5&&(e="#"+e.substring(1).split("").map(e=>e+e).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:i,value:e,color:this.outputColor})}}onRedInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:i,value:t.r,color:this.outputColor})}onBlueInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:i,value:t.b,color:this.outputColor})}onGreenInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:i,value:t.g,color:this.outputColor})}onHueInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}onValueInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}onAlphaInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}onLightnessInput(e){const t=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:i,value:t.l,color:this.outputColor})}onSaturationInput(e){const t=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:i,value:t.s,color:this.outputColor})}onCyanInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(e,t){e.stopPropagation(),this.cpPresetColors.filter(e=>e===t).length||(this.cpPresetColors=this.cpPresetColors.concat(t),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(e,t){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(e=>e!==t),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,t=!0,i=!1){if(this.sliderDimMax){let n,s,r;2===this.cpColorMode&&(this.hsva.s=0);const o=this.outputColor;if(s=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(i?(r=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(r)):(r=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(r))),r=this.service.denormalizeRGBA(r),this.sliderH=this.hsva.h):r=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),n=this.service.denormalizeRGBA(this.service.hsvaToRgba(new F(this.sliderH||this.hsva.h,1,1,1))),t&&(this.hslaText=new X(Math.round(360*s.h),Math.round(100*s.s),Math.round(100*s.l),Math.round(100*s.a)/100),this.rgbaText=new M(r.r,r.g,r.b,Math.round(100*r.a)/100),this.cpCmykEnabled&&(this.cmykText=new L(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(r,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==P.RGBA&&this.format!==P.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?P.RGBA:P.HEX),this.hueSliderColor="rgb("+n.r+","+n.g+","+n.b+")",this.alphaSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==P.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const e=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${e})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new Y((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&o!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let e,t="static",i="",n=null,s=null,r=this.directiveElementRef.nativeElement.parentNode;const o=this.dialogElement.nativeElement.offsetHeight;for(;null!==r&&"HTML"!==r.tagName;){if(e=window.getComputedStyle(r),t=e.getPropertyValue("position"),i=e.getPropertyValue("transform"),"static"!==t&&null===n&&(n=r),i&&"none"!==i&&null===s&&(s=r),"fixed"===t){n=s;break}r=r.parentNode}const a=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!n||n instanceof HTMLUnknownElement))this.top=a.top,this.left=a.left;else{null===n&&(n=r);const e=this.createDialogBox(n,"fixed"!==t);this.top=a.top-e.top,this.left=a.left-e.left}"fixed"===t&&(this.position="fixed");let c=this.cpPosition;if("auto"===this.cpPosition){let e="right",t="bottom";const i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this.left+this.cpWidth>i&&(e="left"),this.top+o>n&&(t="top"),c=e+"-"+t}this.cpUsePosition=c,"top"===c?(this.arrowTop=o-1,this.top-=o+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):"bottom"===c?(this.top+=a.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):"top-left"===c||"left-top"===c?(this.top-=o-a.height+a.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===c||"right-top"===c?(this.top-=o-a.height+a.height*this.cpPositionOffset/100,this.left+=a.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===c||"bottom-left"===c||"left-bottom"===c?(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=a.width+this.dialogArrowSize-2)}}isDescendant(e,t){let i=t.parentNode;for(;null!==i;){if(i===e)return!0;i=i.parentNode}return!1}createDialogBox(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.h),n.Rb(U))},e.\u0275cmp=n.Lb({type:e,selectors:[["color-picker"]],viewQuery:function(e,t){var i;1&e&&(n.Uc(r,!0),n.Uc(o,!0),n.Uc(a,!0)),2&e&&(n.Kc(i=n.kc())&&(t.dialogElement=i.first),n.Kc(i=n.kc())&&(t.hueSlider=i.first),n.Kc(i=n.kc())&&(t.alphaSlider=i.first))},hostBindings:function(e,t){1&e&&n.jc("keyup.esc",(function(e){return t.handleEsc(e)}),!1,n.Mc)("keyup.enter",(function(e){return t.handleEnter(e)}),!1,n.Mc)},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"div",0,1),n.jc("click",(function(e){return e.stopPropagation()})),n.Wc(2,c,1,5,"div",2),n.Wc(3,l,2,8,"div",3),n.Xb(4,"div",4),n.Xb(5,"div",5),n.Sb(6,"div",6),n.Sb(7,"div",7),n.Wc(8,u,2,5,"button",8),n.Wb(),n.Xb(9,"div",9),n.Wc(10,d,1,0,"div",10),n.Xb(11,"div",11,12),n.jc("newValue",(function(e){return t.onHueChange(e)}))("dragStart",(function(){return t.onDragStart("hue")}))("dragEnd",(function(){return t.onDragEnd("hue")})),n.Sb(13,"div",13),n.Wb(),n.Xb(14,"div",14,15),n.jc("newValue",(function(e){return t.onValueChange(e)}))("dragStart",(function(){return t.onDragStart("value")}))("dragEnd",(function(){return t.onDragEnd("value")})),n.Sb(16,"div",13),n.Wb(),n.Xb(17,"div",16,17),n.jc("newValue",(function(e){return t.onAlphaChange(e)}))("dragStart",(function(){return t.onDragStart("alpha")}))("dragEnd",(function(){return t.onDragEnd("alpha")})),n.Sb(19,"div",13),n.Wb(),n.Wb(),n.Wb(),n.Wc(20,b,17,12,"div",18),n.Wc(21,g,14,10,"div",19),n.Wc(22,y,14,10,"div",20),n.Wc(23,S,8,7,"div",21),n.Wc(24,O,9,3,"div",22),n.Wc(25,D,3,0,"div",23),n.Wc(26,A,6,3,"div",24),n.Wc(27,R,3,2,"div",25),n.Wb()),2&e&&(n.Vc("display",t.show?"block":"none")("visibility",t.hidden?"hidden":"visible")("top",t.top,"px")("left",t.left,"px")("position",t.position)("height",t.cpHeight,"px")("width",t.cpWidth,"px"),n.Hb("open",t.show),n.Cb(2),n.wc("ngIf","popup"==t.cpDialogDisplay),n.Cb(1),n.wc("ngIf",1===(t.cpColorMode||1)),n.Cb(4),n.Vc("background-color",t.selectedColor),n.Cb(1),n.wc("ngIf",t.cpAddColorButton),n.Cb(2),n.wc("ngIf","disabled"===t.cpAlphaChannel),n.Cb(1),n.Vc("display",1===(t.cpColorMode||1)?"block":"none"),n.wc("rgX",1),n.Cb(2),n.Vc("left",null==t.slider?null:t.slider.h,"px"),n.Cb(1),n.Vc("display",2===(t.cpColorMode||1)?"block":"none"),n.wc("rgX",1),n.Cb(2),n.Vc("right",null==t.slider?null:t.slider.v,"px"),n.Cb(1),n.Vc("display","disabled"===t.cpAlphaChannel?"none":"block")("background-color",t.alphaSliderColor),n.wc("rgX",1),n.Cb(2),n.Vc("left",null==t.slider?null:t.slider.a,"px"),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&2===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",(null==t.cpPresetColors?null:t.cpPresetColors.length)||t.cpAddColorButton),n.Cb(1),n.wc("ngIf",t.cpOKButton||t.cpCancelButton))},directives:[s.u,B,N,s.t],styles:[".color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:1px solid #777;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 transparent transparent}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:transparent transparent #777}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{right:-21px;bottom:8px;border-width:5px 10px;border-color:transparent transparent transparent #777}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{bottom:8px;left:-20px;border-width:5px 10px;border-color:transparent #777 transparent transparent}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{top:8px;right:-21px;border-width:5px 10px;border-color:transparent transparent transparent #777}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{top:8px;left:-20px;border-width:5px 10px;border-color:transparent #777 transparent transparent}.color-picker .cursor{position:relative;width:16px;height:16px;border:2px solid #222;border-radius:50%;cursor:default}.color-picker .box{display:-webkit-box;display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{-webkit-box-flex:1;flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:1px solid #a9a9a9;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;-webkit-box-flex:1;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{-webkit-box-flex:1;flex:1 1 auto;padding:1px;border:1px solid #a9a9a9}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{-webkit-box-flex:3;flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{-webkit-box-flex:1;flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;-webkit-box-flex:1;flex:1;padding:1px;margin:0 8px 0 0;border:1px solid #a9a9a9}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{-webkit-box-align:center;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:0 0}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class::before{content:'x';position:relative;bottom:3.5px;display:inline-block;font-size:10px}"],encapsulation:2}),e})(),$=(()=>{let e=class{constructor(e,t,i,s,r,o){this.injector=e,this.cfr=t,this.appRef=i,this.vcRef=s,this.elRef=r,this._service=o,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new n.n(!0),this.cpToggleChange=new n.n(!0),this.cpSliderChange=new n.n(!0),this.cpSliderDragEnd=new n.n(!0),this.cpSliderDragStart=new n.n(!0),this.colorPickerOpen=new n.n(!0),this.colorPickerClose=new n.n(!0),this.colorPickerCancel=new n.n(!0),this.colorPickerSelect=new n.n(!0),this.colorPickerChange=new n.n(!1),this.cpCmykColorChange=new n.n(!0),this.cpPresetColorsChange=new n.n(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(e){this.inputChange(e)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const t=this.injector.get(this.appRef.componentTypes[0],n.r.NULL);t!==n.r.NULL?(e=t.vcRef||t.viewContainerRef||this.vcRef,e===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")):this.viewAttachedToAppRef=!0}const t=this.cfr.resolveComponentFactory(H);if(this.viewAttachedToAppRef)this.cmpRef=t.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const i=n.E.fromResolvedProviders([],e.parentInjector);this.cmpRef=e.createComponent(t,0,i,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(e){this.cpCmykColorChange.emit(e)}stateChanged(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(e,t=!0){this.ignoreChanges=t,this.colorPickerChange.emit(e)}colorSelected(e){this.colorPickerSelect.emit(e)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter(t=>t===e);this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(e){this.cpInputChange.emit(e)}sliderChanged(e){this.cpSliderChange.emit(e)}sliderDragEnd(e){this.cpSliderDragEnd.emit(e)}sliderDragStart(e){this.cpSliderDragStart.emit(e)}presetColorsChanged(e){this.cpPresetColorsChange.emit(e)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.r),n.Rb(n.j),n.Rb(n.g),n.Rb(n.P),n.Rb(n.l),n.Rb(U))},e.\u0275dir=n.Mb({type:e,selectors:[["","colorPicker",""]],hostBindings:function(e,t){1&e&&n.jc("click",(function(){return t.handleClick()}))("focus",(function(){return t.handleFocus()}))("input",(function(e){return t.handleInput(e)}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[n.Ab]}),e})(),G=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[U],imports:[[s.c]]}),e})()},RH5C:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},RiPy:function(e,t,i){var n,s,r,o;o=function(e){var t=!1,i=!1,n=!1,s=!1,r="escape years months weeks days hours minutes seconds milliseconds general".split(" "),o=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function a(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function c(e){for(var t="";e;)t+="0",e-=1;return t}function l(e,t){var i=e+"+"+v(D(t).sort(),(function(e){return e+":"+t[e]})).join(",");return l.cache[i]||(l.cache[i]=Intl.NumberFormat(e,t)),l.cache[i]}function u(e,t,r){var o,a,d,h=t.useToLocaleString,p=t.useGrouping,b=p&&t.grouping.slice(),f=t.maximumSignificantDigits,m=t.minimumIntegerDigits||1,g=t.fractionDigits||0,v=t.groupingSeparator,w=t.decimalSeparator;if(h&&r){var y,C={minimumIntegerDigits:m,useGrouping:p};return g&&(C.maximumFractionDigits=g,C.minimumFractionDigits=g),f&&e>0&&(C.maximumSignificantDigits=f),n?(s||((y=O({},t)).useGrouping=!1,y.decimalSeparator=".",e=parseFloat(u(e,y),10)),l(r,C).format(e)):(i||((y=O({},t)).useGrouping=!1,y.decimalSeparator=".",e=parseFloat(u(e,y),10)),e.toLocaleString(r,C))}var k=(f?e.toPrecision(f+1):e.toFixed(g+1)).split("e");d=k[1]||"";var S=(o=(k=k[0].split("."))[0]||"").length,x=(a=k[1]||"").length,D=S+x,I=o+a;(f&&D===f+1||!f&&x===g+1)&&((I=function(e){for(var t=e.split("").reverse(),i=0,n=!0;n&&i<t.length;)i?"9"===t[i]?t[i]="0":(t[i]=(parseInt(t[i],10)+1).toString(),n=!1):(parseInt(t[i],10)<5&&(n=!1),t[i]="0"),i+=1;return n&&t.push("1"),t.reverse().join("")}(I)).length===D+1&&(S+=1),x&&(I=I.slice(0,-1)),o=I.slice(0,S),a=I.slice(S)),f&&(a=a.replace(/0*$/,""));var j=parseInt(d,10);j>0?a.length<=j?(o+=a+=c(j-a.length),a=""):(o+=a.slice(0,j),a=a.slice(j)):j<0&&(a=c(Math.abs(j)-o.length)+o+a,o="0"),f||((a=a.slice(0,g)).length<g&&(a+=c(g-a.length)),o.length<m&&(o=c(m-o.length)+o));var T,E="";if(p)for(k=o;k.length;)b.length&&(T=b.shift()),E&&(E=v+E),E=k.slice(-T)+E,k=k.slice(0,-T);else E=o;return a&&(E=E+w+a),E}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function h(e,t){var i=[];return g(D(t),(function(n){if("_durationLabels"===n.slice(0,15)){var s=n.slice(15).toLowerCase();g(D(t[n]),(function(r){r.slice(0,1)===e&&i.push({type:s,key:r,label:t[n][r]})}))}})),i}l.cache={};var p={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,i){return 1===t&&null===i?e:e+e}};function b(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function m(e,t){var i,n=0,s=e&&e.length||0;for("function"!=typeof t&&(i=t,t=function(e){return e===i});n<s;){if(t(e[n]))return e[n];n+=1}}function g(e,t){var i=0,n=e.length;if(e&&n)for(;i<n;){if(!1===t(e[i],i))return;i+=1}}function v(e,t){var i=0,n=e.length,s=[];if(!e||!n)return s;for(;i<n;)s[i]=t(e[i],i),i+=1;return s}function w(e,t){return v(e,(function(e){return e[t]}))}function y(e){var t=[];return g(e,(function(e){e&&t.push(e)})),t}function C(e){var t=[];return g(e,(function(e){m(t,e)||t.push(e)})),t}function k(e,t){var i=[];return g(e,(function(e){g(t,(function(t){e===t&&i.push(e)}))})),C(i)}function S(e,t){var i=[];return g(e,(function(n,s){if(!t(n))return i=e.slice(s),!1})),i}function x(e,t){return S(e.slice().reverse(),t).reverse()}function O(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function D(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}function I(e,t){var i=0,n=e.length;if(!e||!n)return!1;for(;i<n;){if(!0===t(e[i],i))return!0;i+=1}return!1}function j(e){var t=[];return g(e,(function(e){t=t.concat(e)})),t}function T(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function E(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function A(){var e,t=[].slice.call(arguments),i={};if(g(t,(function(t,n){if(!n){if(!b(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?f(t)&&O(i,t):i.precision=t:i.template=t})),!e||!e.length)return[];i.returnMomentTypes=!0;var n=v(e,(function(e){return e.format(i)})),s=k(r,C(w(j(n),"type"))),o=i.largest;return o&&(s=s.slice(0,o)),i.returnMomentTypes=!1,i.outputTypes=s,v(e,(function(e){return e.format(i)}))}function _(){var i=[].slice.call(arguments),s=O({},this.format.defaults),c=this.asMilliseconds(),l=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(c=0,l=0);var j=c<0,T=e.duration(Math.abs(c),"milliseconds"),E=e.duration(Math.abs(l),"months");g(i,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?f(e)&&O(s,e):s.precision=e:s.template=e}));var A={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},_={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};s.types=r;var W=function(e){return m(r,(function(t){return _[t].test(e)}))},R=new RegExp(v(r,(function(e){return _[e].source})).join("|"),"g");s.duration=this;var P="function"==typeof s.template?s.template.apply(s):s.template,M=s.outputTypes,F=s.returnMomentTypes,X=s.largest,L=[];M||(b(s.stopTrim)&&(s.stopTrim=s.stopTrim.join("")),s.stopTrim&&g(s.stopTrim.match(R),(function(e){var t=W(e);"escape"!==t&&"general"!==t&&L.push(t)})));var N=e.localeData();N||(N={}),g(D(p),(function(e){"function"!=typeof p[e]?N["_"+e]||(N["_"+e]=p[e]):N[e]||(N[e]=p[e])})),g(D(N._durationTimeTemplates),(function(e){P=P.replace("_"+e+"_",N._durationTimeTemplates[e])}));var B=s.userLocale||e.locale(),Y=s.useLeftUnits,V=s.usePlural,U=s.precision,H=s.forceLength,$=s.useGrouping,G=s.trunc,z=s.useSignificantDigits&&U>0,q=z?s.precision:0,K=q,Z=s.minValue,J=!1,Q=s.maxValue,ee=!1,te=s.useToLocaleString,ie=s.groupingSeparator,ne=s.decimalSeparator,se=s.grouping;te=te&&(t||n);var re=s.trim;b(re)&&(re=re.join(" ")),null===re&&(X||Q||z)&&(re="all"),null!==re&&!0!==re&&"left"!==re&&"right"!==re||(re="large"),!1===re&&(re="");var oe=function(e){return e.test(re)},ae=/large/,ce=/small/,le=/both/,ue=/mid/,de=/^all|[^sm]all/,he=/final/,pe=X>0||I([ae,le,de],oe),be=I([ce,le,de],oe),fe=I([ue,de],oe),me=I([he,de],oe),ge=v(P.match(R),(function(e,t){var i=W(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==i&&"general"!==i&&L.push(i)),{index:t,length:e.length,text:"",token:"escape"===i?e.replace(_.escape,"$1"):e,type:"escape"===i||"general"===i?null:i}})),ve={index:0,length:0,token:"",text:"",type:null},we=[];Y&&ge.reverse(),g(ge,(function(e){if(e.type)return(ve.type||ve.text)&&we.push(ve),void(ve=e);Y?ve.text=e.token+ve.text:ve.text+=e.token})),(ve.type||ve.text)&&we.push(ve),Y&&we.reverse();var ye=k(r,C(y(w(we,"type"))));if(!ye.length)return w(we,"text").join("");ye=v(ye,(function(e,t){var i,n=t+1===ye.length,r=!t;i="years"===e||"months"===e?E.as(e):T.as(e);var o=Math.floor(i),a=i-o,c=m(we,(function(t){return e===t.type}));return r&&Q&&i>Q&&(ee=!0),n&&Z&&Math.abs(s.duration.as(e))<Z&&(J=!0),r&&null===H&&c.length>1&&(H=!0),T.subtract(o,e),E.subtract(o,e),{rawValue:i,wholeValue:o,decimalValue:n?a:0,isSmallest:n,isLargest:r,type:e,tokenLength:c.length}}));var Ce=G?Math.floor:Math.round,ke=function(e,t){var i=Math.pow(10,t);return Ce(e*i)/i},Se=!1,xe=!1,Oe=function(e,t){var i={useGrouping:$,groupingSeparator:ie,decimalSeparator:ne,grouping:se,useToLocaleString:te};return z&&(q<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(i.maximumSignificantDigits=q,e.significantDigits=q)),ee&&!xe&&(e.isLargest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),J&&!xe&&(e.isSmallest?(e.wholeValue=Z,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?U<0?e.value=ke(e.wholeValue,U):0===U?e.value=Ce(e.wholeValue+e.decimalValue):z?(e.value=G?ke(e.rawValue,q-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(q-=e.wholeValue.toString().length)):(i.fractionDigits=U,e.value=G?e.wholeValue+ke(e.decimalValue,U):e.wholeValue+e.decimalValue):z&&e.wholeValue?(e.value=Math.round(ke(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),q-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(H||Se)&&(i.minimumIntegerDigits=e.tokenLength,xe&&i.maximumSignificantDigits<e.tokenLength&&delete i.maximumSignificantDigits),!Se&&(e.value>0||""===re||m(L,e.type)||m(M,e.type))&&(Se=!0),e.formattedValue=u(e.value,i,B),i.useGrouping=!1,i.decimalSeparator=".",e.formattedValueEn=u(e.value,i,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((ye=y(ye=v(ye,Oe))).length>1){var De=function(e){return m(ye,(function(t){return t.type===e}))},Ie=function(e){var t=De(e.type);t&&g(e.targets,(function(e){var i=De(e.type);i&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,i.rawValue+=1,i.wholeValue+=1,i.decimalValue=0,i.formattedValueEn=i.wholeValue.toString(),xe=!0)}))};g(o,Ie)}return xe&&(Se=!1,q=K,ye=y(ye=v(ye,Oe))),!M||ee&&!s.trim?(pe&&(ye=S(ye,(function(e){return!e.isSmallest&&!e.wholeValue&&!m(L,e.type)}))),X&&ye.length&&(ye=ye.slice(0,X)),be&&ye.length>1&&(ye=x(ye,(function(e){return!e.wholeValue&&!m(L,e.type)&&!e.isLargest}))),fe&&(ye=y(ye=v(ye,(function(e,t){return t>0&&t<ye.length-1&&!e.wholeValue?null:e})))),!me||1!==ye.length||ye[0].wholeValue||!G&&ye[0].isSmallest&&ye[0].rawValue<Z||(ye=[])):ye=y(ye=v(ye,(function(e){return m(M,(function(t){return e.type===t}))?e:null}))),F?ye:(g(we,(function(e){var t=A[e.type],i=m(ye,(function(t){return t.type===e.type}));if(t&&i){var n=i.formattedValueEn.split(".");n[0]=parseInt(n[0],10),n[1]=n[1]?parseFloat("0."+n[1],10):null;var s=N.durationPluralKey(t,n[0],n[1]),r=h(t,N),o=!1,c={};g(N._durationLabelTypes,(function(t){var i=m(r,(function(e){return e.type===t.type&&e.key===s}));i&&(c[i.type]=i.label,a(e.text,t.string)&&(e.text=e.text.replace(t.string,i.label),o=!0))})),V&&!o&&(r.sort(d),g(r,(function(t){return c[t.type]===t.label?!a(e.text,t.label)&&void 0:a(e.text,t.label)?(e.text=e.text.replace(t.label,c[t.type]),!1):void 0})))}})),(we=v(we,(function(e){if(!e.type)return e.text;var t=m(ye,(function(t){return t.type===e.type}));if(!t)return"";var i="";return Y&&(i+=e.text),(j&&ee||!j&&J)&&(i+="< ",ee=!1,J=!1),(j&&J||!j&&ee)&&(i+="> ",ee=!1,J=!1),j&&(t.value>0||""===re||m(L,t.type)||m(M,t.type))&&(i+="-",j=!1),i+="milliseconds"===e.type&&t.formattedValueMS?t.formattedValueMS:t.formattedValue,Y||(i+=e.text),i}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function W(){var e=this.duration,t=function(t){return e._data[t]},i=m(this.types,t),n=function(e,t){for(var i=e.length;i-=1;)if(t(e[i]))return e[i]}(this.types,t);switch(i){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(i===n)return"d __";case"weeks":return i===n?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(i===n)return"M __";case"years":return i===n?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function R(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=A,e.duration.fn.format=_,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:W,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",p)}var P=function(e,t,i){return e.toLocaleString(t,i)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&E(P),i=t&&T(P);var M=function(e,t,i){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,i).format(e)};return n=E(M),s=n&&T(M),R(e),R},s=[i("wd/R")],void 0===(r="function"==typeof(n=o)?n.apply(t,s):n)||(e.exports=r),this&&(this.momentDurationFormatSetup=this.moment?o(this.moment):o)},Rt6l:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return o}));var n=i("xoOP"),s=function(e){return e.NO_PROJECT="NO_PROJECT",e.NO_TASK="NO_TASK",e.SUSPICIOUS="SUSPICIOUS",e}({});const r=[];class o{constructor(e,t,i,s){if(this.unit=e||"SECONDS",this.compare=t||"SHORTER",this.durationInput=i&&Object(n.u)(i)?Math.abs(Number(i)):60,s)if("string"==typeof s){const e=s.split(",");this.audit=e}else this.audit=s;else this.audit=r}get numberOfSelected(){return this.audit.length}getBodyParameters(){if(!this.audit.length)return null;const e={},t=this.audit.includes(s.NO_PROJECT),i=this.audit.includes(s.NO_TASK);if(e.withoutProject=t,e.withoutTask=i,this.audit.includes(s.SUSPICIOUS)){const t="SHORTER"===this.compare;let i=this.durationInput;"MINUTES"===this.unit?i*=60:"HOURS"===this.unit&&(i=60*i*60),e.duration=i,e.durationShorter=t}return e}generateUrlParameters(){const e={};return this.audit.length?(e.audit=this.audit.join(","),e.unit=this.unit,e.compare=this.compare,e.durationInput=this.durationInput,e):e}isDirty(){return this.audit.length>0}static clone(e){return e?new o(e.unit,e.compare,e.durationInput,e.audit?e.audit.slice():[]):new o}}},"T+Hu":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("YjdQ");function s(e,t){return{key:e,value:t.map(e=>new n.a(e))}}},Tg7i:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("fXoL"),s=i("Kj3r"),r=i("1G5W"),o=i("XNiG"),a=i("NHP+"),c=i("zDGq"),l=i("UMzN"),u=i("3Pt+"),d=i("dlKe"),h=i("ofXK");const p=["filterInput"];function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",10),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.emitSelected.emit(t.noEntity)})),n.Yc(1),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.ad("No ",e.entity," ")}}function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",10),n.jc("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc(2).emitSelected.emit(i)})),n.Yc(1),n.Wb()}if(2&e){const e=t.$implicit;n.Cb(1),n.ad("",e.name," ")}}function m(e,t){if(1&e&&(n.Xb(0,"div",7),n.Wc(1,b,2,1,"a",8),n.Wc(2,f,2,1,"a",9),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.hideWithoutValue),n.Cb(1),n.wc("ngForOf",e.entities)}}function g(e,t){if(1&e&&(n.Xb(0,"div"),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad("No matching ",e.entityInPlural,"")}}function v(e,t){if(1&e&&(n.Xb(0,"div"),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad("No ",e.entityInPlural," yet")}}function w(e,t){1&e&&(n.Xb(0,"div",16),n.Yc(1,"Start typing to create one."),n.Wb())}function y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",16),n.Yc(1," Press Ctrl+Enter to quickly "),n.Xb(2,"a",17),n.jc("click",(function(){return n.Oc(e),n.nc(2).createNew()})),n.Yc(3),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(3),n.bd(" create '",e.nameFilter,"' ",e.entity,". ")}}function C(e,t){if(1&e&&(n.Xb(0,"div",11),n.Xb(1,"div",12),n.Wc(2,g,2,1,"div",13),n.Wc(3,v,2,1,"ng-template",null,14,n.Xc),n.Wc(5,w,2,0,"div",15),n.Wc(6,y,4,2,"div",15),n.Wb(),n.Wb()),2&e){const e=n.Lc(4),t=n.nc();n.Cb(2),n.wc("ngIf",null==t.entities?null:t.entities.length)("ngIfElse",e),n.Cb(3),n.wc("ngIf",!t.nameFilter),n.Cb(1),n.wc("ngIf",t.nameFilter&&t.nameFilter.trim().length)}}let k=(()=>{class e{constructor(e){this.keyboardService=e,this.emitSelected=new n.n,this.loadMore=new n.n,this.nameFilterChanged=new n.n,this.createAndSet=new n.n,this.query={name:"",page:1},this.inputDebouncer=new o.a,this.unsubscribe$=new a.a}ngOnInit(){this.getEntityPlural(),this.noEntity=new l.a({id:"",name:"No "+this.entity}),this.inputDebouncer.pipe(Object(s.a)(300)).subscribe(e=>{this.query.name=e,this.query.page=1,this.nameFilterChanged.emit(this.query)}),this.keyboardService.keyboardCtrlEnter$.pipe(Object(r.a)(this.unsubscribe$)).subscribe(()=>{this.entities&&0===this.entities.length&&this.createNew()})}ngAfterViewInit(){this.filterInput.nativeElement.focus()}ngOnDestroy(){this.query.name&&(this.query.name="",this.query.page=1,this.nameFilterChanged.emit(this.query))}onScroll(){this.query.page=this.query.page+1,this.loadMore.emit(this.query)}inputValueChanged(e){this.inputDebouncer.next(e)}getEntityPlural(){const e=this.entity.toLowerCase();this.entityInPlural="client"===e||"department"===e?this.entity+"s":this.entity}createNew(){this.createAndSet.emit(this.nameFilter)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(c.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["filter-dropdown"]],viewQuery:function(e,t){var i;1&e&&n.ed(p,!0),2&e&&n.Kc(i=n.kc())&&(t.filterInput=i.first)},inputs:{entity:"entity",entities:"entities",hideWithoutValue:"hideWithoutValue"},outputs:{emitSelected:"emitSelected",loadMore:"loadMore",nameFilterChanged:"nameFilterChanged",createAndSet:"createAndSet"},decls:7,vars:7,consts:[[1,"cl-dropdown-menu-header"],["type","text",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange"],["filterInput",""],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],[1,"cl-dropdown-section-wrapper"],["class","cl-dropdown-section",4,"ngIf"],["class","cl-dropdown-menu-sub-header",4,"ngIf"],[1,"cl-dropdown-section"],["class","cl-dropdown-item cl-cut-text","clickCloseDropdown","",3,"click",4,"ngIf"],["class","cl-dropdown-item cl-cut-text","clickCloseDropdown","",3,"click",4,"ngFor","ngForOf"],["clickCloseDropdown","",1,"cl-dropdown-item","cl-cut-text",3,"click"],[1,"cl-dropdown-menu-sub-header"],[1,"cl-dropdown-item-padding"],[4,"ngIf","ngIfElse"],["noClients",""],["class","cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-h6","cl-mb-0"],["clickCloseDropdown","",1,"cl-color-blue",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"input",1,2),n.jc("ngModelChange",(function(e){return t.nameFilter=e}))("ngModelChange",(function(e){return t.inputValueChanged(e)})),n.Wb(),n.Wb(),n.Xb(3,"div",3),n.jc("scrolled",(function(){return t.onScroll()})),n.Xb(4,"div",4),n.Wc(5,m,3,2,"div",5),n.Wb(),n.Wb(),n.Wc(6,C,7,4,"div",6)),2&e&&(n.Cb(1),n.wc("placeholder","Add/Find "+t.entityInPlural)("ngModel",t.nameFilter),n.Cb(2),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngIf",t.entities&&t.entities.length>0),n.Cb(1),n.wc("ngIf",!t.entities||t.entities&&0===t.entities.length))},directives:[u.c,u.s,u.v,d.a,h.u,h.t],encapsulation:2}),e})()},TmxI:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("2rWG"),s=i("XNiG"),r=i("Kj3r"),o=i("1G5W"),a=i("fXoL");let c=(()=>{class e{constructor(e,t,i){this.parent=e,this.el=t,this.renderer=i,this.debounceTime=100,this.debouncer$=new s.a,this.unsubscribe$=new s.a}set isHoverEnabled(e){this._isHoverEnabled=e,this._isHoverEnabled?this.listenerFn=this.renderer.listen(this.el.nativeElement,"mouseover",e=>{this.onMouseOver()}):this.removeListeners()}get isHoverEnabled(){return this._isHoverEnabled}ngOnInit(){this.debouncer$.pipe(Object(r.a)(this.debounceTime),Object(o.a)(this.unsubscribe$)).subscribe(e=>{e&&this.parent.showDropdown()})}ngOnDestroy(){this.removeListeners(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onMouseOver(){this.debouncer$.next(!0)}removeListeners(){this.listenerFn&&this.listenerFn()}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(n.a),a.Rb(a.l),a.Rb(a.F))},e.\u0275dir=a.Mb({type:e,selectors:[["","dropdownKeyButtonHover",""]],inputs:{isHoverEnabled:"isHoverEnabled",debounceTime:"debounceTime"}}),e})()},UnIm:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("XNiG"),s=i("5Iok"),r=i("xoOP"),o=i("Hf8F"),a=i("f0Wu"),c=i("yK97"),l=i("fXoL");let u=(()=>{class e{constructor(){this.entryToPlay$=new n.a,this.newEntryCreated$=new n.a,this.createdProject$=new n.a,this.expandedGroups={},this.numberOfEntriesChanged$=new n.a}setNewEntryCreated(e){this.newEntryCreated$.next(e)}setEntryToPlay(e){const t=s.a.clone(e);t.id=null,this.entryToPlay$.next(t)}setIsGroupDisabled(e){this.GROUPING_IS_DISABLED=e}numberOfEntriesChanged(){this.numberOfEntriesChanged$.next()}transformEntryGroup(e){const t=[];for(let i=0;i<e.timeEntries.length;i++)this.addElementToEntryGroup(e.timeEntries[i],t,e.date);return t.forEach(e=>{e.children&&(Object(r.F)(e.children),this.setDateAndDurationForSameEntries(e))}),e.timeEntries=t,Object(r.F)(e.timeEntries),e}calculateTotalDuration(e){const t=new o.a;return e.forEach(e=>{t.add(e.timeInterval.duration)}),t.asString()}addElementToEntryGroup(e,t,i){e.isChild=!1;const n=t.length;this.expandedGroups[i]||(this.expandedGroups[i]=[]);for(let r=0;r<n;r++){const n=t[r];if(!this.GROUPING_IS_DISABLED&&e.sameGroupWith(n)){if(n.children)e.isChild=!0,n.children.push(e);else{const t=s.a.clone(n);t.isChild=!0,e.isChild=!0,n.id+="_PARENT",n.expanded=this.expandedGroups[i].indexOf(n.id)>-1,n.children=[],n.children.push(t),n.children.push(e)}return r}}return t.push(e),-1}setDateAndDurationForSameEntries(e){if(e.children&&e.children.length){e.timeInterval.start=e.children[0].timeInterval.start,e.timeInterval.end=e.children[0].timeInterval.end;const t=new o.a(0);e.children.forEach(i=>{a(i.timeInterval.start).isBefore(e.timeInterval.start)&&(e.timeInterval.start=i.timeInterval.start),a(i.timeInterval.end).isAfter(e.timeInterval.end)&&(e.timeInterval.end=i.timeInterval.end),t.add(i.timeInterval.duration)}),e.timeInterval.duration=t.asString(),e.timeInterval=new c.a(e.timeInterval)}}refreshGroupView(e){let t=[];const i=e.timeEntries;this.expandedGroups[e.date]=[];for(let n=0;n<i.length;n++)i[n].children?(t=t.concat(i[n].children),i[n].expanded&&this.expandedGroups[e.date].push(i[n].id)):t.push(i[n]);e.timeEntries=t,this.transformEntryGroup(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac}),e})()},V3bs:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("DoKE"),s=i("XNiG"),r=i("gcYM"),o=i("1G5W"),a=i("fXoL");let c=(()=>{class e{constructor(e){this.elementRef=e,this.debouncer$=new s.a,this.unsubscribe$=new s.a,this.keydown=e=>{const t=e.keyCode?e.keyCode:e.which;if(t!==n.i)return t===n.a?(this.debouncer$.next({e,isDown:!0}),void e.preventDefault()):t===n.b?(this.debouncer$.next({e,isDown:!1}),void e.preventDefault()):void 0;this.tabNavigation(e)},this.addListener(),this.debouncer$.pipe(Object(r.a)(150),Object(o.a)(this.unsubscribe$)).subscribe(({e,isDown:t})=>this.arrowPressed(e,t))}ngOnDestroy(){this.removeListener(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}addListener(){window.addEventListener("keydown",this.keydown)}removeListener(){window.removeEventListener("keydown",this.keydown)}arrowPressed(e,t){const i=e.target,n=this.getParent(i),s=this.getSiblingGroup(i,n);if(!s.length)return;const r=Number(i.getAttribute("tabindex"));let o;o=t?this.getNextGroup(i,s):this.getPreviousGroup(i,s,r<0),this.focusOnGroup(o,!t&&0===r)}tabNavigation(e){const t=!e.shiftKey,i=e.target;let n=this.getParent(i);Number(i.getAttribute("tabindex"))<0&&(n=this.getParent(n));const s=this.getSiblingGroup(i,n,0,!1);if(!s.length)return;let r;r=t?this.getNextGroup(i,s):this.getPreviousGroup(i,s,!1),r&&(this.focusOnGroup(r),e.preventDefault())}getParent(e){const t=Number(e.getAttribute("tabindex"));return t>=0?this.elementRef.nativeElement:this.getParentByTabIndex(e,t+1)}getParentByTabIndex(e,t){for(;e&&e!==document;e=e.parentNode){const i=e.getAttribute("tabindex");if(i&&Number(i)===t)return e}return null}getSiblingGroup(e,t,i,n=!0){const s=void 0!==i?i:Number(e.getAttribute("tabindex"));let r=Array.from(t.querySelectorAll("[tabindex]"));return r=r.filter(e=>Number(e.getAttribute("tabindex"))===s&&!e.disabled),n&&(r=r.filter(e=>!e.hasAttribute("dropdownClose"))),r}getNextGroup(e,t){for(let i=0;i<t.length;i++)if(4===e.compareDocumentPosition(t[i]))return t[i];return t[0]||e}getPreviousGroup(e,t,i=!0){for(let n=t.length-1;n>=0;n--)if(2===e.compareDocumentPosition(t[n]))return t[n];return i?t[t.length-1]||e:null}focusOnGroup(e,t=!1){if(!e)return;const i=e.querySelectorAll("[tabindex]");let n=e;i.length&&(n=t?i[i.length-1]:i[0]),n.focus()}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(a.l))},e.\u0275dir=a.Mb({type:e,selectors:[["","arrowNavigation",""]]}),e})()},VHTb:function(e,t,i){"use strict";i.d(t,"a",(function(){return Ne})),i.d(t,"b",(function(){return Be}));var n=i("fXoL"),s=i("XNiG"),r=i("1uah"),o=i("8+Zx"),a=i("cGux"),c=i("1Tmk"),l=i("y+xF"),u=i("JBiw"),d=i("lGQG"),h=i("1G5W"),p=i("QTph"),b=i("hkzH"),f=i("Jmk/"),m=i("jpmO"),g=i("i6c7"),v=i("lBcp"),w=i("nLyk"),y=i("lvCY"),C=i("xzCI"),k=i("PW4C"),S=i("qfBg"),x=i("ePBx"),O=i("VTb6"),D=i("2rWG"),I=i("sbmM"),j=i("qUN8"),T=i("ofXK"),E=i("xoOP"),A=i("1YN2"),_=i("e0xV"),W=i("3Pt+"),R=i("okBH");function P(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"div",7),n.Xb(2,"input-search",8),n.jc("onSearchChange",(function(t){return n.Oc(e),n.nc().searchValue=t})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("debounceTime",0)("autofocus",!0)("search",e.searchValue)("placeholder",e.placeholder)}}function M(e,t){if(1&e&&(n.Xb(0,"div",12),n.Yc(1),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(1),n.ad(" ",e.label," ")}}function F(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",13),n.Xb(1,"div",14),n.Xb(2,"input",15),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i}))("change",(function(){n.Oc(e);const i=t.$implicit,s=n.nc().$implicit;return n.nc().toggleCheckBox(i,s.key)})),n.Wb(),n.Xb(3,"label",16),n.Xb(4,"div",17),n.Yc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc().index,r=n.nc();n.wc("title",r.getTitle(e)),n.Cb(2),n.wc("ngModel",e.selected)("id",s+"_"+i)("disabled",e.isDisabled),n.Cb(1),n.wc("for",s+"_"+i),n.Cb(2),n.ad(" ",e.entity.name," ")}}function X(e,t){if(1&e&&(n.Xb(0,"div",9),n.Wc(1,M,2,1,"div",10),n.Wc(2,F,6,6,"div",11),n.oc(3,"sortBy"),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.Cb(1),n.wc("ngIf",!e.hideTitle&&(null==e.value?null:e.value.length)),n.Cb(1),n.wc("ngForOf",n.rc(3,3,i.filterSelectable(e.value),i.sortByNameMapper,i.triggerPipeDetection))("ngForTrackBy",i.trackByFn)}}let L=(()=>{class e{constructor(e){this.cd=e,this.placeholder="Search",this.showSearch=!0,this.resizeableName="dropdownCheckbox",this.isResizeable=!0,this.onChange=new n.n,this.triggerPipeDetection=0,this.unsubscribe$=new s.a,this.sortByNameMapper=e=>e.entity.name}ngOnInit(){this.initialize(),this.checkboxValuesBackup=o.a.clone(this.checkboxValues),this.subscribeToChanges()}ngOnDestroy(){this.emitOnClose(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}emitOnClose(){const e=this.checkboxValues.sameWith(this.checkboxValuesBackup),t=this.generateResponse();e||this.onChange.emit(t)}generateResponse(){this.checkboxValues.removeWithoutIfNeed(),o.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,"id",this.singleMapProperty);const e=this.checkboxValues.getSelectedData(this.selectableMaps,0,!0);return{checkboxValues:this.checkboxValues,selectableMaps:this.selectableMaps,numberOfSelected:e.numberOfSelected,numberOfSelectedApproximately:e.numberOfSelectedApproximately,label:e.label}}initialize(){this.initSelected(),this.checkIsSelectedMaximum()}subscribeToChanges(){this.selectableMaps.onChange.pipe(Object(h.a)(this.unsubscribe$)).subscribe(()=>{this.initSelected(),this.checkIsSelectedMaximum(),this.triggerPipeDetection++,this.cd.detectChanges()})}initSelected(){this.selectableMaps&&this.selectableMaps.maps&&(this.checkboxValues?o.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,"id",this.singleMapProperty):this.checkboxValues=o.a.generateValuesDataFromMap(this.selectableMaps.maps,"id",this.singleMapProperty))}toggleCheckBox(e,t){this.updateCheckboxValues(e,t),this.checkIsSelectedMaximum()}filterSelectable(e){return this.searchValue?e.filter(e=>Object(E.z)(e.entity.name,this.searchValue)):e}trackByFn(e,t){return t}trackByFnMap(e,t){return t.key}getTitle(e){return e.isDisabled&&this.maxLimitOfSelected?`Max ${this.maxLimitOfSelected} active filters`:""}updateCheckboxValues(e,t){this.checkboxValues.updateSingleMap(t=this.singleMapProperty||t,e.entity.id,e.selected)}checkIsSelectedMaximum(){this.selectableMaps.updateDisabledForSelectedLimit(this.maxLimitOfSelected)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-checkbox-lite"]],inputs:{selectableMaps:"selectableMaps",checkboxValues:"checkboxValues",singleMapProperty:"singleMapProperty",searchValue:"searchValue",placeholder:"placeholder",showSearch:"showSearch",resizeableName:"resizeableName",isResizeable:"isResizeable",maxLimitOfSelected:"maxLimitOfSelected"},outputs:{onChange:"onChange"},decls:6,vars:5,consts:[["resizeable","",1,"cl-dropdown-menu",3,"isResizeable","resizeableName"],["class","cl-dropdown-menu-header",4,"ngIf"],[1,"cl-scroll-area"],[1,"cl-dropdown-section-wrapper"],["class","cl-dropdown-section",4,"ngFor","ngForOf","ngForTrackBy"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","autofocus","search","placeholder","onSearchChange"],[1,"cl-dropdown-section"],["class","cl-dropdown-header cl-h5",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",3,"title",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-header","cl-h5"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper",3,"title"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","disabled","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Wc(1,P,3,4,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Wc(4,X,4,7,"div",4),n.Wb(),n.Wb(),n.Sb(5,"span",5),n.Wb()),2&e&&(n.wc("isResizeable",t.isResizeable)("resizeableName",t.resizeableName),n.Cb(1),n.wc("ngIf",t.showSearch),n.Cb(3),n.wc("ngForOf",null==t.selectableMaps?null:t.selectableMaps.maps)("ngForTrackBy",t.trackByFnMap))},directives:[A.a,T.u,T.t,_.a,W.a,W.s,W.v],pipes:[R.a],encapsulation:2,changeDetection:0}),e})();var N=i("1kSV"),B=i("D0uv");function Y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"div",7),n.Xb(2,"div",8),n.Xb(3,"div",9),n.Xb(4,"input",10),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().isSelected=t})),n.Wb(),n.Xb(5,"label",11),n.Xb(6,"div",12),n.Yc(7),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(4),n.wc("ngModel",e.isSelected),n.Cb(3),n.ad(" ",e.checkboxLabel," ")}}let V=(()=>{class e{constructor(){this.hideCheckbox=!1,this.onChange=new n.n}ngOnInit(){this.backupValues={searchTerm:this.searchTerm,isSelected:this.isSelected}}ngOnDestroy(){this.emit()}emit(){this.backupValues.searchTerm===this.searchTerm&&this.backupValues.isSelected===this.isSelected||this.onChange.emit({searchTerm:this.searchTerm,isSelected:this.isSelected})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-input"]],inputs:{searchTerm:"searchTerm",isSelected:"isSelected",placeholder:"placeholder",checkboxLabel:"checkboxLabel",hideCheckbox:"hideCheckbox"},outputs:{onChange:"onChange"},decls:6,vars:5,consts:[[1,"cl-dropdown-menu"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","autofocus","search","placeholder","onSearchChange"],["class","cl-dropdown-section-wrapper",4,"ngIf"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-section-wrapper"],[1,"cl-dropdown-section","cl-pt-0"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","dropdownItemSelectAll",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","dropdownItemSelectAll",1,"cl-custom-control-label"],[1,"cl-cut-text"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"input-search",3),n.jc("onSearchChange",(function(e){return t.searchTerm=e})),n.Wb(),n.Wb(),n.Wb(),n.Wc(4,Y,8,2,"div",4),n.Sb(5,"span",5),n.Wb()),2&e&&(n.Cb(3),n.wc("debounceTime",0)("autofocus",!0)("search",t.searchTerm)("placeholder",t.placeholder),n.Cb(1),n.wc("ngIf",!t.hideCheckbox))},directives:[_.a,T.u,W.a,W.s,W.v],encapsulation:2,changeDetection:0}),e})();var U=i("f1uh"),H=i("91AR");function $(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",5),n.Xb(2,"div",6),n.Xb(3,"input",7),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.isChecked=i})),n.Wb(),n.Xb(4,"label",8),n.Xb(5,"div",9),n.Yc(6),n.Wb(),n.Wb(),n.Wb(),n.Xb(7,"div",10),n.Xb(8,"input",11),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.value=i}))("ngModelChange",(function(){return t.$implicit.isChecked=!0})),n.Wb(),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(3),n.wc("id",e.type)("ngModel",e.isChecked),n.Cb(1),n.wc("for",e.type),n.Cb(2),n.Zc(e.label),n.Cb(2),n.wc("ngModel",e.value)}}let G=(()=>{class e{constructor(){this.onChange=new n.n,this.checkboxLabel="Empty field"}ngOnInit(){this.valueBackup=this.items.map(e=>new H.a(e))}ngOnDestroy(){this.emit()}emit(){this.valueBackup.filter((e,t)=>!e.sameWith(this.items[t])).length&&this.onChange.emit(this.items)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-number-range"]],inputs:{items:"items",checkboxLabel:"checkboxLabel"},outputs:{onChange:"onChange"},decls:5,vars:1,consts:[[1,"cl-dropdown-menu"],[1,"cl-dropdown-section-wrapper"],[1,"cl-dropdown-section","cl-pt-0"],[4,"ngFor","ngForOf"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper","cl-d-flex","cl-pr-2","cl-align-items-center","cl-justify-content-between"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"id","ngModel","ngModelChange"],[1,"cl-custom-control-label","pointer",3,"for"],[1,"cl-cut-text"],[1,"cl-py-1"],["spellcheck","false","autocomplete","off","type","number",1,"cl-form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Wc(3,$,9,5,"ng-container",3),n.Wb(),n.Wb(),n.Sb(4,"span",4),n.Wb()),2&e&&(n.Cb(3),n.wc("ngForOf",t.items))},directives:[T.t,W.a,W.s,W.v,W.y,W.c],encapsulation:2,changeDetection:0}),e})();function z(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox-lite",19),n.jc("onChange",(function(t){return n.Oc(e),n.nc().onActiveFilterChanged(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("placeholder","Find filter")("checkboxValues",e.activeFiltersValues)("selectableMaps",e.activeFiltersMap)("resizeableName","dropdownFindFilter")("showSearch",!1)("maxLimitOfSelected",10)}}function q(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.ad(" ",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP]," ")}}function K(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",27),n.jc("loadMore",(function(){return n.Oc(e),n.nc(3).loadMoreUsers()}))("onSelectAllWithTextInput",(function(t){return n.Oc(e),n.nc(3).selectAllUserIds(t)}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(3);return i.onSearchChange(i.ReportFilter.USERS_AND_GROUP,t),i.checkGroup(),i.getUsersAndUserGroups()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(3);return i.clearOptionFilter(i.ReportFilter.USERS_AND_GROUP,t),i.checkGroup(),i.getUsersAndUserGroups()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(3);return i.setIndicatorOf(i.ReportFilter.USERS_AND_GROUP,t,!1)}))("onChange",(function(t){n.Oc(e);const i=n.nc(3);return i.valuesData[i.ReportFilter.USERS_AND_GROUP]=t.checkboxValues,i.filterMaps[i.ReportFilter.USERS_AND_GROUP]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.USERS_AND_GROUP,t)})),n.Wb()}if(2&e){const e=n.nc(3);n.wc("placeholder","Find member...")("preventOfflineFiltering",!0)("filterName","team")("showSelectAll",!e.hideMembers)("checkboxValues",e.valuesData[e.ReportFilter.USERS_AND_GROUP])("selectableMaps",e.filterMaps[e.ReportFilter.USERS_AND_GROUP])("filterOptions",e.userFilterOptions)("searchValue",e.query[e.ReportFilter.USERS_AND_GROUP].name)("countMap",e.userCount)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.USERS_AND_GROUP])("inProgressLoading",e.inProgressLoading[e.USERS]||e.inProgressLoading[e.GROUPS])}}function Z(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",22),n.jc("onClose",(function(){n.Oc(e);const t=n.nc(2);return t.isOpenedMap[t.ReportFilter.USERS_AND_GROUP]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc(2);return 1===t.query[t.ReportFilter.USERS_AND_GROUP].page&&t.getUsersAndUserGroups(),t.isOpenedMap[t.ReportFilter.USERS_AND_GROUP]=!0})),n.Xb(2,"div",23),n.Yc(3," Team "),n.Wc(4,q,2,1,"span",24),n.Wb(),n.Wc(5,K,1,11,"dropdown-checkbox",25),n.Wb(),n.Ub()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngbTooltip",e.labels[e.ReportFilter.USERS_AND_GROUP]?e.labels[e.ReportFilter.USERS_AND_GROUP]+" ("+e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP]+")":""),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP])}}function J(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.ad(" ",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP]," ")}}function Q(e,t){if(1&e&&(n.Xb(0,"div",28),n.Xb(1,"div",29),n.Yc(2," Team "),n.Wc(3,J,2,1,"span",24),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(3),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP])}}function ee(e,t){if(1&e&&(n.Vb(0),n.Wc(1,Z,6,2,"ng-container",20),n.Wc(2,Q,4,1,"ng-template",null,21,n.Xc),n.Ub()),2&e){const e=n.Lc(3),t=n.nc();n.Cb(1),n.wc("ngIf",t.showTeamDropdown)("ngIfElse",e)}}function te(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(" ",e.numberOfSelected[e.ReportFilter.CLIENTS]," ")}}function ie(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",32),n.jc("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(2);return i.selectAllClientIds(t,i.ReportFilter.CLIENTS)}))("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreClients()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onClientFilterOptionChange(),i.clearOptionFilter(i.ReportFilter.CLIENTS,t),i.getClients()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onSearchChange(i.ReportFilter.CLIENTS,t),i.getClients()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(2);return i.setIndicatorOf(i.ReportFilter.CLIENTS,t,!1)}))("onChange",(function(t){return n.Oc(e),n.nc(2).onClientChange(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder","Find "+e.clientLabel+"...")("showTitles",!1)("filterName",e.clientLabel)("singleMapProperty",e.ReportFilter.CLIENTS)("countNumber",e.counts[e.ReportFilter.CLIENTS])("checkboxValues",e.valuesData[e.ReportFilter.CLIENTS])("selectableMaps",e.filterMaps[e.ReportFilter.CLIENTS])("filterOptions",e.clientFilterOptions)("searchValue",e.query[e.ReportFilter.CLIENTS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.CLIENTS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.CLIENTS])}}function ne(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",22),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.isOpenedMap[t.ReportFilter.CLIENTS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc();return 1===t.query[t.ReportFilter.CLIENTS].page&&t.getClients(),t.isOpenedMap[t.ReportFilter.CLIENTS]=!0})),n.Xb(1,"div",23),n.Xb(2,"span",30),n.Yc(3),n.Wb(),n.Wc(4,te,2,1,"span",24),n.Wb(),n.Wc(5,ie,1,11,"dropdown-checkbox",31),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.CLIENTS]?e.labels[e.ReportFilter.CLIENTS]+" ("+e.numberOfSelected[e.ReportFilter.CLIENTS]+")":""),n.Cb(2),n.Zc(e.clientLabel),n.Cb(1),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.CLIENTS])}}function se(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(" ",e.numberOfSelected[e.ReportFilter.PROJECTS]," ")}}function re(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",34),n.jc("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(2);return i.selectAllProjectIds(t,i.ReportFilter.PROJECTS)}))("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreProjects()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onProjectFilterOptionChange(),i.clearOptionFilter(i.ReportFilter.PROJECTS,t),i.getProjects()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onSearchChange(i.ReportFilter.PROJECTS,t),i.getProjects()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(2);return i.setIndicatorOf(i.ReportFilter.PROJECTS,t,!1)}))("onChange",(function(t){return n.Oc(e),n.nc(2).onProjectChange(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder","Find projects...")("filterName","projects")("countNumber",e.counts[e.ReportFilter.PROJECTS])("singleMapProperty",e.ReportFilter.PROJECTS)("checkboxValues",e.valuesData[e.ReportFilter.PROJECTS])("selectableMaps",e.filterMaps[e.ReportFilter.PROJECTS])("filterOptions",e.projectFilterOptions)("searchValue",e.query[e.ReportFilter.PROJECTS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.PROJECTS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.PROJECTS])}}function oe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",22),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.isOpenedMap[t.ReportFilter.PROJECTS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc();return 1===t.query[t.ReportFilter.PROJECTS].page&&t.getProjects(),t.isOpenedMap[t.ReportFilter.PROJECTS]=!0})),n.Xb(1,"div",23),n.Yc(2," Project "),n.Wc(3,se,2,1,"span",24),n.Wb(),n.Wc(4,re,1,10,"dropdown-checkbox",33),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.PROJECTS]?e.labels[e.ReportFilter.PROJECTS]+" ("+e.numberOfSelected[e.ReportFilter.PROJECTS]+")":""),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.PROJECTS])}}function ae(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(" ",e.numberOfSelected[e.ReportFilter.TASKS]," ")}}function ce(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",36),n.jc("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreTasks()}))("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(2);return i.selectAllTasksIds(t,i.ReportFilter.TASKS)}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(2);return i.clearOptionFilter(i.ReportFilter.TASKS,t),i.getTasks()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onSearchChange(i.ReportFilter.TASKS,t),i.getTasks()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(2);return i.setIndicatorOf(i.ReportFilter.TASKS,t,!1)}))("onChange",(function(t){n.Oc(e);const i=n.nc(2);return i.valuesData[i.ReportFilter.TASKS]=t.checkboxValues,i.filterMaps[i.ReportFilter.TASKS]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.TASKS,t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder","Find tasks...")("filterName","tasks")("singleMapProperty",e.ReportFilter.TASKS)("countNumber",e.counts[e.ReportFilter.TASKS])("checkboxValues",e.valuesData[e.ReportFilter.TASKS])("selectableMaps",e.filterMaps[e.ReportFilter.TASKS])("filterOptions",e.taskFilterOptions)("searchValue",e.query[e.ReportFilter.TASKS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.TASKS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.TASKS])}}function le(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",22),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.isOpenedMap[t.ReportFilter.TASKS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc();return 1===t.query[t.ReportFilter.TASKS].page&&t.getTasks(),t.isOpenedMap[t.ReportFilter.TASKS]=!0})),n.Xb(1,"div",23),n.Yc(2," Task "),n.Wc(3,ae,2,1,"span",24),n.Wb(),n.Wc(4,ce,1,10,"dropdown-checkbox",35),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.TASKS]?e.labels[e.ReportFilter.TASKS]+" ("+e.numberOfSelected[e.ReportFilter.TASKS]+")":""),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.TASKS])}}function ue(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(" ",e.numberOfSelected[e.ReportFilter.TAGS]," ")}}function de(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",38),n.jc("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreTags()}))("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(2);return i.selectAllTagIds(t,i.ReportFilter.TAGS)}))("onContainOptionChange",(function(){n.Oc(e);const t=n.nc(2);return t.checkApplyButton(t.FilterGroup.STANDARD)}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(2);return i.clearOptionFilter(i.ReportFilter.TAGS,t),i.getTags()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onSearchChange(i.ReportFilter.TAGS,t),i.getTags()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(2);return i.setIndicatorOf(i.ReportFilter.TAGS,t,!1)}))("onChange",(function(t){n.Oc(e);const i=n.nc(2);return i.valuesData[i.ReportFilter.TAGS]=t.checkboxValues,i.filterMaps[i.ReportFilter.TAGS]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.TAGS,t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder","Find tags...")("showTitles",!1)("filterName","tags")("singleMapProperty",e.ReportFilter.TAGS)("countNumber",e.counts[e.ReportFilter.TAGS])("checkboxValues",e.valuesData[e.ReportFilter.TAGS])("selectableMaps",e.filterMaps[e.ReportFilter.TAGS])("filterOptions",e.tagFilterOptions)("searchValue",e.query[e.ReportFilter.TAGS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.TAGS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.TAGS])}}function he(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",22),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.isOpenedMap[t.ReportFilter.TAGS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc();return 1===t.query[t.ReportFilter.TAGS].page&&t.getTags(),t.isOpenedMap[t.ReportFilter.TAGS]=!0})),n.Xb(1,"div",23),n.Yc(2," Tag "),n.Wc(3,ue,2,1,"span",24),n.Wb(),n.Wc(4,de,1,11,"dropdown-checkbox",37),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.TAGS]?e.labels[e.ReportFilter.TAGS]+" ("+e.numberOfSelected[e.ReportFilter.TAGS]+")":""),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.TAGS])}}function pe(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(" ",e.numberOfSelected[e.ReportFilter.STATUSES]," ")}}function be(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",42),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(2);return i.valuesData[i.ReportFilter.STATUSES]=t.checkboxValues,i.filterMaps[i.ReportFilter.STATUSES]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.STATUSES,t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("isResizeable",!1)("countNumber",2)("showSearch",!1)("showSelectAll",!1)("showTitles",!0)("checkboxValues",e.valuesData[e.ReportFilter.STATUSES])("selectableMaps",e.filterMaps[e.ReportFilter.STATUSES])}}function fe(e,t){if(1&e&&(n.Xb(0,"div",39),n.Xb(1,"div",40),n.Yc(2," Status "),n.Wc(3,pe,2,1,"span",24),n.Wb(),n.Wc(4,be,1,7,"dropdown-checkbox",41),n.Wb()),2&e){const e=n.nc();n.Cb(3),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.STATUSES])}}function me(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(" ",(e.withoutDescription?1:0)+(e.description?1:0)," ")}}function ge(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-input",45),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(2);return i.description=t.searchTerm,i.withoutDescription=t.isSelected,i.descriptionChanged()})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder","Enter description...")("searchTerm",e.description)("isSelected",e.withoutDescription)("checkboxLabel","Without description")}}function ve(e,t){if(1&e&&(n.Xb(0,"div",43),n.Xb(1,"div",23),n.Yc(2," Description "),n.Wc(3,me,2,1,"span",24),n.Wb(),n.Wc(4,ge,1,4,"dropdown-input",44),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.description),n.Cb(2),n.wc("ngIf",e.withoutDescription||e.description)}}function we(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.ad(" ",e.indicator," ")}}function ye(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",50),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(3).$implicit,s=n.nc();return i.checkboxValues=t.checkboxValues,i.selectableMaps=t.selectableMaps,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(3).$implicit,t=n.nc();n.wc("placeholder",e.placeholder)("offlineSearch",!0)("isReceivedAllData",!0)("showSelectAll",!1)("selectableMaps",e.selectableMaps)("checkboxValues",e.checkboxValues)("searchValue",t.query[t.ReportFilter.TASKS].name)}}function Ce(e,t){if(1&e&&(n.Xb(0,"div",43),n.Xb(1,"div",23),n.Yc(2),n.Wc(3,we,2,1,"span",24),n.Wb(),n.Wc(4,ye,1,7,"dropdown-checkbox",49),n.Wb()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.ad(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function ke(e,t){if(1&e&&(n.Vb(0),n.Wc(1,Ce,5,3,"div",10),n.Ub()),2&e){const e=n.nc().$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function Se(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(4).$implicit;n.Cb(1),n.ad(" ",e.indicator," ")}}function xe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-switch",52),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(4).$implicit,s=n.nc();return i.value=t,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(4).$implicit;n.wc("value",e.value)}}function Oe(e,t){if(1&e&&(n.Xb(0,"div",39),n.Xb(1,"div",23),n.Yc(2),n.Wc(3,Se,2,1,"span",24),n.Wb(),n.Wc(4,xe,1,1,"dropdown-switch",51),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.ad(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function De(e,t){if(1&e&&(n.Vb(0),n.Wc(1,Oe,5,3,"div",9),n.Ub()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function Ie(e,t){if(1&e&&n.Wc(0,De,2,1,"ng-container",20),2&e){const e=n.nc().$implicit,t=n.Lc(8);n.wc("ngIf",e.isDropdownSwitch)("ngIfElse",t)}}function je(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(4).$implicit;n.Cb(1),n.ad(" ",e.indicator," ")}}function Te(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-number-range",54),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(4).$implicit,s=n.nc();return i.value=t,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(4).$implicit;n.wc("items",e.value)}}function Ee(e,t){if(1&e&&(n.Xb(0,"div",43),n.Xb(1,"div",23),n.Yc(2),n.Wc(3,je,2,1,"span",24),n.Wb(),n.Wc(4,Te,1,1,"dropdown-number-range",53),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.ad(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function Ae(e,t){if(1&e&&(n.Vb(0),n.Wc(1,Ee,5,3,"div",10),n.Ub()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function _e(e,t){if(1&e&&n.Wc(0,Ae,2,1,"ng-container",20),2&e){const e=n.nc().$implicit,t=n.Lc(11);n.wc("ngIf",e.isDropdownNumber)("ngIfElse",t)}}function We(e,t){if(1&e&&(n.Xb(0,"span",26),n.Yc(1),n.Wb()),2&e){const e=n.nc(4).$implicit;n.Cb(1),n.ad(" ",e.indicator," ")}}function Re(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-input",56),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(4).$implicit,s=n.nc();return i.value=t.searchTerm,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(4).$implicit;n.wc("placeholder",e.placeholder)("searchTerm",e.value)("hideCheckbox",!0)}}function Pe(e,t){if(1&e&&(n.Xb(0,"div",43),n.Xb(1,"div",23),n.Yc(2),n.Wc(3,We,2,1,"span",24),n.Wb(),n.Wc(4,Re,1,3,"dropdown-input",55),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.ad(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function Me(e,t){if(1&e&&(n.Vb(0),n.Wc(1,Pe,5,3,"div",10),n.Ub()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function Fe(e,t){if(1&e&&n.Wc(0,Me,2,1,"ng-container",7),2&e){const e=n.nc().$implicit;n.wc("ngIf",e.isDropdownTextual)}}function Xe(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",3),n.Wc(2,ke,2,1,"ng-container",20),n.Wb(),n.Xb(3,"div",3),n.Wc(4,Ie,1,2,"ng-template",null,46,n.Xc),n.Wb(),n.Xb(6,"div",3),n.Wc(7,_e,1,2,"ng-template",null,47,n.Xc),n.Wb(),n.Xb(9,"div",3),n.Wc(10,Fe,1,1,"ng-template",null,48,n.Xc),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.Lc(5);n.Cb(2),n.wc("ngIf",e.isDropdownCheckbox)("ngIfElse",i)}}function Le(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",57),n.Xb(1,"a",58),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().clearFilters()}))("click",(function(){return n.Oc(e),n.nc().clearFilters()})),n.Yc(2,"Clear filters"),n.Wb(),n.Wb()}}var Ne=function(e){return e.STANDARD="STANDARD",e.CUSTOM="CUSTOM",e.BOTH="BOTH",e}({});let Be=(()=>{class e{constructor(e,t,i,r,o,c,l,u,d,h,p){this.userGroupV1Service=e,this.userGroupService=t,this.cd=i,this.clientService=r,this.projectService=o,this.taskService=c,this.authService=l,this.tagService=u,this.userService=d,this.uiSettings=h,this.workspaceService=p,this.hideMembers=!1,this.onApply=new n.n,this.activeFilterChanged=new n.n,this.filterMaps={[b.h.USERS_AND_GROUP]:null,[b.h.CLIENTS]:null,[b.h.PROJECTS]:null,[b.h.TASKS]:null,[b.h.TAGS]:null,[b.h.STATUSES]:null},this.userFilterOptions=b.s,this.clientFilterOptions=b.l,this.projectFilterOptions=b.p,this.taskFilterOptions=b.r,this.tagFilterOptions=b.q,this.userCount=new a.a,this.counts={[b.h.CLIENTS]:null,[b.h.PROJECTS]:null,[b.h.TASKS]:null,[b.h.TAGS]:null},this.labels={},this.numberOfSelected={},this.query={},this.reachedLimit={},this.isOpenedMap={},this.ReportFilter=b.h,this.FilterGroup=Ne,this.unsubscribe$=new s.a,this.inProgressSelectAll={},this.inProgressLoading={},this.USERS=b.j,this.GROUPS=b.f}set customFieldFilters(e){e&&e.length&&(this._customFieldFilters=e,this.isInitialized&&this.onCustomFieldsUpdate())}get customFieldFilters(){return this._customFieldFilters}set valuesData(e){if(!e)return;const t=!this._valuesData;e[b.h.USERS_AND_GROUP]=e[b.h.USERS_AND_GROUP]||new o.a({options:Object(b.o)()}),e[b.h.TAGS]=e[b.h.TAGS]||new o.a({options:Object(b.n)()}),e[b.h.CLIENTS]=e[b.h.CLIENTS]||new o.a,e[b.h.PROJECTS]=e[b.h.PROJECTS]||new o.a,e[b.h.TASKS]=e[b.h.TASKS]||new o.a,e[b.h.STATUSES]=e[b.h.STATUSES]||new o.a,this._valuesData=e,t&&this.isInitialized&&(this.setAllIndicators(),this.checkClearButton(Ne.STANDARD),this.isFormDirty=this.isFilterDirty)}get valuesData(){return this._valuesData}ngOnInit(){const e=this.workspaceService.getLocalDefaultWorkspace();this.timeApprovalEnabled=e.timeApprovalEnabled,this.invoicingEnabled=e.invoicingEnabled,this.worksapceId=e.id,this.clientLabel=e.projectGroupingLabel||"Client";const t=[new l.a(b.j)];this.hideUserGroupMembers||t.unshift(new l.a(b.f,null,{label:"Groups"})),this.filterMaps[b.h.USERS_AND_GROUP]=new u.a(t),this.initTeamSelectableMap(),this.setShowTeamDropdown();const i=Object(b.m)("Without "+this.clientLabel);this.filterMaps[b.h.CLIENTS]=new u.a([i,new l.a(b.h.CLIENTS)]);const n=Object(b.m)("Without project");this.filterMaps[b.h.PROJECTS]=new u.a([n,new l.a(b.h.PROJECTS)]);const s=Object(b.m)("Without task");this.filterMaps[b.h.TASKS]=new u.a([s,new l.a(b.h.TASKS)]),this.filterMaps[b.h.TAGS]=new u.a([new l.a(b.h.TAGS)]),this.resetBillingMap(),this.resetQuery(),this.setAllIndicators(),this.checkClearButton(Ne.STANDARD),this.makeValuesDataBackup(),this.isFormDirty=this.isFilterDirty,this.isInitialized=!0,this.initActiveFiltersMap(),this.refreshActiveFilters(),this.onCustomFieldsUpdate()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get hideUserGroup(){if(this.hideUserGroupMembers)return!0;const e=this.valuesData[b.h.USERS_AND_GROUP].options.status;return e===b.k.INACTIVE||e===b.k.PENDING}onActiveFilterChanged({selectableMaps:e,checkboxValues:t}){this.activeFiltersMap=e,this.activeFiltersValues=t;const i=this.activeFiltersValues.getQuery(),n=i&&i.standard||[],s=i&&i.custom||[];this.uiSettings.setStandardFilters(n,this.worksapceId),this.uiSettings.setCustomFilters(s,this.worksapceId),this.activeFilterChanged.emit({standard:n,custom:s}),this.refreshActiveFilters(),this.emitFilters()}onCustomFieldsUpdate(){this.customFieldFilters&&(this.checkClearButton(Ne.CUSTOM),this.makeCustomFieldBackup(),this.isFormCustomFieldDirty=this.isCustomFieldFilterDirty,this.initCustomActiveFiltersMap(),this.refreshActiveFilters())}initActiveFiltersMap(){let e=this.uiSettings.getStandardFilters(this.worksapceId),t=y.C;this.hideMembers&&(t=t.filter(e=>e!==b.h.USERS_AND_GROUP),e=e.filter(e=>e!==b.h.USERS_AND_GROUP));const i=t.map(e=>{let t;return e===b.h.CLIENTS&&(t=this.clientLabel.charAt(0).toUpperCase()+this.clientLabel.slice(1)),{id:e,name:t||b.i[e]}}),n=new l.a("standard",i,{label:"Standard Fields",hideTitle:!0});this.activeFiltersMap=new u.a([n]),this.activeFiltersValues=new o.a,this.activeFiltersValues.pushIds("standard",e)}initCustomActiveFiltersMap(){const e=this.uiSettings.getCustomFilters(this.worksapceId),t=this.customFieldFilters.map(e=>({id:e.id,name:e.label})),i=new l.a("custom",t,{label:"Custom Fields"});this.activeFiltersMap.getMapOfKey("standard").hideTitle=!1,this.activeFiltersMap.pushMap(i),this.activeFiltersValues.pushIds("custom",e)}refreshActiveFilters(){const e=this.uiSettings.getStandardFilters(this.worksapceId);for(const i in this.valuesData)this.valuesData[i].isFilterDisabled=!e.includes(i);if(this.isDescriptionDisabled=!e.includes(b.e),!this.customFieldFilters)return;const t=this.uiSettings.getCustomFilters(this.worksapceId);this.customFieldFilters.forEach(e=>e.checkIsDisabled(t))}clearFilters(){this.resetQuery();for(const e in this.valuesData)this.valuesData[e].reset();for(const e in this.filterMaps)this.filterMaps[e].resetAll();this.resetBillingMap(),this.userCount.reset();for(const e in this.counts)this.counts[e]=null;this.resetProject(),this.resetTasks(),this.description="",this.withoutDescription=!1,this.customFieldFilters&&this.customFieldFilters.forEach(e=>e.clear()),this.initTeamSelectableMap(),this.setShowTeamDropdown(),this.setAllIndicators(),this.checkClearButton(Ne.BOTH),this.isFilterChanged=!1,this.isCustomFieldFilterChanged=!1,(this.isFormDirty||this.isFormCustomFieldDirty)&&this.emitFilters(!1)}resetBillingMap(){this.filterMaps[b.h.STATUSES]=new u.a([new l.a(b.b,[{id:b.c.BILLABLE,name:"Billable"},{id:b.c.NOT_BILLABLE,name:"Non-billable"}])]),this.timeApprovalEnabled&&this.filterMaps[b.h.STATUSES].pushToMap(b.a,[{id:"APPROVED",name:"Approved"},{id:"UNAPPROVED",name:"Unapproved"}]),this.invoicingEnabled&&this.filterMaps[b.h.STATUSES].pushToMap(b.g,[{id:"INVOICED",name:"Invoiced"},{id:"UNINVOICED",name:"Uninvoiced"}])}resetQuery(){this.query[b.h.USERS_AND_GROUP]={page:1,limit:y.f,name:""},this.query[b.h.CLIENTS]={page:1,limit:y.f,name:""},this.query[b.h.TAGS]={page:1,limit:y.f,name:""},this.resetProjectsQuery(),this.resetTasksQuery(),this.reachedLimit={},this.labels={}}resetProjectsQuery(){this.query[b.h.PROJECTS]={page:1,limit:y.f,name:"",billable:m.a.BOTH,sortColumn:w.a.CLIENT_NAME}}resetTasksQuery(){this.query[b.h.TASKS]={page:1,limit:y.f,name:""}}setShowTeamDropdown(){this.showTeamDropdown=this.isTeamDropdownVisible()}isTeamDropdownVisible(){if(!this.hideMembers)return!0;const e=this.valuesData[b.h.USERS_AND_GROUP].getContainsFilter(b.f);if(e&&e.ids.length)return!1;const t=this.valuesData[b.h.USERS_AND_GROUP].getContainsFilter(b.j);if(!t||!t.ids.length)return!0;const i=this.authService.getUser();return 1===t.ids.length&&t.ids[0]===i.id}getUsersAndUserGroups(){this.hideMembers||(this.getUserGroups(),this.getUsers())}initTeamSelectableMap(){if(!this.hideMembers)return;this.userFilterOptions=null;const e=this.authService.getUser(),t=[{id:e.id,name:e.name}];this.filterMaps[b.h.USERS_AND_GROUP].resetMap(b.j),this.filterMaps[b.h.USERS_AND_GROUP].removeMap(b.f),this.filterMaps[b.h.USERS_AND_GROUP].pushToMap(b.j,t)}getUserGroups(e=this.query[b.h.USERS_AND_GROUP]){this.reachedLimit[b.f]||this.hideUserGroup||(this.setInProgressLoading(b.f,!0),this.userGroupV1Service.getUserGroups(e).pipe(Object(h.a)(this.unsubscribe$)).subscribe(({groups:t,count:i})=>{const n=t.length,s=t.filter(e=>"Admins"!==e.name);t=s,!!e.name||this.userCount.set(b.f,i),1===e.page&&this.filterMaps[b.h.USERS_AND_GROUP].resetMap(b.f),this.filterMaps[b.h.USERS_AND_GROUP].pushToMap(b.f,t,{label:"Groups"});const r=this.filterMaps[b.h.USERS_AND_GROUP].countSelectablesOf(b.f);this.reachedLimit[b.f]=r>=i||n<e.limit,this.setInProgressLoading(b.f,!1),this.cd.detectChanges()},()=>this.setInProgressLoading(b.f,!1)))}getUsers(e=this.query[b.h.USERS_AND_GROUP]){this.reachedLimit[b.j]||(e.statuses=this.valuesData[b.h.USERS_AND_GROUP].options.status,e.email=e.name,this.setInProgressLoading(b.j,!0),this.workspaceService.getReportsFilterTeamMembers(e).pipe(Object(h.a)(this.unsubscribe$)).subscribe(({count:t,users:i})=>{!!e.name||this.userCount.set(b.j,t),1===e.page&&this.filterMaps[b.h.USERS_AND_GROUP].resetMap(b.j),this.filterMaps[b.h.USERS_AND_GROUP].pushToMap(b.j,i);const n=this.filterMaps[b.h.USERS_AND_GROUP].countSelectablesOf(b.j);this.reachedLimit[b.j]=n>=t||i.length<e.limit,this.setInProgressLoading(b.j,!1)},()=>this.setInProgressLoading(b.j,!1)))}getClients(e=this.query[b.h.CLIENTS]){this.reachedLimit[b.h.CLIENTS]||(e.status=this.valuesData[b.h.CLIENTS].options.status,this.setInProgressLoading(b.h.CLIENTS,!0),this.clientService.getClientList(e).pipe(Object(h.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.filterMaps[b.h.CLIENTS].resetAll(),this.query[b.h.CLIENTS].page++,this.filterMaps[b.h.CLIENTS].pushToMap(b.h.CLIENTS,t);const i=t.length<e.limit;this.reachedLimit[b.h.CLIENTS]=i,i&&!e.name&&(this.counts[b.h.CLIENTS]=this.filterMaps[b.h.CLIENTS].count()),this.setInProgressLoading(b.h.CLIENTS,!1)},()=>this.setInProgressLoading(b.h.CLIENTS,!1)))}getProjects(e=this.query[b.h.PROJECTS]){if(this.reachedLimit[b.h.PROJECTS])return;const t=Object.assign({},e);t.status=this.valuesData[b.h.PROJECTS].options.status;const i=this.valuesData[b.h.CLIENTS].getContainsFilter(b.h.CLIENTS);this.setInProgressLoading(b.h.PROJECTS,!0),this.projectService.getProjects(t,i).pipe(Object(h.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.filterMaps[b.h.PROJECTS].resetAll(),this.query[b.h.PROJECTS].page++;const i=this.transformResponse(t,"clientName","No client");for(const e in i)this.filterMaps[b.h.PROJECTS].pushToMap(e,i[e]);const n=t.length<e.limit;this.reachedLimit[b.h.PROJECTS]=n,n&&!e.name&&(this.counts[b.h.PROJECTS]=this.filterMaps[b.h.PROJECTS].count()),this.setInProgressLoading(b.h.PROJECTS,!1)},()=>this.setInProgressLoading(b.h.PROJECTS,!1))}transformResponse(e,t,i){const n={};return e.forEach(e=>{const s=e[t]||i;n[s]||(n[s]=[]),n[s].push(e)}),n}transformResponseTask(e,t){const i={};return e.forEach(e=>{let n=t;e.projectName&&(n=e.clientName?`${e.projectName}:${e.clientName}`:e.projectName),i[n]=e.tasks}),i}getTasks(e=this.query[b.h.TASKS]){if(this.reachedLimit[b.h.TASKS])return;const t=Object.assign({},e);t.status=this.valuesData[b.h.TASKS].options.status;const i=this.valuesData[b.h.CLIENTS].getContainsFilter(b.h.CLIENTS),n=this.valuesData[b.h.PROJECTS].getContainsFilter(b.h.PROJECTS);this.setInProgressLoading(b.h.TASKS,!0),this.taskService.getTasksNew(t,i,n).pipe(Object(h.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.filterMaps[b.h.TASKS].resetAll(),this.query[b.h.TASKS].page++;const i=this.transformResponseTask(t,"No Project");for(const e in i)this.filterMaps[b.h.TASKS].pushToMap(e,i[e]);let n=0;t.forEach(e=>{n+=e.tasks.length});const s=n<e.limit;this.reachedLimit[b.h.TASKS]=s,s&&!e.name&&(this.counts[b.h.TASKS]=this.filterMaps[b.h.TASKS].count()),this.setInProgressLoading(b.h.TASKS,!1)},()=>this.setInProgressLoading(b.h.TASKS,!1))}getTags(e=this.query[b.h.TAGS]){if(this.reachedLimit[b.h.TAGS])return;const t=this.valuesData[b.h.TAGS].options.status,i=e.name;this.setInProgressLoading(b.h.TAGS,!0),this.tagService.getAllTagsV1(t,null,{page:e.page,pageSize:e.limit,name:i}).pipe(Object(h.a)(this.unsubscribe$)).subscribe(t=>{if(1===e.page){this.filterMaps[b.h.TAGS].resetAll();const e=Object(b.m)("Without tag");this.filterMaps[b.h.TAGS].unshiftMap(e)}this.query[b.h.TAGS].page++,this.filterMaps[b.h.TAGS].pushToMap(b.h.TAGS,t);const i=t.length<e.limit;this.reachedLimit[b.h.TAGS]=i,i&&!e.name&&(this.counts[b.h.TAGS]=this.filterMaps[b.h.TAGS].count()),this.setInProgressLoading(b.h.TAGS,!1)},()=>this.setInProgressLoading(b.h.TAGS,!1))}loadMoreUsers(){this.query[b.h.USERS_AND_GROUP].page++,this.getUsersAndUserGroups()}loadMoreClients(){this.getClients()}loadMoreProjects(){this.getProjects()}loadMoreTasks(){this.getTasks()}loadMoreTags(){this.getTags()}clearOptionFilter(e,t,i=!0){this.query[e].page=1,this.query[e].name=t.searchTerm,e===b.h.USERS_AND_GROUP?(this.reachedLimit[b.j]=!1,this.reachedLimit[b.f]=!1,i&&this.userCount.reset()):(this.reachedLimit[e]=!1,i&&(this.counts[e]=null)),this.checkApplyButton(Ne.BOTH)}onClientChange(e){this.valuesData[b.h.CLIENTS]=e.checkboxValues,this.filterMaps[b.h.CLIENTS]=e.selectableMaps,this.setIndicatorOf(b.h.CLIENTS,e),this.resetProject(),this.resetProjectsQuery(),this.resetTasks(),this.resetTasksQuery()}onProjectChange(e){this.valuesData[b.h.PROJECTS]=e.checkboxValues,this.filterMaps[b.h.PROJECTS]=e.selectableMaps,this.setIndicatorOf(b.h.PROJECTS,e),this.resetTasks(),this.resetTasksQuery()}checkGroup(){this.hideUserGroup&&(this.filterMaps[b.h.USERS_AND_GROUP].removeMap(b.f),this.userCount.remove(b.f),this.valuesData[b.h.USERS_AND_GROUP].removeSingleKey(b.f))}onSearchChange(e,t){this.clearOptionFilter(e,{searchTerm:t},!1)}onClientFilterOptionChange(){this.resetProject(),this.resetProjectsQuery(),this.resetTasks(),this.resetTasksQuery()}onProjectFilterOptionChange(){this.resetTasks(),this.resetTasksQuery()}resetProject(){this.labels[b.h.PROJECTS]=null,this.reachedLimit[b.h.PROJECTS]=!1,this.valuesData[b.h.PROJECTS].reset(),this.filterMaps[b.h.PROJECTS].resetAll(),this.counts[b.h.PROJECTS]=null,this.numberOfSelected[b.h.PROJECTS]=0}resetTasks(){this.labels[b.h.TASKS]=null,this.reachedLimit[b.h.TASKS]=!1,this.valuesData[b.h.TASKS].reset(),this.filterMaps[b.h.TASKS].resetAll(),this.counts[b.h.TASKS]=null,this.numberOfSelected[b.h.TASKS]=0}descriptionChanged(){this.checkClearButton(Ne.STANDARD),this.checkApplyButton(Ne.STANDARD)}checkClearButton(e=Ne.BOTH){e!==Ne.BOTH&&e!==Ne.STANDARD||(this.isFilterDirty=!this.isCleanClearBtn()),e!==Ne.BOTH&&e!==Ne.CUSTOM||(this.isCustomFieldFilterDirty=!this.isCleanCustomFieldClearBtn()),this.cd.markForCheck()}checkApplyButton(e=Ne.BOTH){e!==Ne.BOTH&&e!==Ne.STANDARD||(this.isFilterChanged=!this.isCleanApplyBtn()),e!==Ne.BOTH&&e!==Ne.CUSTOM||(this.isCustomFieldFilterChanged=!this.isCustomFieldCleanApplyBtn()),this.cd.markForCheck()}isCleanApplyBtn(){for(const e in this.valuesData){const t=this.filterBackup[e],i=this.valuesData[e].getContainsFilter();if(!o.a.areContainFiltersSame(i,t))return!1}return this.description===this.descriptionBackup&&this.withoutDescription===this.withoutDescriptionBackup}isCustomFieldCleanApplyBtn(){if(!this.customFieldFilters)return!0;for(let e=0;e<this.customFieldFilters.length;e++){const t=this.customFieldFilters[e].getApiParams();if(!C.a.areParamsEqaul(t,this.customFieldsDataBackup[t.id]))return!1}return!0}makeValuesDataBackup(){this.filterBackup={};for(const e in this.valuesData)this.filterBackup[e]=this.valuesData[e].getContainsFilter();this.descriptionBackup=this.description,this.withoutDescriptionBackup=this.withoutDescription}makeCustomFieldBackup(){this.customFieldsDataBackup={},this.customFieldFilters&&this.customFieldFilters.forEach(e=>{this.customFieldsDataBackup[e.id]=e.getApiParams()})}isCleanClearBtn(){for(const e in this.numberOfSelected)if(this.numberOfSelected[e])return!1;return!this.description&&!this.withoutDescription}generateIndicatorOf(e){if(!this.valuesData[e])return;const t=this.valuesData[e].getSelectedData(this.filterMaps[e]);this.numberOfSelected[e]=t.numberOfSelected||t.numberOfSelectedApproximately,this.labels[e]=t.label}isCleanCustomFieldClearBtn(){if(!this.customFieldFilters)return!0;for(let e=0;e<this.customFieldFilters.length;e++)if(!this.customFieldFilters[e].isClean())return!1;return!0}setIndicatorOf(e,{numberOfSelected:t,numberOfSelectedApproximately:i,label:n},s=!0){this.numberOfSelected[e]=t||i,this.labels[e]=n,this.checkClearButton(Ne.STANDARD),s&&this.checkApplyButton(Ne.STANDARD),this.cd.markForCheck()}setAllIndicators(){if(this.valuesData)for(const e in this.filterMaps)this.generateIndicatorOf(e)}emitFilters(e=!0){setTimeout(()=>{const t=this.customFieldFilters?this.customFieldFilters.map(e=>e.getApiParamsIfChanged()).filter(e=>!!e):null,i={description:this.description,withoutDescription:!!this.withoutDescription,valuesData:this.valuesData,customFieldParams:t};this.isFormDirty=e,this.isFormCustomFieldDirty=e,this.onApply.emit(i),this.isFilterChanged=!1,this.isCustomFieldFilterChanged=!1,this.makeValuesDataBackup(),this.makeCustomFieldBackup(),this.cd.markForCheck()})}selectAllClientIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm};this.setInProgress(t,!0),this.clientService.getClientIds(i).pipe(Object(h.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}selectAllProjectIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm,clients:this.valuesData[b.h.CLIENTS].getContainsFilter(b.h.CLIENTS)};this.setInProgress(t,!0),this.projectService.getProjectIds(i).pipe(Object(h.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}selectAllTasksIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm,clients:this.valuesData[b.h.CLIENTS].getContainsFilter(b.h.CLIENTS),projects:this.valuesData[b.h.PROJECTS].getContainsFilter(b.h.PROJECTS)};this.setInProgress(t,!0),this.taskService.getTasksIds(i).pipe(Object(h.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}selectAllTagIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm};this.setInProgress(t,!0),this.tagService.getTagIds(i).pipe(Object(h.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}selectAllUserIds(e){const t=b.h.USERS_AND_GROUP,i={status:this.valuesData[t].options.status,name:e.searchTerm},n=this.userService.getUserIds(i),s=this.userGroupService.getUserGroupIds(i);this.setInProgress(t,!0),Object(r.a)(n,s).pipe(Object(h.a)(this.unsubscribe$)).subscribe(i=>{let n=e.isSelected;this.valuesData[t].exclude&&(n=!n),this.valuesData[t].toggleMultipleIds(b.j,i[0],n),this.valuesData[t].toggleMultipleIds(b.f,i[1],n),this.isOpenedMap[t]||this.generateIndicatorOf(t),this.setInProgress(t)},e=>{this.setInProgress(t)})}setFilterIds(e,t,i){let n=e.isSelected;this.valuesData[t].exclude&&(n=!n),this.valuesData[t].toggleMultipleIds(t,i,n),this.isOpenedMap[t]||this.generateIndicatorOf(t),this.setInProgress(t)}setInProgress(e,t=!1){this.inProgressSelectAll[e]=t,this.cd.markForCheck()}setInProgressLoading(e,t){this.inProgressLoading[e]=t,this.cd.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(p.a),n.Rb(x.a),n.Rb(n.h),n.Rb(f.a),n.Rb(O.a),n.Rb(g.a),n.Rb(d.a),n.Rb(v.a),n.Rb(S.a),n.Rb(k.a),n.Rb(c.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["reports-filter"]],inputs:{description:"description",withoutDescription:"withoutDescription",hideMembers:"hideMembers",customFieldFilters:"customFieldFilters",hideUserGroupMembers:"hideUserGroupMembers",valuesData:"valuesData"},outputs:{onApply:"onApply",activeFilterChanged:"activeFilterChanged"},decls:32,vars:11,consts:[[1,"cl-card","cl-border-bottom","cl-mb-4"],[1,"cl-component-row","cl-p-0"],[1,"cl-report-entry-actions","cl-border-0","cl-d-flex","cl-flex-wrap","cl-w-100"],[1,"cl-d-report-filter-item"],["dropdownKey","",1,"cl-component-divided-left","cl-no-divider-border"],["tabindex","0","dropdownKeyButton","",1,"cl-h5","cl-mb-0","pointer","cl-dropdown-toggle"],[3,"placeholder","checkboxValues","selectableMaps","resizeableName","showSearch","maxLimitOfSelected","onChange",4,"dropdownKeyContent"],[4,"ngIf"],["dropdownKey","","class","cl-dropdown cl-dropdown-large cl-d-flex",3,"onClose","onOpen",4,"ngIf"],["dropdownKey","","class","cl-dropdown cl-d-flex",4,"ngIf"],["dropdownKey","","class","cl-dropdown cl-dropdown-large cl-d-flex",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cl-ml-auto"],[1,"cl-mx-2"],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-btn-sm","cl-d-block","cl-d-lg-custom-none",3,"disabled","keyup.enter","click"],["applyBtn1",""],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-auto","cl-d-none","cl-d-lg-custom-block",3,"disabled","keyup.enter","click"],["applyBtn2",""],["class","cl-reset-filter",4,"ngIf"],[3,"placeholder","checkboxValues","selectableMaps","resizeableName","showSearch","maxLimitOfSelected","onChange"],[4,"ngIf","ngIfElse"],["fakeTeamTemplate",""],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex",3,"onClose","onOpen"],["dropdownKeyButton","","tabindex","0","placement","bottom",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],["class","cl-badge cl-badge-filter",4,"ngIf"],[3,"placeholder","preventOfflineFiltering","filterName","showSelectAll","checkboxValues","selectableMaps","filterOptions","searchValue","countMap","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[1,"cl-badge","cl-badge-filter"],[3,"placeholder","preventOfflineFiltering","filterName","showSelectAll","checkboxValues","selectableMaps","filterOptions","searchValue","countMap","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange"],[1,"cl-dropdown","cl-dropdown-large","cl-d-flex","cl-disabled"],[1,"cl-component-divided-left","cl-dropdown-toggle"],[1,"cl-text-capitalize"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],[3,"placeholder","filterName","countNumber","singleMapProperty","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[3,"placeholder","filterName","countNumber","singleMapProperty","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onContainOptionChange","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onContainOptionChange","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],["dropdownKey","",1,"cl-dropdown","cl-d-flex"],["dropdownKeyButton","","tabindex","0",1,"pointer","cl-component-divided-left","cl-dropdown-toggle"],[3,"isResizeable","countNumber","showSearch","showSelectAll","showTitles","checkboxValues","selectableMaps","onChange",4,"dropdownKeyContent"],[3,"isResizeable","countNumber","showSearch","showSelectAll","showTitles","checkboxValues","selectableMaps","onChange"],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex"],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","isSelected","checkboxLabel","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","isSelected","checkboxLabel","onChange"],["customFilterTemplate1",""],["customFilterTemplate2",""],["customFilterTemplate3",""],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","offlineSearch","isReceivedAllData","showSelectAll","selectableMaps","checkboxValues","searchValue","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","offlineSearch","isReceivedAllData","showSelectAll","selectableMaps","checkboxValues","searchValue","onChange"],["class","cl-lg-custom-down-r-0-wrapper",3,"value","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"value","onChange"],["class","cl-lg-custom-down-r-0-wrapper",3,"items","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"items","onChange"],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","hideCheckbox","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","hideCheckbox","onChange"],[1,"cl-reset-filter"],["tabindex","0",3,"keyup.enter","click"]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xb(4,"div",4),n.Xb(5,"span",5),n.Yc(6,"Filter"),n.Wb(),n.Wc(7,z,1,6,"dropdown-checkbox-lite",6),n.Wb(),n.Wb(),n.Xb(8,"div",3),n.Wc(9,ee,4,2,"ng-container",7),n.Wb(),n.Xb(10,"div",3),n.Wc(11,ne,6,3,"div",8),n.Wb(),n.Xb(12,"div",3),n.Wc(13,oe,5,2,"div",8),n.Wb(),n.Xb(14,"div",3),n.Wc(15,le,5,2,"div",8),n.Wb(),n.Xb(16,"div",3),n.Wc(17,he,5,2,"div",8),n.Wb(),n.Xb(18,"div",3),n.Wc(19,fe,5,1,"div",9),n.Wb(),n.Xb(20,"div",3),n.Wc(21,ve,5,2,"div",10),n.Wb(),n.Wc(22,Xe,12,2,"ng-container",11),n.Xb(23,"div",12),n.Xb(24,"div",13),n.Xb(25,"button",14,15),n.jc("keyup.enter",(function(){return t.emitFilters()}))("click",(function(){n.Oc(e);const i=n.Lc(26);return t.emitFilters(),i.blur()})),n.Yc(27,"Apply"),n.Wb(),n.Xb(28,"button",16,17),n.jc("keyup.enter",(function(){return t.emitFilters()}))("click",(function(){n.Oc(e);const i=n.Lc(29);return t.emitFilters(),i.blur()})),n.Yc(30,"Apply filter"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wc(31,Le,3,0,"div",18)}2&e&&(n.Cb(9),n.wc("ngIf",!t.valuesData[t.ReportFilter.USERS_AND_GROUP].isFilterDisabled&&!t.hideMembers),n.Cb(2),n.wc("ngIf",!t.valuesData[t.ReportFilter.CLIENTS].isFilterDisabled),n.Cb(2),n.wc("ngIf",!t.valuesData[t.ReportFilter.PROJECTS].isFilterDisabled),n.Cb(2),n.wc("ngIf",!t.valuesData[t.ReportFilter.TASKS].isFilterDisabled),n.Cb(2),n.wc("ngIf",!t.valuesData[t.ReportFilter.TAGS].isFilterDisabled),n.Cb(2),n.wc("ngIf",!t.valuesData[t.ReportFilter.STATUSES].isFilterDisabled),n.Cb(2),n.wc("ngIf",!t.isDescriptionDisabled),n.Cb(1),n.wc("ngForOf",t.customFieldFilters),n.Cb(3),n.wc("disabled",!t.isFilterChanged&&!t.isCustomFieldFilterChanged),n.Cb(3),n.wc("disabled",!t.isFilterChanged&&!t.isCustomFieldFilterChanged),n.Cb(3),n.wc("ngIf",t.isFilterDirty||t.isCustomFieldFilterDirty))},directives:[D.a,I.a,j.a,T.u,T.t,L,N.Z,B.a,V,U.a,G],encapsulation:2,changeDetection:0}),e})()},VHTt:function(e,t,i){"use strict";var n=i("OmiP");i.d(t,"a",(function(){return n.a}))},VTb6:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("XNiG"),s=i("lGQG"),r=i("O3o7"),o=i("Ymxs"),a=i("OG4e"),c=i("tk/3"),l=i("Lcbf"),u=i("UMzN"),d=i("sNAh"),h=i("ZaaN");class p{constructor(e,t,i){this._id=e&&e.id,this._name=e&&e.name,this._hourlyRate=e&&new d.a(e.hourlyRate),this._memberships=e&&e.memberships,this._public=e&&e.public,this._color=e&&e.color,this._billable=e&&e.billable,this._client=e&&e.client&&new u.a(e.client),this._estimate=e&&new h.a(e.estimate),this._hours=t,this._archived=i,this._tasks=e&&e.tasks,this._favorite=e&&e.favorite,this._isSelected=!1}get name(){return this._name}set name(e){this._name=e}get id(){return this._id}set id(e){this._id=e}get hourlyRate(){return this._hourlyRate}set hourlyRate(e){this._hourlyRate=e}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e}get public(){return this._public}set public(e){this._public=e}get color(){return this._color}set color(e){this._color=e}get billable(){return this._billable}set billable(e){this._billable=e}get memberships(){return this._memberships}set memberships(e){this._memberships=e}get estimate(){return this._estimate}set estimate(e){this._estimate=e}get client(){return this._client}set client(e){this._client=e}get hours(){return this._hours}set hours(e){this._hours=e}get archived(){return this._archived}set archived(e){this._archived=e}get favorite(){return this._favorite}set favorite(e){this._favorite=e}get tasks(){return this._tasks}set tasks(e){this._tasks=e}}var b=i("tnjF"),f=i("27el");class m{constructor(e){this._client=e&&e.client,this._count=e&&e.projectsCount,this._projects=e&&e.projects}get client(){return this._client}get count(){return this._count}get projects(){return this._projects}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e}set projects(e){this._projects=e}set count(e){this._count=e}}var g=i("1Tmk"),v=i("lJxs"),w=i("vkgz"),y=i("lvCY"),C=i("fXoL"),k=i("tyNb");let S=(()=>{class e{constructor(e,t,i,s,r,o){this.http=e,this.authService=t,this.router=i,this.workspaceService=s,this.centUSDConverter=r,this.toaster=o,this.error=new n.a,this.projects=new n.a,this.projectsReportFilter=new n.a,this.project=new n.a,this.isOpenColorChooser=new n.a,this.filterProject=new n.a,this.projectPermissions=new n.a,this.projectPermissionsForUser=new n.a,this.projectsPermissionsForUser=new n.a,this.searchName=new n.a,this.projectsAndDurations=new n.a,this.users=new n.a,this.favorites=new n.a,this.projectsWithTasks=new n.a,this.projectsByClient=new n.a,this.favoritesProjects=new n.a,this.count=new n.a,this.newlyAddedProject=new n.a,this.projectNotUpdated=new n.a,this.templates=new n.a}getAllProjectsForReportDropdown(){const e=this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${e}/projects/filters`).pipe(Object(v.a)(e=>e.map(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)))).subscribe(e=>{this.projectsReportFilter.next(e)},e=>{this.error.next(e)})}getProjectsAndTasksByFilter(e,t,i,n,s,r){const o=s||this.workspaceService.getDefaultWorkspaceId(),a=(new c.f).append("page",t.toString()).append("search",e?e.trim():"").append("clientId",n||"").append("include",r||"");this.http.get(`/workspaces/${o}/projects/user/${i}/filter`,{params:a}).pipe(Object(v.a)(e=>e.map(e=>new p(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)))).subscribe(e=>{this.projectsWithTasks.next(e)},e=>{this.error.next(e)})}create(e,t,i,n,s,o){const a=o||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${a}/projects/`,JSON.stringify({name:e,color:s,isPublic:t,clientId:i,billable:n})).pipe(Object(v.a)(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(w.a)(t=>{this.toaster.pop("success",`Project ${e} has been created.`),this.authService.projectIsCreated(t.id,t.name)},e=>{var t;403!==e.status&&this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Create project failed.")}))}createFromTemplate(e,t,i,n,s,o){const a=o||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`workspaces/${a}/projects/from-template`,JSON.stringify({templateId:e,name:t,color:s,isPublic:i,clientId:n})).pipe(Object(v.a)(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(w.a)(e=>{this.toaster.success(`Project ${t} has been created.`),this.authService.projectIsCreated(e.id,e.name)},e=>{var t;403!==e.status&&this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Create project failed.")}))}setSearchProjectNameAfterClearFilters(e){this.searchName.next(e)}getFavoriteProjectsFull(e,t,i){const n=i||this.workspaceService.getDefaultWorkspaceId(),s=this.authService.getUser().id,r=(new c.f).append("search",e?e.trim():"");this.http.get(`/workspaces/${n}/users/${s}/projects/favorites/${t}/detailed`,{params:r}).pipe(Object(v.a)(e=>e.map(e=>new p(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours,e.archived)))).subscribe(e=>{this.favoritesProjects.next(e)},e=>{this.error.next(e)})}makeProjectFavorite(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),s=this.authService.getUser().id,r=new n.a;return this.http.post(`/workspaces/${i}/users/${s}/projects/favorites/${e}`,{}).pipe(Object(v.a)(e=>new l.a(e))).subscribe(e=>{r.next(e)},e=>{r.error(e),this.error.next(e)}),r}removeProjectAsFavorite(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),s=this.authService.getUser().id,r=new n.a;return this.http.delete(`/workspaces/${i}/users/${s}/projects/favorites/projects/${e}`).subscribe(e=>{r.next(e)},e=>{r.error(e),this.error.next(e)}),r}getProjectCountByClient(e,t,i,n){const s=n||this.workspaceService.getDefaultWorkspaceId(),r=(new c.f).append("page",t.toString()).append("search",e?e.trim():"");this.http.get(`/workspaces/${s}/projects/user/${i}/filter/by-client`,{params:r}).pipe(Object(v.a)(e=>e.map(e=>new m(e)))).subscribe(e=>{this.projectsByClient.next(e)},e=>{this.error.next(e)})}getProjectsGroupedByClient(e,t,i,n,s){i=i||this.workspaceService.getDefaultWorkspaceId();const r=(new c.f).append("page",t.toString()).append("excludedProjects",(n||[]).join(",")).append("excludedTasks",(s||[]).join(",")).append("search",(null==e?void 0:e.trim())||"");return this.http.get(`/workspaces/${i}/project-picker/clients`,{params:r}).pipe(Object(v.a)(e=>e.map(e=>new f.a(e))),Object(w.a)(()=>null,e=>{var t;return this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Get project groups failed")}))}getProjectsAndTasks(e,t,i,n,s,o){o=o||this.workspaceService.getDefaultWorkspaceId();const a=(new c.f).append("page",t.toString()).append("favorites",s.toString()).append("clientId",!s&&i?i:"").append("excludedTasks",(n||[]).join(",")).append("search",e.trim()||"");return this.http.get(`/workspaces/${o}/project-picker/projects`,{params:a}).pipe(Object(v.a)(e=>e.map(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))),Object(w.a)(()=>null,e=>{var t;return this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Get projects failed")}))}getTasks(e,t,i,n,s){e=e||this.workspaceService.getDefaultWorkspaceId();const r=(new c.f).append("excludedTasks",(s||[]).join(",")).append("page",n.toString()).append("search",(null==i?void 0:i.trim())||"");return this.http.get(`/workspaces/${e}/project-picker/projects/${t}/tasks`,{params:r}).pipe(Object(v.a)(e=>e.map(e=>new b.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}getProjects(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n={name:e.name||"",status:e.status||"",page:e.page||1,pageSize:e.pageSize||y.j};return t&&(n.clients={contains:t.contains,ids:t.ids,status:t.status}),this.http.post(`/workspaces/${i}/projects/report-filters`,n).pipe(Object(v.a)(e=>e.map(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}getProjectIds(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/projects/report-filters/ids`,{name:e.name,status:e.status,clients:e.clients}).pipe(Object(v.a)(e=>e),Object(w.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get project IDs failed")))}}return e.\u0275fac=function(t){return new(t||e)(C.fc(c.b),C.fc(s.a),C.fc(k.c),C.fc(g.a),C.fc(a.a),C.fc(o.a))},e.\u0275prov=C.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Vpr3:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("lJxs"),s=i("vkgz"),r=i("tk/3"),o=i("XNiG"),a=i("1Tmk"),c=i("DVUX"),l=i("XLnJ"),u=i("IQK1"),d=i("GidR"),h=i("BuEj"),p=i("fkOE"),b=i("5x7/"),f=i("YDZJ"),m=i("NTZZ"),g=i("uHlu"),v=i("lGQG"),w=i("fXoL");let y=(()=>{class e{constructor(e,t,i,n){this.toaster=e,this.workspaceService=t,this.authService=i,this.http=n,this.endpoints={[h.a.DETAILED]:"detailed",[h.a.SUMMARY]:"summary",[h.a.WEEKLY]:"weekly"}}getAllDetailedEntries(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.DETAILED);return this.http.post(`${p.d}/workspaces/${t}/reports/detailed`,i).pipe(Object(n.a)(e=>{const t=e.timeentries.map(e=>new d.a(e,i.amountShown));return{totals:new u.a(e.totals&&e.totals[0],t),timeentries:t}}),Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get time entries failed.")))}getEntryIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.DETAILED);return this.http.post(`${p.d}/workspaces/${t}/reports/detailed/ids`,i).pipe(Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get entry IDs failed.")),Object(n.a)(e=>e.timeEntryIds))}duplicateTimeEntry(e){const t=d.a.clone(e),i=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/v1/workspaces/${i}/user/${e.user.id}/time-entries/${t.id}/duplicate`,null).pipe(Object(n.a)(e=>(t.id=e.id,e.projectId?e.taskId||(t.task=null):(t.project=null,t.task=null),t)),Object(s.a)(()=>this.toaster.pop("success","Time entry has been duplicated."),e=>this.toaster.pop("error",e.error&&e.error.message||"Failed to duplicate the entry, please try again.")))}getWeeklyReportsData(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.WEEKLY);return this.http.post(`${p.d}/workspaces/${t}/reports/weekly`,i).pipe(Object(n.a)(e=>{const t=e.totals[0]||{},i=e.groupOne.map(e=>new g.a(e));return{totals:new u.a(t),groups:i,totalsByDay:new g.a({days:e.totalsByDay,amount:t.totalAmount,duration:t.totalTime})}}),Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get Weekly data failed.")))}getSummaryReportsData(e){const t=this.workspaceService.getLocalDefaultWorkspace(),i=t.id,r=e.generateBodyParams(h.a.SUMMARY),o=t.projectGroupingLabel||"client";return this.http.post(`${p.d}/workspaces/${i}/reports/summary`,r).pipe(Object(n.a)(e=>({totals:new u.a(e.totals[0]),chart:e.chart.map(e=>new b.a(e)),groups:e.groupOne.map(e=>new f.a(e,r.summaryFilter.groups,o))})),Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get Summary data failed.")))}getCustomizationSettings(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=this.authService.getUser().id,n=e.toLowerCase();return this.http.get(`${p.d}/workspaces/${t}/users/${i}/custom-export/${n}`)}customizeReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=this.authService.getUser().id,s=new o.a;return this.http.put(`${p.d}/workspaces/${i}/users/${n}/custom-export`,{name:e.name,type:t,customFieldIds:t===h.a.DETAILED?e.customFieldIds:[],visibleElements:e.reportFields}).subscribe(e=>{s.next(e),this.toaster.pop("success","Export settings updated")},e=>{s.error(e),this.toaster.pop("error",e.error&&e.error.message||"Saving export settings failed")}),s}saveReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=new o.a,s=e.generateShareData(t);return this.http.post(`${p.d}/shared/workspaces/${i}`,s).subscribe(e=>{n.next(e),this.toaster.pop("success","Report saved")},e=>{n.error(e),this.toaster.pop("error",e.error&&e.error.message||"Save failed")}),n}getSharedReports(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),s=(new r.f).append("page",e.toString()).append("pageSize",t.toString());return this.http.get(`${p.d}/shared/workspaces/${i}/`,{params:s}).pipe(Object(n.a)(e=>(e.reports=e.reports.map(e=>new m.a(e)),e)))}getReportById(e,t){const i=t&&(t.page||t.dateRangeStart||t.sortOrder)?(new r.f).append("page",t.page||"").append("pageSize",t.pageSize||"").append("dateRangeStart",t.dateRangeStart||"").append("dateRangeEnd",t.dateRangeEnd||"").append("sortOrder",t.sortOrder||"").append("sortColumn",t.sortColumn||""):new r.f;return this.http.get(`${p.d}/shared/${e}`,{params:i}).pipe(Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get report failed")))}exportOfSharedReport(e,t,i){const n=(new r.f).append("exportType",t).append("page",i.page||"").append("pageSize",i.pageSize||"").append("dateRangeStart",i.dateRangeStart||"").append("dateRangeEnd",i.dateRangeEnd||"").append("sortOrder",i.sortOrder||"").append("sortColumn",i.sortColumn||"");return this.http.get(`${p.d}/shared/${e}`,{params:n,responseType:"blob"}).pipe(Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Download failed")))}getFilterInfo(e){return this.http.get(`${p.d}/shared/${e}/filters`)}updateSavedReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`${p.d}/workspaces/${i}/shared/${e}/`,t).pipe(Object(s.a)(()=>{this.toaster.pop("success","Report successfully updated")},e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Update failed")}))}updateScheduledReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`${p.d}/workspaces/${i}/shared/${e}/scheduled`,t).pipe()}deleteReport(e){return this.http.delete(`${p.d}/shared/${e}`).pipe(Object(s.a)(()=>{this.toaster.pop("success","Report deleted")},e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Delete failed")}))}deleteScheduledReport(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`${p.d}/workspaces/${t}/shared/${e}/scheduled`).pipe().subscribe()}downloadPdf(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.f).append("export","pdf"),o=e.generateBodyParams(t);return o.exportType=l.a.PDF,this.http.post(`${p.d}/workspaces/${i}/reports/${this.endpoints[t]}`,o,{params:n,responseType:"blob"}).pipe(Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Download failed")))}downloadCsv(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.f).append("export","csv"),o=e.generateBodyParams(t);return o.exportType=l.a.CSV,this.http.post(`${p.d}/workspaces/${i}/reports/${this.endpoints[t]}`,o,{params:n,responseType:"blob"}).pipe(Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Download failed")))}downloadExcel(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.f).set("export","xlsx"),o=e.generateBodyParams(t);return o.exportType=l.a.XLSX,this.http.post(`${p.d}/workspaces/${i}/reports/${this.endpoints[t]}`,o,{params:n,responseType:"blob"}).pipe(Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Download failed")))}}return e.\u0275fac=function(t){return new(t||e)(w.fc(c.d),w.fc(a.a),w.fc(v.a),w.fc(r.b))},e.\u0275prov=w.Nb({token:e,factory:e.\u0275fac}),e})()},VucA:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("LPYB"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.b]]}),e})()},"WQ+v":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{parseInput(e){e.indexOf(".")>-1&&(e=this.formatDecimals(e.toLowerCase()));const t=Number(e);if(isNaN(t))return this.isTimeValid(e)?this.parseTimeWithSeparator(e.toLowerCase()):null;if(t%1!=0)return null;if(e.length<3){let t=Number(e);if(t>24){const e=t%10;return t=Math.floor(t/10),`${t}:${e}`}return e+":00"}return 3===e.length?`0${e.substring(0,1)}${e.substring(1,3)}`:e.length>3?t<2400?`${e.substring(0,2)}${e.substring(2,4)}`:null:void 0}formatDecimals(e){let t,i,n="";const s=e.split(".");if(t=s[0],/[0-9]{1,2}.[0-9]{1,2}(a|am|p|pm)/.test(e)){s[1]=s[1].replace("a"," a"),s[1]=s[1].replace("p"," p");const e=s[1].split(" ");i=1==e[0].length?"0".concat(e[0]):e[0],n=e[1]}else i=1==s[1].length?"0".concat(s[1]):s[1];return t.concat(":").concat(i).concat(n)}isTimeValid(e){const t=this.convertTotalTimeTo24HourDisplay(e),i=Number(t)<2460,n=Number(t)<24;return t.length<3?n:i}parseTimeWithSeparator(e){if(/[0-9]{1,2}:[0-9]{1,2}(a|am|p|pm)/.test(e)){const t=e.split(":");let i;const n=t[1].substring(0,2),s=Number(t[0]);return s>12?null:(i=this.isPM(e)&&12!==s?(s+12).toString():(this.isAM(e)&&12===s?0:s).toString(),this.parseTimeWithSeparatorWithoutString(`${i}:${n}`))}if(/^\d{1,4}(a|p|am|pm)$/i.test(e)){const t=e.toLowerCase().replace("a","").replace("p","").replace("m","");let i="00",n="00";switch(t.length){case 1:case 2:if("0"===e||"00"===e)i="00";else{const n=Number(t.substring(0,2));if(n>12)return null;i=this.isPM(e)&&12!==n?(n+12).toString():(this.isAM(e)&&12===n?0:n).toString()}break;case 3:{const s=Number(t.substring(0,1));if(s>12)return null;"00"!==e.substring(0,2)||"0"!==e.substring(1,t.length)&&"00"!==e.substring(1,t.length)?(i=this.isPM(e)&&12!==s?(s+12).toString():(this.isAM(e)&&12===s?0:s).toString(),n=t.substring(1,t.length)):i="00";break}case 4:{const s=Number(t.substring(0,2));if(s>12)return null;"00"!==e.substring(0,2)||"0"!==e.substring(2,t.length)&&"00"!==e.substring(2,t.length)?(i=this.isPM(e)&&12!==s?(s+12).toString():(this.isAM(e)&&12===s?0:s).toString(),n=t.substring(2,t.length)):i="00";break}}return this.parseTimeWithSeparatorWithoutString(`${i.length<2?"0"+i:i}:${n.length<2?"0"+n:n}`)}return this.parseTimeWithSeparatorWithoutString(e)}parseTimeWithSeparatorWithoutString(e){if(/^\d\d:\d\d$/.test(e)){const t=e.split(":");return t[0]+t[1]}if(/^\d:\d\d$/.test(e)){const t=e.split(":");return"0"+t[0]+t[1]}return null}isAM(e){return e.toLowerCase().endsWith("a")||e.toLowerCase().endsWith("am")}isPM(e){return e.toLowerCase().endsWith("p")||e.toLowerCase().endsWith("pm")}convertTotalTimeTo24HourDisplay(e){let t=e.toLowerCase().replace(/((am|a)|(pm|p))/,"");return this.isPM(e)&&(-1===t.indexOf(":")&&(t=this.getTotalTimeWithSeparator(t)),t||(t=""),t=(Number(t.substring(0,t.indexOf(":")))+12).toString().concat(t.substring(t.indexOf(":")+1,t.length))),t.replace(":","")}getTotalTimeWithSeparator(e){switch(e.length){case 1:return`0${e}:00`;case 2:return e+":00";case 3:return`0${e.substring(0,1)}:${e.substring(1,3)}`;case 4:return`${e.substring(0,2)}:${e.substring(2,4)}`;default:return null}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})()},Ww9u:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("B01t"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a]]}),e})()},XLnJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return b}));var n=i("hkzH"),s=i("lvCY"),r=i("rsZi"),o=i("vqWo"),a=i("fANO"),c=i("dMTz"),l=i("BuEj"),u=i("RkOr"),d=i("RWlN"),h=i("rnVd"),p=function(e){return e.CSV="CSV",e.PDF="PDF",e.XLSX="XLSX",e}({});class b{constructor(e,t,i,n,s,r,o,a,c,l,u,d,h,p,b,f){this.dateRange=e,this.relativeDateRange=t,this.filterValuesData=i,this.description=n,this.audit=s,this.pagination=r,this.sortData=o,this.zoomLevel=a,this.shareReport=c,this.isRounding=l,this.amountOption=u,this.withoutDescription=d,this.customFieldFilters=h,this.summaryFilterGroups=p,this.weeklyGroup=b,this.showEstimate=f}generateBodyParams(e){const t=navigator.languages&&navigator.languages[0]||navigator.language||"",i={dateRangeStart:this.dateRange.start.toISOString(),dateRangeEnd:this.dateRange.end.toISOString(),sortOrder:this.sortData.sortOrder||r.a.ASCENDING,description:this.description||"",rounding:this.isRounding||!1,withoutDescription:this.withoutDescription||!1,amountShown:this.amountOption,zoomLevel:this.zoomLevel?this.zoomLevel.toUpperCase():d.a.WEEK.toUpperCase(),userLocale:t.replace(/\-/g,"_"),customFields:this.getCustomFields(),showEstimate:this.showEstimate};return this.setDateRangeType(i),this.setStatusToObject(i),this.setUserAndUserGroup(i),this.setContainFilters(i),e===l.a.DETAILED?i.detailedFilter={sortColumn:this.sortData.sortColumn||o.b.DESCRIPTION,page:this.pagination.page||1,pageSize:this.pagination.pageSize||s.j,auditFilter:this.audit.getBodyParameters()}:e===l.a.SUMMARY?i.summaryFilter={sortColumn:this.sortData.sortColumn||u.c.GROUP,groups:this.summaryFilterGroups.filter(e=>!!e&&e!==u.a.NONE)}:e===l.a.WEEKLY&&(i.weeklyFilter={group:this.weeklyGroup,subgroup:this.amountOption===c.a.HIDE_AMOUNT?"TIME":"EARNINGS"}),i}generateShareData(e){const t=this.generateBodyParams(e),i={name:this.shareReport.name,isPublic:this.shareReport.isPublic,fixedDate:this.shareReport.fixedDate,type:e,filter:t,scheduledReport:this.shareReport.scheduledReport?{type:this.shareReport.scheduledReport.type,recipients:this.shareReport.scheduledReport.recipients}:null};return i.isPublic||(i.visibleToUserGroups=[this.shareReport.visibleToUserGroup]),i}setDateRangeType(e){this.shareReport&&(e.dateRangeType=this.shareReport.isRelativeDateRange?this.relativeDateRange.type:h.a.ABSOLUTE.type)}setStatusToObject(e){if(!this.filterValuesData[n.h.STATUSES])return;const t=this.filterValuesData[n.h.STATUSES].getContainsFilter(n.b);t&&0!==t.ids.length&&2!==t.ids.length&&(e.billable=t.ids.includes(n.c.BILLABLE));const i=this.filterValuesData[n.h.STATUSES].getContainsFilter(n.a);i&&1===i.ids.length&&(e.approvalState=i.ids.includes("APPROVED")?"APPROVED":"UNAPPROVED");const s=this.filterValuesData[n.h.STATUSES].getContainsFilter(n.g);s&&1===s.ids.length&&(e.invoicingState=s.ids.includes("INVOICED")?"INVOICED":"UNINVOICED")}setContainFilters(e){const t=[n.h.STATUSES,n.h.USERS_AND_GROUP];for(const i in this.filterValuesData){if(t.includes(i))continue;const n=this.filterValuesData[i].getContainsFilter(i);n&&(e[i]=n)}}setUserAndUserGroup(e){if(!this.filterValuesData||!this.filterValuesData[n.h.USERS_AND_GROUP])return;const t=this.filterValuesData[n.h.USERS_AND_GROUP].getContainsFilter(n.j);if(t&&(e[n.j]=t),status===n.k.INACTIVE||status===n.k.PENDING)return;const i=this.filterValuesData[n.h.USERS_AND_GROUP].getContainsFilter(n.f);i&&(e[n.f]=i)}getCustomFields(){if(!this.customFieldFilters||!this.customFieldFilters.length)return null;const e=this.customFieldFilters.filter(e=>e.type!==a.b.NUMBER);return this.customFieldFilters.filter(e=>e.type===a.b.NUMBER).forEach(t=>{t.value.forEach(i=>{i.isChecked&&e.push({id:t.id,type:t.type,value:i.value,numberCondition:i.type})})}),e}}},"Xwq/":function(e,t,i){"use strict";var n=i("FWf1"),s=i("p//D"),r=i("GiSu");t.toSubscriber=function(e,t,i){if(e){if(e instanceof n.Subscriber)return e;if(e[s.rxSubscriber])return e[s.rxSubscriber]()}return e||t||i?new n.Subscriber(e,t,i):new n.Subscriber(r.empty)}},Y4HG:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return a}));var n=i("MO+k"),s=i("wd/R"),r=i("F2Zd");function o(e,t,i,n){const s=e.chart.ctx,o=[],a=[];"Billable"===e.data.datasets[0].label&&e.data.datasets[0].data.forEach((t,i)=>{o.push(t+e.data.datasets[1].data[i]),a.push(t)}),e.data.datasets.forEach((l,u)=>{const d=e.getDatasetMeta(u);if(d.hidden)return;const h=r.d[Object(r.b)()].totalDuration,p=r.d[Object(r.b)()].linesXColor;d.data.forEach((r,d)=>{const b=.2*o[d]<a[d],f=r.tooltipPosition();s.textAlign="center",s.textBaseline="middle",0===u&&l.label&&(r._model.y<250&&n&&b&&function(e,t,i){c(e,18),e.fillStyle="rgb(255, 255, 255)";const n=t.y+9;e.fillText(i,t.x,n>240?n+8:n+20)}(s,f,i),function(e,t,i){e.beginPath(),e.moveTo(t._model.x-t._model.width/2,t._model.base),e.strokeStyle=i,e.lineTo(t._model.x+t._model.width/2,t._model.base),e.stroke(),e.closePath()}(s,r,p)),u!=e.data.datasets.length-1||"dashboard__doughnut-chart__canvas chartjs-render-monitor"===e.ctx.canvas.className||function(e,t,i,n,s,r){const o=t.length<=25&&window.innerWidth>550?t[n]:"";e.fillStyle=r;const a=window.innerWidth>750?14:12;c(e,a),e.fillText(o,s.x,s.y-a/2-5)}(s,t,0,d,f,h)})})}function a(e,t,i,n){const o=e.chart.ctx,a=e.data.datasets[0],l=e.getDatasetMeta(0);if(o.textAlign="center",o.textBaseline="middle",l.hidden)return;const u=r.e[Object(r.b)()].total;l.data.forEach(e=>{if(!a.label&&0===e._index){c(o,16),o.fillStyle=u;const r=n?i:Object(s.duration)(i).format(t||"HH:mm:ss",{trim:!1});o.fillText(r,e._view.x,e._view.y)}})}function c(e,t,i,s){e.font=n.helpers.fontString(t||"14",i||"normal",s||"'Roboto', sans-serif")}},Y9C3:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("hkzH");class s{constructor(e){this._recipients=e&&e.recipients&&e.recipients.contains?e.recipients:{contains:n.d.CONTAINS,ids:e.recipients},this._type=e&&e.type}get recipients(){return this._recipients}set recipients(e){this._recipients=e}get type(){return this._type}set type(e){this._type=e}equals(e){return null!=e&&this.type===e.type&&this.recipients.contains===e.recipients.contains&&this.recipients.ids===e.recipients.ids}}},YDZJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("xoOP"),s=i("wd/R"),r=i("RkOr"),o=i("lvCY");const a={[r.a.CLIENT]:"client",[r.a.DATE]:"date",[r.a.PROJECT]:"project",[r.a.TAG]:"tag",[r.a.TASK]:"task",[r.a.TIMEENTRY]:"description",[r.a.USER]:"user",[r.a.USER_GROUP]:"group"};class c{constructor(e,t,i,n){const s=e.ids||e._id;this.estimate=e.estimate,this.ids=this.toArray(s),this.level=e.level||n||0,this.type=e.type||t[this.level],this.amount=e.amount,this.duration=this.getDuration(e.duration),this.clientName=e.clientName,this.projectName=e.projectName,this.projectColor=e.projectColor,this.type===r.a.PROJECT&&(this.color=e.color||e.projectColor||o.p);const l=e.name||e.description;l?this.name=l:this.withoutLabel=this.type===r.a.CLIENT?`(Without ${i})`:`(Without ${a[this.type]})`,e.children&&(this.children=e.children.map(e=>new c(e,t,i,this.level+1)))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}get hasId(){return Array.isArray(this.ids)?!!this.ids.length:!!this.ids}getDuration(e){return e=e||0,Object(n.u)(e)?s.duration(e,"s").toISOString():s.duration(e).toISOString()}getEstimate(e){"BUDGET"===(null==e?void 0:e.type)?(this.estimate.amount=((null==e?void 0:e.amount)/100).toString(),this.estimate.type="BUDGET"):"TIME"===(null==e?void 0:e.type)&&(this.estimate.amount=s.duration(null==e?void 0:e.amount,"s").toISOString(),this.estimate.type="BUDGET")}}},"a+PT":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("wd/R"),s=i("qfBg"),r=i("B4wx"),o=i("fXoL");let a=(()=>{class e{constructor(e){this.timeZone=e.getTimeZone(),this.formatIs12Hour=e.getTimeFormatForUser()===r.a.HOUR12}transform(e,t=this.timeZone){const i=n.tz(e,t);return this.formatIs12Hour?n(i).format("h:mmA").toString():n(i,["h:mmA"]).format("HH:mm").toString()}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(s.a))},e.\u0275pipe=o.Qb({name:"hourFormat",type:e,pure:!0}),e})()},aDua:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("fXoL"),s=i("lvCY"),r=i("ofXK"),o=i("2rWG"),a=i("sbmM"),c=i("qUN8");function l(e,t){if(1&e&&(n.Xb(0,"span"),n.Yc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.ad("of ",e.total,"")}}function u(e,t){if(1&e&&(n.Vb(0),n.Yc(1),n.Wc(2,l,2,1,"span",0),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",e.from,"-",e.to," "),n.Cb(1),n.wc("ngIf",e.total)}}function d(e,t){if(1&e&&(n.Xb(0,"span",11),n.Yc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.Zc(e.page)}}function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",16),n.Xb(1,"span",17),n.jc("click",(function(){return n.Oc(e),n.nc(3).setLimit(50)})),n.Yc(2,"50"),n.Wb(),n.Xb(3,"span",17),n.jc("click",(function(){return n.Oc(e),n.nc(3).setLimit(100)})),n.Yc(4,"100"),n.Wb(),n.Xb(5,"span",17),n.jc("click",(function(){return n.Oc(e),n.nc(3).setLimit(200)})),n.Yc(6,"200"),n.Wb(),n.Wb()}}function p(e,t){if(1&e&&(n.Xb(0,"li"),n.Xb(1,"span",12),n.Xb(2,"button",13),n.Yc(3),n.Wb(),n.Wc(4,h,7,0,"div",14),n.Wb(),n.Xb(5,"span",15),n.Yc(6,"Items per page"),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(3),n.Zc(e.limit)}}function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"nav"),n.Xb(1,"ul",1),n.Xb(2,"li",2),n.Xb(3,"button",3,4),n.jc("click",(function(){n.Oc(e);const t=n.Lc(4),i=n.nc();return t.blur(),i.prevPage()})),n.Sb(5,"img",5),n.Wb(),n.Wb(),n.Xb(6,"li",6),n.Wc(7,u,3,3,"ng-container",7),n.Wc(8,d,2,1,"ng-template",null,8,n.Xc),n.Wb(),n.Xb(10,"li",2),n.Xb(11,"button",3,9),n.jc("click",(function(){n.Oc(e);const t=n.Lc(12),i=n.nc();return t.blur(),i.nextPage()})),n.Sb(13,"img",10),n.Wb(),n.Wb(),n.Wc(14,p,7,1,"li",0),n.Wb(),n.Wb()}if(2&e){const e=n.Lc(9),t=n.nc();n.Cb(3),n.wc("disabled",t.page<=1),n.Cb(4),n.wc("ngIf",!t.modifiedNumber)("ngIfElse",e),n.Cb(4),n.wc("disabled",!(t.page*t.limit<t.total||t.enableNextPage)),n.Cb(3),n.wc("ngIf",t.itemsPerPage)}}let f=(()=>{class e{constructor(e){this.cd=e,this._page=1,this._limit=s.j,this.visible=!0,this.itemsPerPage=!0,this.pageChanged=new n.n,this.limitChanged=new n.n}set page(e){this._page=e,this.setPagination()}get page(){return this._page}set limit(e){this._limit=e,this.setPagination()}get limit(){return this._limit}set total(e){this._total=e,this.setPagination()}get total(){return this._total}ngOnInit(){this.setPagination()}setPaginationManually(e){this.page=e.page||this.page,this.limit=e.limit||this.limit,this.total=e.total||this.total,this.setPagination()}setPagination(){this.from=(this.page-1)*this.limit+1,this.to=this.page*this.limit,this.from<1&&(this.from=1),this.to>this.total&&(this.to=this.total),this.modifiedNumber=null,this.enableNextPage=!1}setNumberOfEntriesOnPage(e){this.modifiedNumber=e,this.cd.detectChanges()}allowNextPage(e=!0){this.enableNextPage=e,this.cd.detectChanges()}setLimit(e){e===this.limit||(this.page=1,this.limit=e,this.setPagination(),this.limitChanged.emit({limit:this.limit,page:this.page}))}nextPage(){this.page++,this.pageChanged.emit({page:this.page})}prevPage(){this.page--,this.pageChanged.emit({page:this.page})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["pager"]],inputs:{page:"page",limit:"limit",visible:"visible",itemsPerPage:"itemsPerPage",total:"total"},outputs:{pageChanged:"pageChanged",limitChanged:"limitChanged"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cl-pagination","cl-justify-content-start"],[1,"cl-page-item","cl-non-selectable"],["tabindex","-1",1,"cl-page-link",3,"disabled","click"],["prev",""],["src","assets/images/ui-icons/chevron-left.svg"],[1,"cl-page-item","cl-pagination-pages"],[4,"ngIf","ngIfElse"],["pageOnly",""],["next",""],["src","assets/images/ui-icons/chevron-right.svg"],[1,"cl-page-only"],["dropdownKey","",1,"cl-dropdown","cl-ml-3"],["dropdownKeyButton","","type","button",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle"],["class","cl-dropdown-menu","style","display: block;","openUpAtBottom","",4,"dropdownKeyContent"],[1,"cl-ml-2","cl-h6","cl-items-per-page"],["openUpAtBottom","",1,"cl-dropdown-menu",2,"display","block"],["clickCloseDropdown","",1,"cl-dropdown-item",3,"click"]],template:function(e,t){1&e&&n.Wc(0,b,15,5,"nav",0),2&e&&n.wc("ngIf",t.visible)},directives:[r.u,o.a,a.a,c.a],styles:[".cl-page-only[_ngcontent-%COMP%]{display:inline-block;min-width:20px;box-sizing:border-box;text-align:center}"],changeDetection:0}),e})()},aLCL:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("XNiG"),s=i("O3o7"),r=i("lvCY"),o=i("tk/3"),a=i("lGQG"),c=i("1Tmk"),l=i("OG4e"),u=i("Ymxs"),d=i("lJxs"),h=i("vkgz"),p=i("LfE4"),b=i("jpmO"),f=i("rsZi"),m=i("nLyk"),g=i("wd/R"),v=i("ZVmW"),w=i("Cpkn"),y=i("Lcbf"),C=i("tnjF"),k=i("fXoL");let S=(()=>{class e{constructor(e,t,i,s,o){this.http=e,this.authService=t,this.workspaceService=i,this.centUSDConverter=s,this.toaster=o,this.error=new n.a,this.projects=new n.a,this.projectPermissions=new n.a,this.pagination={page:1,limit:r.j}}getProjects(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=!0;e.hasOwnProperty("hydrated")&&(i=e.hydrated);const n=(new o.f).append("name",e.name||"").append("archived",e.archived!==p.a.ALL?(e.archived===p.a.ARCHIVED).toString():"").append("billable",e.billable===b.a.BOTH||e.billable===b.a.NONE?"":(e.billable===b.a.BILLABLE).toString()).append("clients",e.clients||[]).append("client-status",e.clientStatus?"INACTIVE"===e.clientStatus?"ARCHIVED":e.clientStatus:"ALL").append("contains-client",(!!e.containsClient).toString()).append("users",e.users||[]).append("user-status",e.userStatus?e.userStatus:"ALL").append("contains-user",(!!e.containsUser).toString()).append("sort-column",e.sortColumn||m.a.NAME).append("sort-order",e.sortOrder||f.a.ASCENDING).append("hydrated",i.toString()).append("page",e.page||1).append("page-size",e.limit||r.j);return this.http.get(`/workspaces/${t}/projects/list`,{params:n}).pipe(Object(d.a)(e=>e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}getProjectTemplates(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new o.f).append("is-template","true").append("hydrated","true").append("name",e.name||"").append("page",e.page||"1").append("page-size",e.limit||r.j);return this.http.get(`/v1/workspaces/${t}/projects/`,{params:i}).pipe(Object(d.a)(e=>e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUsdIncludingMemberships(e)))))}getProject(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new o.f).append("hydrated","true");return this.http.get(`/workspaces/${t}/projects/${e}`,{params:i}).pipe(Object(h.a)(e=>(e.tasks=e.tasks.map(e=>new C.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}getProjectsCount(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new o.f).append("name",e?e.name:"").append("archived",e&&e.archived!==p.a.ALL?(e.archived===p.a.ARCHIVED).toString():"").append("billable",e.billable===b.a.BOTH||e.billable===b.a.NONE?"":(e.billable===b.a.BILLABLE).toString()).append("clients",e?e.clients:[]).append("client-status",e.clientStatus?"INACTIVE"===e.clientStatus?"ARCHIVED":e.clientStatus:"ALL").append("contains-client",!e||e.containsClient).append("users",e?e.users:[]).append("user-status",e.userStatus?e.userStatus:"ALL").append("contains-user",!e||e.containsUser);return this.http.get(`/workspaces/${t}/projects/count`,{params:i}).pipe(Object(h.a)(e=>e))}getProjectStatus(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/projects/${e}/tracked`).pipe(Object(h.a)(e=>new w.a(e)))}updateProject(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={name:e.name,hourlyRate:e.hourlyRate?{amount:100*e.hourlyRate.amount,currency:e.hourlyRate.currency}:null,costRate:e.costRate?{amount:null===e.costRate.amount?null:100*e.costRate.amount,currency:e.costRate.currency}:null,clientId:e.clientId,billable:e.billable,isPublic:e.public,estimate:{estimate:Object(g.duration)(e.estimate.estimate,"h").toISOString(),type:e.estimate.type},color:e.color,archived:e.archived,template:e.isTemplate,note:e.note};return this.http.put(`/v1/workspaces/${t}/projects/${e.id}`,i).pipe(Object(h.a)(e=>(this.toaster.pop("success","Project successfully updated"),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)),e=>{this.toaster.pop("error",e.error.message)}))}updateMany(e,t,i,n,s){const r=this.workspaceService.getDefaultWorkspaceId(),o={projectIds:e,changeFields:t,clientId:i.client?i.client.id:i.clientId,userIds:n,userGroupIds:s,hourlyRate:i.hourlyRate?{amount:Math.round(100*i.hourlyRate.amount),currency:i.hourlyRate.currency}:null,color:i.color,billable:i.billable,isPublic:i.public,archived:i.archived};return this.http.patch(`/workspaces/${r}/projects`,o).pipe(Object(h.a)(e=>{this.toaster.pop("success","Successfully updated "+e.length+" projects.")},e=>{400==e.status&&this.toaster.pop("error","Project not updated",e.error.message),this.error.next(e)}))}updateIsProjectTemplate(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`/v1/workspaces/${t}/projects/${e.id}/template`,{isTemplate:e.isTemplate}).pipe(Object(h.a)(e=>(this.toaster.pop("success","Project successfully updated"),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}deleteProject(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/v1/workspaces/${t}/projects/${e}`).pipe(Object(h.a)(e=>(this.toaster.pop("success","Project successfully deleted."),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)),e=>{this.toaster.pop("error",e.error&&e.error.message||"Project not deleted")}))}deleteMany(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/projects/`,{headers:null,body:{ids:e}}).pipe(Object(h.a)(t=>{this.toaster.pop("success","Successfully deleted "+e.length+" projects.")},e=>{this.toaster.pop("error","Projects not deleted",e.error.message)}))}getAllAuthorizationsForProject(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/projects/${e}/permissions`).pipe(Object(d.a)(e=>e.map(e=>new v.a(e))))}getAllAuthorizationsForUser(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${i}/projects/users/${e}/permissions`,{projectIds:t}).pipe(Object(d.a)(e=>e.map(e=>new v.a(e))))}addPermission(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/${e}/users/${t}/permissions/`,{permissions:[i]}).pipe(Object(d.a)(e=>e.map(e=>(this.toaster.pop("success","Project access updated."),new v.a(e)))))}removePermission(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.request("delete",`/workspaces/${n}/projects/${e}/users/${t}/permissions/`,{body:{permissions:[i]}}).pipe(Object(d.a)(e=>(this.toaster.pop("success","Project access updated."),e.map(e=>new v.a(e)))))}addUsersAndUserGroupsToProject(e,t,i,n){const r=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${r}/projects/${e}/team`,{userIds:t,userGroupIds:i,exclude:n}).pipe(Object(d.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(h.a)(e=>{this.toaster.pop("success","Project access updated.")},e=>{this.toaster.pop("error","Project access not updated.",e.error.message)}))}removeUserFromProject(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/projects/${e}/users/${t}/membership`).pipe(Object(d.a)(e=>(this.toaster.pop("success","Project access updated."),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}removeUserGroupFromProject(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/projects/${e}/userGroups/${t}/membership`).pipe(Object(d.a)(e=>(this.toaster.pop("success","Project access updated."),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}setUsersHourlyRateForProject(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId(),r={amount:Math.round(100*i.amount),currency:i.currency,since:i.since};return this.http.post(`/workspaces/${n}/projects/${e}/users/${t}/hourlyRate`,r).pipe(Object(d.a)(e=>(this.toaster.pop("success","Billable rate has been updated."),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}setUsersCostRateForProject(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId(),r={amount:null!==i.amount?Math.round(100*i.amount):null,currency:i.currency,since:i.since};return this.http.post(`/workspaces/${n}/projects/${e}/users/${t}/cost-rate`,r).pipe(Object(d.a)(e=>(this.toaster.pop("success","Cost rate has been updated."),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}makeProjectFavorite(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=this.authService.getUser().id;this.http.post(`/workspaces/${i}/users/${n}/projects/favorites/${e.id}`,{}).pipe(Object(d.a)(e=>new y.a(e))).subscribe(()=>{},e=>{this.error.next(e)})}removeProjectAsFavorite(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=this.authService.getUser().id;this.http.delete(`/workspaces/${i}/users/${n}/projects/favorites/projects/${e}`).subscribe(()=>{},e=>{this.error.next(e)})}updateHourlyRate(e,t,i,n){const r=this.workspaceService.getDefaultWorkspaceId(),o={amount:Math.round(100*t),currency:i,since:n};return this.http.put(`workspaces/${r}/projects/${e}/hourlyRate`,o).pipe(Object(d.a)(e=>(this.toaster.pop("success","Project successfully updated"),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}updateCostRate(e,t,i,n){const r=this.workspaceService.getDefaultWorkspaceId(),o={amount:null!==t?Math.round(100*t):null,currency:i,since:n};return this.http.put(`workspaces/${r}/projects/${e}/cost-rate`,o).pipe(Object(d.a)(e=>(this.toaster.pop("success","Project successfully updated"),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}updateEstimate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={timeEstimate:e.timeEstimate.toObj(),budgetEstimate:e.budgetEstimate.toObj()};return this.http.patch(`workspaces/${t}/projects/${e.id}/estimate`,i).pipe(Object(d.a)(e=>(this.toaster.pop("success","Project successfully updated"),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}}return e.\u0275fac=function(t){return new(t||e)(k.fc(o.b),k.fc(a.a),k.fc(c.a),k.fc(l.a),k.fc(u.a))},e.\u0275prov=k.Nb({token:e,factory:e.\u0275fac}),e})()},avDW:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n=i("vkgz"),s=i("1G5W"),r=i("lJxs"),o=i("JIr8"),a=i("tnjF"),c=i("5Iok"),l=i("tk/3"),u=i("lGQG"),d=i("XNiG"),h=i("LRne"),p=i("f0Wu"),b=i("5pgj"),f=i("fV9S"),m=i("qfBg"),g=i("Ymxs"),v=i("wd/R"),w=i("1Tmk"),y=i("lvCY"),C=i("tzGe"),k=i("kZ14"),S=i("xoOP"),x=i("z1wq"),O=i("VYrk"),D=i("GidR"),I=i("fXoL");let j=(()=>{class e{constructor(e,t,i,n,s,r,o){this.http=e,this.userService=t,this.toaster=i,this.stopwatchService=n,this.authSerive=s,this.workspaceService=r,this.authService=o,this.unsubscribe$=new d.a,this.clearAutocompleteCache$=new d.a,this.error=new d.a,this.timeEntries$=new d.a,this.savedTemplates=new d.a,this.newTemplate=new d.a,this.pagination={page:1,limit:y.j},this.cachedLatest={}}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}getAllTimeEntries(e=this.pagination.page,t=this.pagination.limit,i=!1,o=!1){this.pagination.page=e,this.pagination.limit=t;const a=this.workspaceService.getDefaultWorkspaceId(),u=this.authService.getUser().id,d=(new l.f).append("page",(e-1).toString()).append("limit",t.toString()),h=this.userService.getTimeZone();var m;this.http.get(`/workspaces/${a}/timeEntries/user/${u}/full`,{params:d}).pipe((m=h,Object(r.a)(e=>{let t=new c.a,i=e.timeEntriesList&&e.timeEntriesList.length||0;const n={};for(const o in e.durationMap)n[o]=new b.a(o,e.durationMap[o],[]);const s=e.weekStatusMap||{};for(const o in s)s[o]=new f.a(Object.assign(Object.assign({},s[o]),{startDayOfWeek:o}));e.timeEntriesList.forEach(e=>{if(!p(e.timeInterval.end).isValid())return void(t=new c.a(e));const i=p.tz(e.timeInterval.start,m).format("YYYY-MM-DD");n[i]||(n[i]=new b.a(i,"",[])),n[i].timeEntries.push(new c.a(e))});const r=[];for(const o in n)n[o].timeEntries.length&&r.push(n[o]);return r.sort((e,t)=>{const i=new Date(e.date),n=new Date(t.date);return i>n?-1:i<n?1:0}),t&&t.id&&(i--,e.allEntriesCount--),{total:e.allEntriesCount,entryGroups:r,entryInProgress:t,received:i,weekStatusMap:s}})),Object(n.a)(()=>{},e=>this.error.next(e))).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{e.lazyLoading=i,e.preventScroll=o,this.timeEntries$.next(e)},e=>{this.timeEntries$.next(null)})}updateUser(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/user`,{userId:t}).pipe(Object(n.a)(()=>{this.toaster.pop("success","Successfully updated user")},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||"Entry not updated, please try again")}))}updateDescription(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/description`,{description:t}).pipe(Object(n.a)(()=>{this.toaster.pop("success","Successfully updated description."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||"Entry not updated, please try again.")}))}updateBillable(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),s=t?"billable":"non-billable";return this.http.put(`/workspaces/${i}/timeEntries/${e}/billable`,{billable:t}).pipe(Object(n.a)(()=>{this.toaster.pop("success",`Time entry successfully marked as ${s}.`)},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||"Entry not updated, please try again.")}))}editTimeInterval(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/timeInterval`,{start:t.start,end:t.end}).pipe(Object(n.a)(()=>{this.toaster.pop("success","Successfully updated date and time.")},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||"Entry not updated, please try again.")}),Object(r.a)(e=>new c.a(e)))}updateTags(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),s={tagIds:t.map(e=>e.id)};return this.http.put(`/workspaces/${i}/timeEntries/${e}/tags`,s).pipe(Object(n.a)(()=>{this.toaster.pop("success","Successfully updated tags."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||"Entry not updated, please try again.")}))}deleteTimeEntry(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/timeEntries/${e.id}`).pipe(Object(n.a)(e=>{this.toaster.pop("success",(null==t?void 0:t.success)||"Time entry has been deleted."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",t&&t.error||e.error&&e.error.message||"Failed to delete the entry, please try again.")}))}deleteTimeEntryMany(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/timeEntries/`,{headers:null,body:{timeEntryIds:e}}).pipe(Object(n.a)(()=>this.toaster.pop("success","Successfully deleted"),e=>this.toaster.pop("error",e.error&&e.error.message||"Delete failed")))}createTimeEntry(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=Object(v.utc)(v(e.timeInterval.start)).toISOString(),s=Object(v.utc)(v(e.timeInterval.end)).toISOString();let o=null;e.tags&&e.tags.length&&(o=e.tags.map(e=>e.id));const a={start:i,billable:e.billable,description:e.description,projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,end:s,tagIds:o,customFields:O.a.listToJson(e.customFieldValues)};return this.http.post(`/workspaces/${t}/timeEntries/full`,a).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success","Time entry has been created."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||"Failed to create the entry, please try again.")}))}duplicateTimeEntry(e){const t=new c.a(e),i=this.workspaceService.getDefaultWorkspaceId(),s=this.authSerive.getUser().id;return this.http.post(`/v1/workspaces/${i}/user/${s}/time-entries/${t.id}/duplicate`,null).pipe(Object(r.a)(e=>(t.id=e.id,e.projectId?e.taskId||(t.task=null):(t.project=null,t.task=null),t)),Object(n.a)(()=>this.toaster.pop("success","Time entry has been duplicated."),e=>this.toaster.pop("error",e.error&&e.error.message||"Failed to duplicate the entry, please try again.")))}addStartedTimeEntry(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=null;e.tags&&e.tags.length&&(i=e.tags.map(e=>e.id));const s={start:v().toISOString(),billable:e.billable,description:Object(S.G)(e.description,this.toaster),projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,tagIds:i,customFields:O.a.listToJson(e.customFieldValues)};return this.http.post(`/workspaces/${t}/timeEntries/full`,s).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{},({error:e})=>{this.toaster.pop("error",e.error&&e.error.message||"Failed to start a timer. Please try again.")}))}stopwatchStopped(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=Object(v.utc)(v(e.timeInterval.start)).toISOString(),s=Object(v.utc)(v()).toISOString();let o=null;return e.tags&&e.tags.length&&(o=e.tags.map(e=>e.id)),this.http.put(`/workspaces/${t}/timeEntries/${e.id}/full`,{start:i,billable:e.billable,description:e.description,projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,end:s,tagIds:o}).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success","Time entry has been created."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||"Failed to stop the timer, please try again.")}))}updateProjectAndTask(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return e.task?this.http.put(`/workspaces/${i}/timeEntries/${e.id}/projectAndTask`,{taskId:e.task&&e.task.id,projectId:e.project&&e.project.id}).pipe(Object(n.a)(()=>{this.toaster.pop("success","Project details has been updated."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||" Failed to update project details, please try again.")})):this.updateProject(e,i)}updateProject(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return e.project?this.http.put(`/workspaces/${i}/timeEntries/${e.id}/project`,{projectId:e.project&&e.project.id}).pipe(Object(n.a)(()=>{this.toaster.pop("success","Project has been updated."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||"Failed to update the project, please try again.")})):this.removeProject(e,i)}removeProject(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/timeEntries/${e.id}/project/remove`).pipe(Object(n.a)(()=>{this.toaster.pop("success","Project has been updated."),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||"Failed to update the project, please try again.")}))}updateGroup(e,t,i,s){const r=this.workspaceService.getDefaultWorkspaceId(),o={userId:i.user&&i.user.id,timeEntryIds:e,changeFields:t,description:Object(S.G)(i.description,this.toaster),projectId:i.project?i.project.id:i.projectId,taskId:i.task?i.task.id:i.taskId,billable:i.billable,start:i.timeInterval.start,end:i.timeInterval.end,tagIds:i.tags?i.tags.map(e=>e.id):i.tagIds,moveToWorkspace:i.workspaceId===r?null:i.workspaceId,customFields:s&&s.map(e=>({customFieldId:e.customFieldId,value:e.value}))};return this.http.patch(`/workspaces/${r}/timeEntries/bulk`,o).pipe(Object(n.a)(e=>{this.toaster.pop("success",`Successfully updated ${e.length} time entries.`),this.clearAutocompleteCache$.next()},e=>{var t;this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||"Update failed, please try again.")}))}editStartTime(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/start`,{start:t}).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success","Start time has been updated.")},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||"Failed to update the start time, please try again.")}))}getTimeEntryInProgress(e=!1){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/timeEntries/inProgress`).pipe(Object(r.a)(e=>e?new k.a(e):null),Object(n.a)(t=>{if(e)if(t){const e=new Date(t.timeInterval.start).getTime()/100;this.stopwatchService.setStart(e)}else this.stopwatchService.stop()}))}getTimeEntriesInRange(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/timeEntries/user/${e}/entriesInRange`,{start:t,end:i}).pipe(Object(r.a)(e=>e.map(e=>c.a.fromFull(e))))}updateEntry(e){var t,i;const s=this.workspaceService.getDefaultWorkspaceId(),r={description:e.description,billable:e.billable,projectId:(null===(t=e.project)||void 0===t?void 0:t.id)||null,taskId:(null===(i=e.task)||void 0===i?void 0:i.id)||null,tagIds:e.tags?e.tags.map(e=>e.id):[],start:e.timeInterval.start||null,end:e.timeInterval.end||null};return this.http.patch(`/workspaces/${s}/timeEntries/${e.id}`,r).pipe(Object(n.a)(e=>this.toaster.pop("success","Successfully updated"),e=>{var t;return this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||"Update failed, please try again.")}))}updateEntryWithBulk(e,t){var i,s;const o=this.workspaceService.getDefaultWorkspaceId(),a={changeFields:t,timeEntryIds:[e.id],description:e.description,billable:e.billable,projectId:(null===(i=e.project)||void 0===i?void 0:i.id)||null,taskId:(null===(s=e.task)||void 0===s?void 0:s.id)||null,tagIds:e.tags?e.tags.map(e=>e.id):[],start:e.timeInterval.start||null,end:e.timeInterval.end||null};return this.http.patch(`/workspaces/${o}/timeEntries/bulk`,a).pipe(Object(r.a)(e=>new k.a(e[0])),Object(n.a)(e=>this.toaster.pop("success","Successfully updated"),e=>{var t;return this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||"Update failed, please try again.")}))}getAutocomplete(e){if(e.length<2)return Object(h.a)([]);const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("searchValue",e);return this.http.get(`/workspaces/${t}/timeEntries`,{params:i}).pipe(Object(r.a)(e=>e.map(e=>new D.a(e))))}getLatestEntries(e=!0){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("limit","8");return e&&this.cachedLatest[t]?Object(h.a)(this.cachedLatest[t]):this.http.get(`/workspaces/${t}/timeEntries/recent`,{params:i}).pipe(Object(r.a)(e=>e.map(e=>new D.a(e))),Object(n.a)(e=>this.cachedLatest[t]=e))}clearLastesEntriesCache(){this.cachedLatest={}}getTimeEntry(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("hydrated","true");return this.http.get(`/v1/workspaces/${t}/time-entries/${e}`,{params:i}).pipe(Object(r.a)(e=>new c.a(e)))}getTimeEntriesForTimesheet(e,t,i,n=!1){const s=this.workspaceService.getDefaultWorkspaceId(),o=(new l.f).append("start",t).append("end",i).append("hydrated","true").append("consider-duration-format","true").append("in-progress",n.toString()).append("page","0").append("page-size","0");return this.http.get(`/workspaces/${s}/timeEntries/users/${e}`,{params:o}).pipe(Object(r.a)(e=>e.map(e=>c.a.fromFull(e))))}getWeekBeforeEntries(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new l.f).append("get-week-before",t).append("hydrated","true");return this.http.get(`/workspaces/${i}/timeEntries/users/${e}`,{params:n}).pipe(Object(r.a)(e=>e.map(e=>{const t=new c.a(e);return t.task=t.task?new a.a(t.task):t.task,t})))}create(e,t,i){const s=this.workspaceService.getDefaultWorkspaceId(),r={start:e.timeInterval.start,billable:e.billable,description:e.description?e.description:"",projectId:e.projectId,taskId:e.taskId,end:e.timeInterval.end,tagIds:e.tagIds?e.tagIds:[],customFields:i&&i.map(e=>({customFieldId:e.customFieldId,value:e.value}))};return this.http.post(`/v1/workspaces/${s}/user/${t}/time-entries`,r).pipe(Object(n.a)(e=>{this.toaster.pop("success","Time entry successfully created.")},e=>{this.toaster.pop("error","You don't have access to this project.")}))}updateMany(e,t,i){if(0===e.length)return;const s=this.workspaceService.getDefaultWorkspaceId(),o=e.map(e=>({id:e.id,start:e.timeInterval.start,end:e.timeInterval.end,description:e.description,billable:e.billable,projectId:e.project?e.project.id:null,taskId:e.task?e.task.id:null,tagIds:e.tags&&e.tags.length>0?e.tags.map(e=>e.id):[],customFields:i&&i.map(e=>({customFieldId:e.customFieldId,value:e.value}))})),a={params:(new l.f).append("hydrated","true")};return this.http.put(`/v1/workspaces/${s}/user/${t}/time-entries`,o,a).pipe(Object(r.a)(e=>e.map(e=>c.a.fromFull(e))),Object(n.a)(null,e=>{var t;return this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||"Update failed")}))}deleteMany(e,t){if(0===e.length)return;const i=this.workspaceService.getDefaultWorkspaceId(),s={params:(new l.f).set("time-entry-ids",e.join(","))};return this.http.delete(`/v1/workspaces/${i}/user/${t}/time-entries`,s).pipe(Object(n.a)(e=>{this.toaster.pop("success",`Successfully deleted ${e.length} time entries.`)},e=>{this.toaster.pop("error","Deletion failed, please try again.")}))}saveTemplate(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=e.filter((e,t,i)=>i.findIndex(t=>t.projectId===e.projectId&&t.taskId===e.taskId)===t);this.http.post(`v1/workspaces/${i}/templates`,[{projectsAndTasks:n,name:t}]).subscribe(e=>{this.getTemplate(e[0].id),this.toaster.pop("success","Successfully created template!")},e=>{this.error.next(e)})}getTemplates(){const e=this.workspaceService.getDefaultWorkspaceId(),t=(new l.f).append("hydrated","true").append("cleansed","true");this.http.get(`v1/workspaces/${e}/templates`,{params:t}).pipe(Object(r.a)(e=>e.map(e=>new x.a(e)))).subscribe(e=>{this.savedTemplates.next(e)},e=>{this.error.next(e)})}getTemplate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("hydrated","true").append("cleansed","true");this.http.get(`v1/workspaces/${t}/templates/${e}`,{params:i}).subscribe(e=>{this.newTemplate.next(e)},e=>{this.error.next(e)})}templateOfId(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("hydrated","true").append("cleansed","false");return this.http.get(`v1/workspaces/${t}/templates/${e}`,{params:i})}deleteTemplate(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`v1/workspaces/${t}/templates/${e}`).pipe(Object(n.a)(()=>{this.toaster.pop("success","Successfully deleted template!")},e=>{this.error.next(e)}))}editTemplateName(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`v1/workspaces/${i}/templates/${e}`,{name:t}).pipe(Object(n.a)(e=>{this.toaster.pop("success","Template updated!","Successfully updated template!")},e=>{this.error.next(e)}))}editCustomField(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/custom-field`,{customFieldId:t.customFieldId,value:t.value}).pipe(Object(n.a)(e=>{this.toaster.pop("success","Successfully updated time entry!")},e=>{this.toaster.pop("error",e.error.message)}))}createForUser(e,t,i,s){const o=this.workspaceService.getDefaultWorkspaceId(),a={start:Object(v.utc)(v(e.timeInterval.start)).toISOString(),end:Object(v.utc)(v(e.timeInterval.end)).toISOString(),billable:e.billable,description:e.description,projectId:e.project?e.project.id:null,taskId:e.task?e.task.id:null,tagIds:e.tags?e.tags.map(e=>e.id):[],customFields:O.a.listToJson(i)};return this.http.post(`/workspaces/${o}/timeEntries/users/${t}/full`,a).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success",(null==s?void 0:s.message)||"Time entry has been created.")},e=>{var t;this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to create the entry, please try again.")}))}createTimeEntryForMembers(e,{groups:t,users:i}){const s=this.workspaceService.getDefaultWorkspaceId(),o={start:e.timeInterval.start,end:e.timeInterval.end,billable:e.billable,description:e.description,projectId:e.project&&e.project.id,taskId:e.task&&e.task.id,tagIds:e.tags&&e.tags.map(e=>e.id),users:i,userGroups:t,customFields:O.a.listToJson(e.customFieldValues)},a=new d.a;return this.http.post(`/workspaces/${s}/timeEntries/time-entries`,o).pipe(Object(r.a)(e=>e.map(e=>new k.a(e))),Object(n.a)(e=>{const t=e.length;this.toaster.pop("success",`Successfully added ${t} time ${t>1?"entries":"entry"}`)},e=>this.toaster.pop("error",e.error&&e.error.message||"Adding failed"))).subscribe(e=>{a.next(e)},e=>a.error(e)),a}createTimeEntryForMember(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=null;e.tags&&e.tags.length&&(i=e.tags.map(e=>e.id)),this.http.post(`/workspaces/${t}/timeEntries/user/${e.userId}`,{start:e.timeInterval.start,end:e.timeInterval.end,billable:e.billable,description:e.description,projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,tagIds:i}).subscribe(e=>{this.toaster.pop("success","Time entry has been created."),n.next(e)},e=>{this.toaster.pop("error",e.error&&e.error.message||"Time entry is not created."),n.error(e)});const n=new d.a;return n}getEntriesByIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.f).append("id",(e||[]).join(", "));return this.http.get(`/workspaces/${t}/timeEntries/fetch`,{params:i}).pipe(Object(o.a)(e=>Object(h.a)([])),Object(r.a)(e=>e.map(e=>new k.a(e))))}}return e.\u0275fac=function(t){return new(t||e)(I.fc(l.b),I.fc(m.a),I.fc(g.a),I.fc(C.a),I.fc(u.a),I.fc(w.a),I.fc(u.a))},e.\u0275prov=I.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},brRw:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("ofXK"),s=i("3Pt+"),r=i("Nqck"),o=i("uepX"),a=i("9Trn"),c=i("1kSV"),l=i("tZA+"),u=i("8XW9"),d=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.a,o.a,a.a,l.a,c.s,u.a]]}),e})()},bzkB:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s,r,o){const a=[];return e.forEach(e=>{switch(e){case"col1":a.push(t);break;case"col2":a.push(i);break;case"col3":a.push(n);break;case"col4":a.push(s);break;case"col5":a.push(r);break;case"col6":a.push(o)}}),a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"columnDecider",type:e,pure:!0}),e})()},cDkn:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C]]}),e})()},cGux:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("XNiG");class s{constructor(e){this.onChange=new n.a,this.map=e||{}}set(e,t){this.map[e]=t,this.onChange.next(e)}get(e){return this.map[e]}remove(e){delete this.map[e],this.onChange.next(e)}count(e){let t=0;if(!this.map)return t;if(e)e.forEach(e=>{t+=this.map[e]});else for(const i in this.map)t+=this.map[i];return t}reset(){this.map={}}}},dlKe:function(e,t,i){"use strict";i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return E}));var n=i("fXoL"),s=i("LRne"),r=i("xgIS"),o=i("5+tZ"),a=i("lJxs"),c=i("vkgz"),l=i("pLZG"),u=i("7o/Q"),d=i("D0XW");class h{constructor(e,t){this.period=e,this.scheduler=t}call(e,t){return t.subscribe(new p(e,this.period,this.scheduler))}}class p extends u.a{constructor(e,t,i){super(e),this.period=t,this.scheduler=i,this.hasValue=!1,this.add(i.schedule(b,t,{subscriber:this,period:t}))}_next(e){this.lastValue=e,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function b(e){let{subscriber:t,period:i}=e;t.notifyNext(),this.schedule(e,i)}function f(e,t,i,n){const s=window&&!!window.document&&window.document.documentElement;let r=s&&t?window:i;if(e&&(r=e&&s&&"string"==typeof e?function(e,t,i){return(i?window.document:t).querySelector(e)}(e,i.nativeElement,n):e,!r))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return r}function m(e){return e&&!e.firstChange}const g={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},v={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class w{constructor(e=!0){this.vertical=e,this.propsMap=e?g:v}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function y(e){return["Window","global"].some(t=>Object.prototype.toString.call(e).includes(t))}function C(e,t){return e?t.document.documentElement:null}function k(e,t){const i=function({container:e,isWindow:t,axis:i}){const{offsetHeightKey:n,clientHeightKey:s}=S(i);return x(e,t,n,s)}(t);return t.isWindow?function(e,t,i){const{axis:n,container:s,isWindow:r}=i,{offsetHeightKey:o,clientHeightKey:a}=S(n),c=e+O(C(r,s),n,r),l=x(t.nativeElement,r,o,a);return{height:e,scrolled:c,totalToScroll:function(e,t,i){const n=t.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[n]+O(e,t,i)}(t.nativeElement,n,r)+l,isWindow:r}}(i,e,t):function(e,t,i){const{axis:n,container:s}=i;return{height:e,scrolled:s[n.scrollTopKey()],totalToScroll:s[n.scrollHeightKey()],isWindow:!1}}(i,0,t)}function S(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function x(e,t,i,n){if(isNaN(e[i])){const i=C(t,e);return i?i[n]:0}return e[i]}function O(e,t,i){const n=t.pageYOffsetKey(),s=t.scrollTopKey(),r=t.offsetTopKey();return isNaN(window[n])?C(i,e)[s]:e.ownerDocument?e.ownerDocument.defaultView[n]:e[r]}function D(e,t,i){let n,s;if(e.totalToScroll<=0)return!1;const r=e.isWindow?e.scrolled:e.height+e.scrolled;return i?(n=(e.totalToScroll-r)/e.totalToScroll,s=t.down/10):(n=e.scrolled/(e.scrolled+(e.totalToScroll-r)),s=t.up/10),n<=s}class I{constructor({totalToScroll:e}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=e}updateScrollPosition(e){return this.lastScrollPosition=e}updateTotalToScroll(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}updateScroll(e,t){this.updateScrollPosition(e),this.updateTotalToScroll(t)}updateTriggeredFlag(e,t){t?this.triggered.down=e:this.triggered.up=e}isTriggeredScroll(e,t){return t?this.triggered.down===e:this.triggered.up===e}}function j(e){const{scrollDown:t,stats:{scrolled:i}}=e;return{type:t?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:i}}}let T=(()=>{class e{constructor(e,t){this.element=e,this.zone=t,this.scrolled=new n.n,this.scrolledUp=new n.n,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:e,infiniteScrollDisabled:t,infiniteScrollDistance:i}){const n=m(e),s=m(t),r=m(i),o=!s&&!this.infiniteScrollDisabled||s&&!t.currentValue||r;(n||s||r)&&(this.destroyScroller(),o&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(e){const{scrollContainer:t,scrollWindow:i,element:n,fromRoot:u}=e,p=function({windowElement:e,axis:t}){return function(e,t){return Object.assign({},e,{container:e.isWindow||t&&!t.nativeElement?t:t.nativeElement})}({axis:t,isWindow:y(e)},e)}({axis:new w(!e.horizontal),windowElement:f(t,i,n,u)}),b=new I({totalToScroll:k(n,p)}),m={up:e.upDistance,down:e.downDistance};return function(e){let t=Object(r.a)(e.container,"scroll");return e.throttle&&(t=t.pipe(function(e,t=d.a){return i=>i.lift(new h(e,t))}(e.throttle))),t}({container:p.container,throttle:e.throttle}).pipe(Object(o.a)(()=>Object(s.a)(k(n,p))),Object(a.a)(e=>function(e,t,i){const{scrollDown:n,fire:s}=function(e,t,i){const n=function(e,t){return e<t.scrolled}(e,t);return{fire:D(t,i,n),scrollDown:n}}(e,t,i);return{scrollDown:n,fire:s,stats:t}}(b.lastScrollPosition,e,m)),Object(c.a)(({stats:e})=>b.updateScroll(e.scrolled,e.totalToScroll)),Object(l.a)(({fire:t,scrollDown:i,stats:{totalToScroll:n}})=>function(e,t,i){return!(!e||!t)||!(i||!t)}(e.alwaysCallback,t,b.isTriggeredScroll(n,i))),Object(c.a)(({scrollDown:e,stats:{totalToScroll:t}})=>{b.updateTriggeredFlag(t,e)}),Object(a.a)(j))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(e=>this.zone.run(()=>this.handleOnScroll(e)))})}handleOnScroll({type:e,payload:t}){switch(e){case"[NGX_ISE] DOWN":return this.scrolled.emit(t);case"[NGX_ISE] UP":return this.scrolledUp.emit(t);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.z))},e.\u0275dir=n.Mb({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[n.Ab]}),e})(),E=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[]]}),e})()},ds6q:function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=i("Q1FS"),r=i("FWf1"),o=i("zB/H"),a=i("Mxlh"),c=i("FiyT"),l=i("p//D"),u=function(e){function t(t){var i=e.call(this,t)||this;return i.destination=t,i}return n(t,e),t}(r.Subscriber);t.SubjectSubscriber=u;var d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype[l.rxSubscriber]=function(){return new u(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,i=t.length,n=t.slice(),s=0;s<i;s++)n[s].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,n=t.slice(),s=0;s<i;s++)n[s].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),n=0;n<t;n++)i[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),o.Subscription.EMPTY):this.isStopped?(e.complete(),o.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new s.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(s.Observable);t.Subject=d;var h=function(e){function t(t,i){var n=e.call(this)||this;return n.destination=t,n.source=i,n}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):o.Subscription.EMPTY},t}(d);t.AnonymousSubject=h},e0xV:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("fXoL"),s=i("XNiG"),r=i("Kj3r"),o=i("/uUt"),a=i("pLZG"),c=i("1G5W"),l=i("3Pt+"),u=i("ofXK");const d=["searchInput"];function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",3),n.jc("click",(function(){return n.Oc(e),n.nc().clear()})),n.Sb(1,"img",4),n.Wb()}}const p=function(e){return{"cl-input-has-clear":e}};let b=(()=>{class e{constructor(){this.search="",this.placeholder="Search...",this.autofocus=!0,this.minimumLength=0,this.onSearchChange=new n.n,this.searchChange$=new s.a,this.unsubscribe$=new s.a}ngOnInit(){this.subscribe(),this.backupValue=this.search}ngAfterViewInit(){this.autofocus&&this.setFocus()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}subscribe(){this.debounceTime&&this.searchChange$.pipe(Object(r.a)(this.debounceTime),Object(o.a)(),Object(a.a)(()=>!this.isCleared),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.search=e,this.search&&this.minimumLength&&this.search.length<this.minimumLength||this.emit()})}setFocus(){this.searchInput&&this.searchInput.nativeElement.focus()}onModelChange(){this.debounceTime?this.searchChange$.next(this.search):this.emit(),this.isCleared=!1}clear(){this.search="",this.emit(),this.setFocus(),this.isCleared=!0}emit(){this.backupValue!==this.search&&(this.onSearchChange.emit(this.search),this.backupValue=this.search)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["input-search"]],viewQuery:function(e,t){var i;1&e&&n.ed(d,!0),2&e&&n.Kc(i=n.kc())&&(t.searchInput=i.first)},inputs:{search:"search",placeholder:"placeholder",debounceTime:"debounceTime",autofocus:"autofocus",minimumLength:"minimumLength"},outputs:{onSearchChange:"onSearchChange"},decls:3,vars:6,consts:[["type","text","tabindex","0","autocomplete","off","autofocus","",1,"cl-form-control",3,"ngModel","ngClass","placeholder","ngModelChange"],["searchInput",""],["class","cl-clear-input","title","Clear","doNotCloseDropdown","",3,"click",4,"ngIf"],["title","Clear","doNotCloseDropdown","",1,"cl-clear-input",3,"click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""]],template:function(e,t){1&e&&(n.Xb(0,"input",0,1),n.jc("ngModelChange",(function(e){return t.search=e}))("ngModelChange",(function(){return t.onModelChange()})),n.Wb(),n.Wc(2,h,2,0,"a",2)),2&e&&(n.wc("ngModel",t.search)("ngClass",n.Bc(4,p,t.search))("placeholder",t.placeholder),n.Cb(2),n.wc("ngIf",t.search))},directives:[l.c,l.s,l.v,u.r,u.u],encapsulation:2,changeDetection:0}),e})()},eBys:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("wd/R"),s=i("fXoL");let r=(()=>{class e{transform(e,t,i,s=!1){let r=n(e);t&&(r=n.tz(r,t));const o=n();if(!s&&r.isSame(o,"day"))return"Today";const a=n().subtract(1,"day");return!s&&r.isSame(a,"day")?"Yesterday":r.isSame(o,"year")?r.format("ddd, MMM D"):r.format("MMM D, YYYY")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"dateFormat",type:e,pure:!0}),e})()},eGqU:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("QKuU"),s=i("fXoL");let r=(()=>{class e{constructor(e,t,i){this.templateRef=e,this.viewContainer=t,this.dropdownWrapper=i,this.subscribtion=this.dropdownWrapper.clicked$.subscribe(e=>{e?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}ngOnDestroy(){this.subscribtion&&this.subscribtion.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.M),s.Rb(s.P),s.Rb(n.a))},e.\u0275dir=s.Mb({type:e,selectors:[["","dropdownContent",""]]}),e})()},eHjp:function(e,t,i){var n,s;n=[i("wd/R"),i("EVdn")],void 0===(s=(function(e,t){return t.fn||(t.fn={}),"function"!=typeof e&&e.default&&(e=e.default),function(e,t){var i=function(i,n,s){var r,o,a;if(this.parentEl="body",this.element=t(i),this.startDate=e().startOf("day"),this.endDate=e().endOf("day"),this.minDate=!1,this.maxDate=!1,this.maxSpan=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=e().subtract(100,"year").format("YYYY"),this.maxYear=e().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:e.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:e.weekdaysMin(),monthNames:e.monthsShort(),firstDay:e.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof n&&null!==n||(n={}),"string"==typeof(n=t.extend(this.element.data(),n)).template||n.template instanceof t||(n.template='<div class="daterangepicker"><div class="ranges"></div><div class="drp-calendar left"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-calendar right"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-buttons"><span class="drp-selected"></span><button class="cancelBtn" type="button"></button><button class="applyBtn" disabled="disabled" type="button"></button> </div></div>'),this.parentEl=n.parentEl&&t(n.parentEl).length?t(n.parentEl):t(this.parentEl),this.container=t(n.template).appendTo(this.parentEl),"object"==typeof n.locale&&("string"==typeof n.locale.direction&&(this.locale.direction=n.locale.direction),"string"==typeof n.locale.format&&(this.locale.format=n.locale.format),"string"==typeof n.locale.separator&&(this.locale.separator=n.locale.separator),"object"==typeof n.locale.daysOfWeek&&(this.locale.daysOfWeek=n.locale.daysOfWeek.slice()),"object"==typeof n.locale.monthNames&&(this.locale.monthNames=n.locale.monthNames.slice()),"number"==typeof n.locale.firstDay&&(this.locale.firstDay=n.locale.firstDay),"string"==typeof n.locale.applyLabel&&(this.locale.applyLabel=n.locale.applyLabel),"string"==typeof n.locale.cancelLabel&&(this.locale.cancelLabel=n.locale.cancelLabel),"string"==typeof n.locale.weekLabel&&(this.locale.weekLabel=n.locale.weekLabel),"string"==typeof n.locale.customRangeLabel&&((d=document.createElement("textarea")).innerHTML=n.locale.customRangeLabel,this.locale.customRangeLabel=d.value)),this.container.addClass(this.locale.direction),"string"==typeof n.startDate&&(this.startDate=e(n.startDate,this.locale.format)),"string"==typeof n.endDate&&(this.endDate=e(n.endDate,this.locale.format)),"string"==typeof n.minDate&&(this.minDate=e(n.minDate,this.locale.format)),"string"==typeof n.maxDate&&(this.maxDate=e(n.maxDate,this.locale.format)),"object"==typeof n.startDate&&(this.startDate=e(n.startDate)),"object"==typeof n.endDate&&(this.endDate=e(n.endDate)),"object"==typeof n.minDate&&(this.minDate=e(n.minDate)),"object"==typeof n.maxDate&&(this.maxDate=e(n.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof n.applyButtonClasses&&(this.applyButtonClasses=n.applyButtonClasses),"string"==typeof n.applyClass&&(this.applyButtonClasses=n.applyClass),"string"==typeof n.cancelButtonClasses&&(this.cancelButtonClasses=n.cancelButtonClasses),"string"==typeof n.cancelClass&&(this.cancelButtonClasses=n.cancelClass),"object"==typeof n.maxSpan&&(this.maxSpan=n.maxSpan),"object"==typeof n.dateLimit&&(this.maxSpan=n.dateLimit),"string"==typeof n.opens&&(this.opens=n.opens),"string"==typeof n.drops&&(this.drops=n.drops),"boolean"==typeof n.showWeekNumbers&&(this.showWeekNumbers=n.showWeekNumbers),"boolean"==typeof n.showISOWeekNumbers&&(this.showISOWeekNumbers=n.showISOWeekNumbers),"string"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses),"object"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses.join(" ")),"boolean"==typeof n.showDropdowns&&(this.showDropdowns=n.showDropdowns),"number"==typeof n.minYear&&(this.minYear=n.minYear),"number"==typeof n.maxYear&&(this.maxYear=n.maxYear),"boolean"==typeof n.showCustomRangeLabel&&(this.showCustomRangeLabel=n.showCustomRangeLabel),"boolean"==typeof n.singleDatePicker&&(this.singleDatePicker=n.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof n.timePicker&&(this.timePicker=n.timePicker),"boolean"==typeof n.timePickerSeconds&&(this.timePickerSeconds=n.timePickerSeconds),"number"==typeof n.timePickerIncrement&&(this.timePickerIncrement=n.timePickerIncrement),"boolean"==typeof n.timePicker24Hour&&(this.timePicker24Hour=n.timePicker24Hour),"boolean"==typeof n.autoApply&&(this.autoApply=n.autoApply),"boolean"==typeof n.autoUpdateInput&&(this.autoUpdateInput=n.autoUpdateInput),"boolean"==typeof n.linkedCalendars&&(this.linkedCalendars=n.linkedCalendars),"function"==typeof n.isInvalidDate&&(this.isInvalidDate=n.isInvalidDate),"function"==typeof n.isCustomDate&&(this.isCustomDate=n.isCustomDate),"boolean"==typeof n.alwaysShowCalendars&&(this.alwaysShowCalendars=n.alwaysShowCalendars),0!=this.locale.firstDay)for(var c=this.locale.firstDay;c>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),c--;if(void 0===n.startDate&&void 0===n.endDate&&t(this.element).is(":text")){var l=t(this.element).val(),u=l.split(this.locale.separator);r=o=null,2==u.length?(r=e(u[0],this.locale.format),o=e(u[1],this.locale.format)):this.singleDatePicker&&""!==l&&(r=e(l,this.locale.format),o=e(l,this.locale.format)),null!==r&&null!==o&&(this.setStartDate(r),this.setEndDate(o))}if("object"==typeof n.ranges){for(a in n.ranges){r="string"==typeof n.ranges[a][0]?e(n.ranges[a][0],this.locale.format):e(n.ranges[a][0]),o="string"==typeof n.ranges[a][1]?e(n.ranges[a][1],this.locale.format):e(n.ranges[a][1]),this.minDate&&r.isBefore(this.minDate)&&(r=this.minDate.clone());var d,h=this.maxDate;this.maxSpan&&h&&r.clone().add(this.maxSpan).isAfter(h)&&(h=r.clone().add(this.maxSpan)),h&&o.isAfter(h)&&(o=h.clone()),this.minDate&&o.isBefore(this.minDate,this.timepicker?"minute":"day")||h&&r.isAfter(h,this.timepicker?"minute":"day")||((d=document.createElement("textarea")).innerHTML=a,this.ranges[d.value]=[r,o])}var p="<ul>";for(a in this.ranges)p+='<li data-range-key="'+a+'">'+a+"</li>";this.showCustomRangeLabel&&(p+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),p+="</ul>",this.container.find(".ranges").prepend(p)}"function"==typeof s&&(this.callback=s),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&this.container.addClass("auto-apply"),"object"==typeof n.ranges&&this.container.addClass("show-ranges"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),this.timePicker||this.container.addClass("auto-apply")),(void 0===n.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses),this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".drp-calendar").on("click.daterangepicker",".prev",t.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",t.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",t.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",t.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",t.proxy(this.timeChanged,this)),this.container.find(".ranges").on("click.daterangepicker","li",t.proxy(this.clickRange,this)),this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",t.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",t.proxy(this.clickCancel,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":t.proxy(this.show,this),"focus.daterangepicker":t.proxy(this.show,this),"keyup.daterangepicker":t.proxy(this.elementChanged,this),"keydown.daterangepicker":t.proxy(this.keydown,this)}):(this.element.on("click.daterangepicker",t.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",t.proxy(this.toggle,this))),this.updateElement()};return i.prototype={constructor:i,setStartDate:function(t){"string"==typeof t&&(this.startDate=e(t,this.locale.format)),"object"==typeof t&&(this.startDate=e(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(t){"string"==typeof t&&(this.endDate=e(t,this.locale.format)),"object"==typeof t&&(this.endDate=e(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan)),this.previousRightTime=this.endDate.clone(),this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.startDate.clone().date(2).add(1,"month"):this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){var e,t,i,n;this.timePicker&&(this.endDate?(e=parseInt(this.container.find(".left .hourselect").val(),10),t=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(t)&&(t=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(n=this.container.find(".left .ampmselect").val())&&e<12&&(e+=12),"AM"===n&&12===e&&(e=0))):(e=parseInt(this.container.find(".right .hourselect").val(),10),t=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(t)&&(t=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(n=this.container.find(".right .ampmselect").val())&&e<12&&(e+=12),"AM"===n&&12===e&&(e=0))),this.leftCalendar.month.hour(e).minute(t).second(i),this.rightCalendar.month.hour(e).minute(t).second(i)),this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(i){var n,s=(n="left"==i?this.leftCalendar:this.rightCalendar).month.month(),r=n.month.year(),o=n.month.hour(),a=n.month.minute(),c=n.month.second(),l=e([r,s]).daysInMonth(),u=e([r,s,1]),d=e([r,s,l]),h=e(u).subtract(1,"month").month(),p=e(u).subtract(1,"month").year(),b=e([p,h]).daysInMonth(),f=u.day();(n=[]).firstDay=u,n.lastDay=d;for(var m=0;m<6;m++)n[m]=[];var g=b-f+this.locale.firstDay+1;g>b&&(g-=7),f==this.locale.firstDay&&(g=b-6);for(var v=e([p,h,g,12,a,c]),w=(m=0,0),y=0;m<42;m++,w++,v=e(v).add(24,"hour"))m>0&&w%7==0&&(w=0,y++),n[y][w]=v.clone().hour(o).minute(a).second(c),v.hour(12),this.minDate&&n[y][w].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&n[y][w].isBefore(this.minDate)&&"left"==i&&(n[y][w]=this.minDate.clone()),this.maxDate&&n[y][w].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&n[y][w].isAfter(this.maxDate)&&"right"==i&&(n[y][w]=this.maxDate.clone());"left"==i?this.leftCalendar.calendar=n:this.rightCalendar.calendar=n;var C="left"==i?this.minDate:this.startDate,k=this.maxDate,S='<table class="table-condensed">';S+="<thead>",S+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(S+="<th></th>"),C&&!C.isBefore(n.firstDay)||this.linkedCalendars&&"left"!=i?S+="<th></th>":S+='<th class="prev available"><span></span></th>';var x=this.locale.monthNames[n[1][1].month()]+n[1][1].format(" YYYY");if(this.showDropdowns){for(var O=n[1][1].month(),D=n[1][1].year(),I=k&&k.year()||this.maxYear,j=C&&C.year()||this.minYear,T=D==j,E=D==I,A='<select class="monthselect">',_=0;_<12;_++)(!T||C&&_>=C.month())&&(!E||k&&_<=k.month())?A+="<option value='"+_+"'"+(_===O?" selected='selected'":"")+">"+this.locale.monthNames[_]+"</option>":A+="<option value='"+_+"'"+(_===O?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[_]+"</option>";A+="</select>";for(var W='<select class="yearselect">',R=j;R<=I;R++)W+='<option value="'+R+'"'+(R===D?' selected="selected"':"")+">"+R+"</option>";x=A+(W+="</select>")}if(S+='<th colspan="5" class="month">'+x+"</th>",k&&!k.isAfter(n.lastDay)||this.linkedCalendars&&"right"!=i&&!this.singleDatePicker?S+="<th></th>":S+='<th class="next available"><span></span></th>',S+="</tr>",S+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(S+='<th class="week">'+this.locale.weekLabel+"</th>"),t.each(this.locale.daysOfWeek,(function(e,t){S+="<th>"+t+"</th>"})),S+="</tr>",S+="</thead>",S+="<tbody>",null==this.endDate&&this.maxSpan){var P=this.startDate.clone().add(this.maxSpan).endOf("day");k&&!P.isBefore(k)||(k=P)}for(y=0;y<6;y++){for(S+="<tr>",this.showWeekNumbers?S+='<td class="week">'+n[y][0].week()+"</td>":this.showISOWeekNumbers&&(S+='<td class="week">'+n[y][0].isoWeek()+"</td>"),w=0;w<7;w++){var M=[];n[y][w].isSame(new Date,"day")&&M.push("today"),n[y][w].isoWeekday()>5&&M.push("weekend"),n[y][w].month()!=n[1][1].month()&&M.push("off","ends"),this.minDate&&n[y][w].isBefore(this.minDate,"day")&&M.push("off","disabled"),k&&n[y][w].isAfter(k,"day")&&M.push("off","disabled"),this.isInvalidDate(n[y][w])&&M.push("off","disabled"),n[y][w].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&M.push("active","start-date"),null!=this.endDate&&n[y][w].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&M.push("active","end-date"),null!=this.endDate&&n[y][w]>this.startDate&&n[y][w]<this.endDate&&M.push("in-range");var F=this.isCustomDate(n[y][w]);!1!==F&&("string"==typeof F?M.push(F):Array.prototype.push.apply(M,F));var X="",L=!1;for(m=0;m<M.length;m++)X+=M[m]+" ","disabled"==M[m]&&(L=!0);L||(X+="available"),S+='<td class="'+X.replace(/^\s+|\s+$/g,"")+'" data-title="r'+y+"c"+w+'">'+n[y][w].date()+"</td>"}S+="</tr>"}S+="</tbody>",S+="</table>",this.container.find(".drp-calendar."+i+" .calendar-table").html(S)},renderTimePicker:function(e){if("right"!=e||this.endDate){var t,i,n,s=this.maxDate;if(!this.maxSpan||this.maxDate&&!this.startDate.clone().add(this.maxSpan).isBefore(this.maxDate)||(s=this.startDate.clone().add(this.maxSpan)),"left"==e)i=this.startDate.clone(),n=this.minDate;else if("right"==e){i=this.endDate.clone(),n=this.startDate;var r=this.container.find(".drp-calendar.right .calendar-time");if(""!=r.html()&&(i.hour(isNaN(i.hour())?r.find(".hourselect option:selected").val():i.hour()),i.minute(isNaN(i.minute())?r.find(".minuteselect option:selected").val():i.minute()),i.second(isNaN(i.second())?r.find(".secondselect option:selected").val():i.second()),!this.timePicker24Hour)){var o=r.find(".ampmselect option:selected").val();"PM"===o&&i.hour()<12&&i.hour(i.hour()+12),"AM"===o&&12===i.hour()&&i.hour(0)}i.isBefore(this.startDate)&&(i=this.startDate.clone()),s&&i.isAfter(s)&&(i=s.clone())}t='<select class="hourselect">';for(var a=this.timePicker24Hour?23:12,c=this.timePicker24Hour?0:1;c<=a;c++){var l=c;this.timePicker24Hour||(l=i.hour()>=12?12==c?12:c+12:12==c?0:c);var u=i.clone().hour(l),d=!1;n&&u.minute(59).isBefore(n)&&(d=!0),s&&u.minute(0).isAfter(s)&&(d=!0),l!=i.hour()||d?t+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":t+='<option value="'+c+'" selected="selected">'+c+"</option>"}for(t+="</select> ",t+=': <select class="minuteselect">',c=0;c<60;c+=this.timePickerIncrement){var h=c<10?"0"+c:c;u=i.clone().minute(c),d=!1,n&&u.second(59).isBefore(n)&&(d=!0),s&&u.second(0).isAfter(s)&&(d=!0),i.minute()!=c||d?t+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>":'<option value="'+c+'">'+h+"</option>":t+='<option value="'+c+'" selected="selected">'+h+"</option>"}if(t+="</select> ",this.timePickerSeconds){for(t+=': <select class="secondselect">',c=0;c<60;c++)h=c<10?"0"+c:c,u=i.clone().second(c),d=!1,n&&u.isBefore(n)&&(d=!0),s&&u.isAfter(s)&&(d=!0),i.second()!=c||d?t+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>":'<option value="'+c+'">'+h+"</option>":t+='<option value="'+c+'" selected="selected">'+h+"</option>";t+="</select> "}if(!this.timePicker24Hour){t+='<select class="ampmselect">';var p="",b="";n&&i.clone().hour(12).minute(0).second(0).isBefore(n)&&(p=' disabled="disabled" class="disabled"'),s&&i.clone().hour(0).minute(0).second(0).isAfter(s)&&(b=' disabled="disabled" class="disabled"'),i.hour()>=12?t+='<option value="AM"'+p+'>AM</option><option value="PM" selected="selected"'+b+">PM</option>":t+='<option value="AM" selected="selected"'+p+'>AM</option><option value="PM"'+b+">PM</option>",t+="</select>"}this.container.find(".drp-calendar."+e+" .calendar-time").html(t)}},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},move:function(){var e,i={top:0,left:0},n=t(window).width();this.parentEl.is("body")||(i={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},n=this.parentEl[0].clientWidth+this.parentEl.offset().left),e="up"==this.drops?this.element.offset().top-this.container.outerHeight()-i.top:this.element.offset().top+this.element.outerHeight()-i.top,this.container.css({top:0,left:0,right:"auto"});var s=this.container.outerWidth();if(this.container["up"==this.drops?"addClass":"removeClass"]("drop-up"),"left"==this.opens){var r=n-this.element.offset().left-this.element.outerWidth();s+r>t(window).width()?this.container.css({top:e,right:"auto",left:9}):this.container.css({top:e,right:r,left:"auto"})}else if("center"==this.opens)(o=this.element.offset().left-i.left+this.element.outerWidth()/2-s/2)<0?this.container.css({top:e,right:"auto",left:9}):o+s>t(window).width()?this.container.css({top:e,left:"auto",right:0}):this.container.css({top:e,left:o,right:"auto"});else{var o;(o=this.element.offset().left-i.left)+s>t(window).width()?this.container.css({top:e,left:"auto",right:0}):this.container.css({top:e,left:o,right:"auto"})}},show:function(e){this.isShowing||(this._outsideClickProxy=t.proxy((function(e){this.outsideClick(e)}),this),t(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),t(window).on("resize.daterangepicker",t.proxy((function(e){this.move(e)}),this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),t(document).off(".daterangepicker"),t(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var i=t(e.target);"focusin"==e.type||i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(e){var t=e.target.getAttribute("data-range-key");if(this.chosenLabel=t,t==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[t];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(e){t(e.target).parents(".drp-calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){t(e.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(t(e.target).hasClass("available")){var i=t(e.target).attr("data-title"),n=i.substr(1,1),s=i.substr(3,1),r=t(e.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][s]:this.rightCalendar.calendar[n][s],o=this.leftCalendar,a=this.rightCalendar,c=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each((function(e,i){if(!t(i).hasClass("week")){var n=t(i).attr("data-title"),s=n.substr(1,1),l=n.substr(3,1),u=t(i).parents(".drp-calendar").hasClass("left")?o.calendar[s][l]:a.calendar[s][l];u.isAfter(c)&&u.isBefore(r)||u.isSame(r,"day")?t(i).addClass("in-range"):t(i).removeClass("in-range")}}))}},clickDate:function(e){if(t(e.target).hasClass("available")){var i=t(e.target).attr("data-title"),n=i.substr(1,1),s=i.substr(3,1),r=t(e.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][s]:this.rightCalendar.calendar[n][s];if(this.endDate||r.isBefore(this.startDate,"day")){if(this.timePicker){var o=parseInt(this.container.find(".left .hourselect").val(),10);this.timePicker24Hour||("PM"===(l=this.container.find(".left .ampmselect").val())&&o<12&&(o+=12),"AM"===l&&12===o&&(o=0));var a=parseInt(this.container.find(".left .minuteselect").val(),10);isNaN(a)&&(a=parseInt(this.container.find(".left .minuteselect option:last").val(),10));var c=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;r=r.clone().hour(o).minute(a).second(c)}this.endDate=null,this.setStartDate(r.clone())}else if(!this.endDate&&r.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{var l;this.timePicker&&(o=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||("PM"===(l=this.container.find(".right .ampmselect").val())&&o<12&&(o+=12),"AM"===l&&12===o&&(o=0)),a=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(a)&&(a=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),c=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,r=r.clone().hour(o).minute(a).second(c)),this.setEndDate(r.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),e.stopPropagation()}},calculateChosenLabel:function(){var e=!0,t=0;for(var i in this.ranges){if(this.timePicker){var n=this.timePickerSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm";if(this.startDate.format(n)==this.ranges[i][0].format(n)&&this.endDate.format(n)==this.ranges[i][1].format(n)){e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")){e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").attr("data-range-key");break}t++}e&&(this.chosenLabel=this.showCustomRangeLabel?this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):null,this.showCalendars())},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var i=t(e.target).closest(".drp-calendar").hasClass("left"),n=this.container.find(".drp-calendar."+(i?"left":"right")),s=parseInt(n.find(".monthselect").val(),10),r=n.find(".yearselect").val();i||(r<this.startDate.year()||r==this.startDate.year()&&s<this.startDate.month())&&(s=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&s<this.minDate.month())&&(s=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&s>this.maxDate.month())&&(s=this.maxDate.month(),r=this.maxDate.year()),i?(this.leftCalendar.month.month(s).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(s).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var i=t(e.target).closest(".drp-calendar"),n=i.hasClass("left"),s=parseInt(i.find(".hourselect").val(),10),r=parseInt(i.find(".minuteselect").val(),10);isNaN(r)&&(r=parseInt(i.find(".minuteselect option:last").val(),10));var o=this.timePickerSeconds?parseInt(i.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var a=i.find(".ampmselect").val();"PM"===a&&s<12&&(s+=12),"AM"===a&&12===s&&(s=0)}if(n){var c=this.startDate.clone();c.hour(s),c.minute(r),c.second(o),this.setStartDate(c),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==c.format("YYYY-MM-DD")&&this.endDate.isBefore(c)&&this.setEndDate(c.clone())}else if(this.endDate){var l=this.endDate.clone();l.hour(s),l.minute(r),l.second(o),this.setEndDate(l)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var t=this.element.val().split(this.locale.separator),i=null,n=null;2===t.length&&(i=e(t[0],this.locale.format),n=e(t[1],this.locale.format)),(this.singleDatePicker||null===i||null===n)&&(n=i=e(this.element.val(),this.locale.format)),i.isValid()&&n.isValid()&&(this.setStartDate(i),this.setEndDate(n),this.updateView())}},keydown:function(e){9!==e.keyCode&&13!==e.keyCode||this.hide(),27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var e=this.startDate.format(this.locale.format);this.singleDatePicker||(e+=this.locale.separator+this.endDate.format(this.locale.format)),e!==this.element.val()&&this.element.val(e).trigger("change")}},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},t.fn.daterangepicker=function(e,n){var s=t.extend(!0,{},t.fn.daterangepicker.defaultOptions,e);return this.each((function(){var e=t(this);e.data("daterangepicker")&&e.data("daterangepicker").remove(),e.data("daterangepicker",new i(e,s,n))})),this},i}(e,t)}).apply(t,n))||(e.exports=s)},ePBx:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("XNiG"),s=i("lGQG"),r=i("Oieg"),o=i("Ymxs"),a=i("tk/3"),c=i("1Tmk"),l=i("lJxs"),u=i("vkgz"),d=i("xoOP"),h=i("fXoL"),p=i("tyNb");let b=(()=>{class e{constructor(e,t,i,s,r){this.http=e,this.router=t,this.authService=i,this.workspaceService=s,this.toaster=r,this.error=new n.a,this.userGroups=new n.a,this.updatedUserGroups=new n.a,this.deletedUserFromUserGroup=new n.a}getAllUserGroups(e){const t=e||this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${t}/userGroups/`).subscribe(e=>{this.userGroups.next(e)},e=>{this.error.next(e)})}getAllUserGroupsV1(e,t){const i=e||this.workspaceService.getDefaultWorkspaceId(),n=Object.assign({},t);return Object(d.D)(n,"page-size","pageSize"),this.http.get(`/v1/workspaces/${i}/user-groups/`,{params:n}).pipe(Object(l.a)(e=>e.map(e=>new r.a(e))))}create(e,t){const i=e.trim(),n=JSON.stringify({name:i});return this.http.post(`/workspaces/${t}/userGroups/`,n).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",`Usergroup ${i} has been created.`)},e=>{this.error.next(e),this.toaster.pop("error",e.error&&e.error.message||`Usergroup with name ${i} already exists.`)}))}addUserToUserGroup(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=JSON.stringify({userGroupIds:e,userIds:t});this.http.post(`/workspaces/${i}/userGroups/users/`,n).subscribe(e=>{this.toaster.pop("success","Access updated"),this.updatedUserGroups.next(e)},e=>{this.error.next(e)})}removeUserFromUserGroup(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n={headers:null,body:JSON.stringify({userGroupIds:e,userIds:t})};this.http.delete(`/workspaces/${i}/userGroups/users/`,n).subscribe(e=>{this.toaster.pop("success","Access updated"),this.deletedUserFromUserGroup.next(e)},e=>{this.error.next(e)})}update(e){const t=e.name,i=JSON.stringify({name:t});return this.http.put(`/workspaces/${e.workspaceId}/userGroups/${e.id}`,i).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",`Usergroup ${t} has been updated.`)},e=>{this.toaster.pop("error",`Group with name ${t} already exists`),this.error.next(e)}))}delete(e){return this.http.delete(`/workspaces/${e.workspaceId}/userGroups/${e.id}`).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(t=>{this.toaster.pop("success",`Usergroup ${e.name} has been deleted.`)},e=>{this.toaster.pop("error",e.error&&e.error.message||"Delete failed."),this.error.next(e)}))}getUserGroupIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new a.f).append("name",e.name);return this.http.get(`/workspaces/${t}/userGroups/report-filters/ids`,{params:i}).pipe(Object(l.a)(e=>e),Object(u.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get group IDs failed")))}}return e.\u0275fac=function(t){return new(t||e)(h.fc(a.b),h.fc(p.c),h.fc(s.a),h.fc(c.a),h.fc(o.a))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac}),e})()},enr5:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("fXoL"),s=i("WQ+v"),r=i("qfBg"),o=i("f0Wu"),a=i("5Ra6"),c=i("wd/R"),l=i("XNiG"),u=i("gcYM"),d=i("1G5W"),h=i("B4wx"),p=i("3Pt+");const b=["inputField"];let f=(()=>{class e{constructor(e,t,i){this.timeInputConverterService=e,this.timeZoneConverterService=t,this.userService=i,this.focusOnInput=!1,this.debouncer$=new l.a,this.unsubscribe$=new l.a,this.timeChanged=new n.n,this.focus=new n.n,this.blur=new n.n}set dateTime(e){this._dateTime=e,this._dateTime&&this.initialized&&this.initDateTime()}get dateTime(){return this._dateTime}ngOnInit(){this.timeZone=this.timeZone||this.userService.getTimeZone(),this.formatIs24Hour=(this.timeFormat||this.userService.getTimeFormatForUser())===h.a.HOUR24,this.initDateTime(),this.debouncer$.pipe(Object(u.a)(100),Object(d.a)(this.unsubscribe$)).subscribe(this.arrowPressed.bind(this))}initDateTime(){this.dateTime&&(this.momentTimeDate=o.tz(this.dateTime,this.timeZone).clone(),this.totalTime=o(this.momentTimeDate).format("h:mmA").toString(),this.formatIs24Hour&&(this.totalTime=this.formatTo24Hour(this.totalTime)),this.totalTimeBackup=this.totalTime,this.initialized=!0)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setFocus(e){this.disableEdit||(this.focus.emit(),this.focusOnInput&&(setTimeout(()=>e.focus(),0),setTimeout(()=>e.select(),0)),this.totalTime=this.totalTime.split(":").join(""))}focusToInput(){this.setFocus(this.inputField.nativeElement)}setTime(e=!0){let t=this.timeInputConverterService.parseInput(this.totalTime.trim().replace(/ /g,""));if(!t||!this.totalTime.trim())return this.totalTime=this.totalTimeBackup,void(e&&this.blur.emit());t.indexOf(":")<0&&(t=t.substring(0,2).concat(":").concat(t.substring(2,4)));const i=o.tz(this.momentTimeDate,this.timeZone).clone();if(i.isValid()){const n=Number(t.split(":")[0]),s=Number(t.split(":")[1]);i.hours(n),i.minutes(s);const r=this.momentTimeDate.minutes(),a=this.momentTimeDate.hours();r===s&&a===n||i.set({second:0,millisecond:0}),this.momentTimeDate=i.clone();let c=o.tz(this.momentTimeDate,this.timeZone).format("h:mmA").toString();this.formatIs24Hour&&(c=this.formatTo24Hour(c)),c!==this.totalTimeBackup&&(this.totalTimeBackup=c,e&&this.emit()),this.totalTime=c}else this.totalTime=this.totalTimeBackup;e&&this.blur.emit()}arrowPressDebounce(e){this.debouncer$.next(e)}arrowPressed(e){let t=this.timeInputConverterService.parseInput(this.totalTime.trim().replace(/ /g,""));if(!t||!this.totalTime.trim())return void(this.totalTime=this.totalTimeBackup);t.indexOf(":")<0&&(t=t.substring(0,2).concat(":").concat(t.substring(2,4)));const i=o.tz(this.momentTimeDate,this.timeZone).clone();i.isValid()&&(i.hours(Number(t.split(":")[0])),i.minutes(Number(t.split(":")[1])),e?i.add(1,"minute"):i.subtract(1,"minute"),this.totalTime=o(i).format("h:mmA").toString(),this.formatIs24Hour&&(this.totalTime=this.formatTo24Hour(this.totalTime)))}emit(){const e=Object(c.utc)(this.momentTimeDate.clone());this.timeChanged.emit(e.toISOString())}formatTo24Hour(e){return o(e,["h:mmA"]).format("HH:mm").toString()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(s.a),n.Rb(a.a),n.Rb(r.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["input-time-ampm"]],viewQuery:function(e,t){var i;1&e&&n.Uc(b,!0),2&e&&n.Kc(i=n.kc())&&(t.inputField=i.first)},inputs:{disableEdit:"disableEdit",focusOnInput:"focusOnInput",removeOpacity:"removeOpacity",timeZone:"timeZone",timeFormat:"timeFormat",dateTime:"dateTime"},outputs:{timeChanged:"timeChanged",focus:"focus",blur:"blur"},decls:2,vars:3,consts:[["autocomplete","off","type","text","tabindex","0","spellcheck","false",1,"cl-form-control","cl-input-time-picker",3,"ngModel","disabled","readOnly","ngModelChange","focus","blur","keydown.arrowup","keydown.arrowdown","keyup.enter"],["inputField",""]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",0,1),n.jc("ngModelChange",(function(e){return t.totalTime=e}))("focus",(function(){n.Oc(e);const i=n.Lc(1);return t.setFocus(i)}))("blur",(function(){return t.setTime()}))("keydown.arrowup",(function(){return t.arrowPressDebounce(!0)}))("keydown.arrowdown",(function(){return t.arrowPressDebounce(!1)}))("keyup.enter",(function(){return n.Oc(e),n.Lc(1).blur()})),n.Wb()}2&e&&n.wc("ngModel",t.totalTime)("disabled",!t.removeOpacity&&t.disableEdit)("readOnly",t.removeOpacity)},directives:[p.c,p.s,p.v],styles:[""],changeDetection:0}),e})()},f1uh:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("3Pt+"),r=function(e){return e.YES="YES",e.NO="NO",e.BOTH="BOTH",e}({});let o=(()=>{class e{constructor(e){this.cd=e,this.value=r.BOTH,this.onChange=new n.n,this.SwitchValue=r}ngOnInit(){this.valueBackup=this.value}ngOnDestroy(){this.emit()}emit(){this.valueBackup!==this.value&&this.onChange.emit(this.value)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-switch"]],inputs:{value:"value"},outputs:{onChange:"onChange"},decls:21,vars:6,consts:[[1,"cl-dropdown-menu"],[1,"cl-scroll-area"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-radio"],["id","switchBoth","name","switchBoth","type","radio",1,"cl-custom-control-input",3,"ngModel","value","ngModelChange"],["for","switchBoth",1,"cl-custom-control-label"],[1,"cl-cut-text"],["id","switchYes","name","switchYes","type","radio",1,"cl-custom-control-input",3,"ngModel","value","ngModelChange"],["for","switchYes",1,"cl-custom-control-label"],["id","switchNo","name","switchNo","type","radio",1,"cl-custom-control-input",3,"ngModel","value","ngModelChange"],["for","switchNo",1,"cl-custom-control-label"],["dropdownClose","","tabindex","0"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xb(4,"input",4),n.jc("ngModelChange",(function(e){return t.value=e})),n.Wb(),n.Xb(5,"label",5),n.Xb(6,"div",6),n.Yc(7,"Both"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(8,"div",2),n.Xb(9,"div",3),n.Xb(10,"input",7),n.jc("ngModelChange",(function(e){return t.value=e})),n.Wb(),n.Xb(11,"label",8),n.Xb(12,"div",6),n.Yc(13,"Yes"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(14,"div",2),n.Xb(15,"div",3),n.Xb(16,"input",9),n.jc("ngModelChange",(function(e){return t.value=e})),n.Wb(),n.Xb(17,"label",10),n.Xb(18,"div",6),n.Yc(19,"No"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Sb(20,"span",11),n.Wb()),2&e&&(n.Cb(4),n.wc("ngModel",t.value)("value",t.SwitchValue.BOTH),n.Cb(6),n.wc("ngModel",t.value)("value",t.SwitchValue.YES),n.Cb(6),n.wc("ngModel",t.value)("value",t.SwitchValue.NO))},directives:[s.A,s.c,s.s,s.v],encapsulation:2,changeDetection:0}),e})()},fV9S:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Hf8F");class s{constructor(e){this.id=e.id||e.approvalRequestId,this.total=e.total,this.dateRange=e.dateRange,this.startDayOfWeek=e.startDayOfWeek,this.entriesCount=e.entriesCount||0,this.approvedCount=e.approvedCount||0,this.isApprovedAllOnOtherPages=e.isApprovedAllOnOtherPages,e.startDayOfWeek||console.warn("startDayOfWeek missing in new ApprovalWeekStatus()")}initIsApprovedOnOtherPages(e,t){this.isApprovedAllOnOtherPages=e>=this.entriesCount||this.entriesCount-e==this.approvedCount-t}addTotalDuration(e){this.total=new n.a(this.total).add(e).asString()}subtractTotalDuration(e){this.total=new n.a(this.total).subtract(e).asString()}}},gZQK:function(e,t,i){"use strict";i.d(t,"a",(function(){return wt}));var n=i("ofXK"),s=i("C+R2"),r=i("sk7z"),o=i("ktZA"),a=i("G7Sd"),c=i("uX6w"),l=i("t2hA"),u=i("RkOr"),d=i("EBvn"),h=i("iTUp"),p=i("txdI"),b=i("1kSV"),f=i("Dfhc"),m=i("EONh"),g=i("NDhe"),v=i("9Trn"),w=i("3Pt+"),y=i("VucA"),C=i("jJjg"),k=i("mMUe"),S=i("6Dzi"),x=i("vqWo"),O=i("AIwn"),D=i("1+qu"),I=i("E10L"),j=i("MtJD"),T=i("dlKe"),E=i("hT48"),A=i("LNDd"),_=i("fXoL");let W=(()=>{class e{}return e.\u0275mod=_.Pb({type:e}),e.\u0275inj=_.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,w.m,h.a,T.b,E.a,A.a]]}),e})(),R=(()=>{class e{}return e.\u0275mod=_.Pb({type:e}),e.\u0275inj=_.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,w.m]]}),e})(),P=(()=>{class e{}return e.\u0275mod=_.Pb({type:e}),e.\u0275inj=_.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,w.m,E.a]]}),e})();var M=i("tZA+");let F=(()=>{class e{}return e.\u0275mod=_.Pb({type:e}),e.\u0275inj=_.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,w.m,M.a]]}),e})();var X=i("Jmk/");let L=(()=>{class e{}return e.\u0275mod=_.Pb({type:e}),e.\u0275inj=_.Ob({factory:function(t){return new(t||e)},providers:[X.a],imports:[[n.c,w.m,F,w.C,v.a,m.a,j.a,W,R,E.a,P,b.ab]]}),e})();var N=i("/pT+"),B=i("+Two"),Y=i("l1Fo"),V=i("vwXn"),U=i("s4Bo"),H=i("0Gvx"),$=i("gr2/"),G=i("tyNb"),z=i("qvXw"),q=i("1ROj"),K=i("Qd9e"),Z=i("Gajk"),J=i("QAEb"),Q=i("EcM4"),ee=i("QeEd"),te=i("Vpr3"),ie=i("lWAS"),ne=i("wBNX"),se=i("LM6y"),re=i("UnIm"),oe=i("lp//"),ae=i("lBcp"),ce=i("QTph"),le=i("ePBx"),ue=i("kRDX"),de=i("aDua"),he=i("kKK/"),pe=i("wlsK"),be=i("QKuU"),fe=i("eGqU"),me=i("sbmM"),ge=i("TmxI"),ve=i("qUN8"),we=i("2rWG"),ye=i("9Gc3"),Ce=i("pOhx"),ke=i("AHy6"),Se=i("/DYx"),xe=i("VHTb"),Oe=i("r5nx"),De=i("8IBD"),Ie=i("1Y3z"),je=i("5SNR"),Te=i("4Seb"),Ee=i("AHJ+"),Ae=i("62PR"),_e=i("D0uv"),We=i("rf9C"),Re=i("6GAr"),Pe=i("FfKB"),Me=i("MPSC"),Fe=i("Nu56"),Xe=i("GAki"),Le=i("pCWH"),Ne=i("BhhM"),Be=i("okBH");let Ye=(()=>{class e{transform(e){return e&&e.sort((function(e,t){return!e.project.name&&t.project.name?1:!t.project.name&&e.project.name?-1:e.project.name<t.project.name||e.project.name>t.project.name?e.project.name<t.project.name?-1:1:e.task?t.task?!e.task.name&&t.task.name?1:!t.task.name&&e.task.name||e.task.name<t.task.name?-1:1:-1:1})),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_.Qb({name:"sortByTaskAndProject",type:e,pure:!0}),e})();var Ve=i("n0VX"),Ue=i("Fnfa"),He=i("4jLH"),$e=i("6yyQ");let Ge=(()=>{class e{transform(e,t,i){return e&&0!==e.length?(i||(i=e=>e),e.sort((e,n)=>{if(e.isNewlyAdded&&!n.isNewlyAdded)return-1;if(!e.isNewlyAdded&&n.isNewlyAdded)return 1;if("number"==typeof i(e)){if(i(e)>i(n))return"asc"===t?1:-1;if(i(e)<i(n))return"asc"===t?-1:1}else{if(i(e).toLowerCase()>i(n).toLowerCase())return"asc"===t?1:-1;if(i(e).toLowerCase()<i(n).toLowerCase())return"asc"===t?-1:1}return 0})):[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_.Qb({name:"sort",type:e,pure:!0}),e})(),ze=(()=>{class e{transform(e,t){return e&&0!==e.length&&t?e.length<=t?e.slice():e.slice(0,t):[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_.Qb({name:"showN",type:e,pure:!0}),e})(),qe=(()=>{class e{transform(e){return e?Math.floor(e)+"h":"0h"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_.Qb({name:"toHours",type:e,pure:!0}),e})();var Ke=i("rg2B"),Ze=i("xJiw"),Je=i("4500"),Qe=i("DCUz"),et=i("9G2T"),tt=i("N2Ql"),it=i("soCN"),nt=i("bzkB"),st=i("l4Lo"),rt=i("GsAO");let ot=(()=>{class e{transform(e,t){return e.filter(e=>t.includes(e.customField.status))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_.Qb({name:"filterCustomFields",type:e,pure:!0}),e})();var at=i("MXpx"),ct=i("yUBi"),lt=i("87RK"),ut=i("Lwft"),dt=i("eBys"),ht=i("znhS"),pt=i("a+PT"),bt=i("r21O"),ft=i("psuR"),mt=i("9Eqt"),gt=i("wd/R");let vt=(()=>{class e{transform(e,t){let i=gt(e);t&&(i=gt.tz(i,t));const n=gt();return i.isSame(n,"year")?i.format("ddd, MMM D"):i.format("MMM D, YYYY")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_.Qb({name:"dateFormatIso",type:e,pure:!0}),e})(),wt=(()=>{class e{}return e.\u0275mod=_.Pb({type:e}),e.\u0275inj=_.Ob({factory:function(t){return new(t||e)},providers:[ee.a,te.a,ie.a,ne.a,Q.a,re.a,oe.a,ae.a,ce.a,le.a],imports:[[n.c,w.m,w.C,h.a,p.a,b.M,y.a,C.a,m.a,g.a,v.a,k.a,I.a,f.a,L,B.a,b.s,Y.a,V.a,U.a,H.a,$.a,j.a,G.g,z.a,q.a,K.a,Z.a,J.a,se.a]]}),e})();_.Rc(u.b,[n.r,n.s,n.t,n.u,n.B,n.x,n.y,n.z,n.A,n.v,n.w,w.I,w.x,w.H,w.c,w.y,w.B,w.a,w.E,w.F,w.A,w.s,w.t,w.D,w.o,w.n,w.z,w.b,w.d,w.v,w.w,w.u,w.h,w.k,w.i,w.l,w.e,b.L,ue.a,de.a,he.a,pe.a,be.a,fe.a,me.a,ge.a,ve.a,we.a,ye.a,Ce.a,ke.a,Se.a,xe.b,Oe.a,b.a,b.G,b.J,b.H,b.I,b.K,b.b,b.c,b.e,b.P,b.O,b.d,b.R,b.f,b.g,b.h,b.p,b.i,b.j,b.k,b.n,b.m,b.l,b.y,b.u,b.t,b.v,b.w,b.x,b.z,b.A,b.B,b.C,b.D,b.E,b.F,b.N,b.Q,b.V,b.S,b.T,b.U,b.W,b.X,b.Y,b.Z,b.bb,b.o,De.a,Ie.a,je.a,Te.a,Ee.a,Ae.a,_e.a,We.a,G.h,G.d,G.f,G.e,G.j,Re.a,Pe.a,Me.a,Fe.a,Xe.a,Le.a,s.a,r.a,o.a,a.a,c.a,l.a,u.b,d.a,S.a,x.a,O.a,D.a,N.a],[n.b,n.I,n.q,n.l,n.F,n.g,n.D,n.G,n.d,n.f,n.j,n.k,n.m,Ne.a,Be.a,Ye,Ve.a,Ue.a,He.a,$e.a,Ge,ze,qe,Ke.a,Ze.a,Je.a,Qe.a,et.a,tt.a,it.a,nt.a,st.a,rt.a,ot,at.a,ct.a,lt.a,ut.a,dt.a,ht.a,pt.a,bt.a,ft.a,mt.a,vt])},gcYM:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("7o/Q"),s=i("D0XW");i("l7GE"),i("ZUHj");const r={leading:!0,trailing:!1};function o(e,t=s.a,i=r){return n=>n.lift(new a(e,t,i.leading,i.trailing))}class a{constructor(e,t,i,n){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=n}call(e,t){return t.subscribe(new c(e,this.duration,this.scheduler,this.leading,this.trailing))}}class c extends n.a{constructor(e,t,i,n,s){super(e),this.duration=t,this.scheduler=i,this.leading=n,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function l(e){const{subscriber:t}=e;t.clearThrottle()}},"gr2/":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("ofXK"),s=i("3Pt+"),r=i("qfBg"),o=i("WQ+v"),a=i("Ww9u"),c=i("ogL9"),l=i("RH5C"),u=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(t){return new(t||e)},providers:[r.a,o.a],imports:[[n.c,s.m,c.a,l.a,l.a,a.a]]}),e})()},gzhl:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("BO2n"),s=i("f0Wu"),r=i("sNAh"),o=i("IP1A"),a=i("fXoL"),c=i("3Pt+"),l=i("+dED"),u=i("1kSV"),d=i("62PR");function h(e,t){1&e&&(a.Yc(0," Upgrade to BASIC or apply new rate to old entries "),a.Xb(1,"a",28),a.Yc(2,"manually"),a.Wb(),a.Yc(3,".\n"))}const p=function(){return[""]},b=function(e){return{start:e}};let f=(()=>{class e extends o.a{constructor(){super(...arguments),this._hourlyRate=new r.a}set hourlyRate(e){e&&(this._hourlyRate=new r.a(e),this.hourlyRate.amount=e.amount)}get hourlyRate(){return this._hourlyRate}ngOnInit(){super.ngOnInit(),this.hourlyRate.since=s().startOf("day").toISOString(),this.responseBackup=this.hourlyRate.generateReponse(this.updateSince)}get isModelChanged(){const e=this.hourlyRate.generateReponse(this.updateSince);return!r.a.areResponsesEqual(e,this.responseBackup)}showUnset(){return this.type!==n.a.WORKSPACE&&this.hourlyRate&&null!==this.hourlyRate.amount}save(){if(!this.isModelChanged)return;const e=this.hourlyRate.generateReponse(this.updateSince);this.saveRate.emit(e)}pickedDate({start:e}){this.hourlyRate.since=e}}return e.\u0275fac=function(t){return m(t||e)},e.\u0275cmp=a.Lb({type:e,selectors:[["hourly-rate"]],inputs:{hourlyRate:"hourlyRate"},features:[a.zb],decls:41,vars:23,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],["role","alert",1,"cl-alert","cl-alert-info","cl-fade","cl-show"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-6"],["for","hourlyRate"],["ngbAutofocus","","placeholder","Enter rate...","type","text","inputNumber","","id","hourlyRate","spellcheck","false","autocomplete","off",1,"cl-form-control",3,"allowedValues","decimal","ngModel","keyup.enter","inputChange","inputCharacterChange"],["hourlyRateInput",""],["triggers","manual","placement","top","container","body",1,"cl-form-row","cl-position-relative",3,"ngbPopover","click"],["featurePopover","ngbPopover"],[1,"cl-form-group","cl-col-12"],[1,"cl-col-12"],[1,"cl-d-flex","cl-align-items-start","cl-align-items-md-center","cl-flex-column","cl-flex-md-row"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","recursiveHourlyRate","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","disabled","ngModelChange"],["for","recursiveHourlyRate",1,"cl-custom-control-label","cl-text-dark"],[1,"cl-d-flex","cl-align-items-center","cl-my-2","cl-my-md-0","cl-ml-n4","cl-ml-md-0"],["placement","right",1,"cl-d-inline-flex","cl-align-items-center",2,"position","relative",3,"maxDate","debounce","mode","textualDate","showNowInsteadToday","dateTime","disableEdit","pickedDate"],[1,"cl-form-group","cl-col-12","cl-mt-lg-2"],["type","radio","id","allEntries","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","disabled","ngModelChange"],["for","allEntries",1,"cl-custom-control-label","cl-text-dark"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button",1,"cl-btn","cl-btn-primary",3,"disabled","click"],["popContent",""],["href","https://clockify.me/help/reports/hourly-rates#historic-rates","target","_blank"]],template:function(e,t){if(1&e){const e=a.Yb();a.Xb(0,"div",0),a.Xb(1,"h1",1),a.Yc(2),a.Wb(),a.Xb(3,"button",2),a.jc("click",(function(){return t.close()})),a.Xb(4,"span"),a.Sb(5,"img",3),a.Wb(),a.Wb(),a.Wb(),a.Xb(6,"div",4),a.Xb(7,"div",5),a.Xb(8,"span"),a.Yc(9),a.Wb(),a.Wb(),a.Xb(10,"div",6),a.Xb(11,"div",7),a.Xb(12,"label",8),a.Yc(13,"What is the new billable rate"),a.Wb(),a.Xb(14,"input",9,10),a.jc("keyup.enter",(function(){return a.Oc(e),a.Lc(15).blur(),t.save()}))("inputChange",(function(e){return t.hourlyRate.amount=e}))("inputCharacterChange",(function(e){return t.hourlyRate.amount=e})),a.Wb(),a.Wb(),a.Wb(),a.Xb(16,"div",11,12),a.jc("click",(function(){a.Oc(e);const i=a.Lc(17);return t.togglePopover(i)})),a.Xb(18,"label",13),a.Yc(19,"Apply this billable rate to:"),a.Wb(),a.Xb(20,"div",14),a.Xb(21,"div",15),a.Xb(22,"div",16),a.Xb(23,"input",17),a.jc("ngModelChange",(function(e){return t.updateSince=e})),a.Wb(),a.Xb(24,"label",18),a.Yc(25," Time entries from "),a.Wb(),a.Wb(),a.Xb(26,"div",19),a.Xb(27,"single-date-picker2",20),a.jc("pickedDate",(function(e){return t.pickedDate(e)})),a.Wb(),a.Yc(28," onwards "),a.Wb(),a.Wb(),a.Wb(),a.Xb(29,"div",21),a.Xb(30,"div",16),a.Xb(31,"input",22),a.jc("ngModelChange",(function(e){return t.updateSince=e})),a.Wb(),a.Xb(32,"label",23),a.Yc(33," All past and future time entries "),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Xb(34,"div",24),a.Xb(35,"a",25),a.jc("click",(function(){return t.close()})),a.Yc(36,"Cancel"),a.Wb(),a.Xb(37,"button",26),a.jc("click",(function(){return t.save()})),a.Yc(38,"Save"),a.Wb(),a.Wb(),a.Wc(39,h,4,0,"ng-template",null,27,a.Xc)}if(2&e){const e=a.Lc(40);a.Cb(2),a.ad("",0===t.hourlyRate.amount?"Set":"Edit"," rate"),a.Cb(7),a.Zc(t.text),a.Cb(5),a.wc("allowedValues",a.Ac(20,p))("decimal",!0)("ngModel",t.hourlyRate.amount),a.Cb(2),a.wc("ngbPopover",e),a.Cb(7),a.wc("value",!0)("ngModel",t.updateSince)("disabled",!t.hasHistoricRateFeature),a.Cb(4),a.wc("maxDate",t.maxDate)("debounce",!1)("mode","date_only")("textualDate",!0)("showNowInsteadToday",!t.hasHistoricRateFeature)("dateTime",a.Bc(21,b,t.hourlyRate.since))("disableEdit",!t.hasHistoricRateFeature),a.Cb(4),a.wc("value",!1)("ngModel",t.updateSince)("disabled",!t.hasHistoricRateFeature),a.Cb(6),a.wc("disabled",!t.isModelChanged)}},directives:[c.c,l.a,c.s,c.v,u.L,c.A,d.a],encapsulation:2,changeDetection:0}),e})();const m=a.Zb(f)},hT48:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},i6c7:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("XNiG"),s=i("tnjF"),r=i("Ymxs"),o=i("tk/3"),a=i("lJxs"),c=i("vkgz"),l=i("1Tmk"),u=i("OG4e"),d=i("fXoL");let h=(()=>{class e{constructor(e,t,i,s){this.http=e,this.workspaceService=t,this.centUSDConverter=i,this.toaster=s,this.error=new n.a,this.tasks=new n.a,this.task=new n.a,this.deletedTask=new n.a,this.updatedTask=new n.a,this.allTasks=new n.a,this.activeTasks=new n.a,this.taskForProject=new n.a,this.taskNotUpdated=new n.a}getTasksForProjects(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),r=(new o.f).append("search",t&&t.searchTerm||"").append("page",t&&t.page.toString()||"1"),a=new n.a;return this.http.post(`/workspaces/${i}/projects/tasks-pagination`,e,{params:r}).subscribe(e=>{a.next(e.map(e=>new s.a(e))),this.allTasks.next(e)},e=>{a.error(e)}),a}getTasksNew(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/tasks/report-filters`,{name:e.name||"",status:e.status||"",page:e.page||1,pageSize:e.pageSize,clients:t||void 0,projects:i||void 0}).pipe(Object(a.a)(e=>(e.forEach(e=>e.tasks=e.tasks.map(e=>new s.a(e))),e)))}getTasksIds(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/projects/tasks/report-filters/ids`,{status:e.status,name:e.name,clients:e.clients,projects:e.projects}).pipe(Object(a.a)(e=>e),Object(c.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get task IDs failed")))}getAllTasks(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${i}/projects/${e}/tasks/`).subscribe(e=>{this.tasks.next(e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))))},e=>{this.error.next(e)})}create(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/${t}/tasks/`,{name:e,projectId:t,assigneeIds:i}).pipe(Object(c.a)(()=>{this.toaster.pop("success",`Task ${e} has been created.`)},t=>{400==t.status&&(this.error.next(t),this.toaster.pop("error","Task not created",t&&t.error&&t.error.message||`Task with name ${e} already exists.`))}))}createTask(e,t,i){const n=i||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/${t}/tasks/`,{name:e,projectId:t}).pipe(Object(a.a)(e=>new s.a(e)),Object(c.a)(()=>{this.toaster.pop("success",`Task ${e} has been created.`)},t=>{this.toaster.pop("error",t&&t.error&&t.error.message||`Task ${e} already exists.`)}))}update(e,t=!0,i=""){const n=this.workspaceService.getDefaultWorkspaceId(),r=JSON.stringify({name:e.name,estimate:e.estimate,budgetEstimate:100*e.budgetEstimate,assigneeIds:e.assigneeIds,status:e.status,billable:e.billable}),l=(new o.f).append("contains-assignee",t.toString()).append("membership-status",i);return this.http.put(`/workspaces/${n}/projects/${e.projectId}/tasks/${e.id}`,r,{params:l}).pipe(Object(a.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(c.a)(()=>{this.toaster.pop("success",`Task ${e.name} has been updated.`)},t=>{400==t.status&&(this.error.next(t),this.toaster.pop("error","Task not updated",t&&t.error&&t.error.message||`Task with name ${e.name} already exists.`))}))}updateHourlyRate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={amount:Math.round(100*e.hourlyRate.amount),currency:e.hourlyRate.currency,since:e.hourlyRate.since};return this.http.put(`/workspaces/${t}/projects/${e.projectId}/tasks/${e.id}/hourly-rate`,i).pipe(Object(a.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(c.a)(()=>{this.toaster.pop("success","Task successfully updated.")},e=>{this.toaster.pop("error","Task not updated",e&&e.error&&e.error.message)}))}updateCostRate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={amount:null!=e.costRate.amount?Math.round(100*e.costRate.amount):null,currency:e.costRate.currency,since:e.costRate.since};return this.http.put(`/workspaces/${t}/projects/${e.projectId}/tasks/${e.id}/cost-rate`,i).pipe(Object(a.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(c.a)(()=>{this.toaster.pop("success","Task successfully updated.")},e=>{this.toaster.pop("error","Task not updated",e&&e.error&&e.error.message)}))}delete(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/projects/${e.projectId}/tasks/${e.id}`).pipe(Object(c.a)(()=>{this.toaster.pop("success",`Task ${e.name} has been deleted.`)},e=>{this.error.next(e)}))}changeStatus(e,t){const i=this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${i}/projects/task/${e}/${t}`).subscribe(e=>{this.updatedTask.next(e),this.toaster.pop("success",`Task ${new s.a(e).name} has been updated.`)},e=>{this.error.next(e)})}ofTaskIds(e){const t=this.workspaceService.getDefaultWorkspaceId();this.http.post(`/workspaces/${t}/projects/taskIds`,{ids:e}).subscribe(e=>{this.allTasks.next(e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))))},e=>{this.error.next(e)})}ofProjectIds(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/projects/tasks`,e).pipe(Object(a.a)(e=>e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}}return e.\u0275fac=function(t){return new(t||e)(d.fc(o.b),d.fc(l.a),d.fc(u.a),d.fc(r.a))},e.\u0275prov=d.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},iNpZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("fXoL");class s{constructor(e,t){this._color=e,this._isActive=t}get color(){return this._color}set color(e){this._color=e}get isActive(){return this._isActive}set isActive(e){this._isActive=e}}var r=i("NHP+"),o=i("2rWG"),a=i("sbmM"),c=i("9Gc3");let l=(()=>{class e{constructor(){this.isSelectItem=new n.n}ngOnInit(){}clickedItem(){this.isSelectItem.emit(this.color)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["color-item"]],inputs:{color:"color"},outputs:{isSelectItem:"isSelectItem"},decls:1,vars:4,consts:[[1,"cl-color-picker-item","pointer",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"span",0),n.jc("click",(function(){return t.clickedItem()})),n.Wb()),2&e&&(n.Vc("background",t.color.color,n.Kb),n.Hb("cl-active",t.color.isActive))},encapsulation:2}),e})();var u=i("qUN8"),d=i("ofXK"),h=i("R9Cn");const p=["dropdown"];function b(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"color-item",15),n.jc("isSelectItem",(function(t){return n.Oc(e),n.nc(2).updateColorItems(t)})),n.Wb(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(1),n.wc("color",e)}}function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"span",16),n.jc("colorPickerChange",(function(t){return n.Oc(e),n.nc(2).defaultColorItem.color=t}))("colorPickerChange",(function(t){return n.Oc(e),n.nc(2).setDefaultColor(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.Vc("color",e.defaultColorItem.color),n.wc("colorPicker",e.defaultColorItem.color)("cpSaveClickOutside",!0)("cpWidth","180px")("cpAlphaChannel","disabled")("cpToggle",!0)}}function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",17),n.jc("click",(function(){return n.Oc(e),n.nc(2).toggleColorPicker()})),n.Wb()}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"div",7),n.Wc(2,b,2,1,"ng-container",8),n.Wb(),n.Sb(3,"div",9),n.Xb(4,"div",10),n.Xb(5,"color-item",11),n.jc("click",(function(){return n.Oc(e),n.nc().toggleColorPicker()})),n.Wb(),n.Xb(6,"span",12),n.jc("click",(function(){return n.Oc(e),n.nc().toggleColorPicker()})),n.Yc(7,"Custom color"),n.Wb(),n.Wc(8,f,1,7,"span",13),n.Wc(9,m,1,0,"div",14),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("ngForOf",e.colorItems),n.Cb(3),n.wc("color",e.defaultColorItemCustom),n.Cb(3),n.wc("ngIf",e.isCustomPickerOpen),n.Cb(1),n.wc("ngIf",e.isCustomPickerOpen)}}let v=(()=>{class e{constructor(e){this.cd=e,this.unsubscribe$=new r.a,this.color=new n.n,this.closeCreateProject=new n.n,this.editPermission=!0,this.colorPicked=new n.n}ngOnInit(){this.colorItems=[new s("#F44336",!1),new s("#E91E63",!1),new s("#FF5722",!1),new s("#FF9800",!1),new s("#FFC107",!1),new s("#8BC34A",!1),new s("#4CAF50",!1),new s("#00BCD4",!1),new s("#009688",!1),new s("#03A9F4",!1),new s("#3F51B5",!1),new s("#673AB7",!1),new s("#9C27B0",!1),new s("#607D8B",!1),new s("#795548",!1)];const e=this.colorItems[Math.floor(Math.random()*this.colorItems.length)];this.defaultColorItem=this.getRandomColorItem(e),this.defaultColorItemCustom=this.getRandomColorItem(e),this.setPickerColorFromProjectColor(),this.updateColorItems(this.defaultColorItem)}setPickerColorFromProjectColor(){this.colorEditProject&&(this.defaultColorItem.color!==this.colorEditProject&&(this.defaultColorItem.color=this.colorEditProject),this.defaultColorItemCustom.color!==this.colorEditProject&&(this.defaultColorItemCustom.color=this.colorEditProject,this.defaultColorItemCustom.isActive=!0))}getRandomColorItem(e){return new s(e.color,e.isActive)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}updateColorItems(e){for(const t of this.colorItems)t.isActive=t.color===e.color;this.defaultColorItem.color=e.color,this.defaultColorItem.color!==this.defaultColorItemCustom.color&&(this.defaultColorItemCustom.isActive=!1),this.color.emit(this.defaultColorItem.color),this.colorPicked.emit(this.defaultColorItem),this.dropdown&&this.dropdown.closeDropdown()}setDefaultColor(e){this.defaultColorItem.color=e,this.defaultColorItemCustom.color=e,this.defaultColorItemCustom.isActive=!0}toggleColorPicker(){this.isCustomPickerOpen&&this.updateColorItems(this.defaultColorItemCustom),this.isCustomPickerOpen=!this.isCustomPickerOpen,setTimeout(()=>{this.disableDropdownKey=this.isCustomPickerOpen,this.cd.detectChanges()})}closePicker(){this.isSelect=!1}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["color-chooser"]],viewQuery:function(e,t){var i;1&e&&n.ed(p,!0),2&e&&n.Kc(i=n.kc())&&(t.dropdown=i.first)},inputs:{colorEditProject:"colorEditProject",editPermission:"editPermission"},outputs:{color:"color",closeCreateProject:"closeCreateProject"},decls:6,vars:4,consts:[[3,"dropdownKey"],["dropdown","dropdownKey"],[1,"cl-w-100"],["dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle","cl-btn-color-picker",3,"disableCloseDropdownKey","disabled"],[3,"color"],["class","cl-dropdown-menu cl-color-picker-dropdown cl-show",4,"dropdownKeyContent"],[1,"cl-dropdown-menu","cl-color-picker-dropdown","cl-show"],[1,"cl-d-flex",2,"flex-wrap","wrap"],[4,"ngFor","ngForOf"],[1,"cl-dropdown-divider","cl-my-1"],[1,"cl-d-flex","cl-align-items-center"],["doNotCloseDropdown","",3,"color","click"],[1,"cl-small","cl-d-inline-block","cl-ml-1",3,"click"],[3,"colorPicker","color","cpSaveClickOutside","cpWidth","cpAlphaChannel","cpToggle","colorPickerChange",4,"ngIf"],["class","cl-color-chooser-custom-blocker",3,"click",4,"ngIf"],[3,"color","isSelectItem"],[3,"colorPicker","cpSaveClickOutside","cpWidth","cpAlphaChannel","cpToggle","colorPickerChange"],[1,"cl-color-chooser-custom-blocker",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"div",0,1),n.Xb(2,"div",2),n.Xb(3,"button",3),n.Sb(4,"color-item",4),n.Wb(),n.Wb(),n.Wc(5,g,10,4,"div",5),n.Wb()),2&e&&(n.wc("dropdownKey",!t.editPermission),n.Cb(3),n.wc("disableCloseDropdownKey",t.disableDropdownKey)("disabled",!t.editPermission),n.Cb(1),n.wc("color",t.defaultColorItem))},directives:[o.a,a.a,c.a,l,u.a,d.t,d.u,h.a],encapsulation:2}),e})()},iO9P:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t){if(!e||!t)return this.label="Project",void(this.required=!1);const i=e.forceTasks||e.forceProjects;this.label=t.settings.projectPickerSpecialFilter?"Task @Project":e.forceTasks?"Task":"Project",this.required=i}}},iTUp:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},jJjg:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("9Trn"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a]]}),e})()},jtSf:function(e,t,i){"use strict";i.d(t,"e",(function(){return d})),i.d(t,"d",(function(){return p})),i.d(t,"b",(function(){return b})),i.d(t,"a",(function(){return f})),i.d(t,"c",(function(){return m}));var n=i("wd/R"),s=i("ZHjv"),r=i("eBys"),o=i("RWlN"),a=i("5Ra6"),c=i("eDxF"),l=i("rnVd"),u=i("6t6a");function d(e,t){e=e.clone();const i=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];for(;e.weekday()!==i.indexOf(t);)e=e.subtract(1,"day").startOf("day");return e}function h(e,t,i){const s=(e&&e.clone()||n()).add(i,"days").startOf("day");return t.isSame(s,"d")}function p(e){const t=n.utc(e.start),i=n().set({date:t.date(),month:t.month(),year:t.year()}).startOf("day"),s=n.utc(e.end);return{start:i,end:n().set({date:s.date(),month:s.month(),year:s.year()}).startOf("day")}}function b(e,t){t=t||"MONDAY";const i=e.start.clone(),a=e.end.clone(),u=new r.a,d=`${i.format("MMM D")} - ${a.format("MMM D")}`,h={labelPrint:d,zoomLevel:null,dateRangeType:l.a.ABSOLUTE,label:d};return i.isSame(a,"day")?(h.zoomLevel=null,function(e){const t=n().startOf("day");return e.isSame(t,"d")}(i)?(h.label=c.a.TODAY,h.dateRangeType=l.a.TODAY,h):function(e){const t=n().subtract(1,"days").startOf("day");return e.isSame(t,"d")}(i)?(h.label=c.a.YESTERDAY,h.dateRangeType=l.a.YESTERDAY,h):(h.label=""+u.transform(i),h)):function(e,t,i){const r=Object(s.e)(i),o=r,a=n(r).add(6,"days").endOf("day");return o.isSame(e,"d")&&a.isSame(t,"d")}(i,a,t)?(h.label=c.a.THIS_WEEK,h.zoomLevel=o.a.WEEK,h.dateRangeType=l.a.THIS_WEEK,h):function(e,t,i){const r=Object(s.e)(i),o=n(r).subtract(1,"week"),a=n(r).subtract(1,"day").endOf("day");return o.isSame(e,"d")&&a.isSame(t,"d")}(i,a,t)?(h.label=c.a.LAST_WEEK,h.zoomLevel=o.a.WEEK,h.dateRangeType=l.a.LAST_WEEK,h):function(e,t,i){const r=Object(s.e)(i),o=n(r).subtract(2,"week"),a=n(r).subtract(1,"day").endOf("day");return o.isSame(e,"d")&&a.isSame(t,"d")}(i,a,t)?(h.label=c.a.PAST_TWO_WEEKS,h.zoomLevel=o.a.WEEK,h.dateRangeType=l.a.PAST_TWO_WEEKS,h):function(e,t){const i=n().startOf("month"),s=n().endOf("month");return i.isSame(e,"d")&&s.isSame(t,"d")}(i,a)?(h.label=c.a.THIS_MONTH,h.zoomLevel=o.a.MONTH,h.dateRangeType=l.a.THIS_MONTH,h):function(e,t){const i=n().subtract(1,"month").startOf("month"),s=n().subtract(1,"month").endOf("month");return i.isSame(e,"d")&&s.isSame(t,"d")}(i,a)?(h.label=c.a.LAST_MONTH,h.zoomLevel=o.a.MONTH,h.dateRangeType=l.a.LAST_MONTH,h):function(e,t){const i=n().startOf("year"),s=n().endOf("year");return i.isSame(e,"d")&&s.isSame(t,"d")}(i,a)?(h.label=c.a.THIS_YEAR,h.zoomLevel=o.a.YEAR,h.dateRangeType=l.a.THIS_YEAR,h):function(e,t){const i=n().subtract(1,"year").startOf("year"),s=n().subtract(1,"year").endOf("year");return i.isSame(e,"d")&&s.isSame(t,"d")}(i,a)?(h.label=c.a.LAST_YEAR,h.zoomLevel=o.a.YEAR,h.dateRangeType=l.a.LAST_YEAR,h):i.isSame(n(i).startOf("year"),"day")&&a.isSame(n(a).endOf("year"),"day")?(h.zoomLevel=o.a.YEAR,h.label=i.isSame(a,"year")?""+i.format("YYYY"):`${i.format("YYYY")} - ${a.format("YYYY")}`,h):1===i.date()&&a.daysInMonth()===a.date()?(h.zoomLevel=o.a.MONTH,h.label=i.isSame(a,"month")?""+i.format("MMMM, YYYY"):`${i.format("MMMM, YYYY")} - ${a.format("MMMM, YYYY")}`,h):(h.zoomLevel=!h.zoomLevel&&a.diff(i,"day")>1?o.a.WEEK:null,h)}function f(e,t){const i=e.clone(),n={label:u.a.NONE};return h(t,i,0)?(n.label=u.a.UPON_RECEIPT,n):h(t,i,10)?(n.label=u.a.AFTER_10,n):h(t,i,15)?(n.label=u.a.AFTER_15,n):h(t,i,30)?(n.label=u.a.AFTER_30,n):h(t,i,60)?(n.label=u.a.AFTER_60,n):h(t,i,90)?(n.label=u.a.AFTER_90,n):n}function m(e,t){if(!e)return null;if(t=t||"MONDAY",e===c.a.TODAY)return{start:n.utc().startOf("day"),end:n.utc().endOf("day")};if(e===c.a.YESTERDAY)return{start:n.utc().subtract(1,"day").startOf("day"),end:n.utc().subtract(1,"day").endOf("day")};if(e===c.a.THIS_WEEK)return Object(s.c)(t,new a.a);if(e===c.a.LAST_WEEK){const e=Object(s.c)(t,new a.a);return{start:e.start.subtract(1,"week"),end:e.end.subtract(1,"week")}}if(e===c.a.PAST_TWO_WEEKS){const e=Object(s.c)(t,new a.a);return{start:e.start.subtract(2,"week"),end:e.end.subtract(1,"week")}}return e===c.a.THIS_MONTH?{start:n.utc().startOf("month"),end:n.utc().endOf("month")}:e===c.a.LAST_MONTH?{start:n.utc().subtract(1,"month").startOf("month"),end:n.utc().subtract(1,"month").endOf("month")}:null}},"jy+1":function(e,t,i){"use strict";function n(e,t){return(i,n)=>{const s=e?1:-1,r=e?-1:1,o=t(i),a=t(n);return o>a?r:o<a?s:0}}function s(e,t){return(i,n)=>{const s=t?1:-1,r=t?-1:1,o=e(i),a=e(n);return o>a?r:o<a?s:0}}function r(e,t){return(i,n)=>{const s=t?1:-1,r=t?-1:1,o=e(i),a=e(n);return o>a?r:o<a?s:0}}i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return r}))},kGbF:function(e,t,i){"use strict";i.d(t,"b",(function(){return b})),i.d(t,"d",(function(){return f})),i.d(t,"g",(function(){return m})),i.d(t,"a",(function(){return g})),i.d(t,"h",(function(){return v})),i.d(t,"i",(function(){return w})),i.d(t,"c",(function(){return y})),i.d(t,"f",(function(){return C})),i.d(t,"e",(function(){return k}));var n=i("ZHjv"),s=i("wd/R"),r=i("dMTz"),o=i("5x7/"),a=i("Hf8F"),c=i("RkOr"),l=i("RWlN"),u=i("BuEj"),d=i("msBQ"),h=i("6gTr"),p=i("Ig2A");function b(e,t){if(navigator.msSaveBlob)return void navigator.msSaveBlob(e,t);if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(e,t);const i=window.URL.createObjectURL(e),n=document.createElement("a");n.target="_self",n.href=i,n.download=t,n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(i),n.remove()},100)}function f(e,t,i=l.a.WEEK){return e&&e[0]?e[0].days.map(e=>s(e.date).format("dd, MMM D")):t?Object(n.a)(i,t).map(e=>s(e).format("dd, MMM D")):new Array(7).fill("")}function m(e){const t=[];let i={};for(const n in e){const s=e[n];s.exclude&&t.push(n);const r=s.getQuery();i=Object.assign(Object.assign({},i),r)}return{exclude:t,filters:i}}function g(e){if(!e||!e.length)return 0;let t=e.length;return e.forEach(e=>{e.children&&(t+=e.children.length,e.children.forEach(e=>{var i;t+=(null===(i=e.children)||void 0===i?void 0:i.length)||0}))}),t}function v(e,t,i){i=i||l.a.WEEK;const r=Object(n.a)(i,t);if(!e||!e.length)return r.map(e=>new o.a({day:e}));let a={};if(e.forEach(e=>{a[e.day]=e}),i===l.a.YEAR){const t={},i=!!e[0].totalAmount||0===e[0].totalAmount,n=!!e[0].totalBillableTime||0===e[0].totalBillableTime;for(const e in a){const r=s(e).startOf("month").format("YYYY-MM-DD");a[e].day=r,t[r]?(t[r].totalTime+=a[e].totalTime,n&&(t[r].totalBillableTime+=a[e].totalBillableTime),i&&(t[r].totalAmount+=a[e].totalAmount)):t[r]=a[e]}a=t}r.forEach(e=>a[e]=new o.a(a[e]||{day:e})),e=[];for(const n in a)e.push(a[n]);return e.sort((e,t)=>{const i=new Date(t.day),n=new Date(e.day);return i>n?-1:i<n?1:0}),e}function w(e,t,i,n){let o;o=i===r.a.EARNED?[{data:[],label:"Billable"},{data:[],label:"Non-billable"}]:[{data:[],label:"Billable and non-billable"}];const a={barChartAllLabels:[],dates:[],durationLabel:[],colors:[{backgroundColor:"rgba(139,195,74, 1)",hoverBackgroundColor:"rgba(139,195,74, 1)"},{backgroundColor:"rgba(174,213,129, 1)",hoverBackgroundColor:"rgba(174,213,129, 1)"}],chartData:o,earnings:[],totalDurationByDate:[]},c=e.length>25&&t!==l.a.YEAR,u=t===l.a.YEAR?"MMM":"ddd, MMM D";return e.forEach((e,t)=>{let o;a.earnings.push(e.totalAmount),a.totalDurationByDate.push(e.totalTime);const l=s(e.day).format(u);a.barChartAllLabels.push(l),o=c?t%3==0?l:"":l,a.dates.push(o);const d=s.duration(e.totalTime,"s").format(n,{trim:!1});a.durationLabel.push(d),i===r.a.EARNED?(a.chartData[0].data.push(e.totalBillableTime),a.chartData[1].data.push(e.totalTime-e.totalBillableTime)):a.chartData[0].data.push(e.totalTime)}),a}function y(e,t,i,n){const r=new a.a(t).asMiliseconds(),o=[],l=[{backgroundColor:[]}],u=[],d=[];return e.forEach(e=>{let t;i===c.a.DATE?t=s(e.name).format(n):(t=e.name||e.withoutLabel,i===c.a.PROJECT&&e.name&&e.clientName&&(t+=" - "+e.clientName));const h=new a.a(e.duration).asMiliseconds()/r*100,p={color:e.color,label:t,duration:e.duration,percentage:h.toFixed(2)+"%"};o.push(p),l[0].backgroundColor.push(p.color),u.push(p.label),d.push(new a.a(e.duration).asMiliseconds())}),{doughnutChart:o,doughnutChartColors:l,doughnutChartLabels:u,doughnutChartData:d}}function C(e,t,i){const n=i.slice();n.splice(t);const s=e!==c.a.NONE;if(0===t){if(e===c.a.TIMEENTRY||e===c.a.TASK||e===c.a.NONE||!e)return!1}else{if(s&&n.includes(e))return!1;if(s&&n.includes(c.a.TIMEENTRY))return!1;if(e===c.a.CLIENT&&n.includes(c.a.PROJECT))return!1;if(e===c.a.USER_GROUP&&n.includes(c.a.USER))return!1;if(e===c.a.CLIENT&&n.includes(c.a.TASK))return!1;if(e===c.a.PROJECT&&n.includes(c.a.TASK))return!1}return 2!==t||!s||!n.includes(c.a.NONE)}function k(e){switch(e){case u.a.DETAILED:return d.a;case u.a.SUMMARY:return h.a;case u.a.WEEKLY:return p.a}}},"kKK/":function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var n=i("fXoL"),s=i("XNiG"),r=i("OmiP"),o=i("xoOP"),a=i("tyNb"),c=i("ofXK"),l=i("2rWG"),u=i("sbmM"),d=i("TmxI"),h=i("qUN8"),p=i("dlKe"),b=i("e0xV"),f=i("1kSV");function m(e,t){if(1&e&&(n.Xb(0,"label"),n.Yc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.Zc(e.title)}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12),n.Xb(1,"div",13),n.Xb(2,"input-search",14),n.jc("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.search=t,!i.offlineSearch&&i.onSearchChange()})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("debounceTime",e.debounceTime)("search",e.search)("placeholder",e.placeholder)}}function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",26),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc(2).$implicit,r=n.nc(2);return r.selectFilter(s.key,i.value),r.isFilterOptionsExpanded=!1})),n.Xb(1,"div",27),n.Yc(2),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(2).$implicit,s=n.nc(2);n.Hb("cl-active",e.value===s.filterQuery[i.key]),n.Cb(2),n.Zc(e.label)}}function w(e,t){if(1&e&&(n.Xb(0,"div",23),n.Xb(1,"div",24),n.Wc(2,v,3,3,"a",25),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(2),n.wc("ngForOf",e.options)}}function y(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",15),n.Xb(2,"div",16),n.Xb(3,"div",17),n.Yc(4,"Show"),n.Wb(),n.Xb(5,"div",18),n.Xb(6,"a",19),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.isFilterOptionsExpanded=!t.isFilterOptionsExpanded})),n.Xb(7,"span",20),n.Yc(8),n.Wb(),n.Sb(9,"img",21),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wc(10,w,3,1,"div",22),n.Ub()}if(2&e){const e=t.$implicit,i=n.nc(2);n.Cb(8),n.ad(" ",e.getLabelOf(i.filterQuery[e.key])||e.key," "),n.Cb(2),n.wc("ngIf",i.isFilterOptionsExpanded)}}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",31,32),n.jc("click",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!1)}))("keyup.enter",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!1)})),n.Yc(2),n.Wb()}if(2&e){const e=n.nc().$implicit,t=n.Lc(3),i=n.nc(2);n.Hb("cl-active",e.value===i.value),n.wc("ngbPopover",t),n.Cb(2),n.ad(" ",e.label," ")}}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",34),n.jc("click",(function(){return n.Oc(e),n.nc(4).router.navigateByUrl("upgrade")})),n.Yc(1,"Upgrade"),n.Wb()}}function S(e,t){if(1&e&&(n.Wc(0,k,2,0,"a",33),n.Yc(1)),2&e){const e=n.nc().$implicit;n.wc("ngIf",e.showUpgradeLink),n.Cb(1),n.ad(" ",e.popUpText," ")}}function x(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",35,32),n.jc("click",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!0)}))("keyup.enter",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!0)})),n.Yc(2),n.Wb()}if(2&e){const e=n.nc().$implicit,t=n.Lc(3);n.Hb("cl-dropdown-item-disabled",!0),n.wc("ngbPopover",t),n.Cb(2),n.ad(" ",e.label," ")}}function O(e,t){if(1&e&&(n.Xb(0,"div"),n.Wc(1,C,3,4,"a",28),n.Wc(2,S,2,2,"ng-template",null,29,n.Xc),n.Wc(4,x,3,4,"a",30),n.Wb()),2&e){const e=t.$implicit;n.Cb(1),n.wc("ngIf",!e.popUpText),n.Cb(3),n.wc("ngIf",e.popUpText)}}function D(e,t){1&e&&(n.Xb(0,"span",37),n.Yc(1," No results "),n.Wb())}function I(e,t){if(1&e&&(n.Vb(0),n.Wc(1,D,2,0,"span",36),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",e.search&&!e.filteredList.length)}}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",5),n.Wc(1,g,3,3,"div",6),n.Xb(2,"div",7,8),n.jc("scrolled",(function(){return n.Oc(e),n.nc().onScroll()})),n.Wc(4,y,11,2,"ng-container",9),n.Wc(5,O,5,2,"div",10),n.Wc(6,I,2,1,"ng-container",0),n.Sb(7,"span",11),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("cl-dropdown-menu-right",e.positionRight),n.Cb(1),n.wc("ngIf",e.enableSearch),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngForOf",e.filterOptions),n.Cb(1),n.wc("ngForOf",e.filteredList)("ngForTrackBy",e.trackByFn),n.Cb(1),n.wc("ngIf",e.enableSearch)}}var T=function(e){return e.STANDARD="STANDARD",e.SMALL="SMALL",e.TEXT="TEXT",e.DROPDOWN="DROPDOWN",e}({});let E=(()=>{class e{constructor(e,t){this.cd=e,this.router=t,this.enableSearch=!1,this.type=T.STANDARD,this.placeholder="Search...",this.positionRight=!1,this.labelProp="name",this.debounceTime=300,this.debounceTimeHover=100,this.isDisabled=!1,this.offlineSearch=!0,this.search="",this.isHoverEnabled=!1,this.onChanged=new n.n,this.onChangedDropdown=new n.n,this.onOpen=new n.n,this.onClose=new n.n,this.loadMore=new n.n,this.onFilterOptionChange=new n.n,this.unsubscribe$=new s.a,this.triggerPipeDetection=0,this.configClasses={[T.STANDARD]:"cl-btn cl-btn-outline-light cl-w-100 cl-text-left cl-dropdown-toggle cl-cut-text pointer",[T.SMALL]:"cl-btn cl-btn-sm cl-btn-outline-light cl-dropdown-toggle pointer",[T.TEXT]:"cl-dropdown-link-text",[T.DROPDOWN]:"cl-w-100 cl-text-left pointer cl-dropdown-toggle cl-cut-text"}}set list(e){this._list=e,this.isInitialized&&this.setSelectedLabel()}get list(){return this._list}set value(e){this._value=e,this.isInitialized&&this.setSelectedLabel()}get value(){return this._value}set filterQuery(e){this._filterQuery=Object(o.e)(e)}get filterQuery(){return this._filterQuery}ngOnInit(){this.initLabel?this.selectedLabel=this.initLabel:this.setSelectedLabel(),this.classes=this.configClasses[this.type]||"",this.isInitialized=!0}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onScroll(){this.loadMore.emit()}triggerDetection(){this.triggerPipeDetection++,this.setSelectedLabel(),this.cd.markForCheck()}onSearchChange(){this.emitFilters()}selectFilter(e,t){this.filterQuery[e]!==t&&(this.filterQuery[e]=t,this.emitFilters())}emitFilters(){const e={searchTerm:this.offlineSearch?"":this.search};this.filterOptions&&this.filterOptions.forEach(t=>{e[t.key]=this.filterQuery[t.key]}),this.onFilterOptionChange.emit(e)}opened(){this.onOpen.emit()}closed(){this.onClose.emit()}setSelectedLabel(){const e=this.list&&this.list.filter(e=>e.value===this.value)[0];this.selectedLabel=e?e.label:this.itemLabel||this.value}setValue(e,t,i){if(i)t.isOpen()?t.close():t.open();else{if(this.search="",e===this.value)return;this.value=e,this.setSelectedLabel(),this.onChanged.emit(e);const t=r.a.getDropdownOf(this.filteredList,e);this.onChangedDropdown.emit(t)}}get filteredList(){if(!this.offlineSearch)return this.list;const e=this.search&&this.search.trim().toLowerCase();return this.enableSearch&&e?this.list.filter(t=>t.label.toLowerCase().indexOf(e)>-1):this.list}trackByFn(e,t){return t.value}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(a.c))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-items"]],inputs:{title:"title",initLabel:"initLabel",itemLabel:"itemLabel",enableSearch:"enableSearch",type:"type",placeholder:"placeholder",positionRight:"positionRight",filterOptions:"filterOptions",labelProp:"labelProp",debounceTime:"debounceTime",debounceTimeHover:"debounceTimeHover",isDisabled:"isDisabled",labelPrefix:"labelPrefix",offlineSearch:"offlineSearch",search:"search",isHoverEnabled:"isHoverEnabled",list:"list",value:"value",filterQuery:"filterQuery"},outputs:{onChanged:"onChanged",onChangedDropdown:"onChangedDropdown",onOpen:"onOpen",onClose:"onClose",loadMore:"loadMore",onFilterOptionChange:"onFilterOptionChange"},decls:7,vars:10,consts:[[4,"ngIf"],[1,"cl-dropdown",3,"dropdownKey","isHoverEnabled","onOpen","onClose"],["tabindex","0","dropdownKeyButton","","dropdownKeyButtonHover","",1,"cl-dropdown-item-label",3,"ngClass","isHoverEnabled","debounceTime"],[1,"cl-dropdown-prefix","cl-d-none","cl-d-sm-inline"],["class","cl-dropdown-menu","openUpAtBottom","",3,"cl-dropdown-menu-right",4,"dropdownKeyContent"],["openUpAtBottom","",1,"cl-dropdown-menu"],["class","cl-dropdown-menu-header",4,"ngIf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["scrollArea",""],[4,"ngFor","ngForOf"],[4,"ngFor","ngForOf","ngForTrackBy"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","search","placeholder","onSearchChange"],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[1,"cl-dropdown-item-expand","cl-cut-text"],["src","assets/images/ui-icons/chevron-down.svg"],["class","cl-collapse cl-show",4,"ngIf"],[1,"cl-collapse","cl-show"],[1,"cl-collapse-content"],["doNotCloseDropdown","","class","cl-dropdown-item cl-cut-text-wrapper",3,"cl-active","click",4,"ngFor","ngForOf"],["doNotCloseDropdown","",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],["doNotCloseDropdown","",1,"cl-cut-text"],["class","cl-dropdown-item cl-cut-text","tabindex","0","triggers","manual","placement","right","container","body","clickCloseDropdown","",3,"cl-active","ngbPopover","click","keyup.enter",4,"ngIf"],["popContent",""],["class","cl-dropdown-item cl-cut-text cl-no-outline","tabindex","0","triggers","manual","placement","right","container","body","doNotCloseDropdown","",3,"cl-dropdown-item-disabled","ngbPopover","click","keyup.enter",4,"ngIf"],["tabindex","0","triggers","manual","placement","right","container","body","clickCloseDropdown","",1,"cl-dropdown-item","cl-cut-text",3,"ngbPopover","click","keyup.enter"],["featurePopover","ngbPopover"],[3,"click",4,"ngIf"],[3,"click"],["tabindex","0","triggers","manual","placement","right","container","body","doNotCloseDropdown","",1,"cl-dropdown-item","cl-cut-text","cl-no-outline",3,"ngbPopover","click","keyup.enter"],["class","cl-dropdown-item",4,"ngIf"],[1,"cl-dropdown-item"]],template:function(e,t){1&e&&(n.Wc(0,m,2,1,"label",0),n.Xb(1,"div",1),n.jc("onOpen",(function(){return t.opened()}))("onClose",(function(){return t.closed()})),n.Xb(2,"span",2),n.Xb(3,"span",3),n.Yc(4),n.Wb(),n.Yc(5),n.Wb(),n.Wc(6,j,8,10,"div",4),n.Wb()),2&e&&(n.wc("ngIf",t.title),n.Cb(1),n.Hb("cl-disabled",t.isDisabled),n.wc("dropdownKey",t.isDisabled)("isHoverEnabled",t.isHoverEnabled),n.Cb(1),n.wc("ngClass",t.classes)("isHoverEnabled",t.isHoverEnabled)("debounceTime",t.debounceTimeHover),n.Cb(2),n.Zc(t.labelPrefix),n.Cb(1),n.ad("",t.selectedLabel||t.initLabel," "))},directives:[c.u,l.a,u.a,d.a,c.r,h.a,p.a,c.t,b.a,f.L],encapsulation:2,changeDetection:0}),e})()},kRDX:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("fXoL"),s=i("MO+k"),r=i("Y4HG"),o=i("+EM1"),a=i("wd/R"),c=i("jy+1"),l=i("xoOP"),u=i("znhS"),d=i("ofXK"),h=i("F2Zd"),p=i("LPYB");let b=(()=>{class e{constructor(){this.chartDataDurationUnit="hours",this.updateDataOnChartChange=!1,this.currencySign="",this.showAllBarValues=new n.n,this.barChartType="bar",this.barChartLegend=!1,this.barChartOptions={responsive:!0,maintainAspectRatio:!1,title:{display:!0},defaultFontSize:14,defaultFontFamily:"'Roboto', sans-serif",scales:{xAxes:[{stacked:!0,gridLines:{display:!1,drawBorder:!0,lineWidth:4,color:h.d[Object(h.b)()].baseLineX},ticks:{fontSize:"12",fontColor:h.d[Object(h.b)()].dates}}],yAxes:[{stacked:!0,gridLines:{drawBorder:!1,borderDash:[1],borderDashOffset:2,color:h.d[Object(h.b)()].dotLines,zeroLineColor:h.d[Object(h.b)()].zeroLineColor},ticks:{beginAtZero:!0,min:0,fontColor:h.d[Object(h.b)()].durationY,callback:e=>0===e?"":("seconds"===this.chartDataDurationUnit&&(e/=3600),e.toFixed(e<1?2:1)+"h ")}}]},onClick:(e,t)=>{t&&t[0]&&this.showAllBarValues.emit(t[0]._index)},onHover:(e,t)=>{e.target.style.cursor=t[0]?"pointer":"default"},tooltips:{enabled:!1,custom:e=>{let t=0;e.dataPoints&&e.dataPoints.length>0&&(t=e.dataPoints[0].index);const i=[],n=[],s=this.totalDurationByDate[t];this.barChartData.forEach((e,n)=>{const r=Object(a.duration)(e.data[t],this.chartDataDurationUnit);i.push({time:r,label:e.label,percentage:(r.asSeconds()/s*100).toFixed(2),color:this.barChartColors&&this.barChartColors[n].backgroundColor||e.backgroundColor})}),i.sort(Object(c.b)(!0,e=>Object(a.duration)(e.time).asSeconds())).slice(0,10).forEach(e=>{0!==e.time.asSeconds()&&n.push({time:e.time.format(this.format,{trim:!1}),label:e.label,percentage:e.percentage,color:e.color})});const r=this.projectCountByDate&&this.projectCountByDate.length>0?this.projectCountByDate[t]-i.length:0;let o=document.getElementById("chartjs-tooltip");if(!o){o=document.createElement("div"),o.id="chartjs-tooltip";const e=Object(l.f)("table",null,"margin: 10px");o.appendChild(e),o.style.background=h.f[Object(h.b)()].bg,o.style.border="0",o.style.color=h.f[Object(h.b)()].color,o.style.margin="0",document.body.appendChild(o)}if(0===e.opacity)return void(o.style.opacity="0");o.classList.remove("above","below","no-transform"),o.classList.add(e.yAlign?e.yAlign:"no-transform");const u=this.barChartAllLabels||this.barChartLabels,d=u[t];if(e.body){const e=this.barChartEarnings&&this.barChartEarnings.length>0?Number(this.barChartEarnings[t]/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" "+this.currency:null,i=this.createContent({label:d,totalTimeInSeconds:s,earnedPerBar:e,sortedItemsPerBar:n,itemsLeftCount:r}),a=o.querySelector("table");a.innerHTML="",a.appendChild(i),a.style.margin="0",a.style.fontSize="14px"}const p=document.getElementById("barChart").getBoundingClientRect();let b=0;u.length/2<t&&(b=o.offsetWidth),o.style.opacity="1",o.style.position="absolute",o.style.left=p.left-b+window.pageXOffset+e.caretX+"px",o.style.top=p.top+window.pageYOffset+e.caretY+"px",o.style.fontFamily=e._bodyFontFamily,o.style.fontSize=e.bodyFontSize+"px",o.style.fontStyle=e._bodyFontStyle,o.style.padding=e.yPadding+"px "+e.xPadding+"px",o.style.pointerEvents="none"}}},this.plugin={afterDatasetsDraw:e=>{"bar"===e.config.type&&(this.chart=e),Object(r.b)(e,this.billableTimes,this.currencySign,this.isBillabilityType)}}}set barChartData(e){this._barChartData=e,this.isInitialized&&this.initData()}get barChartData(){return this._barChartData}set currency(e){e=e||"";const t=Object(d.L)(e.toUpperCase(),"narrow"),i=t!==e.toUpperCase();this._currency=e,this.currencySign=i?t:e}get currency(){return this._currency}ngOnInit(){this.initData(),s.plugins.register(this.plugin)}ngOnChanges(){const e=this.barChartData.filter(e=>e.data.filter(e=>e>0).length>0).length>0;this.chart&&(this.chart.config.data.datasets=this.barChartData,this.barChartColors&&this.chart.config.data.datasets.forEach((e,t)=>{e.backgroundColor=this.barChartColors[t].backgroundColor,e.hoverBackgroundColor=this.barChartColors[t].backgroundColor}),this.chart.config.data.labels=this.barChartLabels,this.chart.options.scales.yAxes[0].display=e,this.chart.update())}ngOnDestroy(){s.plugins.unregister(this.plugin)}initData(){this.updateDataOnChartChange&&(this.initTimeLabels(),this.initColors(),this.isInitialized=!0)}initTimeLabels(){const e=new u.a;this.billableTimes=this.totalDurationByDate.map(t=>e.transform(t,this.format))}initColors(){this.barChartColors=this.barChartData.map(e=>new o.a(e.backgroundColor))}createContent({label:e,totalTimeInSeconds:t,earnedPerBar:i,sortedItemsPerBar:n,itemsLeftCount:s}){const r=Object(l.f)("tbody","chart-tooltip-tbody"),o=Object(l.f)("tr","chart-tooltip-header-tr"),c=Object(l.f)("th","chart-tooltip-header-th1");c.innerText=e;const u=Object(l.f)("th","chart-tooltip-header-th2");if(u.innerText=Object(a.duration)(t,"s").format(this.format,{trim:!1}),o.appendChild(c),o.appendChild(u),i&&this.canSeeRates&&this.isBillabilityType){const e=Object(l.f)("th","chart-tooltip-header-th3");e.innerText=i,o.appendChild(e)}if(r.appendChild(o),n.forEach((e,t)=>{if(this.tooltipConfig&&this.tooltipConfig.hideTableBody)return;let i;t===n.length-1&&s>0&&!this.isBillabilityType&&(i="border-bottom:1px dotted;padding: 0 0 10px 0;");const o=Object(l.f)("tr","chart-tooltip-tr",i),a=Object(l.f)("td","chart-tooltip-long-text"),c=Object(l.f)("span");if(!this.isBillabilityType){const t=Object(l.f)("i","chart-tooltip-circle","background:"+e.color);c.appendChild(t)}const u=Object(l.f)("span");u.innerText=e.label,c.appendChild(u),a.appendChild(c);const d=Object(l.f)("td",null,"padding: 0 20px; text-align: right");d.innerText=e.time;const h=Object(l.f)("td","chart-tooltip-td3");h.innerText=e.percentage+"%",o.appendChild(a),o.appendChild(d),o.appendChild(h),r.appendChild(o)}),s>0){const e=Object(l.f)("tr","chart-tooltip-footer"),t=Object(l.f)("td",null,"margin: 0; width: 100%;padding:5px 0 0 0;");t.innerText=s+" more (click to see all)",t.setAttribute("colSpan","3"),e.appendChild(t),r.appendChild(e)}return r}chartClicked(e){}chartHovered(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["bar-chart"]],inputs:{chartDataDurationUnit:"chartDataDurationUnit",tooltipConfig:"tooltipConfig",barChartLabels:"barChartLabels",barChartAllLabels:"barChartAllLabels",barChartData:"barChartData",updateDataOnChartChange:"updateDataOnChartChange",barChartColors:"barChartColors",barChartEarnings:"barChartEarnings",totalDurationByDate:"totalDurationByDate",billableTimes:"billableTimes",format:"format",currency:"currency",isBillabilityType:"isBillabilityType",canSeeRates:"canSeeRates",projectCountByDate:"projectCountByDate"},outputs:{showAllBarValues:"showAllBarValues"},features:[n.Ab],decls:2,vars:6,consts:[["id","barChart","baseChart","",1,"dashboard__bar-chart__canvas",3,"datasets","labels","options","legend","chartType","colors","chartHover","chartClick"]],template:function(e,t){1&e&&(n.Xb(0,"div"),n.Xb(1,"canvas",0),n.jc("chartHover",(function(e){return t.chartHovered(e)}))("chartClick",(function(e){return t.chartClicked(e)})),n.Wb(),n.Wb()),2&e&&(n.Cb(1),n.wc("datasets",t.barChartData)("labels",t.barChartLabels)("options",t.barChartOptions)("legend",t.barChartLegend)("chartType",t.barChartType)("colors",t.barChartColors))},directives:[p.a],encapsulation:2}),e})()},kZ14:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("yK97"),s=i("VYrk");class r{constructor(e){this._id=e&&e.id,this._description=e&&e.description,this._tagIds=e&&e.tagIds,this._userId=e&&e.userId,this._userName=e&&e.userName,this._billable=e&&e.billable||!1,this._taskId=e&&e.taskId,this._projectId=e&&e.projectId,this._timeInterval=new n.a(e&&e.timeInterval),this._workspaceId=e&&e.workspaceId,this._isLocked=e&&e.isLocked,this._hourlyRate=e&&e.hourlyRate&&e.hourlyRate.amount||0,this._costRate=e&&e.costRate&&e.costRate.amount||0,this._customFieldValues=e&&e.customFieldValues?e.customFieldValues.map(e=>new s.a(e)):[]}get id(){return this._id}get description(){return this._description}get tagIds(){return this._tagIds}get userId(){return this._userId}get userName(){return this._userName}get billable(){return this._billable}get taskId(){return this._taskId}get projectId(){return this._projectId}get timeInterval(){return this._timeInterval}get workspaceId(){return this._workspaceId}get isLocked(){return this._isLocked}get hourlyRate(){return this._hourlyRate}get costRate(){return this._costRate}get customFieldValues(){return this._customFieldValues}set id(e){this._id=e}set description(e){this._description=e}set tagIds(e){this._tagIds=e}set userId(e){this._userId=e}set userName(e){this._userName=e}set billable(e){this._billable=e}set taskId(e){this._taskId=e}set projectId(e){this._projectId=e}set timeInterval(e){this._timeInterval=e}set workspaceId(e){this._workspaceId=e}set isLocked(e){this._isLocked=e}set hourlyRate(e){this._hourlyRate=e}set costRate(e){this._costRate=e}set customFieldValues(e){this._customFieldValues=e}static fromFulls(e){return e.map(e=>this.from(e))}static fromSummary(e){return new r({id:e.id,description:e.description,tagIds:e.tags&&e.tags.map(e=>e.id),userId:e.user.id,userName:e.user.name,billable:e.billable,taskId:e.task&&e.task.id,projectId:e.project?e.project.id:null,timeInterval:e.timeInterval,isLocked:e.isLocked})}static fromSummaries(e){return e.map(e=>this.fromSummary(e))}static ofTimeEntries(e){return e?e.map(e=>({id:e.id,description:e.description,tagIds:e.tagIds,userId:e.userId,userName:e.userName,billable:e.billable,taskId:e.taskId,projectId:e.projectId,timeInterval:e.timeInterval.toObject(),workspaceId:e.workspaceId,isLocked:e.isLocked,customFieldValues:e.customFieldValues})):[]}static from(e){return new r({id:e.id,description:e.description,tagIds:e.tags&&e.tags.map(e=>e.id),userId:e.user&&e.user.id||e.userId,userName:e.user&&e.user.name,billable:e.billable,taskId:e.task&&e.task.id,projectId:e.project&&e.project.id,timeInterval:e.timeInterval,workspaceId:e.workspaceId,isLocked:e.isLocked,customFieldValues:e.customFieldValues})}}},kojQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),s=i("ofXK"),r=i("3Pt+");function o(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"h1",7),n.Yc(2),n.Wb(),n.Xb(3,"button",8),n.jc("click",(function(){return n.Oc(e),n.nc().onClose.emit()})),n.Xb(4,"span",9),n.Sb(5,"img",10),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.Zc(e.title)}}function a(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Sb(1,"hr",11),n.Xb(2,"div",12),n.Xb(3,"label"),n.Yc(4,"Type "),n.Xb(5,"span",13),n.Yc(6),n.Wb(),n.Yc(7," to confirm"),n.Wb(),n.Xb(8,"input",14),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().confirm()}))("ngModelChange",(function(t){return n.Oc(e),n.nc().confirmationModel=t})),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc();n.Cb(6),n.Zc(e.confirmationText),n.Cb(2),n.wc("ngModel",e.confirmationModel)}}const c=["*"];let l=(()=>{class e{constructor(){this.btnText="Delete",this.showConfirmation=!0,this.confirmationText="delete",this.onClose=new n.n,this.onDelete=new n.n,this.confirmationModel=""}confirm(){!this.inProgress&&this.isValid&&this.onDelete.emit(!0)}get isValid(){return!this.showConfirmation||this.confirmationModel.trim().toLowerCase()===this.confirmationText}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["delete-confirm-modal"]],inputs:{title:"title",btnText:"btnText",inProgress:"inProgress",showConfirmation:"showConfirmation",confirmationText:"confirmationText"},outputs:{onClose:"onClose",onDelete:"onDelete"},ngContentSelectors:c,decls:9,vars:4,consts:[["class","cl-modal-header",4,"ngIf"],[1,"cl-modal-body"],[4,"ngIf"],[1,"cl-modal-footer"],[3,"click"],["ngbAutofocus","","type","button",1,"cl-btn","cl-btn-danger",3,"disabled","click"],[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"],[1,"cl-my-3"],[1,"cl-form-group","cl-text-left","cl-mb-0"],[1,"cl-text-uppercase"],["type","text","ngbAutofocus","",1,"cl-form-control",3,"ngModel","keyup.enter","ngModelChange"]],template:function(e,t){1&e&&(n.vc(),n.Wc(0,o,6,1,"div",0),n.Xb(1,"div",1),n.uc(2),n.Wc(3,a,9,2,"ng-container",2),n.Wb(),n.Xb(4,"div",3),n.Xb(5,"a",4),n.jc("click",(function(){return t.onClose.emit()})),n.Yc(6,"Cancel"),n.Wb(),n.Xb(7,"button",5),n.jc("click",(function(){return t.confirm()})),n.Yc(8),n.Wb(),n.Wb()),2&e&&(n.wc("ngIf",t.title),n.Cb(3),n.wc("ngIf",t.showConfirmation),n.Cb(4),n.wc("disabled",t.inProgress||!t.isValid),n.Cb(1),n.Zc(t.btnText))},directives:[s.u,r.c,r.s,r.v],encapsulation:2}),e})()},ksGH:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},ktZA:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("fXoL"),s=(i("NTZZ"),i("dMTz")),r=i("XLnJ"),o=i("kGbF"),a=i("wd/R"),c=i("OmiP"),l=function(e){return e.PROJECT="PROJECT",e.CLIENT="CLIENT",e.USER="USER",e.TASK="TASK",e.TIME_ENTRY="TIME_ENTRY",e.USER_GROUP="USER_GROUP",e.TIME="TIME",e.EARNINGS="EARNINGS",e.TAG="TAG",e.DATE="DATE",e}({});new c.a(l.PROJECT,"Project"),new c.a(l.CLIENT,"Client"),new c.a(l.USER,"User"),new c.a(l.TASK,"Task"),new c.a(l.TIME_ENTRY,"Time Entry"),new c.a(l.USER_GROUP,"User Group"),new c.a(l.TAG,"Tag"),new c.a(l.DATE,"Date"),new c.a(l.TIME,"Time"),new c.a(l.EARNINGS,"Earnings");var u=i("uX6w"),d=i("6Dzi"),h=i("ofXK"),p=i("1+qu");function b(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",6),n.Sb(2,"tr",9),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.nc(3);n.Cb(2),n.wc("group",e)("labels",i.labels)("format",i.format)("currency",i.report.workspace.currency)("showCurrency",i.report.filters.amountOptions!==i.amountOptions.HIDE_AMOUNT)("isProject",!i.isGroupByProject)("showTime",i.report.filters.amountOptions===i.amountOptions.HIDE_AMOUNT)("isExpandedMobileView",i.isExpandedMobileView)("isDesktop",i.isDesktop)}}function f(e,t){if(1&e&&(n.Vb(0),n.Wc(1,b,3,9,"ng-container",4),n.Ub()),2&e){const e=n.nc().$implicit;n.Cb(1),n.wc("ngForOf",e.children)}}function m(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",6),n.Sb(2,"tr",7),n.Wb(),n.Wc(3,f,2,1,"ng-container",8),n.Ub()),2&e){const e=t.$implicit,i=n.nc();n.Cb(2),n.wc("group",e)("labels",i.labels)("format",i.format)("isProject",i.isGroupByProject)("showTime",i.report.filters.amountOptions===i.amountOptions.HIDE_AMOUNT)("currency",i.report.workspace.currency)("showCurrency",i.report.filters.amountOptions!==i.amountOptions.HIDE_AMOUNT)("isDesktop",i.isDesktop)("isExpandedMobileView",i.isExpandedMobileView)("isExpanded",i.isExpanded),n.Cb(1),n.wc("ngIf",e.isExpanded)}}function g(e,t){if(1&e&&n.Sb(0,"tr",10),2&e){const e=n.nc();n.wc("group",e.weeklyResponse.totalsByDay)("labels",e.labels)("currency",e.report.workspace.currency)("showCurrency",e.report.filters.amountOptions!==e.amountOptions.HIDE_AMOUNT)("format",e.format)("isProject",!1)("showTime",e.report.filters.amountOptions===e.amountOptions.HIDE_AMOUNT)("isExpandedMobileView",e.isExpandedMobileView)("isDesktop",e.isDesktop)}}let v=(()=>{class e{constructor(){this.amountOptions=s.a,this.export=new n.n}set weeklyResponse(e){e&&(this._weeklyResponse=e,this.initData())}get weeklyResponse(){return this._weeklyResponse}initData(){const e={start:a(this.report.filters.dateRangeStart).clone(),end:a(this.report.filters.dateRangeEnd).clone()};this.weeklyResponse.totalsByDay.name="Total:",this.labels=Object(o.d)(this.weeklyResponse.groups,e),this.isGroupByProject=this.report.filters.weeklyGroup===l.PROJECT}exportAsPdf(){this.export.emit(r.a.PDF)}exportAsCsv(){this.export.emit(r.a.CSV)}exportAsXlsx(){this.export.emit(r.a.XLSX)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["shared-report-weekly"]],inputs:{hasEnterpriseFeatures:"hasEnterpriseFeatures",report:"report",isDesktop:"isDesktop",format:"format",weeklyResponse:"weeklyResponse"},outputs:{export:"export"},decls:8,vars:16,consts:[[1,"cl-card","cl-border-bottom-0","cl-mb-0",3,"amountOption","totalNumberOfEntries","isCostRateActive","isRounding","totalInfo","isAdminOrOwner","canSeeRates","workspaceInfo","isShared","exportAsPdf","exportAsCsv","exportAsExcel"],[1,"cl-page-component-wrapper"],[1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-6","cl-table-weekly-report"],["weekly-group-header","",3,"labels","mainLabel","isDesktop","isExpanded","isExpandedMobileView","onExpandMobileView","onExpand"],[4,"ngFor","ngForOf"],["weekly-group","","class","cl-bg-light cl-table-footer",3,"group","labels","currency","showCurrency","format","isProject","showTime","isExpandedMobileView","isDesktop",4,"ngIf"],[1,"cl-row-hover-shadow"],["weekly-group","",3,"group","labels","format","isProject","showTime","currency","showCurrency","isDesktop","isExpandedMobileView","isExpanded"],[4,"ngIf"],["weekly-group","",1,"cl-component-row-colored",3,"group","labels","format","currency","showCurrency","isProject","showTime","isExpandedMobileView","isDesktop"],["weekly-group","",1,"cl-bg-light","cl-table-footer",3,"group","labels","currency","showCurrency","format","isProject","showTime","isExpandedMobileView","isDesktop"]],template:function(e,t){1&e&&(n.Xb(0,"table-info",0),n.jc("exportAsPdf",(function(){return t.exportAsPdf()}))("exportAsCsv",(function(){return t.exportAsCsv()}))("exportAsExcel",(function(){return t.exportAsXlsx()})),n.Wb(),n.Xb(1,"div",1),n.Xb(2,"table",2),n.Xb(3,"thead"),n.Xb(4,"tr",3),n.jc("onExpandMobileView",(function(e){return t.isExpandedMobileView=e}))("onExpand",(function(e){return t.isExpanded=e})),n.Wb(),n.Wb(),n.Xb(5,"tbody"),n.Wc(6,m,4,11,"ng-container",4),n.Wc(7,g,1,9,"tr",5),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.wc("amountOption",t.report.filters.amountOptions)("totalNumberOfEntries",t.weeklyResponse.totals.entriesCount)("isCostRateActive",t.report.workspace.costRateActive)("isRounding",t.report.filters.rounding)("totalInfo",t.weeklyResponse.totals)("isAdminOrOwner",t.report.isAdminOrOwner)("canSeeRates",t.report.filters.amountOptions!=t.amountOptions.HIDE_AMOUNT)("workspaceInfo",t.report.workspace)("isShared",!0),n.Cb(4),n.wc("labels",t.labels)("mainLabel",t.isGroupByProject?"Project":"User")("isDesktop",t.isDesktop)("isExpanded",t.isExpanded)("isExpandedMobileView",t.isExpandedMobileView),n.Cb(2),n.wc("ngForOf",t.weeklyResponse.groups),n.Cb(1),n.wc("ngIf",t.weeklyResponse.totalsByDay))},directives:[u.a,d.a,h.t,h.u,p.a],encapsulation:2}),e})()},kwab:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._id=e&&e.id,this._name=e&&e.name,this._currency=e&&e.currency,this._imageUrl=e&&e.imageUrl,this._onlyAdminsSeeAllTimeEntries=e&&e.workspaceSettings.onlyAdminsSeeAllTimeEntries,this._onlyAdminsSeePublicProjectEntries=e&&e.workspaceSettings.onlyAdminsSeePublicProjectEntries,this._onlyAdminsSeeBillableRates=e&&e.onlyAdminsSeeBillableRates,this._trackTimeDownToSeconds=e&&e.trackTimeDownToSeconds,this._projectGroupingLabel=e&&e.workspaceSettings.projectGroupingLabel,this._costRateActive=e&&e.workspaceSettings.costRateActive,this._lockDate=e&&e.workspaceSettings.lockDate}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get currency(){return this._currency}set currency(e){this._currency=e}get imageUrl(){return this._imageUrl}set imageUrl(e){this._imageUrl=e}get onlyAdminsSeeBillableRates(){return this._onlyAdminsSeeBillableRates}set onlyAdminsSeeBillableRates(e){this._onlyAdminsSeeBillableRates=e}get trackTimeDownToSeconds(){return this._trackTimeDownToSeconds}set trackTimeDownToSeconds(e){this._trackTimeDownToSeconds=e}get onlyAdminsSeeAllTimeEntries(){return this._onlyAdminsSeeAllTimeEntries}set onlyAdminsSeeAllTimeEntries(e){this._onlyAdminsSeeAllTimeEntries=e}get onlyAdminsSeePublicProjectEntries(){return this._onlyAdminsSeePublicProjectEntries}set onlyAdminsSeePublicProjectEntries(e){this._onlyAdminsSeePublicProjectEntries=e}get projectGroupingLabel(){return this._projectGroupingLabel}set projectGroupingLabel(e){this._projectGroupingLabel=e}get costRateActive(){return this._costRateActive}set costRateActive(e){this._costRateActive=e}get lockDate(){return this._lockDate}set lockDate(e){this._lockDate=e}}},l1Fo:function(e,t,i){"use strict";i.d(t,"a",(function(){return W}));var n=i("ofXK"),s=i("3Pt+"),r=i("jJjg"),o=i("E10L"),a=i("1kSV"),c=i("9Trn"),l=i("dlKe"),u=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,l.b]]}),e})();var h=i("vwXn"),p=i("brRw"),b=i("GJLE"),f=i("Nqck"),m=i("uepX"),g=i("tZA+");let v=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,c.a,f.a,m.a,b.a,g.a]]}),e})();var w=i("tyNb"),y=i("iTUp"),C=i("NDhe"),k=i("8XW9"),S=i("0Gvx"),x=i("liYL"),O=i("s07H"),D=i("9lpP"),I=i("DeEi"),j=i("zJCG"),T=i("1Mzi"),E=i("49HY"),A=i("AEYL"),_=i("EONh");let W=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(t){return new(t||e)},providers:[A.a],imports:[[n.c,s.m,r.a,o.a,a.r,c.a,d,p.a,h.a,v,w.g,y.a,f.a,a.s,C.a,m.a,k.a,S.a,x.a,g.a,x.a,O.a,D.a,I.a,j.a,T.a,E.a,_.a]]}),e})()},l4Lo:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s,r,o,a,c){const l=[];return e.includes("col1")&&l.push(t),e.includes("col2")&&l.push(i),e.includes("col3")&&l.push(n),e.includes("col4")&&l.push(s),e.includes("col5")&&l.push(r),e.includes("col6")&&l.push(o),e.includes("col7")&&l.push(a),e.includes("col8")&&l.push(c),l}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"projectColumnDecider",type:e,pure:!0}),e})()},lBcp:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("XNiG"),s=i("2Vo4"),r=i("IgG/"),o=i("Ymxs"),a=i("tk/3"),c=i("1Tmk"),l=i("lJxs"),u=i("vkgz"),d=i("LfE4"),h=i("fXoL");let p=(()=>{class e{constructor(e,t,i){this.http=e,this.workspaceService=t,this.toaster=i,this.tags=new n.a,this.tagsBehavior$=new s.a(null),this.workspaceService.defaultWorkspace$.subscribe(()=>{this.clearTagsSubject()})}getAllTags(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new a.f).append("archived",e!==d.a.ALL?(e===d.a.ARCHIVED).toString():"");this.http.get(`/workspaces/${i}/tags`,{params:n}).pipe(Object(l.a)(e=>e.map(e=>new r.a(e)))).subscribe(e=>{this.tagsBehavior$.next(e),this.tags.next(e)},e=>{this.toaster.pop("error","Get tags failed."),this.tagsBehavior$.next(null)})}clearTagsSubject(){this.tagsBehavior$.next(null)}getAllTagsV1(e,t,i){const n=t||this.workspaceService.getDefaultWorkspaceId(),s=(new a.f).append("archived",e!==d.a.ALL?(e===d.a.ARCHIVED).toString():"").append("name",i&&i.name||"").append("page",i.page).append("page-size",i.pageSize);return this.http.get(`/v1/workspaces/${n}/tags`,{params:s}).pipe(Object(l.a)(e=>e.map(e=>new r.a(e))))}getTagIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new a.f).append("status",e.status).append("name",e.name);return this.http.get(`/workspaces/${t}/tags/report-filters/ids`,{params:i}).pipe(Object(l.a)(e=>e),Object(u.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get tag IDs failed")))}create(e,t){const i=e.trim(),n=JSON.stringify({name:i}),s=t||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${s}/tags`,n).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",`Tag ${i} has been created.`)},e=>{403!==e.status&&this.toaster.pop("error",e&&e.error&&e.error.message||`Create ${i} tag failed.`)}))}update(e){const t=e.name.trim();return this.http.put(`/workspaces/${e.workspaceId}/tags/${e.id}`,{name:t,archived:e.archived}).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",`Tag ${t} has been updated.`)},e=>{this.toaster.pop("error",e.error&&e.error.message||`Tag with name ${t} already exists.`)}))}delete(e){return this.http.delete(`/workspaces/${e.workspaceId}/tags/${e.id}`).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",`Tag ${e.name} has been deleted.`)},e=>{this.toaster.pop("error",e.error&&e.error.message||"Delete tag failed.")}))}}return e.\u0275fac=function(t){return new(t||e)(h.fc(a.b),h.fc(c.a),h.fc(o.a))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac}),e})()},lWAS:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("1G5W"),s=i("pLZG"),r=i("XNiG"),o=i("Vpr3"),a=i("kGbF"),c=i("f0Wu"),l=i("hl/z"),u=i("qfBg"),d=i("BuEj"),h=i("fXoL");let p=(()=>{class e{constructor(e,t,i){this.loader=e,this.reportService=t,this.userService=i,this.unsubscribe$=new r.a}exportAsPdf(e,t,i,r){const o=this.getLoadingText(i);this.loader.show("Exporting PDF report",o,{enableClose:!0}).pipe(Object(n.a)(this.unsubscribe$),Object(s.a)(e=>e)).subscribe(()=>window.stop()),this.reportService.downloadPdf(e,t).pipe(Object(n.a)(this.unsubscribe$)).subscribe(i=>{const n=new Blob([i],{type:"application/pdf"}),s=(r||this.setReportTitle(t,e.dateRange))+".pdf";this.loader.hide(),Object(a.b)(n,s)},e=>{this.loader.hide()})}exportAsCsv(e,t,i,r){const o=this.getLoadingText(i);this.loader.show("Exporting CSV report",o,{enableClose:!0}).pipe(Object(n.a)(this.unsubscribe$),Object(s.a)(e=>e)).subscribe(()=>window.stop()),this.reportService.downloadCsv(e,t).pipe(Object(n.a)(this.unsubscribe$)).subscribe(i=>{const n=new Blob([i],{type:"application/csv"}),s=(r||this.setReportTitle(t,e.dateRange))+".csv";this.loader.hide(),Object(a.b)(n,s)},e=>{this.loader.hide()})}exportAsExcel(e,t,i,r){const o=this.getLoadingText(i);this.loader.show("Exporting XLSX report",o,{enableClose:!0}).pipe(Object(n.a)(this.unsubscribe$),Object(s.a)(e=>e)).subscribe(()=>window.stop()),this.reportService.downloadExcel(e,t).pipe(Object(n.a)(this.unsubscribe$)).subscribe(i=>{const n=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=(r||this.setReportTitle(t,e.dateRange))+".xlsx";this.loader.hide(),Object(a.b)(n,s)},e=>{this.loader.hide()})}setReportTitle(e,t){const i={[d.a.SUMMARY]:"Clockify_Summary_Report",[d.a.DETAILED]:"Clockify_Detailed_Report",[d.a.WEEKLY]:"Clockify_Weekly_Report"},n=this.userService.getDateFormatForUser(),s=c.utc(t.start).clone().format(n),r=c.utc(t.end).clone().format(n);return`${i[e]}_${s+"-"+r}`}getLoadingText(e){return e&&e>1e4?"This can take a few minutes, please don't leave the screen":"Just a moment please"}}return e.\u0275fac=function(t){return new(t||e)(h.fc(l.a),h.fc(o.a),h.fc(u.a))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac}),e})()},liYL:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C]]}),e})()},"lp//":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("tk/3"),s=i("ydbL"),r=i("1Tmk"),o=i("vkgz"),a=i("lJxs"),c=i("Ymxs"),l=i("fXoL");let u=(()=>{class e{constructor(e,t,i){this.http=e,this.workspaceService=t,this.toaster=i}create(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`workspaces/${t}/custom-field`,{id:e.id,workspaceId:e.workspaceId,name:e.name,description:e.description,type:e.type,placeholder:e.placeholder,allowedValues:e.allowedValues,workspaceDefaultValue:e.workspaceDefaultValue,onlyAdminCanEdit:e.onlyAdminCanEdit,required:e.required,status:e.status,projectDefaultValues:e.projectDefaultValues}).pipe(Object(o.a)(()=>{this.toaster.pop("success",`Custom field ${e.name} has been created.`)},e=>{this.toaster.pop("error","Custom field not created.",e.error.message)}))}update(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`workspaces/${t}/custom-field/${e.id}`,{id:e.id,workspaceId:e.workspaceId,name:e.name,description:e.description,type:e.type,placeholder:e.placeholder,allowedValues:e.allowedValues,workspaceDefaultValue:e.workspaceDefaultValue,onlyAdminCanEdit:e.onlyAdminCanEdit,required:e.required,status:e.status,projectDefaultValues:e.projectDefaultValues}).pipe(Object(o.a)(()=>{this.toaster.pop("success",`Custom field ${e.name} has been updated.`)},e=>{this.toaster.pop("error","Custom field not updated.",e.error.message)}))}delete(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`workspaces/${t}/custom-field/${e}`).pipe(Object(o.a)(()=>{this.toaster.pop("success","Custom field has been deleted.")},e=>{this.toaster.pop("error","Custom field not deleted.",e.error.message)}))}get(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),r=(new n.f).append("name",t||"").append("status",e?e.toString():"");return this.http.get(`workspaces/${i}/custom-field/`,{params:r}).pipe(Object(a.a)(e=>e.map(e=>new s.a(e))))}editProjectDefaultValue(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`workspaces/${i}/custom-field/${e}/default/${t.projectId}`,{defaultValue:t.value,status:t.status}).pipe(Object(o.a)(()=>{this.toaster.pop("success","Custom field has been updated.")},e=>{this.toaster.pop("error","Custom field not updated.",e.error.message)}))}removeProjectDefaultValue(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`workspaces/${i}/custom-field/${e}/default/${t}`).pipe(Object(o.a)(()=>{this.toaster.pop("success","Custom field has been updated.")},e=>{this.toaster.pop("error","Custom field not updated.",e.error.message)}))}getOfProject(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`workspaces/${t}/custom-field/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(l.fc(n.b),l.fc(r.a),l.fc(c.a))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac}),e})()},mMUe:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("zJCG"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a]]}),e})()},mXn0:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i("1G5W"),s=i("fXoL"),r=i("VTb6"),o=i("UMzN"),a=i("NHP+"),c=i("1Tmk"),l=i("Jmk/"),u=i("i/9y"),d=i("Ymxs"),h=i("sNAh"),p=i("ZaaN");class b{constructor(e){this._id=e?e.id:"",this._workspaceId=e&&e.workspaceId,this._billable=!!e&&e.billable,this._hourlyRate=e?new h.a(e.hourlyRate):new h.a,this._memberships=e?e.memberships:[],this._estimate=e?e.estimate:new p.a,this._tasks=e?e.tasks:[],this._name=e?e.name:"No template",this._clientName=e&&e.client?e.client.name:""}get id(){return this._id}set id(e){this._id=e}get workspaceId(){return this._workspaceId}set workspaceId(e){this._workspaceId=e}get billable(){return this._billable}set billable(e){this._billable=e}get hourlyRate(){return this._hourlyRate}set hourlyRate(e){this._hourlyRate=e}get memberships(){return this._memberships}set memberships(e){this._memberships=e}get estimate(){return this._estimate}set estimate(e){this._estimate=e}get tasks(){return this._tasks}set tasks(e){this._tasks=e}get name(){return this._name}set name(e){this._name=e}get clientName(){return this._clientName}set clientName(e){this._clientName=e}}var f=i("i6c7"),m=(i("j4ir"),i("aLCL")),g=i("2rWG"),v=i("xoOP"),w=i("tyNb"),y=i("3Pt+"),C=i("vrD5"),k=i("sbmM"),S=i("qUN8"),x=i("ofXK"),O=i("iNpZ"),D=i("Q+u6"),I=i("1kSV"),j=i("Tg7i");const T=["clientDropdown"];function E(e,t){if(1&e){const e=s.Yb();s.Xb(0,"select-client-dropdown",28),s.jc("choosenItem",(function(t){return s.Oc(e),s.nc().showItem(t)}))("withoutClient",(function(t){return s.Oc(e),s.nc().noClient(t)})),s.Wb()}if(2&e){const e=s.nc();s.wc("selectedId",e.selectedItem&&e.selectedItem.id)("projectGroupingLabel",e.projectGroupingLabel)("workspaceId",e.workspace.id)}}function A(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",29),s.Xb(1,"input",30),s.jc("ngModelChange",(function(t){return s.Oc(e),s.nc().taskName=t}))("keyup.enter",(function(){return s.Oc(e),s.nc().createNewProject()})),s.Wb(),s.Wb()}if(2&e){const e=s.nc();s.Cb(1),s.wc("ngModel",e.taskName)}}function _(e,t){if(1&e){const e=s.Yb();s.Xb(0,"a",36),s.jc("click",(function(){s.Oc(e);const t=s.nc(2);return t.router.navigateByUrl("upgrade"),t.closeNewProjectModalWindow()})),s.Yc(1,"Upgrade"),s.Wb(),s.Yc(2," to use templates. ")}}function W(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",37),s.Xb(1,"filter-dropdown",38),s.jc("emitSelected",(function(t){return s.Oc(e),s.nc(2).selectTemplate(t)}))("loadMore",(function(t){return s.Oc(e),s.nc(2).loadMoreTemplates(t)}))("nameFilterChanged",(function(t){return s.Oc(e),s.nc(2).templateFilterChanged(t)})),s.Wb(),s.Wb()}if(2&e){const e=s.nc(2);s.Cb(1),s.wc("entity","templates")("entities",e.projectTemplates)("hideWithoutValue",!0)}}function R(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",6),s.Xb(1,"div",31),s.Xb(2,"button",32,33),s.jc("click",(function(){s.Oc(e);const t=s.Lc(3);return s.nc().showPopoverIfNeeded(t)})),s.Yc(4),s.Wb(),s.Wc(5,_,3,0,"ng-template",null,34,s.Xc),s.Wc(7,W,2,3,"div",35),s.Wb(),s.Wb()}if(2&e){const e=s.Lc(6),t=s.nc();s.Cb(1),s.wc("dropdownKey",!(t.projectTemplates&&t.projectTemplates.length>0)),s.Cb(1),s.wc("ngbPopover",e),s.Cb(2),s.ad(" ",t.selectedTemplate?t.selectedTemplate.name:"No template","")}}let P=(()=>{class e{constructor(e,t,i,n,r,o,c){this.projectService=e,this.projectServiceV1=t,this.workspaceService=i,this.clientService=n,this.taskService=r,this.toaster=o,this.router=c,this.showTemplate=!0,this.projectName="",this.close=new s.n,this.projectCreated=new s.n,this.onProjectAndTaskDataCreated=new s.n,this.projectTemplates=[],this.projectGroupingLabel="",this.selectedTemplate=new b,this.unsubscribe$=new a.a,this.templateQuery={page:1,limit:50,name:""}}ngOnInit(){this.workspace||(this.workspace=this.workspaceService.getLocalDefaultWorkspace()),this.projectName=Object(v.H)(this.projectName),this.showTaskInput=!!Object(v.H)(this.taskName),this.workspace.hasFeature(u.a.PROJECT_TEMPLATES)&&this.getProjectTemplates(!0),this.isPublic=this.workspace.isProjectPublicByDefault,this.billable=this.workspace.defaultBillableProjects,this.selectedItem=new o.a,this.selectedItem.name="Select "+this.workspace.projectGroupingLabel,this.projectGroupingLabel=this.workspace.projectGroupingLabel,this.clientService.client.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.selectedItem=e,this.showItem(e)}),this.clientService.createdClient.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.selectedItem=e,this.showItem(e)}),this.taskService.tasks.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.addTasksToTemplate(e)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get isProjectInvalid(){const e=Object(v.H)(this.projectName);return!e||e.length<2||e.length>250}getProjectTemplates(e){this.projectServiceV1.getProjectTemplates(this.templateQuery).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.projectTemplates=e?t.map(e=>new b(e)):[...this.projectTemplates,...t.map(e=>new b(e))]})}closeNewProjectModalWindow(){this.close.emit(null)}showItem(e){this.selectedItem=e,this.clientDropdown&&this.clientDropdown.closeDropdown()}noClient(e){this.selectedItem=new o.a,this.selectedItem.name=e}addColor(e){this.color=e}createNewProject(){if(this.isProjectInvalid)return void this.toaster.error("Project name has to be between 2 and 250 characters long");let e;this.inProgress=!0,e=this.selectedTemplate&&""!=this.selectedTemplate.id?this.projectService.createFromTemplate(this.selectedTemplate.id,this.projectName,this.isPublic,this.selectedItem?this.selectedItem.id:"",this.color,this.workspace.id):this.projectService.create(this.projectName,this.isPublic,this.selectedItem?this.selectedItem.id:"",this.billable,this.color,this.workspace.id),e.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.inProgress=!1,this.projectCreated.emit(e),this.projectService.project.next(e),this.projectService.newlyAddedProject.next(e);const t=Object(v.H)(this.taskName)||"";t?(this.taskService.createTask(t,e.id,this.workspace.id).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.onProjectAndTaskDataCreated.emit({project:e,task:t,workspace:this.workspace})}),this.taskName=null):this.onProjectAndTaskDataCreated.emit({project:e,task:null,workspace:this.workspace})},()=>{this.inProgress=!1})}addTasksToTemplate(e){this.selectedTemplate.tasks=e}selectTemplate(e){this.selectedTemplate=e,e.id&&this.taskService.getAllTasks(e.id,this.workspace.id)}showPopoverIfNeeded(e){this.workspace.hasFeature(u.a.PROJECT_TEMPLATES)||(e.isOpen()?e.close():e.open())}loadMoreTemplates(e){this.templateQuery.page=e.page,this.templateQuery.name=e.name,this.getProjectTemplates(!1)}templateFilterChanged(e){this.templateQuery.page=e.page,this.templateQuery.name=e.name,this.getProjectTemplates(!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(r.a),s.Rb(m.a),s.Rb(c.a),s.Rb(l.a),s.Rb(f.a),s.Rb(d.a),s.Rb(w.c))},e.\u0275cmp=s.Lb({type:e,selectors:[["new-project"]],viewQuery:function(e,t){var i;1&e&&s.ed(T,!0),2&e&&s.Kc(i=s.kc())&&(t.clientDropdown=i.first)},inputs:{showTemplate:"showTemplate",isAdminOrOwner:"isAdminOrOwner",projectName:["name","projectName"],taskName:"taskName",workspace:"workspace"},outputs:{close:"close",projectCreated:"projectCreated",onProjectAndTaskDataCreated:"onProjectAndTaskDataCreated"},decls:38,vars:6,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-form-row"],[1,"cl-col-md-6"],[1,"cl-form-group"],["type","text","preventMultipleSpaces","","ngbAutofocus","","autocomplete","off","placeholder","Enter project name",1,"cl-form-control",3,"ngModel","ngModelChange","keyup.enter"],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex"],["clientDropdown","dropdownKey"],["dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text"],["class","cl-dropdown-menu",3,"selectedId","projectGroupingLabel","workspaceId","choosenItem","withoutClient",4,"dropdownKeyContent"],["class","cl-mb-2",4,"ngIf"],[1,"cl-form-row","cl-align-items-center"],[1,"cl-col-auto"],[1,"cl-form-group","cl-mb-0"],[3,"color","closeCreateProject"],[1,"cl-col"],[1,"cl-form-group","cl-mb-0","cl-ml-2"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","customCheckPublic",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customCheckPublic",1,"cl-custom-control-label"],["src","assets/images/ui-icons/info-9.svg","title","Visible to all workspace members",1,"cl-ml-1"],["class","cl-col-md-6",4,"ngIf"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button",1,"cl-btn","cl-btn-primary",3,"disabled","click"],[1,"cl-dropdown-menu",3,"selectedId","projectGroupingLabel","workspaceId","choosenItem","withoutClient"],[1,"cl-mb-2"],["type","text","preventMultipleSpaces","","autocomplete","off","placeholder","Enter task name",1,"cl-form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"cl-form-group","cl-mb-0","cl-mt-2","cl-mt-md-0",3,"dropdownKey"],["type","button","dropdownKeyButton","","triggers","manual","placement","left","container","body",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle","cl-w-100","cl-text-left","cl-cut-text",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["popContent",""],["class","cl-dropdown-menu",4,"dropdownKeyContent"],[3,"click"],[1,"cl-dropdown-menu"],[3,"entity","entities","hideWithoutValue","emitSelected","loadMore","nameFilterChanged"]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Xb(1,"h1",1),s.Yc(2,"Create new project"),s.Wb(),s.Xb(3,"button",2),s.jc("click",(function(){return t.closeNewProjectModalWindow()})),s.Xb(4,"span"),s.Sb(5,"img",3),s.Wb(),s.Wb(),s.Wb(),s.Xb(6,"div",4),s.Xb(7,"div",5),s.Xb(8,"div",6),s.Xb(9,"div",7),s.Xb(10,"input",8),s.jc("ngModelChange",(function(e){return t.projectName=e}))("keyup.enter",(function(){return t.createNewProject()})),s.Wb(),s.Wb(),s.Wb(),s.Xb(11,"div",6),s.Xb(12,"div",7),s.Xb(13,"div",9,10),s.Xb(15,"button",11),s.Yc(16),s.Wb(),s.Wc(17,E,1,3,"select-client-dropdown",12),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(18,"div",5),s.Xb(19,"div",6),s.Wc(20,A,2,1,"div",13),s.Xb(21,"div",14),s.Xb(22,"div",15),s.Xb(23,"div",16),s.Xb(24,"color-chooser",17),s.jc("color",(function(e){return t.addColor(e)}))("closeCreateProject",(function(){return t.closeNewProjectModalWindow()})),s.Wb(),s.Wb(),s.Wb(),s.Xb(25,"div",18),s.Xb(26,"div",19),s.Xb(27,"div",20),s.Xb(28,"input",21),s.jc("ngModelChange",(function(e){return t.isPublic=e})),s.Wb(),s.Xb(29,"label",22),s.Yc(30,"Public"),s.Wb(),s.Sb(31,"img",23),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wc(32,R,8,3,"div",24),s.Wb(),s.Wb(),s.Xb(33,"div",25),s.Xb(34,"a",26),s.jc("click",(function(){return t.closeNewProjectModalWindow()})),s.Yc(35,"Cancel"),s.Wb(),s.Xb(36,"button",27),s.jc("click",(function(){return t.createNewProject()})),s.Yc(37,"Create"),s.Wb(),s.Wb()),2&e&&(s.Cb(10),s.wc("ngModel",t.projectName),s.Cb(6),s.Zc(t.selectedItem.name),s.Cb(4),s.wc("ngIf",t.showTaskInput),s.Cb(8),s.wc("ngModel",t.isPublic),s.Cb(4),s.wc("ngIf",t.showTemplate),s.Cb(4),s.wc("disabled",t.inProgress))},directives:[y.c,C.a,y.s,y.v,g.a,k.a,S.a,x.u,O.a,y.a,D.a,I.L,j.a],encapsulation:2}),e})()},msBQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.PROJECT="PROJECT",e.CLIENT="CLIENT",e.TASK="TASK",e.DESCRIPTION="DESCRIPTION",e.USER="USER",e.TAGS="TAGS",e.START_DATE="START_DATE",e.START_TIME="START_TIME",e.END_TIME="END_TIME",e.DURATION="DURATION",e.BILLABLE_AMOUNT="BILLABLE_AMOUNT",e.COST_AMOUNT="COST_AMOUNT",e.PROFIT="PROFIT",e.EMAIL="EMAIL",e.BILLABLE="BILLABLE",e.END_DATE="END_DATE",e.DECIMAL_DURATION="DECIMAL_DURATION",e.BILLABLE_RATE="BILLABLE_RATE",e.COST_RATE="COST_RATE",e.APPROVAL="APPROVAL",e.RTL="RTL",e}({})},n0VX:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("wd/R"),s=i("fXoL");let r=(()=>{class e{transform(e,t){return Object(n.duration)(e,"seconds").format(t||"HH:mm:ss",{trim:!1})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"stringDurationToTime",type:e,pure:!0}),e})()},nAmH:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("AY7I"),r=i("xoOP"),o=i("3Pt+");let a=(()=>{class e{constructor(e){this.formBuilder=e,this.inputValue="",this.label="Change name",this.editedValue=new n.n,this.isOpen=new n.n}ngOnInit(){this.initialValue=this.inputValue,this.form=this.formBuilder.group({name:[this.initialValue,[s.a.required,s.a.differentThan(this.initialValue)]]})}editValue(){this.trimName();const e=this.form.value.name;this.initialValue!==e&&this.editedValue.emit(e)}closeEditModalWindow(){this.isOpen.emit(!1)}trimName(){const e=Object(r.H)(this.form.value.name);this.setName(e)}setName(e){this.form.patchValue({name:e})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["rename-modal"]],inputs:{title:"title",inputValue:"inputValue",label:"label"},outputs:{editedValue:"editedValue",isOpen:"isOpen"},decls:18,vars:4,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"],[3,"formGroup","ngSubmit"],[1,"cl-modal-body"],[1,"cl-form-group","cl-row","cl-mb-0"],["for","editModalInput",1,"cl-col-sm-3","cl-col-form-label","cl-mb-0"],[1,"cl-col-sm-9"],["ngbAutofocus","","id","editModalInput","preventMultipleSpaces","","autocomplete","off","formControlName","name",1,"cl-form-control",3,"blur"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","submit",1,"cl-btn","cl-btn-primary",3,"disabled"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"h1",1),n.Yc(2),n.Wb(),n.Xb(3,"button",2),n.jc("click",(function(){return t.closeEditModalWindow()})),n.Xb(4,"span",3),n.Sb(5,"img",4),n.Wb(),n.Wb(),n.Wb(),n.Xb(6,"form",5),n.jc("ngSubmit",(function(){return t.editValue()})),n.Xb(7,"div",6),n.Xb(8,"div",7),n.Xb(9,"label",8),n.Yc(10),n.Wb(),n.Xb(11,"div",9),n.Xb(12,"input",10),n.jc("blur",(function(){return t.trimName()})),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(13,"div",11),n.Xb(14,"a",12),n.jc("click",(function(){return t.closeEditModalWindow()})),n.Yc(15,"Cancel"),n.Wb(),n.Xb(16,"button",13),n.Yc(17,"Save"),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.Cb(2),n.Zc(t.title),n.Cb(4),n.wc("formGroup",t.form),n.Cb(4),n.Zc(t.label),n.Cb(6),n.wc("disabled",t.form.invalid))},directives:[o.I,o.t,o.k,o.c,o.s,o.i],encapsulation:2}),e})()},nLfN:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return b})),i.d(t,"d",(function(){return p})),i.d(t,"e",(function(){return d})),i.d(t,"f",(function(){return h}));var n=i("fXoL"),s=i("ofXK");let r;try{r="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(f){r=!1}let o,a,c,l=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Object(s.P)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!r)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.B,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.B,8))},token:e,providedIn:"root"}),e})(),u=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();function d(e){return function(){if(null==o&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>o=!0}))}finally{o=o||!1}return o}()?e:!!e.capture}function h(){return!("object"!=typeof document||!("scrollBehavior"in document.documentElement.style))}function p(){if("object"!=typeof document||!document)return 0;if(null==a){const e=document.createElement("div"),t=e.style;e.dir="rtl",t.height="1px",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const i=document.createElement("div"),n=i.style;n.width="2px",n.height="1px",e.appendChild(i),document.body.appendChild(e),a=0,0===e.scrollLeft&&(e.scrollLeft=1,a=0===e.scrollLeft?1:2),e.parentNode.removeChild(e)}return a}function b(e){if(function(){if(null==c){const e="undefined"!=typeof document?document.head:null;c=!(!e||!e.createShadowRoot&&!e.attachShadow)}return c}()){const t=e.getRootNode?e.getRootNode():null;if(t instanceof ShadowRoot)return t}return null}},nLyk:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.NAME="NAME",e.CLIENT_NAME="CLIENT_NAME",e.DURATION="DURATION",e.BUDGET="BUDGET",e.PROGRESS="PROGRESS",e}({})},nQ1P:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.DAILY="DAILY",e.WEEKLY="WEEKLY",e.MONTHLY="MONTHLY",e}({})},npmQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t,i,n,s){this._project=e,this._task=t,this._durationsByDay=i,this._entries=n,this._isApproved=s}resetIsApproved(){return this.isApproved=this.entries.length&&this.entries.some(e=>e.some(e=>!!e.approvalRequestId)),this.isApproved}get isApproved(){return this._isApproved}set isApproved(e){this._isApproved=e}get project(){return this._project}set project(e){this._project=e}get task(){return this._task}set task(e){this._task=e}get durationsByDay(){return this._durationsByDay}set durationsByDay(e){this._durationsByDay=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get entries(){return this._entries}set entries(e){this._entries=e}static clone(e){return new n(e&&e.project,e&&e.task,e&&e.durationsByDay,e&&e.entries)}static getSelectedProjectsData(e){const t={},i=[],n=[];return(e||[]).filter(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.id}).forEach(e=>{var s,r;t[e.project.id]=t[e.project.id]||{isSelctedWithoutTask:!1,taskIds:[]},e.project.id&&!(null===(s=e.task)||void 0===s?void 0:s.id)&&(t[e.project.id].isSelctedWithoutTask=!0,i.push(e.project.id)),(null===(r=e.task)||void 0===r?void 0:r.id)&&(t[e.project.id].taskIds.push(e.task.id),n.push(e.task.id))}),{forbiddenProjectMap:t,allForbiddenProjectIds:i,allForbiddenTaskIds:n}}}},nss9:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.DESCRIPTION="DESCRIPTION",e.PROJECT="PROJECT",e.TASK="TASK",e.BILLABLE="BILLABLE",e.TAG="TAG",e.TAG_ADD="TAG_ADD",e.TIME="TIME",e.DATE="DATE",e.USER="USER",e.CUSTOM_FIELDS="CUSTOM_FIELDS",e.VISIBILITY="VISIBILITY",e.ESTIMATE="ESTIMATE",e.MEMBERS="MEMBERS",e.MEMBERS_ADD="MEMBERS_ADD",e.CLIENT="CLIENT",e.COLOR="COLOR",e.HOURLY_RATE="HOURLY_RATE",e.TIMEINTERVAL="TIMEINTERVAL",e}({})},ogL9:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},okBH:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i){if(t||(t=e=>e),!e)return e;const n=e.filter(e=>e.isNew),s=e.filter(e=>!e.isNew);return s.sort((function(e,i){const n=t(e).toLowerCase(),s=t(i).toLowerCase();return n<s?-1:n>s?1:0})),[...n,...s]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"sortBy",type:e,pure:!0}),e})()},pCWH:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i("tnjF"),i("O3o7"),i("iO9P");var n=i("xoOP"),s=i("fXoL"),r=i("ofXK"),o=i("sbmM");function a(e,t){1&e&&s.Sb(0,"span",6)}function c(e,t){if(1&e&&(s.Xb(0,"a",2),s.Xb(1,"span"),s.Sb(2,"i",3),s.Xb(3,"span"),s.Yc(4),s.Wb(),s.Wb(),s.Wc(5,a,1,0,"span",4),s.Xb(6,"span",5),s.Yc(7),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Db("title",e.projectAttributeTitle),s.Cb(1),s.Vc("color",e.project.color),s.Cb(1),s.Vc("background-color",e.project.color),s.Cb(2),s.bd("",e.project.name,"",e.task?": "+e.task.name:"",""),s.Cb(1),s.wc("ngIf",e.project.clientName),s.Cb(2),s.Zc(null==e.project?null:e.project.clientName)}}function l(e,t){if(1&e&&(s.Xb(0,"div",7),s.Xb(1,"div",8),s.Xb(2,"a",9),s.Sb(3,"img",10),s.Xb(4,"span",11),s.Yc(5),s.Wb(),s.Wb(),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Cb(3),s.wc("src",e.projectData.required?"assets/images/ui-icons/plus-blue-req.svg":"assets/images/ui-icons/plus-blue.svg",s.Qc),s.Cb(2),s.Zc(e.projectData.label)}}let u=(()=>{class e{constructor(){this.isDisabled=!1}set project(e){this._project=e,this.isInitiazlied&&this.setLabel()}get project(){return this._project}ngOnInit(){this.setLabel(),this.isInitiazlied=!0}setLabel(){this.projectAttributeTitle=Object(n.o)({project:this.project,task:this.task})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Lb({type:e,selectors:[["project-picker-label"],["","project-picker-label",""]],inputs:{project:"project",task:"task",projectData:"projectData",isDisabled:"isDisabled"},decls:2,vars:2,consts:[["dropdownKeyButton","","tabindex","0","class","cl-project-name cl-project-name-colored cl-dropdown-toggle cl-no-arrow cl-listing-project-client",4,"ngIf"],["dropdownKeyButton","","tabindex","0","class","cl-dropdown cl-dropdown-large cl-d-lg-custom-flex",4,"ngIf"],["dropdownKeyButton","","tabindex","0",1,"cl-project-name","cl-project-name-colored","cl-dropdown-toggle","cl-no-arrow","cl-listing-project-client"],[1,"cl-entry__project__dot"],["class","cl-h-line-divider",4,"ngIf"],[1,"cl-listing-client"],[1,"cl-h-line-divider"],["dropdownKeyButton","","tabindex","0",1,"cl-dropdown","cl-dropdown-large","cl-d-lg-custom-flex"],[1,"cl-component-divided-left","cl-no-divider-border","cl-pl-0","cl-dropdown-toggle","cl-no-arrow"],[1,"cl-d-flex","cl-color-blue"],[3,"src"],[1,"cl-ml-2"]],template:function(e,t){1&e&&(s.Wc(0,c,8,9,"a",0),s.Wc(1,l,6,2,"div",1)),2&e&&(s.wc("ngIf",t.project),s.Cb(1),s.wc("ngIf",!t.project&&!t.isDisabled))},directives:[r.u,o.a],encapsulation:2,changeDetection:0}),e})()},pOhx:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),s=i("ydbL"),r=i("VYrk"),o=i("lGQG"),a=i("4olG"),c=function(e){return e.WORKSPACE="WORKSPACE",e.PROJECT="PROJECT",e.TIMEENTRY="TIMEENTRY",e}({}),l=i("ofXK"),u=i("JO38");function d(e,t){1&e&&n.Sb(0,"div",6)}function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",10),n.Xb(1,"div",11),n.Xb(2,"custom-field-value",12),n.jc("valueChanged",(function(i){n.Oc(e);const s=t.$implicit;return n.nc(4).valueChanged(i,s)}))("manyChanged",(function(i){n.Oc(e);const s=t.$implicit;return n.nc(4).manyChanged.emit({value:i,customFieldId:s.customFieldId})})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(4);n.Cb(2),n.wc("disabled",i.isLocked&&!i.isAdmin||i.disableEdit)("timeEntryId",i.timeEntryId)("customField",e)}}function p(e,t){if(1&e&&(n.Xb(0,"div",7),n.Xb(1,"div",8),n.Wc(2,h,3,3,"div",9),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc(2);n.Cb(2),n.wc("ngForOf",t.customFieldValuesModified.slice(e.start,e.end))}}function b(e,t){if(1&e&&(n.Xb(0,"div",2),n.Wc(1,d,1,0,"div",3),n.Sb(2,"hr",4),n.Wc(3,p,3,1,"div",5),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.wc("ngIf",i.isLocked&&!i.isAdmin||i.disableEdit),n.Cb(2),n.wc("ngIf",i.customFields&&i.customFieldValuesModified.length>e.start)}}function f(e,t){if(1&e&&(n.Xb(0,"div"),n.Wc(1,b,4,2,"div",1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngForOf",e.rows)}}let m=(()=>{class e{constructor(e,t){this.cd=e,this.authService=t,this.customFieldValuesModified=[],this.entryChanged=new n.n,this.manyChanged=new n.n,this.rows=[{start:0,end:5}]}set customFields(e){this._customFields=e.map(e=>new s.a(e))}get customFields(){return this._customFields}set customFieldValues(e){this._customFieldValues=e||[],this.createList()}set projectId(e){this.hasProjectInfo=!0,this._projectId=e,this.createList()}get projectId(){return this._projectId}get customFieldValues(){return this._customFieldValues}ngOnInit(){this.isAdmin=this.authService.isAdminOrOwner(),this.cd.detectChanges()}createList(){this.hasProjectInfo&&this.customFieldValues&&(this.customFieldValuesModified=this.modifyCustomFieldValues(),this.rows=[{start:0,end:5}],this.customFieldValuesModified.length>5&&this.rows.push({start:5,end:10}),this.cd.detectChanges())}modifyCustomFieldValues(){return this.projectId?this.customFields.filter(e=>{const t=e.projectDefaultValues.filter(e=>e.projectId===this.projectId);return 0===t.length&&e.status==a.a.VISIBLE||t.filter(e=>e.status===a.a.VISIBLE).length>0}).map(e=>this.getValue(e)):this.customFields.filter(e=>e.status===a.a.VISIBLE).map(e=>this.getValue(e))}valueChanged(e,t){this.customFieldValuesModified.filter(e=>e.customFieldId===t.customFieldId)[0].sourceType=c.TIMEENTRY,this.customFieldValuesModified.filter(e=>e.customFieldId===t.customFieldId)[0].value=e,this.entryChanged.emit(this.customFieldValuesModified)}getValue(e){const t=this.customFieldValues.filter(t=>t.customFieldId===e.id);return t&&t[0]?(t[0].customField=e,t[0].sourceType=c.TIMEENTRY,t[0]):new r.a(this.timeEntryId?{customFieldId:e.id,value:null,defaultValue:this.getDefaultValue(e).value,customField:e,sourceType:c.TIMEENTRY}:{customFieldId:e.id,value:this.getDefaultValue(e).value,customField:e,sourceType:this.getDefaultValue(e).sourceType})}getDefaultValue(e){const t=e.projectDefaultValues.filter(e=>e.projectId===this.projectId);return t.length>0&&null!=t[0].value&&""!=t[0].value?{value:t[0].value,sourceType:c.PROJECT}:{value:e.workspaceDefaultValue,sourceType:c.WORKSPACE}}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(o.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["custom-fields-values"]],inputs:{customFields:"customFields",timeEntryId:"timeEntryId",isLocked:"isLocked",customFieldValues:"customFieldValues",projectId:"projectId",disableEdit:"disableEdit"},outputs:{entryChanged:"entryChanged",manyChanged:"manyChanged"},decls:1,vars:1,consts:[[4,"ngIf"],["class","cl-relative",4,"ngFor","ngForOf"],[1,"cl-relative"],["class","cl-blocker",4,"ngIf"],[1,"cl-my-0","cl-mx-lg-custom-3"],["class","cl-component-row cl-p-0 cl-my-n2",4,"ngIf"],[1,"cl-blocker"],[1,"cl-component-row","cl-p-0","cl-my-n2"],[1,"cl-row","cl-w-100","cl-align-items-center","cl-pl-3","cl-py-2","cl-py-lg-0"],["class","cl-col cl-cf-col",4,"ngFor","ngForOf"],[1,"cl-col","cl-cf-col"],[1,"cl-cut-text-wrapper"],[3,"disabled","timeEntryId","customField","valueChanged","manyChanged"]],template:function(e,t){1&e&&n.Wc(0,f,2,1,"div",0),2&e&&n.wc("ngIf",t.customFieldValuesModified)},directives:[l.u,l.t,u.a],encapsulation:2,changeDetection:0}),e})()},psuR:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("Tj/N"),s=i("wd/R"),r=i("fXoL");let o=(()=>{class e{constructor(){var e;try{this.dateFormat=(null===(e=new n.a(JSON.parse(localStorage.getItem("user"))).settings)||void 0===e?void 0:e.dateFormat)||"MM/DD/YYYY"}catch(t){this.dateFormat="MM/DD/YYYY"}}transform(e,t,i){return(i?s.tz(e,i):s(e)).format(t||this.dateFormat)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"momentFormat",type:e,pure:!0}),e})()},qUN8:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("2rWG"),s=i("fXoL");let r=(()=>{class e{constructor(e,t,i){this.templateRef=e,this.viewContainer=t,this.parent=i,this.clickSub=this.parent.click$.subscribe(e=>{e?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}forceClose(){this.parent&&this.parent.forceClose()}ngOnDestroy(){this.clickSub&&this.clickSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.M),s.Rb(s.P),s.Rb(n.a))},e.\u0275dir=s.Mb({type:e,selectors:[["","dropdownKeyContent",""]]}),e})()},qb1n:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qcnj:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},qfBg:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("XNiG"),s=i("lGQG"),r=i("Tj/N"),o=i("Ymxs"),a=i("TuVw"),c=i("OG4e"),l=i("OC8m"),u=i("f0Wu"),d=i("tk/3"),h=i("+NYR"),p=i("vkgz"),b=i("lJxs"),f=i("1Tmk"),m=i("B4wx"),g=i("huA5"),v=i("xoOP"),w=i("lvCY"),y=i("FwEu"),C=i("fXoL");let k=(()=>{class e{constructor(e,t,i,s,r,o,a,c){this.http=e,this.authService=t,this.toaster=i,this.centUSDConverter=s,this.workspaceService=r,this.notifications=o,this.navigationService=a,this.subdomainService=c,this.onTimeZoneChange$=new n.a,this.error=new n.a,this.membershipForUser=new n.a}setDefaultUserWorkspace(e,t){const i=new n.a,s=this.authService.getUser();return this.http.post(`/users/${s.id}/defaultWorkspace/${e}`,"").subscribe(e=>{this.saveUser(e),this.workspaceService.defaultWorkspaceChanged(t),this.toaster.pop("success","Default workspace changed"),i.next(e)},e=>{this.navigationService.setRedirectToUpgrade(!1),this.toaster.pop("error",e.error&&e.error.message||"Default workspace has not changed"),this.error.next(e),i.error(e)}),i}updateSettings(e){e=new r.a(this.centUSDConverter.setAllHourlyRatesFromUSDToCent(e));const t=new n.a;return this.http.put(`/users/${e.id}/settings`,e.toJson()).pipe(Object(p.a)(e=>{this.saveUser(e),this.toaster.pop("success","Settings successfully saved.")},e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Save settings failed.")})).subscribe(()=>t.next(),e=>t.error(e)),t}changeWorkspaceStatus(e,t){const i=this.workspaceService.getDefaultWorkspaceId();this.http.put(`/invitations/workspaces/${i}/users/${e.id}/status`,t).subscribe(t=>{const i=new a.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(t));this.membershipForUser.next(i),this.toaster.pop("success",`Workspace for user ${e.name} has been updated to\n            ${new a.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(t)).membershipStatus}.`),this.subdomainService.isSubdomainNotSelfhosted()||(this.navigationService.setWorkspaceIsAccepted(),this.setDefaultUserWorkspace(i.targetId))},t=>{this.error.next(t),this.toaster.pop("error",`Workspace for user ${e.name} hasn't been updated.`)})}removeDeclinedUserFromWorkspace(e,t){const i=t,n=this.workspaceService.getDefaultWorkspaceId();this.http.put(`/invitations/workspaces/${n}/users/${e.id}`,i).subscribe(t=>{this.notifications.getNotification(),this.toaster.pop("success",`Invitation for user ${e.name} has been declined.`)},e=>{this.error.next(e)})}updateSummaryReportSettings(e,t,i){this.http.put(`/users/${e.id}/summaryReportSettings`,{group:t,subgroup:i}).subscribe(e=>this.saveUser(e))}updateTimeTrackingSettings(e,t){this.http.put(`/users/${e.id}/timeTrackingSettings`,{timeTrackingManual:t}).subscribe(e=>this.saveUser(e))}updateCompactViewSettings(e){const t=this.authService.getUser();this.http.put(`/users/${t.id}/compactView`,{isCompactViewOn:e}).subscribe(e=>this.saveUser(e))}updateDashboardMeSelection(e){const t=this.authService.getUser();this.http.put(`/users/${t.id}/dashboardMe`,{dashboardSelection:e}).subscribe(e=>this.saveUser(e))}updateSettingsWithoutToast(e){e=new r.a(this.centUSDConverter.setAllHourlyRatesFromUSDToCent(e)),this.http.put(`/users/${e.id}/settings`,e.toJson()).subscribe(e=>this.saveUser(e))}getTimeZone(){const e=this.authService.getUser();return e&&e.settings?e.settings.timeZone:u.tz.guess()}checkNewsletterSubscription(e){return this.http.get("/users/newsletter/"+e).pipe(Object(p.a)(e=>{},e=>{this.error.next(e)}))}deleteUser(e,t){const i=JSON.stringify({emailForm:t});return this.http.post(`/users/${e}/delete`,i).pipe(Object(p.a)(()=>{Object(v.g)(!1),window.location.replace("account-deleted")},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||"Deleting account failed, please try again"),this.error.next(e)}))}getUserIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new d.f).append("name",e.name).append("status","ALL"===e.status?"":e.status);return this.http.get(`/users/workspaces/${t}/report-filters/ids`,{params:i}).pipe(Object(b.a)(e=>e),Object(p.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get user IDs failed")))}getUsersCount(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new d.f).append("status",e);return this.http.get(`/users/workspaces/${i}/users/count`,{params:n}).pipe(Object(b.a)(e=>e))}getTimeFormatForUser(){return this.authService.getUser()?this.authService.getUser().settings.timeFormat:m.a.HOUR12}getDateFormatForUser(){return this.authService.getUser()?this.authService.getUser().settings.dateFormat:"MM/DD/YYYY"}updateTimeZone(e,t){return this.http.put(`/users/${t}/timezone`,{timezone:e}).pipe(Object(p.a)(e=>{this.saveUser(e),this.onTimeZoneChange$.next(),this.toaster.pop("success","Successfully updated timezone")},e=>{var t;4007===e.error.code||this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Updated timezone failed")}))}getUserNames(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new d.f).append("name",e.name||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||w.j).append("status",e.status||y.a.ACTIVE);return this.http.post(`/users/workspaces/${t}/names`,{},{params:i}).pipe(Object(b.a)(e=>e),Object(p.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||"Get user IDs failed")))}saveUser(e){const t=new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e));this.authService.saveUserAndEmit(t)}}return e.\u0275fac=function(t){return new(t||e)(C.fc(d.b),C.fc(s.a),C.fc(o.a),C.fc(c.a),C.fc(f.a),C.fc(l.a),C.fc(h.a),C.fc(g.a))},e.\u0275prov=C.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qvXw:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("ksGH"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},imports:[[n.c,s.a]]}),e})()},r21O:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("wd/R"),s=i("fXoL");let r=(()=>{class e{transform(e,t){const i=Object(n.duration)(e);return i.asMilliseconds()?i.format(t,{trim:!1}):"\u2014"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"timeFormatOrDash",type:e,pure:!0}),e})()},r5nx:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6FRn"),s=i("fXoL");const r=["button"],o=["*"];let a=(()=>{class e{constructor(e){this.copyService=e,this.readonly=!0,this.autofocus=!0}ngOnInit(){this.button&&this.autofocus&&this.button.nativeElement.focus()}copyToClipboard(e){this.copyService.copyToClipboard(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(n.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["text-copy"]],viewQuery:function(e,t){var i;1&e&&s.Uc(r,!0),2&e&&s.Kc(i=s.kc())&&(t.button=i.first)},inputs:{text:"text",readonly:"readonly",autofocus:"autofocus"},ngContentSelectors:o,decls:8,vars:2,consts:[[1,"cl-input-group","cl-mb-2"],["type","text",1,"cl-form-control",3,"readonly","value"],["input",""],[1,"cl-input-group-append"],["tabindex","0","type","button",1,"cl-btn","cl-btn-outline-light",3,"click","keyup.enter","keyup.space"],["button",""]],template:function(e,t){if(1&e){const e=s.Yb();s.vc(),s.Xb(0,"div",0),s.Sb(1,"input",1,2),s.Xb(3,"div",3),s.Xb(4,"button",4,5),s.jc("click",(function(){s.Oc(e);const i=s.Lc(2);return t.copyToClipboard(i)}))("keyup.enter",(function(){s.Oc(e);const i=s.Lc(2);return t.copyToClipboard(i)}))("keyup.space",(function(){s.Oc(e);const i=s.Lc(2);return t.copyToClipboard(i)})),s.Yc(6,"Copy"),s.Wb(),s.Wb(),s.Wb(),s.uc(7)}2&e&&(s.Cb(1),s.wc("readonly",t.readonly)("value",t.text))},encapsulation:2}),e})()},rf9C:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("fXoL"),s=i("1G5W"),r=i("XNiG"),o=i("1uah"),a=i("JBiw"),c=i("8+Zx"),l=i("cGux"),u=i("hkzH"),d=i("y+xF"),h=i("lvCY"),p=i("qfBg"),b=i("Qyj8"),f=i("VTb6"),m=i("jpmO"),g=i("nLyk"),v=i("LfE4"),w=i("2rWG"),y=i("ofXK"),C=i("sbmM"),k=i("1kSV"),S=i("qUN8"),x=i("D0uv");function O(e,t){if(1&e&&(n.Xb(0,"span",4),n.Yc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.ad(" ",e.numberOfSelected," ")}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",5),n.jc("loadMore",(function(){return n.Oc(e),n.nc().loadMore()}))("onSelectAllWithTextInput",(function(t){return n.Oc(e),n.nc().selectAllIds(t)}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc();return i.onSearchChange(t),i.fetchData()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc();return i.clearOptionFilter(t),i.fetchData()}))("onCloseFilter",(function(t){return n.Oc(e),n.nc().generateIndicatorOf(t)}))("onChange",(function(t){n.Oc(e);const i=n.nc();return i.valueChanged(t),i.generateIndicatorOf(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("placeholder",e.placeholder)("filterName",e.filterName)("showSelectAll",!0)("showTitles",!0)("checkboxValues",e.valuesData)("singleMapProperty",e.singleMapProperty)("selectableMaps",e.selectableMaps)("searchValue",e.query.name)("countMap",e.countMap)("filterOptions",e.filterOptions)("countNumber",e.counts)("inProgressSelectAll",e.inProgressSelectAll)("inProgressLoading",e.inProgressLoading)}}let I=(()=>{class e{constructor(e,t,i,s){this.cd=e,this.userService=t,this.userV1Service=i,this.projectService=s,this.ReportFilter=u.h,this.labels=null,this.numberOfSelected=null,this.reachedLimit={},this.title="Select users",this.placeholder="Find user...",this.filterName="users",this.onChange=new n.n,this.selectableMaps=new a.a([]),this.countMap=new l.a,this.unsubscribe$=new r.a}set valuesData(e){e&&(e=e||new c.a({options:{status:v.a.ACTIVE}}),this._valuesData=e,c.a.updateMapFromValuesData(this.valuesData,this.selectableMaps),this.generateIndicatorOf())}get valuesData(){return this._valuesData}set constrainContainsFilter(e){const t=c.a.isContainsFiltersSame(this.constrainContainsFilter,e);this._constrainContainsFilter=e,t||(this.resetQuery(),this.selectableMaps.clearAllMaps())}get constrainContainsFilter(){return this._constrainContainsFilter}ngOnDestroy(){}ngOnInit(){let e;this.type===u.h.USERS_AND_GROUP?e=[new d.a(u.j)]:(e=[new d.a(this.type)],this.singleMapProperty=this.type),this.selectableMaps=new a.a(e),this.resetQuery()}loadMore(){this.fetchData()}fetchData(){this.type===u.h.USERS_AND_GROUP?this.getUsers():this.type===u.h.PROJECTS?this.getProjects():console.error("Dropdown checkbox wrapper: missing type")}resetQuery(){this.query={page:1,limit:h.f,name:""},this.type===u.h.PROJECTS&&(this.query.billable=m.a.BOTH,this.query.sortColumn=g.a.CLIENT_NAME),this.reachedLimit={},this.labels=null}valueChanged(e){this.valuesData=e.checkboxValues,this.selectableMaps=e.selectableMaps,this.onChange.emit(this.valuesData)}generateIndicatorOf(e){if(e)return this.numberOfSelected=e.numberOfSelected||e.numberOfSelectedApproximately,this.labels=e.label,void this.cd.markForCheck();const t=this.valuesData.getSelectedData(this.selectableMaps);this.numberOfSelected=t.numberOfSelected||t.numberOfSelectedApproximately,this.labels=t.label,this.cd.markForCheck()}selectAllIds(e){this.type===u.h.USERS_AND_GROUP?this.selectAllUserIds(e):this.type===u.h.PROJECTS&&this.selectAllProjectIds(e)}onSearchChange(e){this.clearOptionFilter({searchTerm:e},!1)}clearOptionFilter(e,t=!0){this.query.page=1,this.query.name=e.searchTerm,this.reachedLimit[u.j]=!1,this.reachedLimit[this.type]=!1,t&&(this.countMap.reset(),this.counts=null)}setInProgressLoading(e){this.inProgressLoading=e,this.cd.markForCheck()}setInProgress(e){this.inProgressSelectAll=e,this.cd.markForCheck()}setFilterIds(e,t){let i=e.isSelected;this.valuesData.exclude&&(i=!i),this.valuesData.toggleMultipleIds(this.type,t,i),this.isOpenedMap||this.generateIndicatorOf(),this.setInProgress(!1)}getUsers(e=this.query){var t;this.reachedLimit[u.j]||(e.statuses=this.valuesData.options.status,e.userGroupId=null===(t=this.constrainContainsFilter)||void 0===t?void 0:t.ids[0],this.setInProgressLoading(!0),this.getUsersEndpoint(e).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.selectableMaps.resetAll(),this.query.page++,this.selectableMaps.pushToMap(u.j,t);const i=t.length<e.limit;this.reachedLimit[u.j]=i,i&&!e.name&&(this.counts=this.selectableMaps.count()),this.setInProgressLoading(!1)},()=>this.setInProgressLoading(!1)))}getUsersEndpoint(e){return null!=e.userGroupId?this.userV1Service.getActiveUsersInGroup(e):this.userV1Service.getTeamMembers(e)}selectAllUserIds(e){const t=this.userService.getUserIds({status:this.valuesData.options.status,name:e.searchTerm});this.setInProgress(!0),Object(o.a)(t).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{let i=e.isSelected;this.valuesData.exclude&&(i=!i),this.valuesData.toggleMultipleIds(u.j,t[0],i),this.isOpenedMap||this.generateIndicatorOf(),this.setInProgress(!1)},e=>{this.setInProgress(!1)})}getProjects(e=this.query){if(this.reachedLimit[this.type])return;const t=Object.assign({},e);t.status=this.valuesData.options.status;const i=this.constrainContainsFilter||null;this.setInProgressLoading(!0),this.projectService.getProjects(t,i).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.selectableMaps.resetAll(),this.query.page++;const i=this.transformResponse(t,"clientName","No client");for(const e in i)this.selectableMaps.pushToMap(e,i[e]);const n=t.length<e.limit;this.reachedLimit[this.type]=n,n&&!e.name&&(this.counts=this.selectableMaps.count()),this.setInProgressLoading(!1)},()=>this.setInProgressLoading(!1))}transformResponse(e,t,i){const n={};return e.forEach(e=>{const s=e[t]||i;n[s]||(n[s]=[]),n[s].push(e)}),n}selectAllProjectIds(e){const t={status:this.valuesData.options.status,name:e.searchTerm,clients:this.constrainContainsFilter||null};this.setInProgress(!0),this.projectService.getProjectIds(t).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>this.setFilterIds(e,t),()=>this.setInProgress(!1))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(p.a),n.Rb(b.a),n.Rb(f.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-checkbox-wrapper"]],inputs:{type:"type",filterOptions:"filterOptions",valuesData:"valuesData",constrainContainsFilter:"constrainContainsFilter",title:"title",placeholder:"placeholder",filterName:"filterName"},outputs:{onChange:"onChange"},decls:5,vars:3,consts:[["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex",3,"onClose","onOpen"],["class","cl-badge cl-badge-filter","style","z-index: 1;",4,"ngIf"],["dropdownKeyButton","","tabindex","0","placement","bottom",1,"cl-dropdown-item-label","cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text","pointer",3,"ngbTooltip"],[3,"placeholder","filterName","showSelectAll","showTitles","checkboxValues","singleMapProperty","selectableMaps","searchValue","countMap","filterOptions","countNumber","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[1,"cl-badge","cl-badge-filter",2,"z-index","1"],[3,"placeholder","filterName","showSelectAll","showTitles","checkboxValues","singleMapProperty","selectableMaps","searchValue","countMap","filterOptions","countNumber","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.jc("onClose",(function(){return t.isOpenedMap=!1}))("onOpen",(function(){return 1===t.query.page&&t.fetchData(),t.isOpenedMap=!0})),n.Wc(1,O,2,1,"span",1),n.Xb(2,"div",2),n.Yc(3),n.Wb(),n.Wc(4,D,1,13,"dropdown-checkbox",3),n.Wb()),2&e&&(n.Cb(1),n.wc("ngIf",t.numberOfSelected),n.Cb(1),n.wc("ngbTooltip",t.labels?t.labels+" ("+t.numberOfSelected+")":""),n.Cb(1),n.ad(" ",t.labels||t.title," "))},directives:[w.a,y.u,C.a,k.Z,S.a,x.a],encapsulation:2,changeDetection:0}),e})()},rg2B:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("xoOP"),s=i("fXoL");let r=(()=>{class e{transform(e,t=2,i=2){return Object(n.u)(e)?Number(e).toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:i}):""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"roundIfWholeNumber",type:e,pure:!0}),e})()},rnVd:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("eDxF");let s=(()=>{class e{constructor(e,t){this._type=e,this._label=t}get type(){return this._type}get label(){return this._label}}return e.ABSOLUTE=new e("ABSOLUTE",""),e.TODAY=new e("TODAY",n.a.TODAY),e.YESTERDAY=new e("YESTERDAY",n.a.YESTERDAY),e.THIS_WEEK=new e("THIS_WEEK",n.a.THIS_WEEK),e.LAST_WEEK=new e("LAST_WEEK",n.a.LAST_WEEK),e.THIS_MONTH=new e("THIS_MONTH",n.a.THIS_MONTH),e.LAST_MONTH=new e("LAST_MONTH",n.a.LAST_MONTH),e.THIS_YEAR=new e("THIS_YEAR",n.a.THIS_YEAR),e.LAST_YEAR=new e("LAST_YEAR",n.a.LAST_YEAR),e.PAST_TWO_WEEKS=new e("PAST_TWO_WEEKS",n.a.PAST_TWO_WEEKS),e})()},s07H:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},s4Bo:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},sbmM:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("2rWG"),s=i("DoKE"),r=i("fXoL");let o=(()=>{class e{constructor(e,t){this.parent=e,this.el=t,this.state={visible:null,focused:null}}focus(){this.state.visible=this.parent.visible,this.parent.visible||this.parent.showDropdown()}click(){this.parent.visible?this.state.visible&&this.parent.closeDropdown():this.parent.showDropdown(),this.el.nativeElement.blur()}keyup(e){const t=e.keyCode?e.keyCode:e.which;t===s.i&&e.shiftKey?this.parent.closeDropdown():t!==s.h&&(t!==s.d||e.ctrlKey)||this.parent.toggleDropdown()}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(n.a),r.Rb(r.l))},e.\u0275dir=r.Mb({type:e,selectors:[["","dropdownKeyButton",""]],hostBindings:function(e,t){1&e&&r.jc("focus",(function(e){return t.focus(e.target)}))("click",(function(e){return t.click(e.target)}))("keydown",(function(e){return t.keyup(e)}))}}),e})()},sk7z:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("fXoL"),s=(i("NTZZ"),i("kGbF")),r=i("dMTz"),o=i("wd/R"),a=i("RkOr"),c=i("ZHjv"),l=i("lvCY"),u=i("XLnJ"),d=i("5x7/"),h=i("RWlN"),p=i("uX6w"),b=i("ofXK"),f=i("t2hA"),m=i("kRDX"),g=i("EBvn"),v=i("wlsK");const w=function(){return[]};function y(e,t){if(1&e&&n.Sb(0,"bar-chart",13),2&e){const e=n.nc();n.wc("barChartLabels",e.chartData.dates)("barChartAllLabels",e.chartData.barChartAllLabels)("projectCountByDate",n.Ac(14,w))("canSeeRates",e.report.filters.amountOptions!=e.amountOptions.HIDE_AMOUNT)("isBillabilityType",e.report.filters.billable)("currency",e.report.workspace.currency)("format",e.format)("chartDataDurationUnit","seconds")("tooltipConfig",e.tooltipConfig)("billableTimes",e.chartData.durationLabel)("barChartColors",e.chartData.colors)("barChartData",e.chartData.chartData)("barChartEarnings",e.chartData.earnings)("totalDurationByDate",e.chartData.totalDurationByDate)}}function C(e,t){if(1&e&&n.Sb(0,"summary-group",14),2&e){const e=t.$implicit,i=n.nc();n.wc("currency",i.report.workspace.currency)("format",i.format)("hideAmount",i.report.filters.amountOptions===i.amountOptions.HIDE_AMOUNT)("filterGroups",i.report.filters.groups)("isExpanded",i.isExpanded)("userFormat",i.report.filters.dateFormat||i.report.user.dateFormat)("group",e)("showEstimate",i.report.filters.showEstimate)}}function k(e,t){if(1&e&&n.Sb(0,"doughnut-chart",15),2&e){const e=n.nc();n.wc("doughnutChart",e.doughnutChart)("doughnutChartColors",e.doughnutChartColors)("doughnutChartData",e.doughnutChartData)("totalTime",e.summaryResponse.totals.totalTime)("doughnutChartLabels",e.doughnutChartLabels)("format",e.format)("canSeeRates",e.report.filters.amountOptions!=e.amountOptions.HIDE_AMOUNT)("isBillabilityType",!1)("tooltipToLeft",!0)}}let S=(()=>{class e{constructor(){this.export=new n.n,this.sortingUpdated=new n.n,this.amountOptions=r.a,this.isExpanded=!1}set summaryResponse(e){e&&(this._summaryResponse=e,this.initData())}get summaryResponse(){return this._summaryResponse}initData(){this.tooltipConfig={hideTableBody:this.report.filters.amountOptions!==r.a.EARNED};const e={start:o(this.report.filters.dateRangeStart).clone(),end:o(this.report.filters.dateRangeEnd).clone()},t=h.a[this.report.filters.zoomLevel],i=Object(s.h)(this.summaryResponse.chart.map(e=>new d.a(e)),e,t);let n;this.report.filters.groups[0]!==a.a.PROJECT&&this.summaryResponse.groups.forEach(e=>{const t=Object(c.d)(n);n=t.lastRandom,e.color=e.name?t.randomRgba:l.p}),this.rowsCount=Object(s.a)(this.summaryResponse.groups),this.chartData=Object(s.i)(i,t,this.report.filters.amountOptions,this.format);const u=this.report.filters.groups[0],p=Object(s.c)(this.summaryResponse.groups,this.summaryResponse.totals.totalTime,u,this.report.filters.dateFormat||this.report.user.dateFormat);this.doughnutChart=p.doughnutChart,this.doughnutChartColors=p.doughnutChartColors,this.doughnutChartData=p.doughnutChartData,this.doughnutChartLabels=p.doughnutChartLabels}exportAsPdf(){this.export.emit(u.a.PDF)}exportAsCsv(){this.export.emit(u.a.CSV)}exportAsXlsx(){this.export.emit(u.a.XLSX)}columnOrderChanged(e){this.sortingUpdated.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["shared-report-summary"]],inputs:{report:"report",summaryResponse:"summaryResponse",format:"format"},outputs:{export:"export",sortingUpdated:"sortingUpdated"},decls:14,vars:22,consts:[[1,"cl-card","cl-border-bottom-0","cl-mb-0",3,"amountOption","totalNumberOfEntries","limitLabel","isCostRateActive","isRounding","totalInfo","isAdminOrOwner","canSeeRates","workspaceInfo","isShared","exportAsPdf","exportAsCsv","exportAsExcel"],[1,"cl-card"],[1,"cl-card-body","cl-p-0"],[1,"cl-main-chart-container"],[3,"barChartLabels","barChartAllLabels","projectCountByDate","canSeeRates","isBillabilityType","currency","format","chartDataDurationUnit","tooltipConfig","billableTimes","barChartColors","barChartData","barChartEarnings","totalDurationByDate",4,"ngIf"],[1,"cl-card","cl-reset-component-row-last-child"],[1,"cl-card-header","cl-pl-2","cl-pl-lg-3","cl-pr-0",3,"filterGroups","projectGroupingLabel","isGroupDisabled"],[1,"cl-row","cl-m-0"],[1,"cl-col-lg-custom-8","cl-p-0","cl-reports-summary-table-col"],[1,"cl-card-header","cl-bg-white","cl-d-lg-flex","small","cl-px-2","cl-px-lg-3",3,"isExpanded","sortOrder","sortColumn","summaryFilterGroups","amountOption","showEstimate","onChange","onExpand"],[3,"currency","format","hideAmount","filterGroups","isExpanded","userFormat","group","showEstimate",4,"ngFor","ngForOf"],[1,"cl-col-lg-custom-4","p-0"],[3,"doughnutChart","doughnutChartColors","doughnutChartData","totalTime","doughnutChartLabels","currency","format","canSeeRates","isBillabilityType","tooltipToLeft",4,"ngIf"],[3,"barChartLabels","barChartAllLabels","projectCountByDate","canSeeRates","isBillabilityType","currency","format","chartDataDurationUnit","tooltipConfig","billableTimes","barChartColors","barChartData","barChartEarnings","totalDurationByDate"],[3,"currency","format","hideAmount","filterGroups","isExpanded","userFormat","group","showEstimate"],[3,"doughnutChart","doughnutChartColors","doughnutChartData","totalTime","doughnutChartLabels","currency","format","canSeeRates","isBillabilityType","tooltipToLeft"]],template:function(e,t){1&e&&(n.Xb(0,"table-info",0),n.jc("exportAsPdf",(function(){return t.exportAsPdf()}))("exportAsCsv",(function(){return t.exportAsCsv()}))("exportAsExcel",(function(){return t.exportAsXlsx()})),n.Wb(),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Wc(4,y,1,15,"bar-chart",4),n.Wb(),n.Wb(),n.Wb(),n.Xb(5,"div",5),n.Sb(6,"summary-group-header",6),n.Xb(7,"div",7),n.Xb(8,"div",8),n.Xb(9,"summary-group-title",9),n.jc("onChange",(function(e){return t.columnOrderChanged(e)}))("onExpand",(function(e){return t.isExpanded=e})),n.Wb(),n.Wc(10,C,1,8,"summary-group",10),n.Wb(),n.Xb(11,"div",11),n.Xb(12,"div",3),n.Wc(13,k,1,9,"doughnut-chart",12),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.wc("amountOption",t.report.filters.amountOptions)("totalNumberOfEntries",t.rowsCount)("limitLabel","Max 3,000 rows per PDF")("isCostRateActive",t.report.workspace.costRateActive)("isRounding",t.report.filters.rounding)("totalInfo",t.summaryResponse.totals)("isAdminOrOwner",t.report.isAdminOrOwner)("canSeeRates",t.report.filters.amountOptions!=t.amountOptions.HIDE_AMOUNT)("workspaceInfo",t.report.workspace)("isShared",!0),n.Cb(4),n.wc("ngIf",t.chartData),n.Cb(2),n.wc("filterGroups",t.report.filters.groups)("projectGroupingLabel",t.report.workspace.projectGroupingLabel)("isGroupDisabled",!0),n.Cb(3),n.wc("isExpanded",t.isExpanded)("sortOrder",t.report.filters.sortOrder)("sortColumn",t.report.filters.sortColumn)("summaryFilterGroups",t.report.filters.groups)("amountOption",t.report.filters.amountOptions)("showEstimate",t.report.filters.showEstimate),n.Cb(1),n.wc("ngForOf",t.summaryResponse.groups),n.Cb(3),n.wc("ngIf",t.doughnutChart))},directives:[p.a,b.u,f.a,a.b,b.t,m.a,g.a,v.a],encapsulation:2}),e})()},soCN:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("f0Wu"),s=i("fXoL");let r=(()=>{class e{transform(e,t){return e.slice(1).reduce((e,t)=>n.duration(t).add(e),n.duration(e[0])).format(t||"HH:mm:ss",{trim:!1})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"sumDurations",type:e,pure:!0}),e})()},t2hA:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("fXoL"),s=i("OmiP"),r=i("RkOr"),o=i("xoOP"),a=i("kGbF"),c=i("kKK/"),l=i("ofXK"),u=i("1kSV"),d=i("tyNb");const h=["estimatePopover"];function p(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",10),n.Xb(1,"dropdown-items",5),n.jc("onChanged",(function(t){return n.Oc(e),n.nc().setValue(t,2)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("isDisabled",e.isGroupDisabled)("list",e.thirdGroup)("value",e.filterGroups[2])("type","SMALL")}}function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",11,12),n.jc("click",(function(){n.Oc(e);const t=n.Lc(1);return n.nc().togglePopover(t)})),n.Xb(2,"input",13),n.jc("change",(function(){return n.Oc(e),n.nc().changeShowEstimate()})),n.Wb(),n.Xb(3,"label",14),n.Xb(4,"span",15),n.Yc(5,"Show Estimate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.wc("ngbPopover",e.estimatePopover),n.Cb(2),n.wc("disabled",!e.hasEstimateFeature)("checked",e.showEstimate)}}const f=function(){return["/upgrade"]};function m(e,t){1&e&&(n.Vb(0),n.Xb(1,"a",17),n.Yc(2,"Upgrade"),n.Wb(),n.Yc(3," to see estimates. "),n.Ub()),2&e&&(n.Cb(1),n.wc("routerLink",n.Ac(1,f)))}function g(e,t){1&e&&n.Wc(0,m,4,2,"ng-template",null,16,n.Xc)}let v=(()=>{class e{constructor(){this._filterGroups=[],this.onGroupByChanged=new n.n,this.onShowEstimateChanged=new n.n,this.onHideEstimateChanged=new n.n,this.SummaryGroupColumn=r.a}set filterGroups(e){e&&(this._filterGroups=e.slice())}get filterGroups(){return this._filterGroups}ngOnInit(){const e=Object(o.j)(this.projectGroupingLabel);this.optionList=[new s.a(r.a.NONE,"(None)"),new s.a(r.a.PROJECT,"Project"),new s.a(r.a.TASK,"Task"),new s.a(r.a.CLIENT,e),new s.a(r.a.USER,"User"),new s.a(r.a.USER_GROUP,"Groups"),new s.a(r.a.TAG,"Tag"),new s.a(r.a.TIMEENTRY,"Description"),new s.a(r.a.DATE,"Date")],this.setShowEstimateOption()}setValue(e,t){this.filterGroups[t]=e,this.isAllowed(this.filterGroups[1],1)||(this.filterGroups[1]=r.a.TIMEENTRY),this.isAllowed(this.filterGroups[2],2)||(this.filterGroups[2]=r.a.NONE),this.onGroupByChanged.emit(this.filterGroups),this.setShowEstimateOption()}get primaryGroup(){return this.optionList.filter(e=>this.isAllowed(e.value,0))}get secondaryGroup(){return this.optionList.filter(e=>this.isAllowed(e.value,1))}get thirdGroup(){return this.optionList.filter(e=>this.isAllowed(e.value,2))}isAllowed(e,t){return Object(a.f)(e,t,this.filterGroups)}changeShowEstimate(){this.hasEstimateFeature?this.onShowEstimateChanged.emit(!this.showEstimate):this.estimatePopover.open()}togglePopover(e){this.isAdminOrOwner&&e.toggle()}setShowEstimateOption(){this.showEstimateOption=this.isAdminOrOwner&&(this.filterGroups.includes(r.a.PROJECT)||this.filterGroups.includes(r.a.TASK)),this.onHideEstimateChanged.emit(this.showEstimateOption)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["summary-group-header"]],viewQuery:function(e,t){var i;1&e&&n.ed(h,!0),2&e&&n.Kc(i=n.kc())&&(t.estimatePopover=i.first)},inputs:{filterGroups:"filterGroups",projectGroupingLabel:"projectGroupingLabel",showEstimate:"showEstimate",hasEstimateFeature:"hasEstimateFeature",isAdminOrOwner:"isAdminOrOwner",isGroupDisabled:"isGroupDisabled"},outputs:{onGroupByChanged:"onGroupByChanged",onShowEstimateChanged:"onShowEstimateChanged",onHideEstimateChanged:"onHideEstimateChanged"},decls:12,vars:11,consts:[[1,"cl-d-flex","cl-w-100","cl-align-items-center","cl-justify-content-start"],[1,"cl-d-flex"],[1,"cl-pl-0","cl-d-flex","cl-align-items-center"],[1,"cl-small","cl-text-gray-9","cl-mr-3"],[1,"cl-d-flex","cl-w-lg-auto","cl-show","cl-small","cl-mr-2"],[3,"isDisabled","list","value","type","onChanged"],[1,"cl-dropdown-large-max-height",3,"isDisabled","list","value","type","onChanged"],["class","cl-d-flex cl-w-lg-auto cl-show cl-small",4,"ngIf"],["class","cl-custom-control cl-custom-switch cl-ml-2","triggers","manual","placement","right","container","body",3,"ngbPopover","click",4,"ngIf"],[4,"ngIf"],[1,"cl-d-flex","cl-w-lg-auto","cl-show","cl-small"],["triggers","manual","placement","right","container","body",1,"cl-custom-control","cl-custom-switch","cl-ml-2",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["type","checkbox","id","estimate",1,"cl-custom-control-input",3,"disabled","checked","change"],["for","estimate",1,"cl-custom-control-label","cl-d-report-rounding"],[1,"cl-small"],["estimatePopover",""],[3,"routerLink"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"span",3),n.Yc(4,"Group by:"),n.Wb(),n.Wb(),n.Xb(5,"div",4),n.Xb(6,"dropdown-items",5),n.jc("onChanged",(function(e){return t.setValue(e,0)})),n.Wb(),n.Wb(),n.Xb(7,"div",4),n.Xb(8,"dropdown-items",6),n.jc("onChanged",(function(e){return t.setValue(e,1)})),n.Wb(),n.Wb(),n.Wc(9,p,2,4,"div",7),n.Wb(),n.Wc(10,b,6,3,"div",8),n.Wb(),n.Wc(11,g,2,0,void 0,9)),2&e&&(n.Cb(6),n.wc("isDisabled",t.isGroupDisabled)("list",t.primaryGroup)("value",t.filterGroups[0])("type","SMALL"),n.Cb(2),n.wc("isDisabled",t.isGroupDisabled)("list",t.secondaryGroup)("value",t.filterGroups[1])("type","SMALL"),n.Cb(1),n.wc("ngIf",t.filterGroups[1]!==t.SummaryGroupColumn.TIMEENTRY&&t.filterGroups[1]!==t.SummaryGroupColumn.NONE),n.Cb(1),n.wc("ngIf",t.showEstimateOption),n.Cb(1),n.wc("ngIf",!t.hasEstimateFeature))},directives:[c.a,l.u,u.L,d.f],encapsulation:2,changeDetection:0}),e})()},tQGB:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("2Vo4"),s=i("XNiG"),r=i("xgIS"),o=i("/uUt"),a=i("Kj3r"),c=i("1G5W"),l=i("lvCY"),u=i("fXoL");let d=(()=>{class e{constructor(){this.breakpointLgCustomSubject$=new n.a(null),this.isBreakpointLgCustom$=this.breakpointLgCustomSubject$.asObservable().pipe(Object(o.a)()),this.breakpointLgSubject$=new n.a(null),this.isBreakpointLg$=this.breakpointLgSubject$.asObservable().pipe(Object(o.a)()),this.onHeightResizeSubject$=new n.a(null),this.onHeightResize$=this.onHeightResizeSubject$.asObservable().pipe(Object(o.a)()),this.unsubscribe$=new s.a,this.checkBreakpoints=e=>{e=e||window.innerWidth,this.breakpointLgCustomSubject$.next(e>=l.i),this.breakpointLgSubject$.next(e>=l.h)},this.checkBreakpoints(),Object(r.a)(window,"resize").pipe(Object(a.a)(200),Object(c.a)(this.unsubscribe$)).subscribe(e=>{const t=window.innerWidth,i=window.innerHeight;this.onHeightResizeSubject$.next(i),this.checkBreakpoints(t)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}scrollToTop(){try{const e=document.getElementsByTagName("html")[0];e&&e.scroll(0,0);const t=document.body;t&&t.scroll(0,0)}catch(e){}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"tZA+":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},txdI:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},uHlu:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("xoOP");class s{constructor(e){this.id=e._id||e.id,this.duration=Object(n.q)(e.duration),this.amount=e.amount||0,this.name=e.name,this.clientName=e.clientName,this.color=e.color,e.children&&(this.children=e.children.map(e=>new s(e))),this.days=e.days.map(e=>({date:e.date,duration:Object(n.q)(e.duration),amount:e.amount||0}))}}},uX6w:function(e,t,i){"use strict";i.d(t,"a",(function(){return Y}));var n=i("fXoL"),s=i("XNiG"),r=i("OmiP"),o=i("pLZG"),a=i("IzEk"),c=i("1G5W"),l=i("1Tmk"),u=(i("IQK1"),i("PW4C")),d=i("dMTz"),h=i("kKK/"),p=(i("kwab"),i("i/9y")),b=i("ofXK"),f=i("2rWG"),m=i("sbmM"),g=i("TmxI"),v=i("qUN8"),w=i("1kSV"),y=i("3Pt+"),C=i("tyNb"),k=i("znhS"),S=i("rg2B"),x=i("Lwft");const O=["featureLaborCostPopover"],D=["dropdownItemAmount"];function I(e,t){if(1&e&&(n.Vb(0),n.Sb(1,"div",24),n.Xb(2,"div",25),n.Xb(3,"div",3),n.Yc(4,"Billable:"),n.Wb(),n.Xb(5,"div",4),n.Yc(6),n.oc(7,"timeFormat"),n.Wb(),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(6),n.Zc(n.qc(7,1,null==e.totalInfo?null:e.totalInfo.totalBillableTime,e.format))}}function j(e,t){if(1&e&&(n.Vb(0),n.Sb(1,"div",24),n.Xb(2,"div",25),n.Xb(3,"div",3),n.Yc(4,"Amount:"),n.Wb(),n.Xb(5,"div",4),n.Yc(6),n.oc(7,"roundIfWholeNumber"),n.oc(8,"centsToDollars"),n.Wb(),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(6),n.bd(" ",n.pc(7,2,n.pc(8,4,null==e.totalInfo?null:e.totalInfo.totalAmount))," ",e.workspace?e.workspace.hourlyRate.currency:null==e.workspaceInfo?null:e.workspaceInfo.currency," ")}}function T(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",32),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc(2).customizeReport.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc(2).customizeReport.emit()}))("click",(function(){return n.Oc(e),n.nc(2).customizeReport.emit()})),n.Yc(1,"Customize..."),n.Wb()}}function E(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",26),n.Xb(1,"div",27),n.Xb(2,"a",28),n.jc("keyup.enter",(function(){n.Oc(e);const t=n.nc(),i=n.Lc(18);return t.downloadPdf(i)}))("keyup.space",(function(){n.Oc(e);const t=n.nc(),i=n.Lc(18);return t.downloadPdf(i)}))("click",(function(){n.Oc(e);const t=n.nc(),i=n.Lc(18);return t.downloadPdf(i)})),n.Yc(3,"Save as PDF"),n.Wb(),n.Xb(4,"a",28),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()}))("click",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()})),n.Yc(5,"Save as CSV"),n.Wb(),n.Xb(6,"a",28,29),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()}))("click",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()})),n.Yc(8,"Save as Excel"),n.Wb(),n.Wc(9,T,2,0,"a",30),n.Sb(10,"span",31),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(9),n.wc("ngIf",!e.isShared)}}function A(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",14),n.Xb(1,"a",33,34),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().shareReports.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().shareReports.emit()}))("click",(function(){n.Oc(e);const t=n.Lc(2),i=n.nc();return t.blur(),i.shareReports.emit()})),n.Sb(3,"img",35),n.Wb(),n.Wb()}}function _(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",44),n.Xb(1,"dropdown-items",45),n.jc("onChanged",(function(t){return n.Oc(e),n.nc(2).weeklyGroupChanged(t)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("list",e.weeklyGroupOptions)("value",e.weeklyGroup)("labelPrefix","Group by: ")("type","DROPDOWN")}}function W(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",46,47),n.Xb(2,"dropdown-items",48,49),n.jc("onChanged",(function(t){return n.Oc(e),n.nc(2).optionChanged(t)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2),t=n.Lc(29);n.wc("ngbPopover",t),n.Cb(2),n.wc("list",e.filterDropdowns)("value",e.amountOption)("type","DROPDOWN")}}function R(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",8),n.Xb(1,"div",36),n.Xb(2,"div",37,38),n.jc("click",(function(){n.Oc(e);const t=n.Lc(3);return n.nc().togglePopover(t)})),n.Xb(4,"input",39),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().isRounding=t}))("ngModelChange",(function(){return n.Oc(e),n.nc().roundingChanged()})),n.Wb(),n.Xb(5,"label",40),n.Xb(6,"span",41),n.Yc(7,"Rounding"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wc(8,_,2,4,"div",42),n.Wc(9,W,4,4,"div",43),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(27);n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.wc("ngbPopover",t),n.Cb(2),n.wc("ngModel",e.isRounding)("disabled",e.isRoundingDisabled),n.Cb(4),n.wc("ngIf",e.isWeekly),n.Cb(1),n.wc("ngIf",e.canSeeRates)}}const P=function(){return["/upgrade"]};function M(e,t){1&e&&(n.Xb(0,"a",50),n.Yc(1,"Upgrade"),n.Wb(),n.Yc(2," to use rounding.\n")),2&e&&n.wc("routerLink",n.Ac(1,P))}function F(e,t){1&e&&(n.Vb(0),n.Xb(1,"a",50),n.Yc(2,"Upgrade"),n.Wb(),n.Yc(3," to see labor cost. "),n.Ub()),2&e&&(n.Cb(1),n.wc("routerLink",n.Ac(1,P)))}const X=function(e){return["/workspaces",e,"settings"]};function L(e,t){if(1&e&&(n.Vb(0),n.Yc(1," You need to "),n.Xb(2,"a",50),n.Yc(3,"enable"),n.Wb(),n.Yc(4," cost rates first. "),n.Ub()),2&e){const e=n.nc(2);n.Cb(2),n.wc("routerLink",n.Bc(1,X,e.workspace.id))}}function N(e,t){if(1&e&&(n.Wc(0,F,4,2,"ng-container",5),n.Wc(1,L,5,3,"ng-container",5)),2&e){const e=n.nc();n.wc("ngIf",!e.hasLaborCostFeature),n.Cb(1),n.wc("ngIf",e.hasLaborCostFeature)}}function B(e,t){if(1&e&&n.Yc(0),2&e){const e=n.nc();n.ad(" ",e.limitLabel,"\n")}}let Y=(()=>{class e{constructor(e,t,i){this.workspaceService=e,this.uiSettingsService=t,this.cd=i,this.isShared=!1,this.limitLabel="Max 3,000 time entries per PDF",this.onAmountOptionChange=new n.n,this.onWeeklyGroupChange=new n.n,this.onRoundingChange=new n.n,this.exportAsPdf=new n.n,this.exportAsCsv=new n.n,this.exportAsExcel=new n.n,this.shareReports=new n.n,this.customizeReport=new n.n,this.filterDropdowns=[],this.weeklyGroupOptions=[new r.a("PROJECT","Project"),new r.a("USER","User")],this.format="HH:mm:ss",this.unsubscribe$=new s.a,this.AmountOptions=d.a}set totalInfo(e){this._totalInfo=e,this.subscribeToInfoChanges()}get totalInfo(){return this._totalInfo}set isAdminOrOwner(e){this._isAdminOrOwner=e,this.isInitialized&&this.initFilterDropdown()}get isAdminOrOwner(){return this._isAdminOrOwner}ngOnInit(){this.workspaceService.defaultWorkspace$.pipe(Object(o.a)(e=>!!e),Object(a.a)(1),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.hasLaborCostFeature=e.hasFeature(p.a.LABOR_COST),this.hasRoundigFeature=e.hasFeature(p.a.WORKSPACE_TIME_ROUNDING),this.workspace=e,this.format=e.getTimeFormat()}),this.initFilterDropdown(),this.isInitialized=!0}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete(),this.subscription&&this.subscription.unsubscribe()}get isRoundingDisabled(){return!this.hasRoundigFeature&&!this.isRounding}get tooltip(){if(!this.hasRoundigFeature)return"";if(!this.isRounding)return"Time rounding OFF";let e=Number(this.workspace.round.minutes),t=e>=60?"hour":"minute";return e=e>=60?e/60:e,t=e>1?t+"s":t,`${this.workspace.round.round} ${e} ${t}`}downloadPdf(e){this.totalNumberOfEntries&&this.totalNumberOfEntries>3e3?e.open():this.exportAsPdf.emit()}initFilterDropdown(){if(void 0===this.isAdminOrOwner)return;const e=[new r.a(d.a.EARNED,"Show amount")];(this.isAdminOrOwner||this.hasLaborCostFeature&&this.isCostRateActive)&&(e.push(new r.a(d.a.COST,"Show cost")),e.push(new r.a(d.a.PROFIT,"Show profit"))),this.isWeekly?e.unshift(new r.a(d.a.HIDE_AMOUNT,"Show time")):e.push(new r.a(d.a.HIDE_AMOUNT,"Hide amount")),this.filterDropdowns=e}weeklyGroupChanged(e){this.weeklyGroup=e,this.onWeeklyGroupChange.emit(e)}optionChanged(e){if(!this.checkIsAmountOptionAvailable(e))return this.dropdownItemAmount.setValue(this.amountOption,null,!1),void this.featureLaborCostPopover.open();e===this.amountOption||(this.amountOption=e,this.onAmountOptionChange.emit(e))}checkIsAmountOptionAvailable(e){return!(e===d.a.COST||e===d.a.PROFIT)||!!this.hasLaborCostFeature&&!!this.isCostRateActive}roundingChanged(){this.uiSettingsService.setWorkspaceRounding(this.workspace.id,this.isRounding),this.onRoundingChange.emit(this.isRounding)}subscribeToInfoChanges(){this.totalInfo&&(this.subscription&&this.subscription.unsubscribe(),this.subscription=this.totalInfo.onChange$.pipe(Object(c.a)(this.unsubscribe$)).subscribe(()=>this.cd.markForCheck()))}togglePopover(e){this.isRoundingDisabled&&this.isAdminOrOwner&&(e.isOpen()?e.close():e.open())}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(l.a),n.Rb(u.a),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["table-info"]],viewQuery:function(e,t){var i;1&e&&(n.ed(O,!0),n.ed(D,!0)),2&e&&(n.Kc(i=n.kc())&&(t.featureLaborCostPopover=i.first),n.Kc(i=n.kc())&&(t.dropdownItemAmount=i.first))},inputs:{amountOption:"amountOption",isShared:"isShared",totalInfo:"totalInfo",isCostRateActive:"isCostRateActive",isWeekly:"isWeekly",weeklyGroup:"weeklyGroup",isRounding:"isRounding",isAdminOrOwner:"isAdminOrOwner",canSeeRates:"canSeeRates",showCustomize:"showCustomize",workspaceInfo:"workspaceInfo",totalNumberOfEntries:"totalNumberOfEntries",limitLabel:"limitLabel"},outputs:{onAmountOptionChange:"onAmountOptionChange",onWeeklyGroupChange:"onWeeklyGroupChange",onRoundingChange:"onRoundingChange",exportAsPdf:"exportAsPdf",exportAsCsv:"exportAsCsv",exportAsExcel:"exportAsExcel",shareReports:"shareReports",customizeReport:"customizeReport"},decls:32,vars:9,consts:[[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0","cl-pt-2","cl-pt-lg-custom-0","cl-d-block","cl-d-lg-custom-flex"],[1,"cl-d-flex","cl-d-flex","cl-flex-column","cl-flex-sm-row"],[1,"cl-d-flex","cl-align-items-end"],[1,"cl-h6","cl-mb-0","cl-lh-1"],[1,"cl-h2","cl-mb-0","cl-ml-2","cl-lh-1"],[4,"ngIf"],[1,"cl-border-bottom","cl-mr-2","cl-mr-lg-3","cl-mt-2"],[1,"cl-d-flex","cl-flex-column","cl-flex-sm-row"],[1,"cl-d-flex","cl-min-height-40"],["dropdownKey","",1,"cl-dropdown","cl-d-flex","cl-w-100","cl-w-lg-auto","cl-ml-n2","cl-ml-lg-n3"],["dropdownKeyButton","","dropdownKeyButtonHover","","tabindex","0",1,"cl-component-divided-left","pointer","cl-remove-divider-mob","cl-dropdown-toggle","cl-small"],["class","cl-dropdown-menu","openUpAtBottom","",4,"dropdownKeyContent"],["triggers","manual","placement","bottom",3,"ngbPopover"],["pdfLimitPopover","ngbPopover"],[1,"cl-component-divided-left"],["tabindex","0",3,"keyup.enter","keyup.space","click"],["printLink",""],["src","assets/images/ui-icons/print.svg"],["class","cl-component-divided-left",4,"ngIf"],[1,"cl-border-bottom","cl-mr-2","cl-d-block","cl-d-sm-none"],["class","cl-d-flex cl-min-height-40",4,"ngIf"],["popContent",""],["popContentLaborCost",""],["popContentPdf",""],[1,"cl-border-bottom","cl-mr-2","cl-mr-lg-3","cl-mt-2","cl-d-block","cl-d-sm-none"],[1,"cl-d-flex","cl-align-items-end","cl-ml-sm-2","cl-mt-2","cl-mt-sm-0"],["openUpAtBottom","",1,"cl-dropdown-menu"],[1,"cl-scroll-area"],["clickCloseDropdown","","tabindex","0",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],["excelLink",""],["clickCloseDropdown","","class","cl-dropdown-item cl-border-top","tabindex","0",3,"keyup.enter","keyup.space","click",4,"ngIf"],["dropdownClose","","tabindex","0"],["clickCloseDropdown","","tabindex","0",1,"cl-dropdown-item","cl-border-top",3,"keyup.enter","keyup.space","click"],["tabindex","0","data-share-btn","",3,"keyup.enter","keyup.space","click"],["shareLink",""],["src","assets/images/ui-icons/share.svg"],["placement","left",1,"cl-component-divided-left","cl-remove-divider-xs",3,"ngbTooltip"],["triggers","manual","placement","left","container","body",1,"cl-custom-control","cl-custom-switch",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["type","checkbox","id","rounding",1,"cl-custom-control-input",3,"ngModel","disabled","ngModelChange"],["for","rounding",1,"cl-custom-control-label","cl-d-report-rounding"],[1,"cl-small"],["class","cl-d-flex cl-w-lg-auto cl-component-divided-left cl-small cl-mr-n3",4,"ngIf"],["class","cl-d-flex cl-w-lg-auto cl-component-divided-left cl-small cl-mr-n3","triggers","manual","placement","left","container","body",3,"ngbPopover",4,"ngIf"],[1,"cl-d-flex","cl-w-lg-auto","cl-component-divided-left","cl-small","cl-mr-n3"],[1,"cl-d-report-amount-dropdown","cl-xl-down-r-0-wrapper",3,"list","value","labelPrefix","type","onChanged"],["triggers","manual","placement","left","container","body",1,"cl-d-flex","cl-w-lg-auto","cl-component-divided-left","cl-small","cl-mr-n3",3,"ngbPopover"],["featureLaborCostPopover","ngbPopover"],[1,"cl-d-report-amount-dropdown","cl-xl-down-r-0-wrapper",3,"list","value","type","onChanged"],["dropdownItemAmount",""],[3,"routerLink"]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Yc(4,"Total:"),n.Wb(),n.Xb(5,"div",4),n.Yc(6),n.oc(7,"timeFormat"),n.Wb(),n.Wb(),n.Wc(8,I,8,4,"ng-container",5),n.Wc(9,j,9,6,"ng-container",5),n.Wb(),n.Sb(10,"div",6),n.Xb(11,"div",7),n.Xb(12,"div",8),n.Xb(13,"div",9),n.Xb(14,"div",10),n.Yc(15," Export "),n.Wb(),n.Wc(16,E,11,1,"div",11),n.Wb(),n.Sb(17,"div",12,13),n.Xb(19,"div",14),n.Xb(20,"a",15,16),n.jc("keyup.enter",(function(){n.Oc(e);const i=n.Lc(18);return t.downloadPdf(i)}))("keyup.space",(function(){n.Oc(e);const i=n.Lc(18);return t.downloadPdf(i)}))("click",(function(){n.Oc(e);const i=n.Lc(21),s=n.Lc(18);return i.blur(),t.downloadPdf(s)})),n.Sb(22,"img",17),n.Wb(),n.Wb(),n.Wc(23,A,4,0,"div",18),n.Wb(),n.Sb(24,"div",19),n.Wc(25,R,10,6,"div",20),n.Wb(),n.Wb(),n.Wc(26,M,3,2,"ng-template",null,21,n.Xc),n.Wc(28,N,2,2,"ng-template",null,22,n.Xc),n.Wc(30,B,1,1,"ng-template",null,23,n.Xc)}if(2&e){const e=n.Lc(31);n.Cb(6),n.Zc(n.qc(7,6,null==t.totalInfo?null:t.totalInfo.totalTime,t.format)),n.Cb(2),n.wc("ngIf",t.amountOption===t.AmountOptions.EARNED),n.Cb(1),n.wc("ngIf",t.canSeeRates&&t.amountOption!==t.AmountOptions.HIDE_AMOUNT),n.Cb(8),n.wc("ngbPopover",e),n.Cb(6),n.wc("ngIf",!t.workspaceInfo||!t.workspaceInfo.id),n.Cb(2),n.wc("ngIf",!t.workspaceInfo||!t.workspaceInfo.id)}},directives:[b.u,f.a,m.a,g.a,v.a,w.L,w.Z,y.a,y.s,y.v,h.a,C.f],pipes:[k.a,S.a,x.a],encapsulation:2,changeDetection:0}),e})()},uepX:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("iTUp"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.a]]}),e})()},ujiw:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("ds6q"),s=i("j4ir"),r=i("1Tmk"),o=i("pLZG"),a=i("1G5W"),c=i("zP0r"),l=i("IzEk"),u=i("qfBg"),d=i("FwEu"),h=i("Jzhb"),p=i("HApq"),b=i("fXoL"),f=i("tyNb"),m=i("1kSV");function g(e,t){if(1&e){const e=b.Yb();b.Xb(0,"div",12),b.Xb(1,"a",13),b.jc("keyup.enter",(function(){b.Oc(e);const t=b.nc(),i=b.Lc(17);return t.openCreateModal(i)}))("keyup.space",(function(){b.Oc(e);const t=b.nc(),i=b.Lc(17);return t.openCreateModal(i)}))("click",(function(){b.Oc(e);const t=b.nc(),i=b.Lc(17);return t.openCreateModal(i)})),b.Yc(2," Create new "),b.Xb(3,"span",14),b.Yc(4,"workspace"),b.Wb(),b.Wb(),b.Wb()}}function v(e,t){if(1&e){const e=b.Yb();b.Xb(0,"workspace-row",15),b.jc("setAsDefault",(function(){b.Oc(e);const i=t.$implicit;return b.nc().setAsDefault(i)}))("openSettings",(function(){b.Oc(e);const i=t.$implicit;return b.nc().openSettingsPage(i)}))("onLeave",(function(){b.Oc(e);const i=t.$implicit,n=b.nc(),s=b.Lc(15);return n.openDeleteModal(i,s)})),b.Wb()}if(2&e){const e=t.$implicit,i=b.nc();b.wc("defaultWorkspaceId",i.defaultWorkspace.id)("workspace",e)("hasSettingsPermision",i.settingsPermissionMap[e.id])("hasOnlyOneWorkspace",i.workspaces.lenght<=1)("isOwner",i.ownerMap[e.id])("canLeave",e.id!==i.defaultWorkspace.id&&e.isOwnerAllowedToLeave)}}function w(e,t){if(1&e){const e=b.Yb();b.Xb(0,"delete-workspace-modal",16),b.jc("onClose",(function(i){return b.Oc(e),t.$implicit.close(i)})),b.Wb()}if(2&e){const e=b.nc();b.wc("workspaceData",e.deleteWorkspaceData)}}function y(e,t){if(1&e){const e=b.Yb();b.Xb(0,"modal-header",17),b.jc("onClose",(function(i){return b.Oc(e),t.$implicit.close(i)})),b.Wb(),b.Xb(1,"create-workspace-modal",18),b.jc("onClose",(function(i){return b.Oc(e),t.$implicit.close(i)})),b.Wb()}2&e&&b.wc("title","Create new workspace")}let C=(()=>{class e{constructor(e,t,i,s,r,o){this.userService=e,this.router=t,this.modalService=i,this.systemSettingsService=s,this.workspaceService=r,this.cd=o,this.unsubscribe$=new n.Subject}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngOnInit(){this.settingsPermissionMap=new Map,this.leaveWorkspacePermissionMap=new Map,this.ownerMap=new Map,this.workspaceService.defaultWorkspace$.pipe(Object(o.a)(e=>!!e),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.defaultWorkspace=e,this.cd.detectChanges()}),this.workspaceService.workspaces$.pipe(Object(o.a)(e=>null!==e),Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{const t=!this.workspaces;this.workspaces=e.map(e=>s.a.clone(e)),t&&this.getPermissions(),this.cd.detectChanges()}),this.systemSettingsService.systemSettings.pipe(Object(l.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.hasPermissionToCreateWorkspace=!e.createWorkspaceForbidden,this.cd.detectChanges()}),this.systemSettingsService.getSystemSettings(),this.workspaceService.getAllWorkspaces()}openSettingsPage(e){e.id===this.defaultWorkspace.id?this.router.navigate(["workspaces",e.id,"settings"]):this.setAsDefault(e,!0)}openDeleteModal(e,t){if(this.isModalOpen)return;this.isModalOpen=!0;const i=e.id;this.deleteWorkspaceData={id:i,name:e.name,subscription:e.featureSubscriptionType,type:this.ownerMap[i]?"delete":"leave"},this.cd.detectChanges(),this.modalService.open(t,{centered:!0}).result.then(e=>{this.setIsOwnerAllowedToLeave(this.workspaces),this.cd.detectChanges(),setTimeout(()=>this.isModalOpen=!1,100)},()=>setTimeout(()=>this.isModalOpen=!1,100))}openCreateModal(e){this.isModalOpen||(this.isModalOpen=!0,this.modalService.open(e,{centered:!0,size:"lg"}).result.then(e=>{e&&(this.leaveWorkspacePermissionMap[e.id]=!0,this.settingsPermissionMap[e.id]=!0,this.ownerMap[e.id]=!0,this.setIsOwnerAllowedToLeave(this.workspaces),this.cd.detectChanges()),setTimeout(()=>this.isModalOpen=!1,100)},()=>setTimeout(()=>this.isModalOpen=!1,100)))}setAsDefault(e,t){this.workspaceInProgress!==e.id&&(this.workspaceInProgress=e.id,this.userService.setDefaultUserWorkspace(e.id,e).subscribe(i=>{this.workspaceInProgress=null,t&&this.router.navigate(["workspaces",e.id,"settings"])},e=>{this.workspaceInProgress=null}))}getPermissions(){this.workspaceService.workspacesPermissionsForUser.pipe(Object(l.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{const t=e.filter(e=>e.name===h.a.OWNER).map(e=>e.objectId);t.forEach(e=>this.ownerMap[e]=!0);const i=e.filter(e=>e.name===h.a.OWNER||e.name===h.a.ADMIN).map(e=>e.objectId);this.workspaces.forEach(e=>{t.indexOf(e.id)>-1&&(this.leaveWorkspacePermissionMap[e.id]=!0),i.indexOf(e.id)>-1&&(this.settingsPermissionMap[e.id]=!0)}),this.setIsOwnerAllowedToLeave(this.workspaces),this.cd.detectChanges()}),this.workspaceService.getPermissionsForUserOnWorkspaces(this.workspaces.map(e=>e.id))}setIsOwnerAllowedToLeave(e){e=e.map(e=>(e.isOwnerAllowedToLeave=!this.leaveWorkspacePermissionMap[e.id]||!this.isMoreThanOneMemberIn(e),e))}isMoreThanOneMemberIn(e){return e.memberships.filter(e=>e.membershipStatus===d.a.ACTIVE).length>1}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(u.a),b.Rb(f.c),b.Rb(m.q),b.Rb(p.a),b.Rb(r.a),b.Rb(b.h))},e.\u0275cmp=b.Lb({type:e,selectors:[["workspaces"]],decls:18,vars:2,consts:[[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],["class","cl-d-flex cl-align-items-center cl-justify-content-end",4,"ngIf"],[1,"cl-card"],[1,"cl-card-header","cl-px-2","cl-px-lg-3"],[1,"cl-h6","cl-mb-0"],["class","cl-component-row cl-component-row-divide-md cl-px-0",3,"defaultWorkspaceId","workspace","hasSettingsPermision","hasOnlyOneWorkspace","isOwner","canLeave","setAsDefault","openSettings","onLeave",4,"ngFor","ngForOf"],["deleteModal",""],["createModal",""],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-end"],["tabindex","0",1,"cl-btn","cl-btn-outline-primary",3,"keyup.enter","keyup.space","click"],[1,"cl-d-none","cl-d-md-inline"],[1,"cl-component-row","cl-component-row-divide-md","cl-px-0",3,"defaultWorkspaceId","workspace","hasSettingsPermision","hasOnlyOneWorkspace","isOwner","canLeave","setAsDefault","openSettings","onLeave"],[3,"workspaceData","onClose"],[3,"title","onClose"],[3,"onClose"]],template:function(e,t){1&e&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"div",2),b.Xb(3,"div",3),b.Xb(4,"div",4),b.Xb(5,"h1"),b.Yc(6,"Workspaces"),b.Wb(),b.Wb(),b.Xb(7,"div",4),b.Wc(8,g,5,0,"div",5),b.Wb(),b.Wb(),b.Wb(),b.Xb(9,"div",6),b.Xb(10,"div",7),b.Xb(11,"span",8),b.Yc(12,"Workspaces"),b.Wb(),b.Wb(),b.Wc(13,v,1,6,"workspace-row",9),b.Wb(),b.Wb(),b.Wb(),b.Wc(14,w,1,1,"ng-template",null,10,b.Xc),b.Wc(16,y,2,1,"ng-template",null,11,b.Xc)),2&e&&(b.Cb(8),b.wc("ngIf",t.hasPermissionToCreateWorkspace),b.Cb(5),b.wc("ngForOf",t.workspaces))},encapsulation:2,changeDetection:0}),e})()},vqWo:function(e,t,i){"use strict";i.d(t,"b",(function(){return M})),i.d(t,"a",(function(){return F}));var n=i("fXoL"),s=i("XNiG"),r=i("rsZi"),o=i("EcM4"),a=i("dMTz"),c=i("1Tmk"),l=i("i/9y"),u=i("ofXK"),d=i("3Pt+"),h=i("1kSV"),p=i("tyNb");function b(e,t){1&e&&n.Tb(0)}function f(e,t){1&e&&n.Tb(0)}function m(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"th",5),n.Xb(2,"div",6),n.Wc(3,b,1,0,"ng-container",7),n.Xb(4,"a",8),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.DESCRIPTION)})),n.Yc(5," Time Entry "),n.Wb(),n.Wc(6,f,1,0,"ng-container",7),n.Wb(),n.Wb(),n.Xb(7,"th",9),n.Xb(8,"div",10),n.Xb(9,"div",11),n.Yc(10),n.Wb(),n.Wb(),n.Wb(),n.Xb(11,"th",12),n.Sb(12,"div",13),n.Wb(),n.Xb(13,"th",12),n.Xb(14,"a",8),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.USER)})),n.Yc(15,"User"),n.Wb(),n.Wb(),n.Xb(16,"th",12),n.Xb(17,"a",8),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.DATE)})),n.Yc(18,"Time"),n.Wb(),n.Wb(),n.Xb(19,"th",9),n.Xb(20,"a",8),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.DURATION)})),n.Yc(21,"Duration"),n.Wb(),n.Wb(),n.Xb(22,"th",12),n.Xb(23,"div",14),n.Yc(24,"Edit"),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc(),t=n.Lc(2),i=n.Lc(6);n.Cb(3),n.wc("ngTemplateOutlet",t),n.Cb(1),n.Hb("cl-up",e.sortColumn===e.SortColumn.DESCRIPTION&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.DESCRIPTION&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(2),n.wc("ngTemplateOutlet",i),n.Cb(4),n.Zc(e.amountLabel),n.Cb(4),n.Hb("cl-up",e.sortColumn===e.SortColumn.USER&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.USER&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(3),n.Hb("cl-up",e.sortColumn===e.SortColumn.DATE&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.DATE&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(3),n.Hb("cl-up",e.sortColumn===e.SortColumn.DURATION&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.DURATION&&e.sortOrder===e.SortOrder.DESCENDING)}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",16),n.Xb(1,"input",17),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).toggleSelectAll(t)})),n.Wb(),n.Sb(2,"label",18),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("indeterminate",e.numberOfSelected>0&&e.numberOfSelected<e.numberOfAvailableEntries)("ngModel",e.isSelectedAllAvailable)}}function v(e,t){if(1&e&&n.Wc(0,g,3,2,"div",15),2&e){const e=n.nc();n.wc("ngIf",e.numberOfAvailableEntries)}}function w(e,t){1&e&&n.Tb(0)}function y(e,t){1&e&&n.Tb(0)}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"th",5),n.Xb(1,"div",6),n.Wc(2,w,1,0,"ng-container",7),n.Xb(3,"div",11),n.Yc(4,"Time Entry"),n.Wb(),n.Wc(5,y,1,0,"ng-container",7),n.Xb(6,"a",19),n.jc("click",(function(){return n.Oc(e),n.nc().expandAll()})),n.Xb(7,"span",20),n.Sb(8,"img",21),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(2),i=n.Lc(6);n.Cb(2),n.wc("ngTemplateOutlet",t),n.Cb(3),n.wc("ngTemplateOutlet",i),n.Cb(3),n.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc)}}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",26),n.jc("click",(function(){return n.Oc(e),n.nc(4).markAs(!1)})),n.Yc(1,"Mark as uninvoiced"),n.Wb()}}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",26),n.jc("click",(function(){return n.Oc(e),n.nc(4).markAs(!0)})),n.Yc(1,"Mark as invoiced"),n.Wb()}}function x(e,t){if(1&e&&(n.Xb(0,"span",25),n.Wc(1,k,2,0,"a",28),n.Wc(2,S,2,0,"ng-template",null,29,n.Xc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(3);n.Cb(1),n.wc("ngIf",!t.bulkEditDataService.isSelectedAllGlobally&&t.areAllCheckedEntriesInvoiced)("ngIfElse",e)}}function O(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Yc(1),n.Xb(2,"a",26),n.jc("click",(function(){n.Oc(e);const t=n.nc(4);return t.bulkEditDataService.selectAllGlobally(!1),t.toggleSelectAll(!1)})),n.Yc(3," Clear Selection "),n.Wb(),n.Ub()}if(2&e){const e=n.nc(4);n.Cb(1),n.ad(" All ",e.isAdminOrOwner?e.entriesOnOtherPages+e.numberOfEntries:"my"," time entries are selected.\xa0 ")}}function D(e,t){if(1&e&&(n.Vb(0),n.Yc(1),n.Ub()),2&e){const e=n.nc(5);n.Cb(1),n.ad(" Select all ",e.entriesOnOtherPages+e.numberOfEntries," time entries ")}}function I(e,t){1&e&&(n.Vb(0),n.Yc(1," Select all my time entries "),n.Ub())}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",26),n.jc("click",(function(){return n.Oc(e),n.nc(4).bulkEditDataService.selectAllGlobally(!0)})),n.Wc(1,D,2,1,"ng-container",22),n.Wc(2,I,2,0,"ng-container",22),n.Wb()}if(2&e){const e=n.nc(4);n.Cb(1),n.wc("ngIf",e.isAdminOrOwner),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner)}}function T(e,t){if(1&e&&(n.Xb(0,"span",25),n.Wc(1,O,4,1,"ng-container",0),n.Wc(2,j,3,2,"ng-template",null,30,n.Xc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(3);n.Cb(1),n.wc("ngIf",t.bulkEditDataService.isSelectedAllGlobally)("ngIfElse",e)}}function E(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"span",23,24),n.Xb(3,"span",25),n.Xb(4,"a",26),n.jc("click",(function(){n.Oc(e);const t=n.Lc(2);return n.nc(2).onBulkEdit(t)})),n.Yc(5,"Bulk Edit"),n.Wb(),n.Wb(),n.Xb(6,"span",25),n.Xb(7,"a",26),n.jc("click",(function(){n.Oc(e);const t=n.Lc(2);return n.nc(2).onBulkDelete(t)})),n.Yc(8,"Delete"),n.Wb(),n.Wb(),n.Wc(9,x,4,2,"span",27),n.Wc(10,T,4,2,"span",27),n.Wb(),n.Ub()}if(2&e){const e=n.nc(2),t=n.Lc(8);n.Cb(1),n.wc("ngbPopover",t),n.Cb(8),n.wc("ngIf",e.isAdminOrOwner&&e.invoicingEnabled),n.Cb(1),n.wc("ngIf",e.isSelectedAllAvailable&&e.entriesOnOtherPages||e.bulkEditDataService.isSelectedAllGlobally)}}function A(e,t){if(1&e&&n.Wc(0,E,11,3,"ng-container",22),2&e){const e=n.nc();n.wc("ngIf",e.numberOfSelected||e.bulkEditDataService.isSelectedAllGlobally)}}const _=function(){return["/upgrade"]};function W(e,t){1&e&&(n.Vb(0),n.Yc(1," BASIC feature "),n.Xb(2,"a",31),n.Yc(3,"Upgrade"),n.Wb(),n.Ub()),2&e&&(n.Cb(2),n.wc("routerLink",n.Ac(1,_)))}function R(e,t){1&e&&(n.Vb(0),n.Yc(1," BASIC feature "),n.Ub())}function P(e,t){if(1&e&&(n.Wc(0,W,4,2,"ng-container",22),n.Wc(1,R,2,0,"ng-container",22)),2&e){const e=n.nc();n.wc("ngIf",e.isAdminOrOwner),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner)}}var M=function(e){return e.ID="ID",e.DESCRIPTION="DESCRIPTION",e.USER="USER",e.DATE="DATE",e.DURATION="DURATION",e}({});let F=(()=>{class e{constructor(e,t,i){this.bulkEditDataService=e,this.cd=t,this.workspaceService=i,this.bulkEdit=new n.n,this.bulkDelete=new n.n,this.onChange=new n.n,this.onSelectAllChange=new n.n,this.onExpandAll=new n.n,this.onMarkAs=new n.n,this.SortOrder=r.a,this.SortColumn=M,this.AmountOptions=a.a,this.isExpandAll=!1,this.unsubscribe$=new s.a}set numberOfEntries(e){this._numberOfEntries=e,this.bulkEditDataService.selectAllGlobally(!1)}get numberOfEntries(){return this._numberOfEntries}set numberOfSelected(e){this._numberOfSelected=e,this.bulkEditDataService.selectAllGlobally(!1)}get numberOfSelected(){return this._numberOfSelected}ngOnInit(){const e=this.workspaceService.getLocalDefaultWorkspace();this.hasBulkEditFeature=e.hasFeature(l.a.BULK_EDIT)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get amountLabel(){return this.amountOption===a.a.COST?"Cost":this.amountOption===a.a.PROFIT?"Profit":"Amount"}get isSelectedAllAvailable(){return this.numberOfSelected===this.numberOfAvailableEntries&&this.numberOfSelected>0}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}toggleSelectAll(e){this.onSelectAllChange.emit(e)}changeSort(e){e===this.sortColumn?this.sortOrder=this.sortOrder===r.a.ASCENDING?r.a.DESCENDING:r.a.ASCENDING:(this.sortColumn=e,this.sortOrder=r.a.ASCENDING),this.emit()}onBulkEdit(e){this.hasBulkEditFeature?this.bulkEdit.emit():e.isOpen()?e.close():e.open()}onBulkDelete(e){this.hasBulkEditFeature?this.bulkDelete.emit():e.isOpen()?e.close():e.open()}markAs(e){this.onMarkAs.emit(e)}onBulkComplete(){this.bulkEditDataService.selectAllGlobally(!1),this.cd.detectChanges()}selectAllGlobally(){this.bulkEditDataService.selectAllGlobally(!0),this.cd.detectChanges()}emit(){this.onChange.emit({sortOrder:this.sortOrder,sortColumn:this.sortColumn})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.a),n.Rb(n.h),n.Rb(c.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["detailed-header"],["","detailed-header",""]],inputs:{isDesktop:"isDesktop",sortOrder:"sortOrder",sortColumn:"sortColumn",amountOption:"amountOption",entriesOnOtherPages:"entriesOnOtherPages",isAdminOrOwner:"isAdminOrOwner",invoicingEnabled:"invoicingEnabled",areAllCheckedEntriesInvoiced:"areAllCheckedEntriesInvoiced",numberOfEntries:"numberOfEntries",numberOfSelected:"numberOfSelected",numberOfAvailableEntries:"numberOfAvailableEntries"},outputs:{bulkEdit:"bulkEdit",bulkDelete:"bulkDelete",onChange:"onChange",onSelectAllChange:"onSelectAllChange",onExpandAll:"onExpandAll",onMarkAs:"onMarkAs"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["selectAllDivTemplate",""],["mobileTemplate",""],["bulkButtons",""],["popContent",""],[1,"cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[4,"ngTemplateOutlet"],[1,"cl-text-gray-6","cl-sort-by",3,"click"],[1,"cl-px-0","cl-text-right"],[1,"cl-ml-lg-custom-n2"],[1,"cl-h5","cl-mb-0"],[1,"cl-px-0"],[1,"cl-h5","mb-0","d-block","d-lg-custom-none"],[1,"cl-h5","cl-mb-0","cl-d-block","cl-d-lg-custom-none"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","toggleAll",1,"cl-custom-control-input",3,"indeterminate","ngModel","ngModelChange"],["for","toggleAll",1,"cl-custom-control-label"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"],[4,"ngIf"],["triggers","manual","placement","left","container","body",3,"ngbPopover"],["featurePopover","ngbPopover"],[1,"cl-bulk-edit-link"],[3,"click"],["class","cl-bulk-edit-link",4,"ngIf"],[3,"click",4,"ngIf","ngIfElse"],["markAsUninvoiced",""],["selectAllGloballyTemplate",""],[3,"routerLink"]],template:function(e,t){if(1&e&&(n.Wc(0,m,25,19,"ng-container",0),n.Wc(1,v,1,1,"ng-template",null,1,n.Xc),n.Wc(3,C,9,3,"ng-template",null,2,n.Xc),n.Wc(5,A,1,1,"ng-template",null,3,n.Xc),n.Wc(7,P,2,2,"ng-template",null,4,n.Xc)),2&e){const e=n.Lc(4);n.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[u.u,u.B,d.a,d.s,d.v,h.L,p.f],encapsulation:2,changeDetection:0}),e})()},vrD5:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("DoKE"),s=i("fXoL");let r=(()=>{class e{constructor(e){this.element=e}onKeyUp(e){const t=this.element.nativeElement.value;" "===t[t.length-1]&&(e.keyCode?e.keyCode:e.which)===n.h&&e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.l))},e.\u0275dir=s.Mb({type:e,selectors:[["","preventMultipleSpaces",""]],hostBindings:function(e,t){1&e&&s.jc("keydown",(function(e){return t.onKeyUp(e)}))}}),e})()},vwXn:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C]]}),e})()},w5QO:function(e,t,i){"use strict";t.noop=function(){}},wBNX:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},wMS7:function(e,t,i){e.exports=function(){"use strict";var e=Object.hasOwnProperty,t=Object.setPrototypeOf,i=Object.isFrozen,n=Object.getPrototypeOf,s=Object.getOwnPropertyDescriptor,r=Object.freeze,o=Object.seal,a=Object.create,c="undefined"!=typeof Reflect&&Reflect,l=c.apply,u=c.construct;l||(l=function(e,t,i){return e.apply(t,i)}),r||(r=function(e){return e}),o||(o=function(e){return e}),u||(u=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t))))});var d,h=k(Array.prototype.forEach),p=k(Array.prototype.pop),b=k(Array.prototype.push),f=k(String.prototype.toLowerCase),m=k(String.prototype.match),g=k(String.prototype.replace),v=k(String.prototype.indexOf),w=k(String.prototype.trim),y=k(RegExp.prototype.test),C=(d=TypeError,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return u(d,t)});function k(e){return function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return l(e,t,n)}}function S(e,n){t&&t(e,null);for(var s=n.length;s--;){var r=n[s];if("string"==typeof r){var o=f(r);o!==r&&(i(n)||(n[s]=o),r=o)}e[r]=!0}return e}function x(t){var i=a(null),n=void 0;for(n in t)l(e,t,[n])&&(i[n]=t[n]);return i}function O(e,t){for(;null!==e;){var i=s(e,t);if(i){if(i.get)return k(i.get);if("function"==typeof i.value)return k(i.value)}e=n(e)}return null}var D=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),j=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),T=r(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),E=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),A=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_=r(["#text"]),W=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),R=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=o(/\{\{[\s\S]*|[\s\S]*\}\}/gm),X=o(/<%[\s\S]*|[\s\S]*%>/gm),L=o(/^data-[\-\w.\u00B7-\uFFFF]/),N=o(/^aria-[\-\w]+$/),B=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y=o(/^(?:\w+script|data):/i),V=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function H(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var $=function(){return"undefined"==typeof window?null:window},G=function(e,t){if("object"!==(void 0===e?"undefined":U(e))||"function"!=typeof e.createPolicy)return null;var i=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(i=t.currentScript.getAttribute("data-tt-policy-suffix"));var n="dompurify"+(i?"#"+i:"");try{return e.createPolicy(n,{createHTML:function(e){return e}})}catch(s){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$(),i=function(t){return e(t)};if(i.version="2.2.6",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;var n=t.document,s=t.document,o=t.DocumentFragment,a=t.HTMLTemplateElement,c=t.Node,l=t.Element,u=t.NodeFilter,d=t.NamedNodeMap,k=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,z=t.Text,q=t.Comment,K=t.DOMParser,Z=t.trustedTypes,J=l.prototype,Q=O(J,"cloneNode"),ee=O(J,"nextSibling"),te=O(J,"childNodes"),ie=O(J,"parentNode");if("function"==typeof a){var ne=s.createElement("template");ne.content&&ne.content.ownerDocument&&(s=ne.content.ownerDocument)}var se=G(Z,n),re=se&&Fe?se.createHTML(""):"",oe=s,ae=oe.implementation,ce=oe.createNodeIterator,le=oe.getElementsByTagName,ue=oe.createDocumentFragment,de=n.importNode,he={};try{he=x(s).documentMode?s.documentMode:{}}catch(ft){}var pe={};i.isSupported=ae&&void 0!==ae.createHTMLDocument&&9!==he;var be=F,fe=X,me=L,ge=N,ve=Y,we=V,ye=B,Ce=null,ke=S({},[].concat(H(D),H(I),H(j),H(E),H(_))),Se=null,xe=S({},[].concat(H(W),H(R),H(P),H(M))),Oe=null,De=null,Ie=!0,je=!0,Te=!1,Ee=!1,Ae=!1,_e=!1,We=!1,Re=!1,Pe=!1,Me=!0,Fe=!1,Xe=!0,Le=!0,Ne=!1,Be={},Ye=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ve=null,Ue=S({},["audio","video","img","source","image","track"]),He=null,$e=S({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ge=null,ze=s.createElement("form"),qe=function(e){Ge&&Ge===e||(e&&"object"===(void 0===e?"undefined":U(e))||(e={}),e=x(e),Ce="ALLOWED_TAGS"in e?S({},e.ALLOWED_TAGS):ke,Se="ALLOWED_ATTR"in e?S({},e.ALLOWED_ATTR):xe,He="ADD_URI_SAFE_ATTR"in e?S(x($e),e.ADD_URI_SAFE_ATTR):$e,Ve="ADD_DATA_URI_TAGS"in e?S(x(Ue),e.ADD_DATA_URI_TAGS):Ue,Oe="FORBID_TAGS"in e?S({},e.FORBID_TAGS):{},De="FORBID_ATTR"in e?S({},e.FORBID_ATTR):{},Ie=!1!==e.ALLOW_ARIA_ATTR,je=!1!==e.ALLOW_DATA_ATTR,Te=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=e.WHOLE_DOCUMENT||!1,Re=e.RETURN_DOM||!1,Me=!1!==e.RETURN_DOM_IMPORT,Fe=e.RETURN_TRUSTED_TYPE||!1,We=e.FORCE_BODY||!1,Xe=!1!==e.SANITIZE_DOM,Le=!1!==e.KEEP_CONTENT,Ne=e.IN_PLACE||!1,ye=e.ALLOWED_URI_REGEXP||ye,(Ee=e.SAFE_FOR_TEMPLATES||!1)&&(je=!1),(Pe=e.RETURN_DOM_FRAGMENT||!1)&&(Re=!0),(Be="USE_PROFILES"in e&&e.USE_PROFILES)&&(Ce=S({},[].concat(H(_))),Se=[],!0===Be.html&&(S(Ce,D),S(Se,W)),!0===Be.svg&&(S(Ce,I),S(Se,R),S(Se,M)),!0===Be.svgFilters&&(S(Ce,j),S(Se,R),S(Se,M)),!0===Be.mathMl&&(S(Ce,E),S(Se,P),S(Se,M))),e.ADD_TAGS&&(Ce===ke&&(Ce=x(Ce)),S(Ce,e.ADD_TAGS)),e.ADD_ATTR&&(Se===xe&&(Se=x(Se)),S(Se,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&S(He,e.ADD_URI_SAFE_ATTR),Le&&(Ce["#text"]=!0),Ae&&S(Ce,["html","head","body"]),Ce.table&&(S(Ce,["tbody"]),delete Oe.tbody),r&&r(e),Ge=e)},Ke=S({},["mi","mo","mn","ms","mtext"]),Ze=S({},["foreignobject","desc","title","annotation-xml"]),Je=S({},I);S(Je,j),S(Je,T);var Qe=S({},E);S(Qe,A);var et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",it="http://www.w3.org/1999/xhtml",nt=function(e){var t=ie(e);t&&t.tagName||(t={namespaceURI:it,tagName:"template"});var i=f(e.tagName),n=f(t.tagName);if(e.namespaceURI===tt)return t.namespaceURI===it?"svg"===i:t.namespaceURI===et?"svg"===i&&("annotation-xml"===n||Ke[n]):Boolean(Je[i]);if(e.namespaceURI===et)return t.namespaceURI===it?"math"===i:t.namespaceURI===tt?"math"===i&&Ze[n]:Boolean(Qe[i]);if(e.namespaceURI===it){if(t.namespaceURI===tt&&!Ze[n])return!1;if(t.namespaceURI===et&&!Ke[n])return!1;var s=S({},["title","style","font","a","script"]);return!Qe[i]&&(s[i]||!Je[i])}return!1},st=function(e){b(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(ft){try{e.outerHTML=re}catch(ft){e.remove()}}},rt=function(e,t){try{b(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(ft){b(i.removed,{attribute:null,from:t})}t.removeAttribute(e)},ot=function(e){var t=void 0,i=void 0;if(We)e="<remove></remove>"+e;else{var n=m(e,/^[\r\n\t ]+/);i=n&&n[0]}var r=se?se.createHTML(e):e;try{t=(new K).parseFromString(r,"text/html")}catch(ft){}if(!t||!t.documentElement){var o=(t=ae.createHTMLDocument("")).body;o.parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=r}return e&&i&&t.body.insertBefore(s.createTextNode(i),t.body.childNodes[0]||null),le.call(t,Ae?"html":"body")[0]},at=function(e){return ce.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,(function(){return u.FILTER_ACCEPT}),!1)},ct=function(e){return!(e instanceof z||e instanceof q||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof k&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},lt=function(e){return"object"===(void 0===c?"undefined":U(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":U(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},ut=function(e,t,n){pe[e]&&h(pe[e],(function(e){e.call(i,t,n,Ge)}))},dt=function(e){var t=void 0;if(ut("beforeSanitizeElements",e,null),ct(e))return st(e),!0;if(m(e.nodeName,/[\u0080-\uFFFF]/))return st(e),!0;var n=f(e.nodeName);if(ut("uponSanitizeElement",e,{tagName:n,allowedTags:Ce}),!lt(e.firstElementChild)&&(!lt(e.content)||!lt(e.content.firstElementChild))&&y(/<[/\w]/g,e.innerHTML)&&y(/<[/\w]/g,e.textContent))return st(e),!0;if(!Ce[n]||Oe[n]){if(Le&&!Ye[n])for(var s=ie(e),r=te(e),o=r.length-1;o>=0;--o)s.insertBefore(Q(r[o],!0),ee(e));return st(e),!0}return e instanceof l&&!nt(e)?(st(e),!0):"noscript"!==n&&"noembed"!==n||!y(/<\/no(script|embed)/i,e.innerHTML)?(Ee&&3===e.nodeType&&(t=g(t=e.textContent,be," "),t=g(t,fe," "),e.textContent!==t&&(b(i.removed,{element:e.cloneNode()}),e.textContent=t)),ut("afterSanitizeElements",e,null),!1):(st(e),!0)},ht=function(e,t,i){if(Xe&&("id"===t||"name"===t)&&(i in s||i in ze))return!1;if(je&&y(me,t));else if(Ie&&y(ge,t));else{if(!Se[t]||De[t])return!1;if(He[t]);else if(y(ye,g(i,we,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(i,"data:")||!Ve[e])if(Te&&!y(ve,g(i,we,"")));else if(i)return!1}return!0},pt=function(e){var t=void 0,n=void 0,s=void 0,r=void 0;ut("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};for(r=o.length;r--;){var c=(t=o[r]).name,l=t.namespaceURI;if(n=w(t.value),s=f(c),a.attrName=s,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,ut("uponSanitizeAttribute",e,a),n=a.attrValue,!a.forceKeepAttr&&(rt(c,e),a.keepAttr))if(y(/\/>/i,n))rt(c,e);else{Ee&&(n=g(n,be," "),n=g(n,fe," "));var u=e.nodeName.toLowerCase();if(ht(u,s,n))try{l?e.setAttributeNS(l,c,n):e.setAttribute(c,n),p(i.removed)}catch(ft){}}}ut("afterSanitizeAttributes",e,null)}},bt=function e(t){var i=void 0,n=at(t);for(ut("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)ut("uponSanitizeShadowNode",i,null),dt(i)||(i.content instanceof o&&e(i.content),pt(i));ut("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e,s){var r=void 0,a=void 0,l=void 0,u=void 0,d=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!lt(e)){if("function"!=typeof e.toString)throw C("toString is not a function");if("string"!=typeof(e=e.toString()))throw C("dirty is not a string, aborting")}if(!i.isSupported){if("object"===U(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(lt(e))return t.toStaticHTML(e.outerHTML)}return e}if(_e||qe(s),i.removed=[],"string"==typeof e&&(Ne=!1),Ne);else if(e instanceof c)1===(a=(r=ot("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!Re&&!Ee&&!Ae&&-1===e.indexOf("<"))return se&&Fe?se.createHTML(e):e;if(!(r=ot(e)))return Re?null:re}r&&We&&st(r.firstChild);for(var h=at(Ne?e:r);l=h.nextNode();)3===l.nodeType&&l===u||dt(l)||(l.content instanceof o&&bt(l.content),pt(l),u=l);if(u=null,Ne)return e;if(Re){if(Pe)for(d=ue.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return Me&&(d=de.call(n,d,!0)),d}var p=Ae?r.outerHTML:r.innerHTML;return Ee&&(p=g(p,be," "),p=g(p,fe," ")),se&&Fe?se.createHTML(p):p},i.setConfig=function(e){qe(e),_e=!0},i.clearConfig=function(){Ge=null,_e=!1},i.isValidAttribute=function(e,t,i){Ge||qe({});var n=f(e),s=f(t);return ht(n,s,i)},i.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],b(pe[e],t))},i.removeHook=function(e){pe[e]&&p(pe[e])},i.removeHooks=function(e){pe[e]&&(pe[e]=[])},i.removeAllHooks=function(){pe={}},i}()}()},wkZx:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("f0Wu");function s(e){return e.slice(1).reduce((e,t)=>n.duration(t).add(e),n.duration(e[0]))}},wlsK:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("MO+k"),s=i("wd/R"),r=i("Y4HG"),o=i("xoOP"),a=i("Hf8F"),c=i("F2Zd"),l=i("fXoL"),u=i("LPYB");let d=(()=>{class e{constructor(){this.updateDataOnChartChange=!1,this.doughnutChartType="doughnut",this.doughnutOptions={elements:{arc:{borderColor:c.e[Object(c.b)()].archBorder}},segmentShowStroke:!1,responsive:!0,legend:{display:!1},onHover:(e,t)=>{e.target.style.cursor=t[0]?"pointer":"default"},tooltips:{enabled:!1,custom:e=>{const t=document.getElementById("chartjs-tooltip-doughnut");t&&t.parentNode.removeChild(t);let i=0;e.dataPoints&&e.dataPoints.length>0&&(i=e.dataPoints[0].index);const n=this.doughnutChart[i].label,r=this.doughnutChart[i].clientName,a=Object(s.duration)(this.doughnutChart[i].duration).format(this.format,{trim:!1}),c=this.doughnutChart[i].percentage,l=(this.doughnutChart[i].earned/100).toLocaleString()+" "+this.currency,u=this.doughnutChart[i].color||this.doughnutChart[i].backgroundColor;let d=document.getElementById("chartjs-tooltip-doughnut");if(!d&&(d=Object(o.f)("div","doughnut-tooltip"),d.id="chartjs-tooltip-doughnut",!this.noTooltip)){const e=this.createTooltip({label:n,itemDuration:a,percentage:c,earned:l,color:u,clientName:r});d.appendChild(e),document.body.appendChild(d)}if(0===e.opacity)return d.style.opacity="0",d.style.width="0",d.style.height="0",d.style.position="absolute",void(d.style.top="0");d.classList.remove("above","below","no-transform"),d.classList.add(e.yAlign?e.yAlign:"no-transform");const h=document.getElementsByClassName("dashboard__doughnut-chart__canvas")[0].getBoundingClientRect();let p=0;this.tooltipToLeft&&(p=d.offsetWidth),d.style.opacity="1",d.style.zIndex="101",d.style.position="absolute",d.style.left=h.left-p+window.pageXOffset+e.caretX+"px",d.style.top=h.top+window.pageYOffset+e.caretY+"px",d.style.fontFamily=e._bodyFontFamily,d.style.fontSize=e.bodyFontSize+"px",d.style.fontStyle=e._bodyFontStyle,d.style.padding=e.yPadding+"px "+e.xPadding+"px",d.style.pointerEvents="none"}}},this.plugin={afterDatasetsDraw:e=>{"doughnut"==e.config.type&&(this.chart=e),Object(r.a)(e,this.format,this.totalTime,this.asString)}}}set doughnutChart(e){e&&(this._doughnutChart=e,this.isInitialized&&this.reinitData())}get doughnutChart(){return this._doughnutChart}createTooltip({label:e,itemDuration:t,earned:i,percentage:n,color:s,clientName:r}){const a=Object(o.f)("div","chart-tooltip-wrapper"),c=Object(o.f)("span","chart-tooltip-long-text");if(!this.isBillabilityType){const e=Object(o.f)("i","chart-tooltip-circle","background: "+s);c.appendChild(e)}const l=Object(o.f)("span");if(l.innerText=e,r&&(l.innerText+=" - "+r),c.appendChild(l),a.appendChild(c),!this.hideDuration){const e=Object(o.f)("span","doughnut-tooltip-duration");e.innerText=t,a.appendChild(e)}if(this.isBillabilityType){if(this.canSeeRates){const e=Object(o.f)("span","chart-tooltip-gray");e.innerText=i,a.appendChild(e)}}else{const e=Object(o.f)("span","chart-tooltip-gray"),t=(""+n).replace(/%/gi,"");e.innerText=t+"%",a.appendChild(e)}return a}chartClicked(e){}chartHovered(e){}ngOnInit(){this.reinitData(),this.isInitialized=!0,n.plugins.register(this.plugin)}ngOnChanges(){this.chart&&(this.chart.config.data.labels=this.doughnutChartLabels,this.chart.config.data.datasets[0].backgroundColor=this.doughnutChartColors[0].backgroundColor,this.chart.config.data.datasets[0].hoverBackgroundColor=this.doughnutChartColors[0].hoverBackgroundColor,this.chart.update())}ngOnDestroy(){n.plugins.unregister(this.plugin)}reinitData(){this.updateDataOnChartChange&&(this.doughnutChartData=this.doughnutChart.map(e=>+(""+e.percentage).replace(/%/gi,"")),this.doughnutChartColors=[{backgroundColor:this.doughnutChart.map(e=>e.backgroundColor||e.color)}],this.doughnutChartLabels=this.doughnutChart.map(e=>e.label))}calculatePercentage(e){const t=(new a.a(e).asSeconds()/new a.a(this.totalTime).asSeconds()*100).toFixed(2);return Number(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Lb({type:e,selectors:[["doughnut-chart"]],inputs:{doughnutChartLabels:"doughnutChartLabels",doughnutChartData:"doughnutChartData",doughnutChartColors:"doughnutChartColors",doughnutChart:"doughnutChart",updateDataOnChartChange:"updateDataOnChartChange",currency:"currency",isBillabilityType:"isBillabilityType",tooltipToLeft:"tooltipToLeft",canSeeRates:"canSeeRates",hideDuration:"hideDuration",noTooltip:"noTooltip",format:"format",totalTime:"totalTime",asString:"asString"},features:[l.Ab],decls:2,vars:5,consts:[["baseChart","",1,"dashboard__doughnut-chart__canvas",3,"data","labels","chartType","options","colors","chartHover","chartClick"]],template:function(e,t){1&e&&(l.Xb(0,"div"),l.Xb(1,"canvas",0),l.jc("chartHover",(function(e){return t.chartHovered(e)}))("chartClick",(function(e){return t.chartClicked(e)})),l.Wb(),l.Wb()),2&e&&(l.Cb(1),l.wc("data",t.doughnutChartData)("labels",t.doughnutChartLabels)("chartType",t.doughnutChartType)("options",t.doughnutOptions)("colors",t.doughnutChartColors))},directives:[u.a],encapsulation:2}),e})()},wxL3:function(e,t,i){"use strict";i.d(t,"a",(function(){return ne}));var n=i("5+WD"),s=i("lvCY"),r=i("ydbL"),o=i("4olG"),a=i("NHP+"),c=i("1G5W"),l=i("lp//"),u=i("fXoL"),d=i("1kSV"),h=i("ofXK"),p=i("FsCY"),b=i("tyNb"),f=i("fANO"),m=i("7EHt"),g=i("VYrk"),v=i("xoOP"),w=i("3Pt+"),y=i("JO38");function C(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Xb(1,"div",2),u.Xb(2,"label"),u.Yc(3,"Label"),u.Wb(),u.Xb(4,"input",14),u.jc("change",(function(){return u.Oc(e),u.nc().refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc().customField.placeholder=t})),u.Wb(),u.Wb(),u.Xb(5,"div",2),u.Xb(6,"div",15),u.Xb(7,"input",16),u.jc("ngModelChange",(function(t){return u.Oc(e),u.nc().customField.workspaceDefaultValue=t}))("change",(function(){return u.Oc(e),u.nc().refreshPreview()})),u.Wb(),u.Xb(8,"label",11),u.Yc(9,"Default state ON"),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc();u.Cb(4),u.wc("ngModel",e.customField.placeholder),u.Cb(3),u.wc("id","default"+e.customField.id)("name","default"+e.customField.name)("ngModel",e.customField.workspaceDefaultValue),u.Cb(1),u.wc("for","default"+e.customField.id)}}function k(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",2),u.Xb(1,"div",20),u.Xb(2,"input",21),u.jc("change",(function(){return u.Oc(e),u.nc(3).singleOptionChanged()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(3).customField.workspaceDefaultValue=t})),u.Wb(),u.Xb(3,"label",11),u.Yc(4,"None"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(3);u.Cb(2),u.wc("id","defaultOption0"+e.customField.name)("value",null)("ngModel",e.customField.workspaceDefaultValue),u.Cb(1),u.wc("for","defaultOption0"+e.customField.name)}}function S(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",28),u.Xb(1,"div",20),u.Xb(2,"input",29),u.jc("change",(function(){return u.Oc(e),u.nc(4).singleOptionChanged()}))("ngModelChange",(function(){return u.Oc(e),u.nc(4).checklistChanged()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(4).customField.workspaceDefaultValue=t})),u.Wb(),u.Xb(3,"label",11),u.Yc(4,"ON"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(),t=e.index,i=e.$implicit,n=u.nc(3);u.Cb(2),u.wc("id","defaultOption1"+t+n.customField.name)("value",i.title)("ngModel",n.customField.workspaceDefaultValue),u.Cb(1),u.wc("for","defaultOption1"+t+n.customField.name)}}function x(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",28),u.Xb(1,"div",30),u.Xb(2,"input",31),u.jc("ngModelChange",(function(t){return u.Oc(e),u.nc().$implicit.selected=t}))("ngModelChange",(function(){return u.Oc(e),u.nc(4).checklistChanged()}))("change",(function(){return u.Oc(e),u.nc(4).refreshPreview()})),u.Wb(),u.Xb(3,"label",11),u.Yc(4,"ON"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(),t=e.$implicit,i=e.index,n=u.nc(3);u.Cb(2),u.wc("ngModel",t.selected)("id","defaultOption"+i+n.customField.name)("name","checkbox"+i),u.Cb(1),u.wc("for","defaultOption"+i+n.customField.name)}}function O(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",2),u.Xb(1,"div",22),u.Wc(2,S,5,4,"div",23),u.Wc(3,x,5,4,"div",23),u.Xb(4,"input",24),u.jc("ngModelChange",(function(i){return u.Oc(e),t.$implicit.title=i}))("change",(function(){return u.Oc(e),u.nc(3).refreshPreview()}))("ngModelChange",(function(){return u.Oc(e),u.nc(3).allowedValuesChanged()})),u.Wb(),u.Xb(5,"div",25),u.Xb(6,"button",26),u.jc("click",(function(){u.Oc(e);const i=t.$implicit;return u.nc(3).removeOption(i)})),u.Sb(7,"img",27),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=t.$implicit,i=t.index,n=u.nc(3);u.Cb(2),u.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_SINGLE.value),u.Cb(1),u.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_MULTIPLE.value),u.Cb(1),u.wc("name","option"+i)("ngModel",e.title)}}function D(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Xb(1,"div",2),u.Xb(2,"label"),u.Yc(3,"Enter select title"),u.Wb(),u.Xb(4,"input",14),u.jc("change",(function(){return u.Oc(e),u.nc(2).refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(2).customField.placeholder=t})),u.Wb(),u.Wb(),u.Xb(5,"div",2),u.Xb(6,"label"),u.Yc(7,"Default state and option value"),u.Wb(),u.Wc(8,k,5,4,"div",17),u.Wc(9,O,8,4,"div",18),u.Wb(),u.Xb(10,"div",2),u.Xb(11,"button",19),u.jc("click",(function(){return u.Oc(e),u.nc(2).addAllowedValue()})),u.Yc(12,"Add option"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(2);u.Cb(4),u.wc("ngModel",e.customField.placeholder),u.Cb(4),u.wc("ngIf",e.customField.type===e.customFieldType.DROPDOWN_SINGLE.value),u.Cb(1),u.wc("ngForOf",e.customField.allowedValuesFull)}}function I(e,t){if(1&e&&u.Wc(0,D,13,3,"div",6),2&e){const e=u.nc(),t=u.Lc(18);u.wc("ngIf",e.customField.type===e.customFieldType.DROPDOWN_MULTIPLE.value||e.customField.type===e.customFieldType.DROPDOWN_SINGLE.value)("ngIfElse",t)}}function j(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",2),u.Xb(1,"label"),u.Yc(2,"Placeholder"),u.Wb(),u.Xb(3,"input",14),u.jc("change",(function(){return u.Oc(e),u.nc().refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc().customField.placeholder=t})),u.Wb(),u.Wb(),u.Xb(4,"div",2),u.Xb(5,"label"),u.Yc(6,"Value"),u.Wb(),u.Xb(7,"input",32),u.jc("change",(function(){return u.Oc(e),u.nc().refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc().customField.workspaceDefaultValue=t})),u.Wb(),u.Wb()}if(2&e){const e=u.nc();u.Cb(3),u.wc("ngModel",e.customField.placeholder),u.Cb(4),u.wc("type",e.customFieldType[e.customField.type].label.toLowerCase())("placeholder","(None)")("ngModel",e.customField.workspaceDefaultValue)}}function T(e,t){if(1&e&&(u.Xb(0,"div",33),u.Xb(1,"div",34),u.Xb(2,"div",35),u.Sb(3,"custom-field-value",36),u.Wb(),u.Wb(),u.Wb()),2&e){const e=u.nc();u.Cb(3),u.wc("fromEdit",!0)("customField",e.customFieldValue)}}let E=(()=>{class e{constructor(e){this.cd=e,this.customFieldType=f.a,this.optionCounter=1,this.customFieldValue=new g.a}set customField(e){this._customField=e,this._customField&&this.initialize()}get customField(){return this._customField}ngOnInit(){this.initialize()}initialize(){this.customField&&this.customField.allowedValues&&(this.optionCounter=this.customField.allowedValues.length+1),this.customFieldValue.customField=Object(v.e)(this.customField),this.getCheckList(),this.refreshPreview()}choseType(e){this.customField.type=e,this.customField.placeholder=this.customField.placeholder?this.customField.placeholder:this.createPlaceHolder(e),this.refreshPreview()}addAllowedValue(){this.customField.allowedValues.push("Option "+this.optionCounter++),this.getCheckList(),this.refreshPreview()}getCheckList(){this.customField.allowedValuesFull=this.customField.allowedValues&&this.customField.allowedValues.map(e=>({title:e,selected:this.customField.workspaceDefaultValue&&this.customField.workspaceDefaultValue.indexOf(e)>-1})),this.cd.detectChanges()}checklistChanged(){this.customField.workspaceDefaultValue=this.customField.allowedValuesFull.filter(e=>e.selected).map(e=>e.title),this.customField.type===f.b.DROPDOWN_SINGLE&&(this.customField.workspaceDefaultValue=this.customField.workspaceDefaultValue.length?this.customField.workspaceDefaultValue[0]:null),this.refreshPreview()}allowedValuesChanged(){this.customField.allowedValues=this.customField.allowedValuesFull.map(e=>e.title),this.checklistChanged()}removeOption(e){this.customField.allowedValues.splice(this.customField.allowedValues.indexOf(e.title),1),this.getCheckList(),this.checklistChanged()}refreshPreview(){this.customFieldValue.customField=Object(v.e)(this.customField),this.customFieldValue=Object(v.e)(this.customFieldValue),this.customFieldValue.value=this.customField.workspaceDefaultValue?this.customField.workspaceDefaultValue:"",this.cd.detectChanges()}createPlaceHolder(e){return""===this.customFieldType[e].placeholder?this.customField.name||"":this.customField.name?this.customFieldType[e].placeholder+this.customField.name.toLowerCase()+"...":this.customFieldType[e].placeholder+"..."}singleOptionChanged(){this.customField.workspaceDefaultValue&&(this.customField.allowedValuesFull=this.customField.allowedValuesFull.map(e=>(e.selected=e.title===this.customField.workspaceDefaultValue,e))),this.refreshPreview()}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(u.h))},e.\u0275cmp=u.Lb({type:e,selectors:[["custom-field"]],inputs:{customField:"customField",projectId:"projectId"},decls:35,vars:15,consts:[[1,"cl-row"],[1,"cl-col-lg-6"],[1,"cl-form-group"],[1,"cl-text-danger","cl-ml-1"],["type","text","name","name",1,"cl-form-control","cl-form-control-sm",3,"ngModel","change","ngModelChange"],["type","text","name","description",1,"cl-form-control","cl-form-control-sm",3,"ngModel","change","ngModelChange"],[4,"ngIf","ngIfElse"],["dropdown",""],["regular",""],[1,"cl-custom-control","cl-custom-radio"],["type","radio",1,"cl-custom-control-input",3,"id","name","value","ngModel","change","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-d-flex","cl-justify-content-between"],["class","cl-cf-preview",4,"ngIf"],["type","text","name","placeholder",1,"cl-form-control","cl-form-control-sm",3,"ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox",1,"cl-custom-control-input",3,"id","name","ngModel","ngModelChange","change"],["class","cl-form-group",4,"ngIf"],["class","cl-form-group",4,"ngFor","ngForOf"],["type","button",1,"cl-btn","cl-btn-sm","cl-btn-block","cl-btn-outline-light",3,"click"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","name","default-option",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-input-group","cl-input-group-sm"],["class","cl-input-group-prepend cl-d-flex cl-align-items-center",4,"ngIf"],["type","text",1,"cl-form-control","cl-form-control-sm",3,"name","ngModel","ngModelChange","change"],[1,"cl-input-group-append"],["type","button",1,"cl-btn","cl-btn-outline-light","cl-d-flex",3,"click"],["src","assets/ui-icons/cross.svg"],[1,"cl-input-group-prepend","cl-d-flex","cl-align-items-center"],["type","radio","name","defaultOption1",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-checkbox","cl-custom-control-inline"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","name","ngModelChange","change"],["name","value",1,"cl-form-control","cl-form-control-sm",3,"type","placeholder","ngModel","change","ngModelChange"],[1,"cl-cf-preview"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],[3,"fromEdit","customField"]],template:function(e,t){if(1&e&&(u.Xb(0,"form"),u.Xb(1,"div",0),u.Xb(2,"div",1),u.Xb(3,"div",2),u.Xb(4,"label"),u.Yc(5,"Name"),u.Xb(6,"span",3),u.Yc(7,"*"),u.Wb(),u.Wb(),u.Xb(8,"input",4),u.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.name=e})),u.Wb(),u.Wb(),u.Wb(),u.Xb(9,"div",1),u.Xb(10,"div",2),u.Xb(11,"label"),u.Yc(12,"Description"),u.Wb(),u.Xb(13,"input",5),u.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.description=e})),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wc(14,C,10,5,"div",6),u.Wc(15,I,1,2,"ng-template",null,7,u.Xc),u.Wc(17,j,8,4,"ng-template",null,8,u.Xc),u.Xb(19,"div",2),u.Xb(20,"label"),u.Yc(21,"Who can edit"),u.Wb(),u.Xb(22,"div",9),u.Xb(23,"input",10),u.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.onlyAdminCanEdit=e})),u.Wb(),u.Xb(24,"label",11),u.Yc(25,"Admins"),u.Wb(),u.Wb(),u.Xb(26,"div",9),u.Xb(27,"input",10),u.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.onlyAdminCanEdit=e})),u.Wb(),u.Xb(28,"label",11),u.Yc(29,"Everyone"),u.Wb(),u.Wb(),u.Wb(),u.Sb(30,"hr"),u.Xb(31,"div",12),u.Xb(32,"label"),u.Yc(33,"Preview"),u.Wb(),u.Wb(),u.Wc(34,T,4,2,"div",13),u.Wb()),2&e){const e=u.Lc(16);u.Cb(8),u.wc("ngModel",t.customField.name),u.Cb(5),u.wc("ngModel",t.customField.description),u.Cb(1),u.wc("ngIf",t.customField.type===t.customFieldType.CHECKBOX.value)("ngIfElse",e),u.Cb(9),u.wc("id","allowedit"+t.customField.name)("name","allowedit"+t.customField.name)("value",!0)("ngModel",t.customField.onlyAdminCanEdit),u.Cb(1),u.wc("for","allowedit"+t.customField.name),u.Cb(3),u.wc("id","allowedit2"+t.customField.name)("name","allowedit2"+t.customField.name)("value",!1)("ngModel",t.customField.onlyAdminCanEdit),u.Cb(1),u.wc("for","allowedit2"+t.customField.name),u.Cb(6),u.wc("ngIf",t.customFieldValue)}},directives:[w.I,w.t,w.u,w.c,w.s,w.v,h.u,w.A,w.a,h.t,y.a],encapsulation:2,changeDetection:0}),e})();var A=i("kojQ");const _=["matExpansionPanel"];function W(e,t){if(1&e){const e=u.Yb();u.Xb(0,"delete-confirm-modal",18),u.jc("onDelete",(function(){u.Oc(e);const i=t.$implicit;return u.nc().delete(),i.close()}))("onClose",(function(){return t.$implicit.close()})),u.Xb(1,"p",19),u.Yc(2),u.Wb(),u.Xb(3,"p",19),u.Yc(4),u.Wb(),u.Wb()}if(2&e){const e=u.nc();u.wc("title","Delete")("btnText","Delete"),u.Cb(2),u.ad(" Are you sure you want to delete ",e.customField.name,"? "),u.Cb(2),u.ad(" The ",e.customField.name," custom field will also be removed from all time entries it is assigned to. This action cannot be reversed. ")}}let R=(()=>{class e{constructor(e,t,i){this.customFieldService=e,this.modal=t,this.cd=i,this.unsubscribe$=new a.a,this.customFieldDeleted=new u.n,this.allowedValues=[],this.inProgress=!1}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}toggle(){this.matExpansionPanel.expanded=!this.matExpansionPanel.expanded}save(){this.inProgress=!0,this.customFieldService.update(this.customField).pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.customField=new r.a(e),this.inProgress=!1,this.cd.detectChanges()},e=>{this.inProgress=!1,this.cd.detectChanges()})}openDeleteModal(e){this.modal.open(e,{centered:!0})}delete(){this.customFieldService.delete(this.customField.id).pipe(Object(c.a)(this.unsubscribe$)).subscribe(()=>{this.customFieldDeleted.emit(this.customField)})}getDefaultValue(){return this.customField.type===f.b.DROPDOWN_MULTIPLE?this.customField.workspaceDefaultValue?this.customField.workspaceDefaultValue.toString().replace("[","").replace("]",""):"":this.customField.type===f.b.CHECKBOX||this.customField.workspaceDefaultValue?this.customField.workspaceDefaultValue:""}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(l.a),u.Rb(d.q),u.Rb(u.h))},e.\u0275cmp=u.Lb({type:e,selectors:[["custom-field-edit"]],viewQuery:function(e,t){var i;1&e&&u.ed(_,!0),2&e&&u.Kc(i=u.kc())&&(t.matExpansionPanel=i.first)},inputs:{customField:"customField",projectId:"projectId"},outputs:{customFieldDeleted:"customFieldDeleted"},decls:25,vars:5,consts:[[1,"cl-card","cl-mb-0"],[3,"disabled"],["matExpansionPanel",""],[1,"cl-card-header","cl-bg-white","cl-px-2","cl-border-0"],[1,"cl-cut-text-wrapper","cl-pr-2"],[1,"cl-h3","cl-mb-0","cl-cut-text"],[1,"cl-h6","cl-mb-0","cl-lh-1","cl-cut-text"],[1,"cl-badge-same-entries-wrapper"],[1,"cl-badge","cl-badge-same-entries","cl-mr-0",3,"click"],["src","assets/ui-icons/chevron-down.svg"],[1,"cl-collapse","cl-border-top"],[1,"cl-card-body","cl-p-2"],[1,"cl-position-relative"],[3,"customField"],[1,"cl-d-flex","cl-justify-content-between","cl-align-items-center"],["type","submit",1,"cl-btn","cl-btn-sm","cl-btn-primary",3,"disabled","click"],[1,"cl-text-danger","cl-small","cl-mx-2",3,"click"],["deleteModal",""],[3,"title","btnText","onDelete","onClose"],[1,"cl-text-muted","cl-cut-text-wrap","cl-mb-0"]],template:function(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",0),u.Xb(1,"mat-expansion-panel",1,2),u.Xb(3,"mat-expansion-panel-header"),u.Xb(4,"div",3),u.Xb(5,"div",4),u.Xb(6,"div",5),u.Yc(7),u.Wb(),u.Xb(8,"div",6),u.Yc(9),u.Wb(),u.Wb(),u.Xb(10,"a",7),u.Xb(11,"span",8),u.jc("click",(function(){return t.toggle()})),u.Sb(12,"img",9),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(13,"div",10),u.Xb(14,"div",11),u.Xb(15,"div",12),u.Sb(16,"custom-field",13),u.Wb(),u.Sb(17,"hr"),u.Xb(18,"div",14),u.Xb(19,"button",15),u.jc("click",(function(){return t.save()})),u.Yc(20," Save "),u.Wb(),u.Xb(21,"a",16),u.jc("click",(function(){u.Oc(e);const i=u.Lc(24);return t.openDeleteModal(i)})),u.Yc(22,"Delete"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wc(23,W,5,4,"ng-template",null,17,u.Xc)}2&e&&(u.Cb(1),u.wc("disabled",!0),u.Cb(6),u.Zc(t.customField.name),u.Cb(2),u.Zc("Default: "+t.getDefaultValue()),u.Cb(7),u.wc("customField",t.customField),u.Cb(3),u.wc("disabled",t.inProgress))},directives:[m.b,m.c,E,A.a],encapsulation:2,changeDetection:0}),e})();var P=i("Ymxs");function M(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Xb(1,"div",7),u.Xb(2,"label"),u.Yc(3,"Label"),u.Wb(),u.Xb(4,"input",41),u.jc("change",(function(){return u.Oc(e),u.nc(2).refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(2).customField.placeholder=t})),u.Wb(),u.Wb(),u.Xb(5,"div",7),u.Xb(6,"div",42),u.Xb(7,"input",43),u.jc("ngModelChange",(function(t){return u.Oc(e),u.nc(2).customField.workspaceDefaultValue=t}))("change",(function(){return u.Oc(e),u.nc(2).refreshPreview()})),u.Wb(),u.Xb(8,"label",44),u.Yc(9,"Default state ON"),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(2);u.Cb(4),u.wc("ngModel",e.customField.placeholder),u.Cb(3),u.wc("ngModel",e.customField.workspaceDefaultValue)}}function F(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",7),u.Xb(1,"div",48),u.Xb(2,"input",49),u.jc("change",(function(){return u.Oc(e),u.nc(4).singleOptionChanged()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(4).customField.workspaceDefaultValue=t})),u.Wb(),u.Xb(3,"label",32),u.Yc(4,"None"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(4);u.Cb(2),u.wc("id","defaultOption0"+e.customField.name)("value",null)("ngModel",e.customField.workspaceDefaultValue),u.Cb(1),u.wc("for","defaultOption0"+e.customField.name)}}function X(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",56),u.Xb(1,"div",48),u.Xb(2,"input",57),u.jc("change",(function(){return u.Oc(e),u.nc(5).singleOptionChanged()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(5).customField.workspaceDefaultValue=t})),u.Wb(),u.Xb(3,"label",32),u.Yc(4,"ON"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(),t=e.index,i=e.$implicit,n=u.nc(4);u.Cb(2),u.wc("id","defaultOption1"+t+n.customField.name)("value",i.title)("ngModel",n.customField.workspaceDefaultValue),u.Cb(1),u.wc("for","defaultOption1"+t+n.customField.name)}}function L(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",56),u.Xb(1,"div",58),u.Xb(2,"input",59),u.jc("ngModelChange",(function(t){return u.Oc(e),u.nc().$implicit.selected=t}))("ngModelChange",(function(){return u.Oc(e),u.nc(5).checklistChanged()}))("change",(function(){return u.Oc(e),u.nc(5).refreshPreview()})),u.Wb(),u.Xb(3,"label",32),u.Yc(4,"ON"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(),t=e.$implicit,i=e.index,n=u.nc(4);u.Cb(2),u.wc("ngModel",t.selected)("id","defaultOption"+i+n.customField.name)("name","checkbox"+i),u.Cb(1),u.wc("for","defaultOption"+i+n.customField.name)}}function N(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",7),u.Xb(1,"div",50),u.Wc(2,X,5,4,"div",51),u.Wc(3,L,5,4,"div",51),u.Xb(4,"input",52),u.jc("ngModelChange",(function(i){return u.Oc(e),t.$implicit.title=i}))("change",(function(){return u.Oc(e),u.nc(4).refreshPreview()}))("ngModelChange",(function(){return u.Oc(e),u.nc(4).allowedValuesChanged()})),u.Wb(),u.Xb(5,"div",53),u.Xb(6,"button",54),u.jc("click",(function(){u.Oc(e);const i=t.$implicit;return u.nc(4).removeOption(i)})),u.Sb(7,"img",55),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=t.$implicit,i=t.index,n=u.nc(4);u.Cb(2),u.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_SINGLE.value),u.Cb(1),u.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_MULTIPLE.value),u.Cb(1),u.wc("name","option"+i)("ngModel",e.title)}}function B(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Xb(1,"div",7),u.Xb(2,"label"),u.Yc(3,"Enter select title"),u.Wb(),u.Xb(4,"input",41),u.jc("change",(function(){return u.Oc(e),u.nc(3).refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(3).customField.placeholder=t})),u.Wb(),u.Wb(),u.Xb(5,"div",7),u.Xb(6,"label"),u.Yc(7,"Default state and option value"),u.Wb(),u.Wc(8,F,5,4,"div",45),u.Wc(9,N,8,4,"div",46),u.Wb(),u.Xb(10,"div",7),u.Xb(11,"button",47),u.jc("click",(function(){return u.Oc(e),u.nc(3).addAllowedValue()})),u.Yc(12,"Add option "),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.nc(3);u.Cb(4),u.wc("ngModel",e.customField.placeholder),u.Cb(4),u.wc("ngIf",e.customField.type===e.customFieldType.DROPDOWN_SINGLE.value),u.Cb(1),u.wc("ngForOf",e.customField.allowedValuesFull)}}function Y(e,t){if(1&e&&u.Wc(0,B,13,3,"div",27),2&e){u.nc();const e=u.Lc(8),t=u.nc();u.wc("ngIf",t.customField.type===t.customFieldType.DROPDOWN_MULTIPLE.value||t.customField.type===t.customFieldType.DROPDOWN_SINGLE.value)("ngIfElse",e)}}function V(e,t){if(1&e){const e=u.Yb();u.Xb(0,"a",62),u.jc("click",(function(){return u.Oc(e),u.nc(3).customField.workspaceDefaultValue=void 0})),u.Yc(1," Clear "),u.Wb()}}function U(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",7),u.Xb(1,"label"),u.Yc(2,"Placeholder"),u.Wb(),u.Xb(3,"input",41),u.jc("change",(function(){return u.Oc(e),u.nc(2).refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(2).customField.placeholder=t})),u.Wb(),u.Wb(),u.Xb(4,"div",7),u.Xb(5,"label"),u.Yc(6,"Value"),u.Wb(),u.Xb(7,"input",60),u.jc("change",(function(){return u.Oc(e),u.nc(2).refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc(2).customField.workspaceDefaultValue=t})),u.Wb(),u.Wc(8,V,2,0,"a",61),u.Wb()}if(2&e){const e=u.nc(2);u.Cb(3),u.wc("ngModel",e.customField.placeholder),u.Cb(4),u.wc("type",e.customFieldType[e.customField.type].label.toLowerCase())("placeholder","(None)")("ngModel",e.customField.workspaceDefaultValue),u.Cb(1),u.wc("ngIf",e.customField.type===e.customFieldType.NUMBER.value&&e.customField.workspaceDefaultValue)}}function H(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Sb(1,"hr"),u.Xb(2,"div",26),u.Xb(3,"div",6),u.Wc(4,M,10,2,"div",27),u.Wc(5,Y,1,2,"ng-template",null,28,u.Xc),u.Wc(7,U,9,5,"ng-template",null,29,u.Xc),u.Xb(9,"div",7),u.Xb(10,"label"),u.Yc(11,"Who can edit"),u.Wb(),u.Xb(12,"div",30),u.Xb(13,"input",31),u.jc("change",(function(){return u.Oc(e),u.nc().refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc().customField.onlyAdminCanEdit=t})),u.Wb(),u.Xb(14,"label",32),u.Yc(15,"Admins"),u.Wb(),u.Wb(),u.Xb(16,"div",30),u.Xb(17,"input",31),u.jc("change",(function(){return u.Oc(e),u.nc().refreshPreview()}))("ngModelChange",(function(t){return u.Oc(e),u.nc().customField.onlyAdminCanEdit=t})),u.Wb(),u.Xb(18,"label",32),u.Yc(19,"Everyone"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(20,"div",33),u.Xb(21,"div",34),u.Xb(22,"div",35),u.Xb(23,"div",36),u.Xb(24,"label"),u.Yc(25,"Preview"),u.Wb(),u.Wb(),u.Wb(),u.Xb(26,"div",37),u.Xb(27,"div",38),u.Xb(28,"div",39),u.Sb(29,"custom-field-value",40),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.Lc(6),t=u.nc();u.Cb(4),u.wc("ngIf",t.customField.type===t.customFieldType.CHECKBOX.value)("ngIfElse",e),u.Cb(9),u.wc("id","allowedit"+t.customField.name)("name","allowedit"+t.customField.name)("value",!0)("ngModel",t.customField.onlyAdminCanEdit),u.Cb(1),u.wc("for","allowedit"+t.customField.name),u.Cb(3),u.wc("id","customRadio2"+t.customField.name)("name","customRadio"+t.customField.name)("value",!1)("ngModel",t.customField.onlyAdminCanEdit),u.Cb(1),u.wc("for","customRadio2"+t.customField.name),u.Cb(11),u.wc("customField",t.customFieldValue)}}let $=(()=>{class e extends E{constructor(e,t){super(t),this.toaster=e,this.change=t,this.customFieldTypeEnum=f.b,this.customFieldType=f.a,this.optionCounter=1,this.created=new u.n,this.closeModal=new u.n}ngOnInit(){this.customField=new r.a,this.customField.onlyAdminCanEdit=!1,this.initialize()}create(){this.isValid()||this.showErrorToast(),this.customField.type===f.b.CHECKBOX&&(this.customField.workspaceDefaultValue=this.customField.workspaceDefaultValue||!1),this.isValid()&&this.created.emit(this.customField)}isValid(){return this.customField.name&&""!==this.customField.name&&!!this.customField.type&&this.customFieldType[this.customField.type]&&("dropdown"!==this.customFieldType[this.customField.type].fieldType||"dropdown"===this.customFieldType[this.customField.type].fieldType&&this.customField.allowedValues.length>0)}close(){this.closeModal.emit()}showErrorToast(){(this.customField.type===this.customFieldTypeEnum.DROPDOWN_SINGLE||this.customField.type===this.customFieldTypeEnum.DROPDOWN_MULTIPLE)&&this.customField.allowedValues.length<1?this.toaster.pop("error","Custom field not created","Please enter values for dropdown"):this.customField.name&&""!==this.customField.name?this.customField.type||this.toaster.pop("error","Custom field not created","Must choose type."):this.toaster.pop("error","Custom field not created","Name can't be empty.")}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(P.a),u.Rb(u.h))},e.\u0275cmp=u.Lb({type:e,selectors:[["custom-field-create"]],outputs:{created:"created",closeModal:"closeModal"},features:[u.zb],decls:72,vars:27,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-row"],[1,"cl-col-lg-6"],[1,"cl-form-group"],[1,"cl-text-danger","cl-ml-1"],["type","text","name","name","ngbAutofocus","",1,"cl-form-control",3,"ngModel","change","ngModelChange"],[1,"cl-form-text","cl-text-gray-9"],["type","text","name","description",1,"cl-form-control",3,"ngModel","change","ngModelChange"],[1,"cl-col-12"],[1,"cl-col-6","cl-col-lg-2"],[1,"cl-btn","cl-btn-block","cl-text-capitalize",3,"click"],["src","assets/cf-icons/Text.svg",1,"cl-mt-3"],[1,"cl-small","cl-mt-1"],["src","assets/cf-icons/Number.svg",1,"cl-mt-3"],["src","assets/cf-icons/URL.svg",1,"cl-mt-3"],["src","assets/cf-icons/Switch.svg",1,"cl-mt-3"],["src","assets/cf-icons/Select.svg",1,"cl-mt-3"],["src","assets/cf-icons/Multi-select.svg",1,"cl-mt-3"],[4,"ngIf"],[1,"cl-modal-footer"],["data-dismiss","modal",3,"click"],["type","button","ngbAutofocus","",1,"cl-btn","cl-btn-primary",3,"click"],[1,"cl-row","cl-mt-3"],[4,"ngIf","ngIfElse"],["dropdown",""],["regular",""],[1,"cl-custom-control","cl-custom-radio"],["type","radio",1,"cl-custom-control-input",3,"id","name","value","ngModel","change","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-col-lg-6","cl-order-first","cl-order-lg-last"],[1,"cl-form-group","cl-sticky-top","cl-mt-n2"],[1,"cl-pt-2"],[1,"cl-d-flex","cl-justify-content-between"],[1,"cl-cf-preview","cl-p-5"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],[3,"customField"],["type","text","name","placeholder",1,"cl-form-control",3,"ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox","id","booleanvalue","name","booleanvalue",1,"cl-custom-control-input",3,"ngModel","ngModelChange","change"],["for","booleanvalue",1,"cl-custom-control-label"],["class","cl-form-group",4,"ngIf"],["class","cl-form-group",4,"ngFor","ngForOf"],["type","button",1,"cl-btn","cl-btn-sm","cl-btn-block","cl-btn-outline-light",3,"click"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","name","default-option",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-input-group","cl-input-group-sm"],["class","cl-input-group-prepend cl-d-flex cl-align-items-center",4,"ngIf"],["type","text",1,"cl-form-control",3,"name","ngModel","ngModelChange","change"],[1,"cl-input-group-append"],["type","button",1,"cl-btn","cl-btn-outline-light","cl-d-flex",3,"click"],["src","assets/ui-icons/cross.svg"],[1,"cl-input-group-prepend","cl-d-flex","cl-align-items-center"],["type","radio","name","defaultOption1",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-checkbox","cl-custom-control-inline"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","name","ngModelChange","change"],["name","value",1,"cl-form-control",3,"type","placeholder","ngModel","change","ngModelChange"],["class","cl-mt-3",3,"click",4,"ngIf"],[1,"cl-mt-3",3,"click"]],template:function(e,t){1&e&&(u.Xb(0,"div",0),u.Xb(1,"h1",1),u.Yc(2,"Create custom field"),u.Wb(),u.Xb(3,"button",2),u.jc("click",(function(){return t.close()})),u.Xb(4,"span"),u.Sb(5,"img",3),u.Wb(),u.Wb(),u.Wb(),u.Xb(6,"div",4),u.Xb(7,"div",5),u.Xb(8,"div",6),u.Xb(9,"div",7),u.Xb(10,"label"),u.Yc(11,"Name"),u.Xb(12,"span",8),u.Yc(13,"*"),u.Wb(),u.Wb(),u.Xb(14,"input",9),u.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.name=e})),u.Wb(),u.Xb(15,"small",10),u.Yc(16,"Short identifier of what you wish to track."),u.Wb(),u.Wb(),u.Wb(),u.Xb(17,"div",6),u.Xb(18,"div",7),u.Xb(19,"label"),u.Yc(20,"Description"),u.Wb(),u.Xb(21,"input",11),u.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.description=e})),u.Wb(),u.Xb(22,"small",10),u.Yc(23,"Explainer that clarifies how to use the field and why. Appears in tooltips (on hover)."),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(24,"div",5),u.Xb(25,"div",12),u.Xb(26,"label"),u.Yc(27,"Type"),u.Xb(28,"span",8),u.Yc(29,"*"),u.Wb(),u.Wb(),u.Wb(),u.Xb(30,"div",13),u.Xb(31,"div",7),u.Xb(32,"div",14),u.jc("click",(function(){return t.choseType(t.customFieldType.TXT.value)})),u.Sb(33,"img",15),u.Xb(34,"div",16),u.Yc(35,"Text"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(36,"div",13),u.Xb(37,"div",7),u.Xb(38,"div",14),u.jc("click",(function(){return t.choseType(t.customFieldType.NUMBER.value)})),u.Sb(39,"img",17),u.Xb(40,"div",16),u.Yc(41,"Number"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(42,"div",13),u.Xb(43,"div",7),u.Xb(44,"div",14),u.jc("click",(function(){return t.choseType(t.customFieldType.LINK.value)})),u.Sb(45,"img",18),u.Xb(46,"div",16),u.Yc(47,"Link"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(48,"div",13),u.Xb(49,"div",7),u.Xb(50,"div",14),u.jc("click",(function(){return t.choseType(t.customFieldType.CHECKBOX.value)})),u.Sb(51,"img",19),u.Xb(52,"div",16),u.Yc(53,"Switch"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(54,"div",13),u.Xb(55,"div",7),u.Xb(56,"div",14),u.jc("click",(function(){return t.choseType(t.customFieldType.DROPDOWN_SINGLE.value)})),u.Sb(57,"img",20),u.Xb(58,"div",16),u.Yc(59,"Select"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(60,"div",13),u.Xb(61,"div",7),u.Xb(62,"div",14),u.jc("click",(function(){return t.choseType(t.customFieldType.DROPDOWN_MULTIPLE.value)})),u.Sb(63,"img",21),u.Xb(64,"div",16),u.Yc(65,"Select multiple"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wc(66,H,30,13,"div",22),u.Wb(),u.Xb(67,"div",23),u.Xb(68,"a",24),u.jc("click",(function(){return t.close()})),u.Yc(69,"Cancel"),u.Wb(),u.Xb(70,"button",25),u.jc("click",(function(){return t.create()})),u.Yc(71,"Create"),u.Wb(),u.Wb()),2&e&&(u.Cb(14),u.wc("ngModel",t.customField.name),u.Cb(7),u.wc("ngModel",t.customField.description),u.Cb(11),u.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.TXT.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.TXT.value),u.Cb(6),u.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.NUMBER.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.NUMBER.value),u.Cb(6),u.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.LINK.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.LINK.value),u.Cb(6),u.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.CHECKBOX.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.CHECKBOX.value),u.Cb(6),u.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.DROPDOWN_SINGLE.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.DROPDOWN_SINGLE.value),u.Cb(6),u.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.DROPDOWN_MULTIPLE.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.DROPDOWN_MULTIPLE.value),u.Cb(4),u.wc("ngIf",null==t.customField?null:t.customField.type))},directives:[w.c,w.s,w.v,h.u,w.A,y.a,w.a,h.t],encapsulation:2,changeDetection:0}),e})();const G=function(){return["/upgrade"]};function z(e,t){1&e&&(u.Xb(0,"div",3),u.Xb(1,"info"),u.Yc(2," PRO feature "),u.Xb(3,"a",4),u.Yc(4,"Upgrade"),u.Wb(),u.Wb(),u.Wb()),2&e&&(u.Cb(3),u.wc("routerLink",u.Ac(1,G)))}function q(e,t){1&e&&u.Sb(0,"div",26)}function K(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",27),u.Xb(1,"custom-field-edit",28),u.jc("customFieldDeleted",(function(t){return u.Oc(e),u.nc(2).customFieldDeleted(t)})),u.Wb(),u.Wb()}if(2&e){const e=t.$implicit;u.Cb(1),u.wc("customField",e)}}function Z(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",29),u.Xb(1,"custom-field-edit",28),u.jc("customFieldDeleted",(function(t){return u.Oc(e),u.nc(2).customFieldDeleted(t)})),u.Wb(),u.Wb()}if(2&e){const e=t.$implicit;u.Cb(1),u.wc("customField",e)}}function J(e,t){1&e&&(u.Xb(0,"span",30),u.Xb(1,"div",17),u.Yc(2,"Drop here"),u.Wb(),u.Wb())}function Q(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",27),u.Xb(1,"custom-field-edit",28),u.jc("customFieldDeleted",(function(t){return u.Oc(e),u.nc(2).customFieldDeleted(t)})),u.Wb(),u.Wb()}if(2&e){const e=t.$implicit;u.Cb(1),u.wc("customField",e)}}const ee=function(e,t){return[e,t]};function te(e,t){if(1&e){const e=u.Yb();u.Xb(0,"div",5),u.Wc(1,q,1,0,"div",6),u.Xb(2,"div",7),u.Xb(3,"div"),u.Xb(4,"div",8),u.Yc(5,"Available fields"),u.Wb(),u.Xb(6,"div",9),u.Yc(7,"Activate to add additional information to time entries."),u.Wb(),u.Wb(),u.Xb(8,"div",10),u.Xb(9,"div",11),u.Xb(10,"div",12,13),u.jc("cdkDropListDropped",(function(t){u.Oc(e);const i=u.nc();return i.drop(t,i.customFieldStatus.INACTIVE)})),u.Xb(12,"div",14),u.Xb(13,"a",15),u.jc("click",(function(){u.Oc(e);const t=u.nc(),i=u.Lc(3);return t.openModal(i)})),u.Yc(14,"Create"),u.Wb(),u.Wb(),u.Xb(15,"span",16),u.Xb(16,"div",17),u.Yc(17,"Drop here"),u.Wb(),u.Wb(),u.Wc(18,K,2,1,"div",18),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(19,"div",7),u.Xb(20,"div"),u.Xb(21,"div",8),u.Yc(22,"Active fields"),u.Wb(),u.Xb(23,"div",9),u.Yc(24,"Fields all time entries have."),u.Wb(),u.Wb(),u.Xb(25,"div",10),u.Xb(26,"div",11),u.Xb(27,"div",19,20),u.jc("cdkDropListDropped",(function(t){u.Oc(e);const i=u.nc();return i.drop(t,i.customFieldStatus.VISIBLE)})),u.Xb(29,"h5",21),u.Yc(30,"Visible"),u.Wb(),u.Xb(31,"h6",9),u.Yc(32,"Fields users can see and track."),u.Wb(),u.Wc(33,Z,2,1,"div",22),u.Wc(34,J,3,0,"span",23),u.Wb(),u.Xb(35,"div",19,24),u.jc("cdkDropListDropped",(function(t){u.Oc(e);const i=u.nc();return i.drop(t,i.customFieldStatus.INVISIBLE)})),u.Xb(37,"h5",25),u.Yc(38,"Invisible"),u.Wb(),u.Xb(39,"h6",9),u.Yc(40,"Fields users can't see, but are always there (metadata)"),u.Wb(),u.Xb(41,"span",16),u.Xb(42,"div",17),u.Yc(43,"Drop here"),u.Wb(),u.Wb(),u.Wc(44,Q,2,1,"div",18),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.Lc(11),t=u.Lc(28),i=u.Lc(36),n=u.nc();u.Cb(1),u.wc("ngIf",!n.hasCustomFieldsFeature),u.Cb(9),u.wc("cdkDropListConnectedTo",u.Cc(11,ee,t,i))("cdkDropListData",n.filterOfStatus(n.customFields,n.customFieldStatus.INACTIVE)),u.Cb(8),u.wc("ngForOf",n.filterOfStatus(n.customFields,n.customFieldStatus.INACTIVE)),u.Cb(9),u.wc("cdkDropListData",n.filterOfStatus(n.customFields,n.customFieldStatus.VISIBLE))("cdkDropListConnectedTo",u.Cc(14,ee,i,e)),u.Cb(6),u.wc("ngForOf",n.filterOfStatus(n.customFields,n.customFieldStatus.VISIBLE)),u.Cb(1),u.wc("ngForOf",n.dropList),u.Cb(1),u.wc("cdkDropListData",n.filterOfStatus(n.customFields,n.customFieldStatus.INVISIBLE))("cdkDropListConnectedTo",u.Cc(17,ee,t,e)),u.Cb(9),u.wc("ngForOf",n.filterOfStatus(n.customFields,n.customFieldStatus.INVISIBLE))}}function ie(e,t){if(1&e){const e=u.Yb();u.Xb(0,"custom-field-create",31),u.jc("created",(function(t){return u.Oc(e),u.nc().create(t)}))("closeModal",(function(){return t.$implicit.close()})),u.Wb()}}let ne=(()=>{class e{constructor(e,t,i){this.modalService=e,this.cd=t,this.customFieldService=i,this.customFields=[],this.filterOfStatus=r.a.filterByStatus,this.maxActive=s.l,this.dropList=[],this.customFieldStatus=o.a,this.unsubscribe$=new a.a}set hasCustomFieldsFeature(e){this._hasCustomFieldsFeature=e,this.hasCustomFieldsFeature&&!this.isInitialized&&this.getCustomFields()}get hasCustomFieldsFeature(){return this._hasCustomFieldsFeature}ngOnInit(){this.hasCustomFieldsFeature&&this.getCustomFields()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}drop(e,t){e.previousContainer===e.container?Object(n.d)(e.container.data,e.previousIndex,e.currentIndex):(Object(n.e)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.edit(t,e.container.data[e.currentIndex]))}openModal(e){this.modalService.open(e,{centered:!0,size:"lg"})}customFieldDeleted(e){this.customFields=this.customFields.filter(t=>t.id!=e.id),this.dropList=new Array(this.maxActive-this.filterOfStatus(this.customFields,o.a.VISIBLE).length),this.cd.detectChanges()}edit(e,t){t.status=e,this.customFieldService.update(t).pipe(Object(c.a)(this.unsubscribe$)).subscribe(()=>{this.dropList=new Array(this.maxActive-this.filterOfStatus(this.customFields,o.a.VISIBLE).length)},e=>{this.getCustomFields()})}create(e){this.customFieldService.create(e).pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.modalService.dismissAll(),this.customFields.push(new r.a(e)),this.cd.detectChanges()})}getCustomFields(){this.isInitialized=!0,this.customFieldService.get().pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.customFields=e.map(e=>new r.a(e)),this.dropList=new Array(this.maxActive-this.filterOfStatus(this.customFields,o.a.VISIBLE).length),this.cd.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(d.q),u.Rb(u.h),u.Rb(l.a))},e.\u0275cmp=u.Lb({type:e,selectors:[["custom-field-card"]],inputs:{hasCustomFieldsFeature:"hasCustomFieldsFeature"},decls:4,vars:2,consts:[["class","cl-form-group cl-mt-2 cl-mt-lg-0",4,"ngIf"],["class","cl-row cl-relative",4,"ngIf"],["createModal",""],[1,"cl-form-group","cl-mt-2","cl-mt-lg-0"],[1,"cl-btn",3,"routerLink"],[1,"cl-row","cl-relative"],["class","cl-blocker",4,"ngIf"],[1,"cl-col-lg-6","cl-col-lg-custom-3"],[1,"cl-h2","cl-mb-0"],[1,"cl-h6"],[1,"cl-card","cl-border-bottom"],[1,"cl-card-body"],["cdkDropList","",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["inactive","cdkDropList"],[1,"cl-cf-holder"],[1,"cl-btn","cl-btn-primary",3,"click"],[1,"cl-cf-holder","cl-cf-holder-empty"],[1,"cl-cf-holder-drop-here"],["class","cl-cf-holder","cdkDrag","",4,"ngFor","ngForOf"],["cdkDropList","",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["visible","cdkDropList"],[1,"cl-card-title"],["class","cl-cf-holder cl-cf-holder-visible","cdkDrag","",4,"ngFor","ngForOf"],["class","cl-cf-holder cl-cf-holder-empty cl-cf-holder-visible",4,"ngFor","ngForOf"],["invisible","cdkDropList"],[1,"cl-card-title","cl-pt-1"],[1,"cl-blocker"],["cdkDrag","",1,"cl-cf-holder"],[3,"customField","customFieldDeleted"],["cdkDrag","",1,"cl-cf-holder","cl-cf-holder-visible"],[1,"cl-cf-holder","cl-cf-holder-empty","cl-cf-holder-visible"],[3,"created","closeModal"]],template:function(e,t){1&e&&(u.Wc(0,z,5,2,"div",0),u.Wc(1,te,45,20,"div",1),u.Wc(2,ie,1,0,"ng-template",null,2,u.Xc)),2&e&&(u.wc("ngIf",!t.hasCustomFieldsFeature),u.Cb(1),u.wc("ngIf",t.customFields))},directives:[h.u,p.a,b.f,n.b,h.t,n.a,R,$],encapsulation:2,changeDetection:0}),e})()},xJiw:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i){let n="";if(e.length>0&&"everyone"===e[0])n="Everyone";else{const s=t.filter(t=>e.indexOf(t.id)>-1);s.length>0&&(n=s.map(e=>e.name).join(", "));const r=i.filter(t=>e.indexOf(t.id)>-1);r.length>0&&(n=n.concat(r.map(e=>e.name).join(", ")))}return n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"displayUserName",type:e,pure:!0}),e})()},xgIS:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("HDdC"),s=i("DH7j"),r=i("n6bG"),o=i("lJxs");function a(e,t,i,c){return Object(r.a)(i)&&(c=i,i=void 0),c?a(e,t,i).pipe(Object(o.a)(e=>Object(s.a)(e)?c(...e):c(e))):new n.a(n=>{!function e(t,i,n,s,r){let o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(i,n,r),o=()=>e.removeEventListener(i,n,r)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(i,n),o=()=>e.off(i,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(i,n),o=()=>e.removeListener(i,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,a=t.length;o<a;o++)e(t[o],i,n,s,r)}s.add(o)}(e,t,(function(e){n.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),n,i)})}},xzCI:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("xoOP");class s{constructor(e){this.id=e.id,this.label=e.name,this.placeholder=e.placeholder||"Filter "+e.name,this.type=e.type}setIndicator(){}getApiParamsIfChanged(){return null}getApiParams(){return null}setValuesFromParams(e){if(!e)return;const t=e.find(e=>e.id===this.id);this.setValuesFromParam(t),this.setIndicator()}setValuesFromParam(e){}checkIsDisabled(e){this.isFilterDisabled=!e.includes(this.id)}clear(){this.tooltip="",this.indicator=0}isClean(){}static areParamsEqaul(e,t){return Array.isArray(e.value)&&Array.isArray(t.value)?Object(n.c)(e.value,t.value):e.value===t.value}}},yUBi:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,4)}catch(t){}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"prettyJson",type:e,pure:!0}),e})()},yx2s:function(e,t,i){"use strict";var n=i("FWf1");t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof n.Subscriber?t:null}return!0}},z1wq:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("6qRu");class s{constructor(e){this._id=e&&e.id,this._name=e&&e.name,this._userId=e&&e.userId,this._projectsAndTasks=e&&e.projectsAndTasks.map(e=>new n.a(e.task,e.project)),this._isActive=!1}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get userId(){return this._userId}set userId(e){this._userId=e}get projectsAndTasks(){return this._projectsAndTasks}set projectsAndTasks(e){this._projectsAndTasks=e}get isActive(){return this._isActive}set isActive(e){this._isActive=e}}},zDGq:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("XNiG"),s=i("DoKE"),r=i("xoOP"),o=i("fXoL");let a=(()=>{class e{constructor(){this.keyboardRecorder$=new n.a,this.keyboardCtrlEnter$=new n.a,this.listenSingleKeyup=!0,this.onKeyUp=e=>{const t=e.keyCode?e.keyCode:e.which;t===s.d&&e.ctrlKey&&this.keyboardCtrlEnter$.next(),Object(r.s)(e)||!this.listenSingleKeyup||e.ctrlKey||e.shiftKey||e.altKey||t!==s.g&&t!==s.e&&t!==s.f&&t!==s.c||this.keyboardRecorder$.next(t)},window.addEventListener("keyup",this.onKeyUp)}ngOnDestroy(){window.removeEventListener("keyup",this.onKeyUp)}addListener(){this.listenSingleKeyup=!0}removeListener(){this.listenSingleKeyup=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},zJCG:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("3Pt+"),s=i("ofXK"),r=i("9Trn"),o=i("1kSV"),a=i("C1xe"),c=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.m,s.c,r.a,o.ab,a.a]]}),e})()},zfKp:function(e,t,i){"use strict";t.observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},znhS:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("Hf8F"),r=i("fXoL");let o=(()=>{class e{transform(e,t){return"number"==typeof e&&(e=new s.a(1e3*e).asString()),Object(n.duration)(e).format(t,{trim:!1})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"timeFormat",type:e,pure:!0}),e})()}}]);